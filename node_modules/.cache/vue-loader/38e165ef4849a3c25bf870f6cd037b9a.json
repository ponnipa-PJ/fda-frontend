{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/Menu.vue","mtime":1694592239237},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGN1c3RvbUxhYmVscyA9IHsKICBmaXJzdDogIjw8IiwKICBsYXN0OiAiPj4iLAogIHByZXZpb3VzOiAiPCIsCiAgbmV4dDogIj4iLAp9OwoKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlLmpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FybGlzdCIsCiAgY29tcG9uZW50czogewogICAgLy8gVnVlSHRtbDJwZGYsCiAgICAvLyBDb250ZW50VG9QcmludCwKICB9LAogIHByb3BzOiB7CiAgICBtc2c6IFN0cmluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgcm9sZXM6IFtdLAogICAgICBsaWNlbnNlOiAiIiwKICAgICAgcm9sZV90eXBlOiAiIiwKICAgICAgbGljZW5zZXM6IFtdLAogICAgICBjdXN0b21MYWJlbHMsCiAgICAgIHBhZ2VPZkl0ZW1zOiBbXSwKICAgICAgY2FyX2lkOiAiIiwKICAgICAgbWVudV9pZDogW10sCiAgICAgIG1lbnVzOiBbXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlKCkgewogICAgICBVc2VyU2VydmljZS5kZWxldGVSb2xlTWVudSh0aGlzLnJvbGVfdHlwZSkudGhlbigoKSA9PiB7CiAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCB0aGlzLm1lbnVfaWQubGVuZ3RoOyBtKyspIHsKICAgICAgICAgIHZhciBtZW51ID0gewogICAgICAgICAgICBtZW51X2lkOiB0aGlzLm1lbnVfaWRbbV0sCiAgICAgICAgICAgIHJvbGVfaWQ6IHRoaXMucm9sZV90eXBlLAogICAgICAgICAgfTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1lbnUpOwogICAgICAgICAgVXNlclNlcnZpY2UuY3JlYXRlUm9sZU1lbnUobWVudSkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGFsZXJ0KCfguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgnKQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQ2hhbmdlUGFnZShwYWdlT2ZJdGVtcykgewogICAgICAvLyB1cGRhdGUgcGFnZSBvZiBpdGVtcwogICAgICB0aGlzLnBhZ2VPZkl0ZW1zID0gcGFnZU9mSXRlbXM7CiAgICB9LAogICAgZ2V0TWVudSgpIHsKICAgICAgVXNlclNlcnZpY2UuZ2V0TWVudSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICB0aGlzLm1lbnVzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldGFycmF5KCkgewogICAgICB0aGlzLm1lbnVfaWQgPSBbXTsKICAgICAgVXNlclNlcnZpY2UuZ2V0TWVudWJ5Um9sZUlEQWxsKHRoaXMucm9sZV90eXBlKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEubWVudSA9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLm1lbnVfaWQgPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tZW51X2lkID0gSlNPTi5wYXJzZShyZXMuZGF0YS5tZW51KTsKICAgICAgICB9CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEubWVudSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldHJvbGVzKCkgewogICAgICBVc2VyU2VydmljZS5nZXRSb2xlcygpLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIHRoaXMucm9sZXMgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnJvbGVfdHlwZSA9IHRoaXMucm9sZXNbMF0uaWQ7CiAgICAgICAgdGhpcy5nZXRhcnJheSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjb252ZXJ0ZGF0ZXRvdGhhaShkYXRldGltZXMpIHsKICAgICAgaWYgKGRhdGV0aW1lcykgewogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRldGltZXMpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCJ0aC1USCIsIHsKICAgICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICAgIG1vbnRoOiAic2hvcnQiLAogICAgICAgICAgZGF5OiAibnVtZXJpYyIsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIi0iOwogICAgICB9CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TWVudSgpOwogICAgdGhpcy5nZXRyb2xlcygpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbHRlcmVkTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMubGljZW5zZXMuZmlsdGVyKChwb3N0KSA9PiB7CiAgICAgICAgcmV0dXJuIHBvc3QubGljZW5zZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMubGljZW5zZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-3 mb-3\">\n      <div class=\"row mt-5\">\n        <div class=\"form-group col-md-6\">\n          <label for=\"exampleFormControlSelect1\">สิทธิ์การใช้งาน</label>\n          <select\n            v-model=\"role_type\"\n            class=\"form-control form-control-sm\"\n            id=\"exampleFormControlSelect1\"\n            @change=\"getarray()\"\n          >\n            <option v-for=\"(s, i) in roles\" v-bind:value=\"s.id\" :key=\"i + 1\">\n              {{ s.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"row mt-3\">\n        <div class=\"col-12\" v-for=\"m in menus\" :key=\"m.menu_id\">\n          <div class=\"form-group\" style=\"text-align: left\">\n            <label>\n              <input\n                type=\"checkbox\"\n                v-model=\"menu_id\"\n                :id=\"m.page\"\n                :value=\"m.id\"\n              />\n              <span> {{ m.name }}</span>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"row mt-3 mb-3\">\n        <div class=\"col-md-12 text-center\">\n          <button\n            class=\"btn btn-success\"\n            style=\"color: white; width: 200px\"\n            @click=\"save()\"\n          >\n            บันทึก\n          </button>\n          &nbsp;\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst customLabels = {\n  first: \"<<\",\n  last: \">>\",\n  previous: \"<\",\n  next: \">\",\n};\n\nimport UserService from \"../services/UserService.js\";\n\nexport default {\n  name: \"Carlist\",\n  components: {\n    // VueHtml2pdf,\n    // ContentToPrint,\n  },\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      list: [],\n      roles: [],\n      license: \"\",\n      role_type: \"\",\n      licenses: [],\n      customLabels,\n      pageOfItems: [],\n      car_id: \"\",\n      menu_id: [],\n      menus: [],\n    };\n  },\n  methods: {\n    save() {\n      UserService.deleteRoleMenu(this.role_type).then(() => {\n        for (let m = 0; m < this.menu_id.length; m++) {\n          var menu = {\n            menu_id: this.menu_id[m],\n            role_id: this.role_type,\n          };\n          // console.log(menu);\n          UserService.createRoleMenu(menu)\n            .then(() => {\n              // console.log(response.data);\n            })\n            .catch((e) => {\n              console.log(e);\n            });\n        }\n        alert('บันทึกสำเร็จ')\n        setTimeout(function () {\n                    location.reload();\n                  }, 500);\n                  window.scrollTo(0, 0);\n      });\n    },\n    onChangePage(pageOfItems) {\n      // update page of items\n      this.pageOfItems = pageOfItems;\n    },\n    getMenu() {\n      UserService.getMenu().then((res) => {\n        // console.log(res.data);\n        this.menus = res.data;\n      });\n    },\n    getarray() {\n      this.menu_id = [];\n      UserService.getMenubyRoleIDAll(this.role_type).then((res) => {\n        if (res.data.menu == null) {\n          this.menu_id = [];\n        } else {\n          this.menu_id = JSON.parse(res.data.menu);\n        }\n        // console.log(res.data.menu);\n      });\n    },\n    getroles() {\n      UserService.getRoles().then((res) => {\n        //console.log(res.data);\n        this.roles = res.data;\n        this.role_type = this.roles[0].id;\n        this.getarray();\n      });\n    },\n    convertdatetothai(datetimes) {\n      if (datetimes) {\n        const date = new Date(datetimes);\n        const result = date.toLocaleDateString(\"th-TH\", {\n          year: \"numeric\",\n          month: \"short\",\n          day: \"numeric\",\n        });\n        return result;\n      } else {\n        return \"-\";\n      }\n    },\n  },\n  mounted() {\n    this.getMenu();\n    this.getroles();\n  },\n  computed: {\n    filteredList() {\n      return this.licenses.filter((post) => {\n        return post.license.toLowerCase().includes(this.license.toLowerCase());\n      });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: black;\n  text-decoration: none;\n}\n#app {\n  font-family: \"Niramit\";\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n</style>\n"]}]}