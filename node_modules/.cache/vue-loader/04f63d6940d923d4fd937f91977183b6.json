{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/EditDetail.vue?vue&type=style&index=0&id=1db4aa3c&scoped=true&lang=css&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/EditDetail.vue","mtime":1677654957534},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/css-loader/dist/cjs.js","mtime":1687492401554},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1687492401892},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/postcss-loader/src/index.js","mtime":1687492401651},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmgzIHsKICBtYXJnaW46IDQwcHggMCAwOwp9CnVsIHsKICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7CiAgcGFkZGluZzogMDsKfQpsaSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbjogMCAxMHB4Owp9CmEgewogIGNvbG9yOiAjNDJiOTgzOwp9Cg=="},{"version":3,"sources":["EditDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello container mt-5\">\n    <h2>แก้ไขข้อมูล</h2>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\"\n        >เลขทะเบียนสรรพสามิต</label\n      >\n      <input\n        v-model=\"data.excise_id\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\"\n        >รหัสโรงอุตสาหกรรม</label\n      >\n      <input\n        v-model=\"data.excise_no\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\"\n        >ชื่อผู้ประกอบอุตสาหกรรม</label\n      >\n      <input\n        v-model=\"data.excise_name\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">โดย</label>\n      <input\n        v-model=\"data.excise_by\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\"\n        >ชื่อโรงอุตสาหกรรม</label\n      >\n      <input\n        v-model=\"data.industrial_name\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\"\n        >เลขที่ตั้งโรงอุตสาหกรรม</label\n      >\n      <input\n        v-model=\"data.industrial_no\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">หมู่ที่</label>\n      <input\n        v-model=\"data.industrial_moo\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">ตำบล</label>\n      <input\n        v-model=\"data.industrial_subdistrict\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">อำเภอ</label>\n      <input\n        v-model=\"data.industrial_district\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">จังหวัด</label>\n      <input\n        v-model=\"data.industrial_province\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">รหัสไปรษณีย์</label>\n      <input\n        v-model=\"data.industrial_zipcode\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">วันที่จดทะเบียน</label>\n      <input\n        v-model=\"data.registration_date\"\n        type=\"date\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">วันที่สถานะ</label>\n      <input\n        v-model=\"data.status_date\"\n        type=\"date\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">สถานะทะเบียน</label>\n      <select\n        class=\"form-select form-select-sm\"\n        v-model=\"data.registration_status\"\n        aria-label=\".form-select-sm example\"\n      >\n      <!-- <option value=\"ขอเลิกกิจการ(ปกติ)\">ขอเลิกกิจการ(ปกติ)</option>\n        <option value=\"ขอใบแทนใบสรรพสามิต(ชำรุด)\">\n          ขอใบแทนใบสรรพสามิต(ชำรุด)\n        </option>\n        <option value=\"ขอใบแทนใบสรรพสามิต(สูญหาย)\">\n          ขอใบแทนใบสรรพสามิต(สูญหาย)\n        </option>\n        <option value=\"จดทะเบียนสรรพสามิตใหม่\">จดทะเบียนสรรพสามิตใหม่</option>\n        <option value=\"จดทะเบียนใหม่เนื่องจากโอนกิจการ(ปกติ)\">\n          จดทะเบียนใหม่เนื่องจากโอนกิจการ(ปกติ)\n        </option>\n        <option value=\"จดใหม่เนื่องจากการโอน (ปกติ)\">\n          จดใหม่เนื่องจากการโอน (ปกติ)\n        </option>\n        <option value=\"ยกเลิกเลขทะเบียนสรรพสามิต(กรณีการออกเลขทะเบียนมีปัญหา)\">\n          ยกเลิกเลขทะเบียนสรรพสามิต(กรณีการออกเลขทะเบียนมีปัญหา)\n        </option>\n        <option value=\"เปลี่ยนแปลงข้อมูลผู้ประกอบการ\">\n          เปลี่ยนแปลงข้อมูลผู้ประกอบการ\n        </option>\n        <option value=\"เปลี่ยนแปลงข้อมูลผู้ประกอบการ, สถานประกอบการ\">\n          เปลี่ยนแปลงข้อมูลผู้ประกอบการ, สถานประกอบการ\n        </option>\n        <option value=\"เปลี่ยนแปลงข้อมูลสถานประกอบการ\">\n          เปลี่ยนแปลงข้อมูลสถานประกอบการ\n        </option> -->\n        <option value=\"ดำเนินกิจการ\">ดำเนินกิจการ</option>\n        <option value=\"ปิดกิจการ\">\n          ปิดกิจการ\n        </option>        \n      </select>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">Latitude</label>\n      <input\n        v-model=\"data.latitude\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">Longitude</label>\n      <input\n        v-model=\"data.longitude\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">พิกัดที่ตั้ง</label>\n      <input\n        v-model=\"data.fac_url\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        aria-describedby=\"emailHelp\"\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">สถานะพิกัด</label>\n      <select\n        class=\"form-select form-select-sm\"\n        v-model=\"data.coordinate_status\"\n        aria-label=\".form-select-sm example\"\n      >\n        <option value=\"0\">ยังไม่ยืนยัน</option>\n        <option value=\"1\">ยืนยัน</option>\n      </select>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"exampleInputEmail1\" class=\"form-label\">รูปภาพโรงงาน </label>\n      <input\n        id=\"file\"\n        class=\"form-control\"\n        type=\"file\"\n        accept=\"image/*\"\n        @change=\"onFileChange\"\n      />\n      <img\n        width=\"50px\"\n        class=\"form-control\"\n        v-if=\"itemPreviewImage\"\n        :src=\"itemPreviewImage\"\n      />\n    </div>\n\n    <button @click=\"save()\" type=\"submit\" class=\"mb-3 btn btn-success\">\n      บันทึก\n    </button>\n  </div>\n</template>\n\n<script>\nimport DetailExciseService from \"../services/DetailExciseService.js\";\n\nexport default {\n  name: \"HelloWorld\",\n  data() {\n    return {\n      list: [],\n      itemPreviewImage: \"\",\n      id: \"\",\n      item: [],\n      img: \"\",\n      image: \"\",\n      data: [],\n    };\n  },\n  props: {\n    msg: String,\n  },\n  computed: {\n    dataUrl() {\n      return (\n        \"data:image/jpeg;base64,\" +\n        window.btoa(\n          new Uint8Array(this.info.image).reduce(\n            (data, byte) => data + String.fromCharCode(byte),\n            \"\"\n          )\n        )\n      );\n    },\n  },\n  mounted() {\n    this.id = this.$route.params.id;\n    this.loaddata();\n  },\n  methods: {\n    save() {\n      var data = {\n        excise_id: this.data.excise_id,\n        excise_no: this.data.excise_no,\n        excise_name: this.data.excise_name,\n        excise_by: this.data.excise_by,\n        industrial_name: this.data.industrial_name,\n        industrial_no: this.data.industrial_no,\n        industrial_moo: this.data.industrial_moo,\n        industrial_subdistrict: this.data.industrial_subdistrict,\n        industrial_district: this.data.industrial_district,\n        industrial_province: this.data.industrial_province,\n        industrial_zipcode: this.data.industrial_zipcode,\n        registration_date: this.convertdateb2(this.data.registration_date),\n        status_date: this.convertdateb2(this.data.status_date),\n        registration_status: this.data.registration_status,\n        latitude: this.data.latitude,\n        longitude: this.data.longitude,\n        coordinate_status: this.data.coordinate_status,\n        image: this.itemPreviewImage,\n        fac_url: this.data.fac_url\n      };\n      console.log(data);\n      DetailExciseService.updateDetailExcise(this.id, data).then((res) => {\n        console.log(res.data);\n        alert('บันทึกสำเร็จ')\n      });\n    },\n    convertdateb2(date) {\n      var streetaddress = String(date);\n      // console.log(streetaddress);\n      var y = streetaddress.substring(0, streetaddress.indexOf(\"-\"));\n      var m = streetaddress.substring(7, streetaddress.indexOf(\"-\"));\n      m = m.substring(1, 3);\n      var d = streetaddress.substring(8, 10);\n      y = parseInt(y) + 543;\n      var full = m + \"/\" + d + \"/\" + y;\n      // console.log(d)\n      // console.log(m)\n      // console.log(y);\n      // console.log(full);\n      var timestamp = Date.parse(full);\n      var dateObject = new Date(timestamp);\n      dateObject.setDate(dateObject.getDate() + 1);\n      // console.log(dateObject);\n      // const result = dateObject.toLocaleDateString(\"en-EN\");\n      // console.log(result);\n      return dateObject;\n    },\n    loaddata() {\n      DetailExciseService.getDetailExcisesByID(this.id)\n        .then((res) => {\n          console.log(res.data);\n          this.data = res.data;\n          this.data.registration_date = this.convertdatetothai(\n            this.data.registration_date\n          );\n          this.data.status_date = this.convertdatetothai(this.data.status_date);\n          this.itemPreviewImage = this.data.image;\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    getTypebase64(data) {\n      return data.substring(\"data:image/\".length, data.indexOf(\";base64\"));\n    },\n    onFileChange(evt) {\n      const files = evt.target.files || evt.dataTransfer.files;\n      // const selectedImage = evt.target.files[0]; // get first file\n      // this.createBase64Image(selectedImage);\n      if (!files.length) return;\n      this.createImage(files[0]);\n      // this.createBase64Image(selectedImage);\n    },\n    createBase64Image(fileObject) {\n      const reader = new FileReader();\n      reader.onload = (evt) => {\n        this.image = evt.target.result;\n        this.uploadImage();\n      };\n      reader.readAsDataURL(fileObject);\n    },\n    createImage(file) {\n      const reader = new FileReader();\n\n      reader.onload = (evt) => {\n        this.itemPreviewImage = evt.target.result;\n        this.item.image = evt.target.result;\n        // var buf = Buffer.from(this.item.image, \"base64\"); // Ta-da\n        // console.log(buf);\n        var blob = window.URL.createObjectURL(\n          new Blob([this.item.image], { type: \"image/jpeg\" })\n        );\n        console.log(blob);\n      };\n\n      reader.readAsDataURL(file);\n    },\n    convertdatetothai(datetimes) {\n      // console.log(datetimes);\n      if (datetimes) {\n        var d = new Date(datetimes);\n        var mm = d.getMonth() + 1;\n        var dd = d.getDate();\n        var yy = d.getFullYear();\n        if (String(dd).length == 1) {\n          dd = \"0\" + dd;\n        }\n        if (String(mm).length == 1) {\n          mm = \"0\" + mm;\n        }\n        var myDateString = parseInt(yy - 543) + \"-\" + mm + \"-\" + dd; //(US)\n        // console.log(myDateString);\n        return String(myDateString);\n      }\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"]}]}