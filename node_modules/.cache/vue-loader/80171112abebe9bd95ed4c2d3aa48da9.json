{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue","mtime":1699955882367},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7Ci8vIGltcG9ydCBQcm9kdWN0c1NlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzJwppbXBvcnQgRGljdFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvRGljdFNlcnZpY2UiOwppbXBvcnQgUnVsZUJhc2VkU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9SdWxlQmFzZWRTZXJ2aWNlIjsKaW1wb3J0IE1hcFJ1bGVCYXNlZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTWFwUnVsZUJhc2VkU2VydmljZSI7CmltcG9ydCBMaW5rU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9MaW5rU2VydmljZSI7CmltcG9ydCBBZHZlcnRpc2VTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0FkdmVydGlzZVNlcnZpY2UiOwppbXBvcnQgS2V5d29yZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvS2V5d29yZFNlcnZpY2UiOwppbXBvcnQgQ2xpcExvYWRlciBmcm9tICd2dWUtc3Bpbm5lci9zcmMvQ2xpcExvYWRlci52dWUnCmltcG9ydCBGREFUeXBlc1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvRkRBVHlwZXNTZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBDbGlwTG9hZGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29sb3I6ICcjNWJjMGRlJywKICAgICAgc2l6ZTogJzUwcHgnLAogICAgICBtYXJnaW46ICcycHgnLAogICAgICByYWRpdXM6ICcycHgnLAogICAgICBsb2FkaW5nOmZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgdXJsOiAiIiwKICAgICAgZmlsZTogIiIsCiAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgIHVybFBhdGg6ICIiLAogICAgICBpbWFnZWxpc3RzOiAiIiwKICAgICAgdG9rZW5pemU6ICIiLAogICAgICBtYXRjaG5hbWU6ICIiLAogICAgICBtYXRjaGNhdGVnb3J5OiAiIiwKICAgICAgdHlwZTogIiIsCiAgICAgIG1hdGNobmFtZXN1bTogIiIsCiAgICAgIHN0YXR1c25hbWU6IDAsCiAgICAgIHN0YXR1c2NhdDogMCwKICAgICAgc3RhdHVzZmRhOiAwLAogICAgICBjb2xvcm5hbWU6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBjb2xvcmZkYTogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGNvbG9yY2F0OiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgaWQ6ICIiLAogICAgICBrZXl3b3JkOiBbXSwKICAgICAgY29sb3JrZXk6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBkZXNjOiAiIiwKICAgICAgYXJyTGlzdDogW10sCiAgICAgIGFsbGRhdGE6IDAsCiAgICAgIGJhY2s6IDAsCiAgICAgIG5leHQ6IDAsCiAgICAgIGRhdGE6IHt9LAogICAgICBwcm9kdWN0X3Rva2VuOiAwLAogICAgICB0aXRsZTogIuC5gOC4nuC4tOC5iOC4oSBrZXl3b3JkIiwKICAgICAga2V5OiB7fSwKICAgICAgZmRhOiAiIiwKICAgICAgcHJvZHVjdDogW10sCiAgICAgIHByb2NoZWNrOiBbXSwKICAgICAgYW5zd2VyOicnLAogICAgICB0eXBlSWQ6MAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlcjsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRzZW50ZW50KGRhdGEpewogICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKQogICAgICAvLyB2YXIgdGV4dCA9ICcnCiAgICAgIHZhciBhcnIgPVtdCiAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykgewogICAgICAgIC8vIHRleHQgKz0gZGF0YVtkXQogICAgICAgIGFyci5wdXNoKGRhdGFbZF0pCiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coYXJyKTsKICAgICAgdmFyIGFycnR4dCA9IFN0cmluZyhhcnIpCiAgICAgIC8vIGNvbnNvbGUubG9nKGFycnR4dCk7CiAgICAgIGFycnR4dCA9IGFycnR4dC5yZXBsYWNlQWxsKCIsIiwiPHNwYW4gc3R5bGU9J2NvbG9yOnJlZDsnPiB8IDwvc3Bhbj4iKQogICAgICAvLyBjb25zb2xlLmxvZyhhcnJ0eHQpOwpyZXR1cm4gYXJydHh0CiAgICB9LAogICAgZ2V0c3RhdHVzY2hlY2sodCxmKXsKICAgICAgLy8gY29uc29sZS5sb2codCxmKTsKICAgICAgdmFyIHRleHQgPSAnJwppZiAodCA9PSBmKSB7CiAgdGV4dCA9ICfguYDguIHguLTguJnguIjguKPguLTguIcnCn1lbHNlIGlmICh0ID4gZikgewogIHRleHQgPSAn4LmA4LiB4Li04LiZ4LiI4Lij4Li04LiHJwp9ZWxzZSBpZiAoZiA+IHQpIHsKICB0ZXh0ID0gJ+C5hOC4oeC5iOC5gOC4geC4tOC4meC4iOC4o+C4tOC4hycKfQpyZXR1cm4gdGV4dAogICAgfSwKICAgIGNsZWFyKCkgewogICAgICB0aGlzLmRhdGEgPSB7fTsKICAgICAgdGhpcy5wcm9kdWN0ID0gW107CiAgICAgIHRoaXMucHJvY2hlY2sgPSBbXTsKICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTsKICAgIH0sCiAgICBjdXQoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdmFyIG1hcG5hbWUgPSAnJwogICAgICBpZiAoZGF0YSAhPSAnLScgJiYgZGF0YSAhPSAnJykgewogICAgICAgIGRhdGEgPSBkYXRhLmZpbHRlcigobGV0dGVyKSA9PiBsZXR0ZXIgIT09ICIgIik7CiAgICAgIG1hcG5hbWUgPSBkYXRhLnRvU3RyaW5nKCk7CgogICAgICBtYXBuYW1lID0gbWFwbmFtZS5yZXBsYWNlQWxsKCIsIiwgIiB8ICIpOwogICAgICB9ZWxzZXsKICAgICAgICBtYXBuYW1lID0gZGF0YQogICAgICB9CiAgICAgIAogICAgICByZXR1cm4gbWFwbmFtZTsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMua2V5KTsKICAgICAgaWYgKHRoaXMua2V5Lm5hbWUgPT0gbnVsbCB8fCB0aGlzLmtleS5uYW1lID09ICIiKSB7CiAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4geC4guC5ieC4reC4hOC4p+C4suC4oSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwcm9kYXRhID0gewogICAgICAgICAgbmFtZTogdGhpcy5rZXkubmFtZSwKICAgICAgICAgIHN0YXR1czogMSwKICAgICAgICB9OwogICAgICAgIC8vY29uc29sZS5sb2cocHJvZGF0YSk7CiAgICAgICAgS2V5d29yZFNlcnZpY2UuY3JlYXRla2V5d29yZChwcm9kYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmVyciA9PSAxMDYyKSB7CiAgICAgICAgICAgIGFsZXJ0KCLguKHguLXguITguLPguJnguLXguYnguYPguJnguKPguLDguJrguJrguYHguKXguYnguKciKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERpY3RTZXJ2aWNlLmNyZWF0ZWRpY3QocHJvZGF0YSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSApOwogICAgICAgICAgICAgIC8vIFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlZGNvbHVtbnJ1bGVfYmFzZWQocmVzLmRhdGEuaWQpLnRoZW4oKCkgPT4gewoKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2xvc2VkY2F0ZWdvcnkiKS5jbGljaygpOwogICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldHBlcmNlbnRhZ2UoZGF0YSkgewogICAgICAvLyB2YXIgZGljdCA9IEpTT04ucGFyc2UoZGF0YS5kaWN0X2lkKQogICAgICAvLyB2YXIgcnVsZV9iYXNlZF9pZCA9IEpTT04ucGFyc2UoZGF0YS5ydWxlX2Jhc2VkX2lkKQogICAgICAvLyB2YXIgcmUgPSAoMTAwICogZGF0YS5jb3VudF9ydWxlYmFzZWQpLyAocnVsZV9iYXNlZF9pZC5sZW5ndGgpCiAgICAgIHJldHVybiBkYXRhLmNvdW50X3J1bGViYXNlZDsKICAgIH0sCiAgICBzYXZldG9ydWxlKHNlbiwgYW5zd2VyKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGFuc3dlcik7CiAgICAgIHZhciBpZGRhdGEgPSBbXTsKCiAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgc2VuLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YXNwbGl0W2RdKTsKICAgICAgICBEaWN0U2VydmljZS5nZXRkaWN0cygiIiwgc2VuW2RdKS50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhWzBdLmlkKTsKICAgICAgICAgICAgaWRkYXRhLnB1c2gocmVzLmRhdGFbMF0uaWQpOwogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2coZCsxICwgc2VuLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpZGRhdGEpOwogICAgICAgICAgaWYgKGQgKyAxID09IHNlbi5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIHNxbCA9IGBTRUxFQ1Qgci4qIEZST00gbWFwX3J1bGVfYmFzZWQgbSBqb2luIHJ1bGVfYmFzZWQgciBvbiBtLnJ1bGVfYmFzZWRfaWQgPSByLmlkIFdIRVJFIG0uc3RhdHVzID0gMSBhbmQgZGljdF9pZCA9ICdbJHtpZGRhdGF9XSdgOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzcWwpOwoKICAgICAgICAgICAgYXdhaXQgUnVsZUJhc2VkU2VydmljZS5nZXRieWRpY3Qoc3FsKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICB0ZXh0ICs9ICJ7IjsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkZGF0YVtpXSk7CiAgICAgICAgICAgICAgICAgIHRleHQgKz0gJyJkaWN0JyArIGlkZGF0YVtpXSArICciJyArICI6IiArIDEgKyAiLCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZXh0ICs9ICciYW5zd2VyJyArICciJyArICI6IiArIGFuc3dlciArICIsIjsKICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTsKICAgICAgICAgICAgICAgIHRleHQgKz0gIn0iOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGV4dCk7CiAgICAgICAgICAgICAgICBsZXQganNvbkRhdGEgPSBKU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbkRhdGEpOwogICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVydWxlX2Jhc2VkKGpzb25EYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgdmFyIG1hcHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEuaWQsCiAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogaWRkYXRhLAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogMSwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5jcmVhdGVtYXBfcnVsZV9iYXNlZChtYXBydWxlKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHBybyA9IHsKICAgICAgICAgICAgICAgICAgICAvLyAgIG1hcF9ydWxlX2Jhc2VkOnJlcy5kYXRhLmlkCiAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgIC8vIFByb2R1Y3RzU2VydmljZS5tYXBfcnVsZV9iYXNlZChpZCxwcm8pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRkYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvLyAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgIC8vIH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIHZhciB1cGRhdGVtYXBydWxlID0gewogICAgICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlciwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZXJ1bGVfYmFzZWQoCiAgICAgICAgICAgICAgICAgIHJlcy5kYXRhWzBdLmlkLAogICAgICAgICAgICAgICAgICB1cGRhdGVtYXBydWxlCiAgICAgICAgICAgICAgICApLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICB0aGlzLmdldGRhdGEoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzYXZldG9ydWxlX2Jhc2VkKGRhdGEsIGFuc3dlcikgewogICAgICB0aGlzLmFuc3dlciA9IGFuc3dlcgogICAgICAvLyBjb25zb2xlLmxvZyhzZW4ubGVuZ3RoKTsKICAgICAgLy8gY29uc29sZS5sb2coJ2Fuc3dlcicsYW5zd2VyKTsKICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciBkYXRhcyA9IHsKICAgICAgICBuYW1lIDpkYXRhLnJ1bGVfYmFzZWRfaWQsCiAgICAgICAgdHlwZUlkOnRoaXMudHlwZUlkLAogICAgICAgIGFkdmVydGlzZUlkOmRhdGEuaWQKICAgICAgfQogICAgICAKICAgICAgLy8gaWYgKCFkYXRhLm1hcElkKSB7CiAgICAgICAgYXdhaXQgTWFwUnVsZUJhc2VkU2VydmljZS5jaGVja2ludGIoZGF0YS5kaWN0X2lkKS50aGVuKGFzeW5jIChjaGVjaykgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coY2hlY2suZGF0YSk7CiAgICAgICAgICB2YXIgc3RhdHVzZmFsc2UgPSAwCiAgICAgICAgICB2YXIgc3RhdHVzdHJ1ZSA9IDAKICAgICAgICAgIHZhciB3ZWlnaHQgPSAwCiAgICAgICAgICB2YXIgYWR2ZXJ0aXNlX2lkID0gW10KICAgICAgICAgIGlmIChjaGVjay5kYXRhKSB7CiAgICAgICAgICAgIGFkdmVydGlzZV9pZCA9IEpTT04ucGFyc2UoY2hlY2suZGF0YS5tYXBfYWR2ZXJ0aXNlKQogICAgICAgICAgc3RhdHVzZmFsc2UgPSBjaGVjay5kYXRhLnN0YXR1c2ZhbHNlCiAgICAgICAgICBzdGF0dXN0cnVlID0gY2hlY2suZGF0YS5zdGF0dXN0cnVlCiAgICAgICAgICBkYXRhcy5ydWxlYmFzZWRJZCA9IGNoZWNrLmRhdGEuaWQKICAgICAgICAgIH0KICAgICAgICAgIGlmIChhbnN3ZXIgPT0gMSkgewogICAgICAgICAgICBzdGF0dXN0cnVlID0gc3RhdHVzdHJ1ZSsgcGFyc2VJbnQoMSkKICAgICAgICAgIH0KICAgICAgICAgIGlmIChhbnN3ZXIgPT0gOSkgewogICAgICAgICAgICBzdGF0dXNmYWxzZSA9IHN0YXR1c2ZhbHNlICsgcGFyc2VJbnQoMSkKICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFkdmVydGlzZV9pZCk7CiAgICAgICAgICBhZHZlcnRpc2VfaWQucHVzaChkYXRhLmlkKQogICAgICAgICAgLy8gY29uc29sZS5sb2coYWR2ZXJ0aXNlX2lkKTsKICAgICAgICAgIHdlaWdodCA9IHN0YXR1c2ZhbHNlK3N0YXR1c3RydWUKICAgICAgICAgIHZhciBtYXBydWxlID0gewogICAgICAgIGtleXdvcmRfaWQ6IDEsCiAgICAgICAgYWR2ZXJ0aXNlX2lkOiBkYXRhLmlkLAogICAgICAgIHN0YXR1czogOSwKICAgICAgICBhbnN3ZXI6IGFuc3dlciwKICAgICAgICB1c2VyOiB0aGlzLmN1cnJlbnRVc2VyLmlkLAogICAgICAgIG1hcF9kaWN0OiBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCksCiAgICAgICAgc3RhdHVzZmFsc2U6c3RhdHVzZmFsc2UsCiAgICAgICAgc3RhdHVzdHJ1ZTpzdGF0dXN0cnVlLAogICAgICAgIHdlaWdodDp3ZWlnaHQsCiAgICAgICAgbWFwX2FkdmVydGlzZTogYWR2ZXJ0aXNlX2lkLAogICAgICB9OwogICAgICAgICAgaWYgKGNoZWNrLmRhdGEpIHsKICAgICAgICAgICAgYXdhaXQgTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVhbnN3ZXIoY2hlY2suZGF0YS5pZCwgbWFwcnVsZSkudGhlbigKICAgICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgIAogICAgIGF3YWl0IEtleXdvcmRTZXJ2aWNlLnVwZGF0ZXdlaWdodCgxLGRhdGFzKS50aGVuKGFzeW5jIChyZXMpPT57CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0ZGV0YWlsKCk7CiAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlbWFwX3J1bGVfYmFzZWQobWFwcnVsZSkudGhlbigKICAgICAgICAgICAgICBhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICB2YXIgbWFwX2lkID0gcmVzLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICBkYXRhcy5ydWxlYmFzZWRJZCA9IG1hcF9pZAogICAgICAgICAgICAgICAgdmFyIHNlbmRhdGEgPSBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZW5kYXRhKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRpY3RfbmFtZSk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IHNlbmRhdGEubGVuZ3RoOyBkKyspIHsKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VuZGF0YVtkXSk7CiAgICAgICAgICAgICAgICAgIGlmIChzZW5kYXRhW2RdKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgRGljdFNlcnZpY2UuZ2V0ZGljdChzZW5kYXRhW2RdKS50aGVuKGFzeW5jIChzZW4pID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZW4uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICBtYXBfcnVsZV9iYXNlZF9pZDogbWFwX2lkLAogICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogc2VuZGF0YVtkXSwKICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogc2VuLmRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIG5vOiBkICsgMSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJ1bGUpOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcnVsZV9iYXNlZChydWxlKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChkICsgMSA9PSBzZW5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBLZXl3b3JkU2VydmljZS51cGRhdGV3ZWlnaHQoMSxkYXRhcykudGhlbihhc3luYyAocmVzKT0+ewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICBhd2FpdCB0aGlzLmdldGRldGFpbCgpOwogICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CiAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgCiAgICAgICAgfSk7CiAgICAgCiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmRlbGV0ZW1hcF9ydWxlX2Jhc2VkKGRhdGEubWFwSWQsIG1hcHJ1bGUpLnRoZW4oCiAgICAgIC8vICAgICBhc3luYyAoKSA9PiB7CiAgICAgIC8vICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gICAgICAgdGhpcy5nZXRkZXRhaWwoKTsKICAgICAgLy8gICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwogICAgICAvLyAgICAgfQogICAgICAvLyAgICk7CiAgICAgIC8vIH0KICAgIH0sCiAgICBjaGVja2tleXdvcmQobmFtZSkgewogICAgICAvLyBjb25zb2xlLmxvZyhuYW1lKTsKICAgICAgLy8gICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hcGkva2V5d29yZF9kaWN0cz9uYW1lPTEnKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAvLyBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICcnKQogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oPzpbXHUyNzAwLVx1MjdiZl18KD86XHVkODNjW1x1ZGRlNi1cdWRkZmZdKXsyfXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1MDAyMy1cdTAwMzldXHVmZTBmP1x1MjBlM3xcdTMyOTl8XHUzMjk3fFx1MzAzZHxcdTMwMzB8XHUyNGMyfFx1ZDgzY1tcdWRkNzAtXHVkZDcxXXxcdWQ4M2NbXHVkZDdlLVx1ZGQ3Zl18XHVkODNjXHVkZDhlfFx1ZDgzY1tcdWRkOTEtXHVkZDlhXXxcdWQ4M2NbXHVkZGU2LVx1ZGRmZl18XHVkODNjW1x1ZGUwMS1cdWRlMDJdfFx1ZDgzY1x1ZGUxYXxcdWQ4M2NcdWRlMmZ8XHVkODNjW1x1ZGUzMi1cdWRlM2FdfFx1ZDgzY1tcdWRlNTAtXHVkZTUxXXxcdTIwM2N8XHUyMDQ5fFtcdTI1YWEtXHUyNWFiXXxcdTI1YjZ8XHUyNWMwfFtcdTI1ZmItXHUyNWZlXXxcdTAwYTl8XHUwMGFlfFx1MjEyMnxcdTIxMzl8XHVkODNjXHVkYzA0fFtcdTI2MDAtXHUyNkZGXXxcdTJiMDV8XHUyYjA2fFx1MmIwN3xcdTJiMWJ8XHUyYjFjfFx1MmI1MHxcdTJiNTV8XHUyMzFhfFx1MjMxYnxcdTIzMjh8XHUyM2NmfFtcdTIzZTktXHUyM2YzXXxbXHUyM2Y4LVx1MjNmYV18XHVkODNjXHVkY2NmfFx1MjkzNHxcdTI5MzV8W1x1MjE5MC1cdTIxZmZdKS9nLCAnJyk7CiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAvLyBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKGBfL2xcX2AsICIiKTsvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgIC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP3RleHQ9JyArIG5hbWUpOwogICAgICB2YXIgZGVzYyA9IHRoaXMuZmluZGRlc2NyaXB0aW9uKG5hbWUpOwogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3dvcmt0b2tlbmRlc2M/dGV4dD0nK2Rlc2MpOwogICAgICBheGlvcwogICAgICAgIC5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi93b3JrdG9rZW5kZXNjP3RleHQ9IiArIGRlc2MpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgdGhpcy5kZXNjID0gcmVzLmRhdGE7CiAgICAgICAgfSk7CiAgICAgIC8vIG5hbWUgPSAn4LiC4LmJ4Lit4Lih4Li54Lil4LiI4Liz4LmA4Lie4Liy4Liw4LiC4Lit4LiH4Liq4Li04LiZ4LiE4LmJ4LiyIOC4q+C4oeC4p+C4lOC4q+C4oeC4ueC5iCBTaG9wZWUg4LiB4Lil4Li44LmI4Lih4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LmA4Lie4Li34LmI4Lit4Liq4Li44LiC4Lig4Liy4LieIOC4reC4suC4q+C4suC4o+C5gOC4quC4o+C4tOC4oeC5gOC4nuC4t+C5iOC4reC4hOC4p+C4suC4oeC4h+C4suC4oSDguJzguLTguKcg4Lii4Li14LmI4Lir4LmJ4LitIEJsdWViaXJkKOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCkgU3RvcmFnZSBDb25kaXRpb24gTm9ybWFsIOC4m+C4o+C4sOC5gOC4oOC4l+C4quC4suC4o+C4reC4suC4q+C4suC4oyDguKrguLLguKPguJXguYnguLLguJnguK3guJnguLjguKHguLnguKXguK3guLTguKrguKPguLAsIOC4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDguJvguKPguLDguYDguJfguKjguJXguYnguJnguIHguLPguYDguJnguLTguJTguKrguLTguJnguITguYnguLIg4LmE4LiX4LiiIOC4q+C4meC5ieC4suC4l+C4teC5iOC4guC4reC4h+C4reC4suC4q+C4suC4o+C5gOC4quC4o+C4tOC4oeC4quC4s+C4q+C4o+C4seC4muC4hOC4p+C4suC4oeC4h+C4suC4oSDguJTguLnguYHguKXguKrguLTguKcsIOC4m+C5ieC4reC4h+C4geC4seC4meC4o+C4tOC5ieC4p+C4o+C4reC4oiDguJvguKPguLDguYDguKDguJfguIHguLLguKPguKvguYjguK0g4Lir4LmI4Lit4Lij4Lin4Lih4LiB4Lix4LiZIOC5gOC4nuC4qCDguJfguLHguYnguIfguKrguK3guIfguYDguJ7guKgg4Lit4Liy4Lii4Li44LiB4Liy4Lij4LmA4LiB4LmH4Lia4Lij4Lix4LiB4Lip4LiyIDEyIOC5gOC4lOC4t+C4reC4mSDguJvguKPguLDguYDguKDguJfguILguK3guIfguJzguKXguLTguJXguKDguLHguJPguJHguYzguKLguLIg4LmB4LiE4Lib4LiL4Li54LilIOC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIDMwLTEtMjY3NjQtNS0wMDUxIOC4iOC4s+C4meC4p+C4meC4quC4tOC4meC4hOC5ieC4siAxNzkwMSDguKrguYjguIfguIjguLLguIEg4LiI4Lix4LiH4Lir4Lin4Lix4LiU4LiZ4LiE4Lij4Lij4Liy4LiK4Liq4Li14Lih4LiyIOC4o+C4suC4ouC4peC4sOC5gOC4reC4teC4ouC4lOC4quC4tOC4meC4hOC5ieC4siDguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lie4Lil4Lix4LiqIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4LiV4Lij4LiyIOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCDguILguJnguLLguJQgMTAwMCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgNjAg4LmB4LiE4Lib4LiL4Li54LilIOC5gOC4o+C4l+C4guC4suC4ouC4quC5iOC4hyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMSDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggNSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDIwIOC4geC4o+C4sOC4m+C4uOC4gSDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgOTMg4Lia4Liy4LiXIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCAyIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCAyMSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDUwIOC4geC4o+C4sOC4m+C4uOC4gSDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgOTAg4Lia4Liy4LiXIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCAzIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCA1MSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDEwMCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDg3IOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggNCDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggMTAwIOC4geC4o+C4sOC4m+C4uOC4geC4guC4tuC5ieC4meC5hOC4myAuLi4uLi4uLi4uLi4uLi4uLi4uLi4g4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDg1IOC4muC4suC4lyBWaXRhbWluIEMgUGx1cyBEaWV0YXJ5IFN1cHBsZW1lbnQgUHJvZHVjdCBCbHVlYmlyZCBCcmFuZCDguJzguKXguLTguJXguKDguLHguJPguJHguYzguYDguKrguKPguLTguKHguK3guLLguKvguLLguKPguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lie4Lil4Lix4LiqIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4Liq4LmI4Lin4LiZ4Lib4Lij4Liw4LiB4Lit4Lia4LiX4Lix4LmJ4LiH4Lir4Lih4LiU4LmD4LiZIDEg4LmB4LiE4Lib4LiL4Li54LilIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4teC5iOC4quC4s+C4hOC4seC4jSAoQWN0aXZlIEluZ3JlZGllbnQpIFZJVEFNSU4gQyAoMTAwJSkgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgQ0lUUlVTIEJJT0ZMQVZPTk9JRCBQT1dERVIgLSA2MzAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIEJBUkJBRE9TQ0hFUlJZIFBPV0RFUi9BQ0VST0xBIENIRVJSWSBQT1dERVIgKOC4nOC4h+C4muC4suC4o+C5jOC5gOC4muC5guC4lOC4quC5gOC4iuC4reC4o+C5jOC4o+C4tS/guJzguIfguK3guLDguYDguIvguYLguKPguKXguLLguYDguIrguK3guKPguYzguKPguLUpIChNQUxQSUdISUEgR0xBQlJBIEwuKSDguJzguKUgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgUk9TRUhJUCBQT1dERVIgKOC4nOC4h+C5guC4o+C4quC4ruC4tOC4m+C4quC5jCkgKFJPU0EgQ0FOSU5BIEwuKSDguJzguKUgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgUnV0aW4gLSAzMCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgSU5ESUFOIEdPT1NFQkVSUlkgUE9XREVSICjguJzguIfguKHguLDguILguLLguKHguJvguYnguK3guKEpIChQSFlMTEFOVEhVUyBFTUJMSUNBIEwuICkg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4teC5iOC5hOC4oeC5iOC4quC4s+C4hOC4seC4jSAoSW5hY3RpdmUgSW5ncmVkaWVudCkgRURJQkxFIEdFTEFUSU4gNDI4IC0gOTguNSDguKHguLTguKXguKXguLTguIHguKPguLHguKEgVElUQU5JVU0gRElPWElERSAxNzEgLTEuOTUg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIOC4p+C4tOC4mOC4teC4o+C4seC4muC4m+C4o+C4sOC4l+C4suC4mSDguITguKPguLHguYnguIfguKXguLAgMS0yIOC5geC4hOC4m+C4i+C4ueC4pSDguKvguKXguLHguIfguK3guLLguKvguLLguKPguYDguIrguYnguLIg4LmA4Lil4LiC4LiX4Li14LmIIOC4rS7guKIuIDMwLTEtMjY3NjQtNS0wMDUxIOC4hOC4s+C5gOC4leC4t+C4reC4mSDguITguKfguKPguYDguIHguYfguJrguYPguKvguYnguJ7guYnguJnguYHguKrguIfguYHguJTguIfguYHguKXguLDguITguKfguLLguKHguIrguLfguYnguJkg4LmA4LiU4LmH4LiBIOC4quC4leC4o+C4teC4oeC4teC4hOC4o+C4o+C4oOC5jCDguYHguKXguLDguKrguJXguKPguLXguYPguKvguYnguJnguKHguJrguLjguJXguKPguYTguKHguYjguITguKfguKPguKPguLHguJrguJvguKPguLDguJfguLLguJkg4LiE4Lin4Lij4LiB4Li04LiZ4Lit4Liy4Lir4Liy4Lij4Lir4Lil4Liy4LiB4Lir4Lil4Liy4Lii4LmD4Lir4LmJ4LiE4Lij4LiaIDUg4Lir4Lih4Li54LmIIOC5g+C4meC4quC4seC4lOC4quC5iOC4p+C4meC4l+C4teC5iOC5gOC4q+C4oeC4suC4sOC4quC4oeC5gOC4m+C5h+C4meC4m+C4o+C4sOC4iOC4syDguYTguKHguYjguKHguLXguJzguKXguYPguJnguIHguLLguKPguJvguYnguK3guIfguIHguLHguJnguKvguKPguLfguK3guKPguLHguIHguKnguLLguYLguKPguIQg4Liq4Lij4Lij4Lie4LiE4Li44LiTIOC4m+C4o+C4sOC5guC4ouC4iuC4meC5jOC4guC4reC4h+C4geC4suC4o+C4geC4tOC4meC4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDvuI/guJfguLPguYPguKvguYnguKvguJnguYnguLLguYTguKHguYjguYLguJfguKPguKEg4Lir4LiZ4LmJ4Liy4LiV4Liy4Liq4LiU4LmD4LiqIO+4j+C4iuC5iOC4p+C4ouC4n+C4t+C5ieC4meC4n+C4ueC4nOC4tOC4p+C4q+C4meC5ieC4siDguKrguLTguKcg4Lid4LmJ4LiyIOC4geC4o+C4sCDguKPguLTguYnguKfguKPguK3guKIg4LiU4Li54LiI4Liy4LiH4Lil4LiHIO+4j+C4nOC4tOC4p+C4nuC4o+C4o+C4k+C4meC4uOC5iOC4oeC5gOC4o+C4teC4ouC4muC5gOC4meC4teC4ouC4miDguIrguLjguYjguKHguIrguLfguYjguJkg77iP4Lir4LiZ4LmJ4Liy4LiV4Liy4LiU4Li54LmA4LiU4LmH4LiB4LmB4Lil4Liw4LmA4LiU4LmJ4LiH4LiC4Li24LmJ4LiZIO+4j+C4nOC4tOC4p+C4q+C4meC5ieC4suC4guC4suC4p+C4reC4oeC4iuC4oeC4nuC4uSDguKrguLTguJnguITguYnguLLguJXguLHguJTguKPguK3guJrguJfguLjguIHguKfguLHguJnguYDguKfguKXguLIg4LiV4Lix4LiU4Lij4Lit4Lia4LmA4Lin4Lil4LiyIDEyLjAwIOC4mSDguILguK3guIfguJfguLjguIHguKfguLHguJkg4LmB4LiI4LmJ4LiH4LmC4Lit4LiZ4LmA4LiB4Li04LiZ4LmA4Lin4Lil4LiyIOC4quC5iOC4h+C4o+C4reC4muC4p+C4seC4meC4luC4seC4lOC5hOC4m+C4meC4sOC4iOC5iuC4sCDguKrguYjguIfguJ7guLHguKrguJTguLjguJfguLjguIHguKfguLHguJkg4LmA4Lin4LmJ4LiZ4Lin4Lix4LiZ4Lit4Liy4LiX4Li04LiV4Lii4LmMIOC5geC4peC4sOC4p+C4seC4meC4q+C4ouC4uOC4lOC4meC4seC4geC4guC4seC4leC4pOC4geC4qeC5jCDguILguK3guJrguJ7guKPguLDguITguLjguJPguKXguLnguIHguITguYnguLLguJfguLjguIHguJfguYjguLLguJkg4LiX4Li14LmI4LmE4Lin4LmJ4Lin4Liy4LiH4LmD4LiI4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LiC4Lit4LiH4LmA4Lij4Liy4LmA4Liq4Lih4Lit4Lih4LiyXy9sXF8nCiAgICAgIC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP3RleHQ9JyArIGRlc2MpOwogICAgICB2YXIgY29uID0gewogICAgICAgIGNvbnRlbnQ6IGRlc2MsCiAgICAgIH07CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iLCBjb24pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgLy8gdGhpcy5rZXl3b3JkLnB1c2gocmVzLmRhdGEpCiAgICAgICAgICAgIHRoaXMua2V5d29yZCA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAvLyAgICAgfQoKICAgICAgLy8gfSk7CiAgICAgIC8vICAgICAgIHZhciBsaXN0a2V5d29yZHMgPSBbXQogICAgICAvLyAgICAgICB2YXIgbmFtZXNwbGl0ID0gbmFtZS5zcGxpdCgiICIpCiAgICAgIC8vICAgICAgIC8vIGNvbnNvbGUubG9nKG5hbWVzcGxpdCk7CiAgICAgIC8vICAgICAgIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS9rZXl3b3JkX2RpY3RzP25hbWU9MScpLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gICAgICAgICB2YXIga2V5bGlzdCA9IFtdCiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAvLyAgICAgICAgICAgcmVzLmRhdGFbcl0ubmFtZSA9IHJlcy5kYXRhW3JdLm5hbWUucmVwbGFjZUFsbCgiLiIsIiIpCiAgICAgIC8vICAgICAgICAgICB2YXIga2sgPSByZXMuZGF0YVtyXS5uYW1lLnNwbGl0KCIgIikKICAgICAgLy8gICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2subGVuZ3RoOyBrKyspIHsKICAgICAgLy8gICAgICAgICAgICAga2V5bGlzdC5wdXNoKGtrW2tdKQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICBmb3IgKGxldCBrZXkgPSAwOyBrZXkgPCBrZXlsaXN0Lmxlbmd0aDsga2V5KyspIHsKICAgICAgLy8gICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbmFtZXNwbGl0Lmxlbmd0aDsgbisrKSB7CiAgICAgIC8vICAgICAgICAgICAgIGlmIChuYW1lc3BsaXRbbl0gPT0ga2V5bGlzdFtrZXldICYmIGtleWxpc3Rba2V5XSAhPSAnJyAmJiBpc05hTihrZXlsaXN0W2tleV0pKSB7CiAgICAgIC8vICAgICAgICAgICAgICAgbGlzdGtleXdvcmRzLnB1c2goa2V5bGlzdFtrZXldKQogICAgICAvLyAgICAgICAgICAgICB9CgogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXlsaXN0KTsKICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0a2V5d29yZHMpOwoKICAgICAgLy8gICAgICAgY29uc29sZS5sb2cobGlzdGtleXdvcmRzLmxlbmd0aCk7CiAgICAgIC8vICAgICAgICAgaWYgKGxpc3RrZXl3b3Jkcy5sZW5ndGggPT0gMCkgewoKICAgICAgLy8gICAgICAgICAgIHRoaXMuY29sb3JrZXkgPSAiYmFja2dyb3VuZC1jb2xvcjojYTNlOWE0IgogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIC8vICAgICAgICAgbGlzdGtleXdvcmRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAvLyAgICAgIGlmKHJlc3VsdC5pbmRleE9mKGl0ZW0pIDwgMCkgewogICAgICAvLyAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgLy8gICAgICB9CiAgICAgIC8vIH0pOwogICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAvLyBsaXN0a2V5d29yZHMgPSByZXN1bHQKICAgICAgLy8gICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IGxpc3RrZXl3b3Jkcy5sZW5ndGg7IGwrKykgewogICAgICAvLyAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/bmFtZT0nICsgbmFtZSsnJiZuYW1lX3JlYWw9Jyk7CiAgICAgIC8vICAgICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/bmFtZT0nICsgbmFtZSsnJiZuYW1lX3JlYWw9JyArIGxpc3RrZXl3b3Jkc1tsXSkudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gICAgICAgICB0aGlzLmtleXdvcmQucHVzaChyZXMuZGF0YSkKICAgICAgLy8gICAgICAgfSk7CgogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfSk7CiAgICB9LAogICAgZmluZCgpewp2YXIgdHlwZSA9IHRoaXMuZmluZHR5cGVwcm9kdWN0KHRoaXMuZGF0YS5jb250ZW50KQpjb25zb2xlLmxvZyh0eXBlKTsKdmFyIHNwbGl0ID0gdHlwZS5zcGxpdCgiXG4iKQpjb25zb2xlLmxvZyhzcGxpdFszXSk7CiAgICAgIHZhciBjb250ZW50ID0gIiI7CiAgICAgICAgY29udGVudCA9IHRoaXMuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoCiAgICAgICAgICAvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLAogICAgICAgICAgIiIKICAgICAgICApOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoCiAgICAgICAgICAvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywKICAgICAgICAgICIgIgogICAgICAgICk7CgogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIisiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKAogICAgICAgICAgLyhbXHUyNzAwLVx1MjdCRl18W1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURDMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1REZGRl18W1x1MjAxMS1cdTI2RkZdfFx1RDgzRVtcdUREMTAtXHVEREZGXSkvZywKICAgICAgICAgICIgIgogICAgICAgICk7CmNvbnNvbGUubG9nKHRoaXMuZmluZGRlc2NyaXB0aW9uKGNvbnRlbnQpKTsKICAgIH0sCiAgICBmaW5kdHlwZXByb2R1Y3QoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdmFyIHRleHQgPSBbIuC4q+C4oeC4p+C4lOC4q+C4oeC4ueC5iCJdOwogICAgICB2YXIgZmluZGZkYSA9IGRhdGE7CiAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGlmIChmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkgIT0gLTEpIHsKICAgICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkpOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBpZiAoZmluZGZkYSA9PSAn4Lit4Liy4Lir4Liy4LijJykgewogICAgICAvLyAgIGZpbmRmZGEgPSBmaW5kZmRhKyBmaW5kZmRhKyfguYDguKrguKPguLTguKEnCiAgICAgIC8vIH0KICAgICAgLy8gY29uc29sZS5sb2coZmluZGZkYSk7CiAgICAgIHJldHVybiBmaW5kZmRhOwogICAgfSwKICAgIGZpbmRkZXNjcmlwdGlvbihkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgdGV4dCA9IFsi4Lij4Liy4Lii4Lil4Liw4LmA4Lit4Li14Lii4LiU4Liq4Li04LiZ4LiE4LmJ4LiyIl07CiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0ZXh0Lmxlbmd0aDsgdCsrKSB7CiAgICAgICAgaWYgKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSAhPSAtMSkgewogICAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGlmIChmaW5kZmRhID09ICfguK3guLLguKvguLLguKMnKSB7CiAgICAgIC8vICAgZmluZGZkYSA9IGZpbmRmZGErIGZpbmRmZGErJ+C5gOC4quC4o+C4tOC4oScKICAgICAgLy8gfQogICAgICAvLyBjb25zb2xlLmxvZyhmaW5kZmRhKTsKICAgICAgcmV0dXJuIGZpbmRmZGE7CiAgICB9LAogICAgbG9hZGRpY3QoKSB7CiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2xvYWRkaWN0IikudGhlbihhc3luYyAoKSA9PiB7fSk7CiAgICB9LAogICAgZ2V0ZGV0YWlsKCkgewogICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgiLWkuIik7CiAgICAgIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnNwbGl0KCItaS4iKTsKICAgICAgLy8gdGhpcy5kYXRhLnVybCA9IHVybFswXTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKICAgICAgdmFyIHNlbGVjdHBybyA9IHsKICAgICAgICAvLyB1cmw6IHRoaXMuZGF0YS51cmwsCiAgICAgICAgaWQ6IHRoaXMucHJvZHVjdF90b2tlbiwKICAgICAgfTsKICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIC8vIHZhciBiZXN0ID0gdGhpcy5nZXRNYXgocmVzLmRhdGEua2V5d29yZCwnY291bnRfcnVsZWJhc2VkJykKICAgICAgICAvL2NvbnNvbGUubG9nKGJlc3QpOwogICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMuc3RhdHVzID0gdHJ1ZTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIC8vIHZhciBkYXRhID0gewogICAgICAgIC8vICAgYWR2ZXJ0aXNlX2lkOiByZXMuZGF0YS5rZXl3b3JkWzBdLnByb2R1Y3RfdG9rZW5faWQsCiAgICAgICAgLy8gfTsKICAgICAgICAvLyBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZXdlaWdodCgKICAgICAgICAvLyAgIHJlcy5kYXRhLmtleXdvcmRbMF0ubWFwX3J1bGVfYmFzZWRfaWQsCiAgICAgICAgLy8gICBkYXRhCiAgICAgICAgLy8gKS50aGVuKCgpID0+IHt9KTsKICAgICAgICAvLyB0aGlzLmxpc3Qua2V5d29yZCA9IFtiZXN0XQogICAgICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBzZWFyY2goKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwucmVwbGFjZUFsbCgiLiIsJycpOwogICAgICAvLyB1cmwgPSB1cmwuc3BsaXQoIi1pIik7CiAgICAgIC8vIHRoaXMuZGF0YS51cmwgPSB1cmxbMF07CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YS51cmwpOwogICAgICB0aGlzLnByb2NoZWNrID0gW107CiAgICAgIHRoaXMucHJvZHVjdCA9IFtdOwogICAgICB0aGlzLnByb2R1Y3RfdG9rZW4gPSAwOwogICAgICB2YXIgY29uID0ge307CiAgICAgIGF3YWl0IHRoaXMubG9hZGRpY3QoKTsKICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTsKICAgICAgLy8gaWYgKHRoaXMuZGF0YS51cmwgPT0gbnVsbCB8fCB0aGlzLmRhdGEudXJsID09ICIiKSB7CiAgICAgIC8vICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4gSBVUkwiKTsKICAgICAgLy8gfSBlbHNlIAogICAgICBpZiAodGhpcy5kYXRhLmNvbnRlbnQgPT0gbnVsbCB8fCB0aGlzLmRhdGEuY29udGVudCA9PSAiIikgewogICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKHguYLguIbguKnguJPguLIiKTsKICAgICAgfSBlbHNlIHsKCiAgICAgICAgdmFyIGZpbmR0eXBlID0gdGhpcy5maW5kdHlwZXByb2R1Y3QodGhpcy5kYXRhLmNvbnRlbnQpCi8vIGNvbnNvbGUubG9nKHR5cGUpOwp2YXIgc3BsaXQgPSBmaW5kdHlwZS5zcGxpdCgiXG4iKQp2YXIgdHlwZSA9IHNwbGl0WzNdCi8vIGNvbnNvbGUubG9nKHR5cGUpOwphd2FpdCBGREFUeXBlc1NlcnZpY2UuZ2V0ZmRhdHlwZXModHlwZSkudGhlbihhc3luYyAocmVzKT0+ewogIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgdGhpcy50eXBlSWQgPSByZXMuZGF0YVswXS5pZAogIH1lbHNlewogICAgdmFyIG5hbWUgPSB7CiAgICAgIG5hbWUgOiB0eXBlCiAgICB9CiAgICBhd2FpdCBGREFUeXBlc1NlcnZpY2UuY3JlYXRlZmRhdHlwZShuYW1lKS50aGVuKChyZXMpPT57CiAgICAgIHRoaXMudHlwZUlkID0gcmVzLmRhdGEuaWQKICAgIH0pOwogIH0KfSkKLy8gY29uc29sZS5sb2codGhpcy50eXBlSWQpOwogICAgICAgIHZhciBjb250ZW50ID0gIiI7CiAgICAgICAgY29udGVudCA9IHRoaXMuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoCiAgICAgICAgICAvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLAogICAgICAgICAgIiIKICAgICAgICApOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoCiAgICAgICAgICAvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywKICAgICAgICAgICIgIgogICAgICAgICk7CgogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIisiLCAiIik7CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKAogICAgICAgICAgLyhbXHUyNzAwLVx1MjdCRl18W1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURDMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1REZGRl18W1x1MjAxMS1cdTI2RkZdfFx1RDgzRVtcdUREMTAtXHVEREZGXSkvZywKICAgICAgICAgICIgIgogICAgICAgICk7CgogICAgICAgIC8vIHRoaXMuZmRhID0gYXdhaXQgdGhpcy5maW5kZmRhKGNvbnRlbnQpOwoKdmFyIGRlc2MgPSB0aGlzLmZpbmRkZXNjcmlwdGlvbihjb250ZW50KQogICAgICAgIHRoaXMuZmRhID0gYXdhaXQgdGhpcy5nZXRmZGEoY29udGVudClbMF0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZkYSk7CiAgICAgICAgLy8gdmFyIHNlbGVjdHBybyA9IHsKICAgICAgICAvLyAgIHVybDogdGhpcy5kYXRhLnVybCwKICAgICAgICAvLyAgIC8vIGlkOiB0aGlzLmN1cnJlbnRVc2VyLmlkLAogICAgICAgIC8vIH07CiAgICAgICAgLy8gYXdhaXQgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb250ZW50KTsKICAgICAgICAgIC8vIGlmIChyZXMuZGF0YS5pZCkgewogICAgICAgICAgLy8gICB0aGlzLnByb2R1Y3RfdG9rZW4gPSByZXMuZGF0YS5pZDsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JrdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgICAgICAgY29uID0gewogICAgICAgICAgICBjb250ZW50OiBkZXNjLAogICAgICAgICAgfTsKICAgICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAgIC5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29yZHRva2VuZGVzYyIsIGNvbikKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAvLyB2YXIgc2VudGVuY2UgPSByZXMuZGF0YS5zZW50ZW50LnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsKICAgICAgICAgICAgICB2YXIgZGVzID0gewogICAgICAgICAgICAgICAgdXJsOiB0aGlzLmRhdGEudXJsLAogICAgICAgICAgICAgICAgc2VudGVuY2U6IGRlc2MsCiAgICAgICAgICAgICAgICBzZW50ZW5jZV9rZXl3b3JkOiByZXMuZGF0YS5zZW50ZW50LAogICAgICAgICAgICAgICAga2V5d29yZF9pZDogcmVzLmRhdGEua2V5d29yZElkLAogICAgICAgICAgICAgICAgc3RhdHVzOiAxLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGVzKTsKICAgICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0X3Rva2VuID09IDApIHsKICAgICAgICAgICAgICAgIGF3YWl0IE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oCiAgICAgICAgICAgICAgICAgIGFzeW5jIChwcm9kdWN0dG9rZW4pID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tmZGEoY29udGVudCwgdGhpcy5wcm9kdWN0X3Rva2VuKTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRlc2MsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbik7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbnRlbmNldG9rZW4gPSByZXMuZGF0YVtyXS5zZW50ZW50LnJlcGxhY2VBbGwoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICI8c3BhbnN0eWxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjxzcGFuIHN0eWxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWR2ZXJ0aXNlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiB0aGlzLnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFkdmVydGlzZVNlcnZpY2UuY3JlYXRlYWR2ZXJ0aXNlKGFkdmVydGlzZSkudGhlbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICsgMSA9PSByZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRwcm90b2tlbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0a2V5d29yZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0cHJvdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudGhlbihhc3luYyAocHJvKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRva2VuZGF0YShwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0ZGV0YWlsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhd2FpdCBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZSh0aGlzLnByb2R1Y3RfdG9rZW4pLnRoZW4oCiAgICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0cHJvZHVjdF90b2tlbigKICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgIGRlcwogICAgICAgICAgICAgICAgICAgICkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZSh0aGlzLnByb2R1Y3RfdG9rZW4pLnRoZW4oYXN5bmMgKCk9PnsKICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRlbCk7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrZmRhKGNvbnRlbnQsIHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRlc2MsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjb24pOwogICAgICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5zZW50ZW50LnJlcGxhY2VBbGwoJyInLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPHNwYW5zdHlsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjxzcGFuIHN0eWxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWR2ZXJ0aXNlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6IHRoaXMucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkX2RpY3RfaWQ6IHJlcy5kYXRhW3JdLmtleXdvcmRfZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbnQ6IHNlbnRlbmNldG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgKyAxID09IHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW4gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0cHJvdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS50aGVuKChwcm8pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbmRhdGEocHJvLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIC8vIH0pOwogICAgICB9CiAgICB9LAogICAgZ2V0TWF4KGFyciwgcHJvcCkgewogICAgICB2YXIgbWF4OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChtYXggPT0gbnVsbCB8fCBwYXJzZUludChhcnJbaV1bcHJvcF0pID4gcGFyc2VJbnQobWF4W3Byb3BdKSkKICAgICAgICAgIG1heCA9IGFycltpXTsKICAgICAgfQogICAgICByZXR1cm4gbWF4OwogICAgfSwKICAgIGdldE1heGxlbmd0aChhcnIsIHByb3ApIHsKICAgICAgdmFyIG1heDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAobWF4ID09IG51bGwgfHwgcGFyc2VJbnQoYXJyW2ldW3Byb3BdKSA+IHBhcnNlSW50KG1heFtwcm9wXSkpCiAgICAgICAgICBtYXggPSBhcnJbaV07CiAgICAgIH0KICAgICAgcmV0dXJuIG1heDsKICAgIH0sCiAgICBnZXRBbGxNYXhBcnJheShhcnIsIHZhbHVlKSB7CiAgICAgIHZhciBhcnJheSA9IFtdOwogICAgICBhcnIubWFwKGZ1bmN0aW9uIChudW0sIGlkeCkgewogICAgICAgIGlmIChudW0uYWxsY291bnQgPT0gdmFsdWUpIHsKICAgICAgICAgIGFycmF5LnB1c2goYXJyW2lkeF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0sCiAgICBhc3luYyB0b2tlbmRhdGEobGlzdCkgewogICAgICAvL2NvbnNvbGUubG9nKGxpc3QpOwogICAgICBpZiAobGlzdC5rZXl3b3JkLmxlbmd0aCA+IDApIHsKICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGwrKykgewogICAgICAgICAgLy9jb25zb2xlLmxvZyhsaXN0LmtleXdvcmRbbF0ua2V5d29yZF9kaWN0X2lkKTsKICAgICAgICAgIGlmIChsaXN0LmtleXdvcmRbbF0ua2V5d29yZF9kaWN0X2lkKSB7CiAgICAgICAgICAgIHZhciBtYXAgPSB7CiAgICAgICAgICAgICAgaWQ6IGxpc3Qua2V5d29yZFtsXS5pZCwKICAgICAgICAgICAgICB1cmw6IGxpc3Qua2V5d29yZFtsXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAgICAgICAgICAga2V5d29yZF9pZDogbGlzdC5rZXl3b3JkW2xdLmRpY3RfaWQsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1hcCk7CiAgICAgICAgICAgIGF3YWl0IE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0bWFwcHJvZHVjdChtYXApLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICB2YXIgbWF4dmFsdWUgPSB0aGlzLmdldE1heChyZXMuZGF0YSwgImFsbGNvdW50Iik7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWF4dmFsdWUuYWxsY291bnQpOwogICAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXRBbGxNYXhBcnJheShyZXMuZGF0YSwgbWF4dmFsdWUuYWxsY291bnQpOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAgIHZhciBiZXN0ZGF0YSA9IHRoaXMuZ2V0TWF4KGksICJsZW5ndGgiKTsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhiZXN0ZGF0YSk7CiAgICAgICAgICAgICAgLy8gZ2V0QWxsSW5kZXhlcwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJlc3RkYXRhKTsKICAgICAgICAgICAgICB2YXIgYmVzdCA9IHsKICAgICAgICAgICAgICAgIGlkOiBsaXN0LmtleXdvcmRbbF0uaWQsCiAgICAgICAgICAgICAgICBzZW50ZW5jZTogYmVzdGRhdGEsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhiZXN0KTsKICAgICAgICAgICAgICB2YXIgcnVsZV9iYXNlZF9uYW1lID0gYmVzdGRhdGEubmFtZS50b1N0cmluZygpOwogICAgICAgICAgICAgIHJ1bGVfYmFzZWRfbmFtZSA9IHJ1bGVfYmFzZWRfbmFtZS5yZXBsYWNlQWxsKCIsIiwgIiIpOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJ1bGVfYmFzZWRfbmFtZSk7CiAgICAgICAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgICAgICAgIC5nZXQoCiAgICAgICAgICAgICAgICAgIExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArCiAgICAgICAgICAgICAgICAgICAgIi9sb2FkZGljdD93b3JkPSIgKwogICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfbmFtZQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICBhd2FpdCBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldGJlc3RydWxlYmFzZWQoYmVzdCkudGhlbigKICAgICAgICAgICAgICAgICAgICBhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGViYXNlZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY291bnRfcnVsZWJhc2VkOiByZXMuZGF0YS5jb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2VfcnVsZWJhc2U6IHJlcy5kYXRhLnNlbnRlbmNlLAogICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX2lkOiByZXMuZGF0YS5ydWxlX2Jhc2VkX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWU6IHJlcy5kYXRhLnJ1bGVfYmFzZWRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFwX3J1bGVfYmFzZWRfaWQ6IHJlcy5kYXRhLm1hcF9pZCwKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhydWxlYmFzZWQpOwogICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2xdLmlkKTsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRlcnVsZWJhc2VkKAogICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmtleXdvcmRbbF0uaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGViYXNlZAogICAgICAgICAgICAgICAgICAgICAgKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgKyAxID09IGxpc3Qua2V5d29yZC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldGRldGFpbCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyBsaXN0LmtleXdvcmRbbF0ucnVsZWJhc2UgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAvLyBpZiAobCArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5jb21wYXJlKGxpc3QpOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCB0aGlzLmdldGRldGFpbCgpOwogICAgICB9CiAgICB9LAogICAgY29tcGFyZShsaXN0KSB7CiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGlzdC5rZXl3b3JkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2tdKTsKICAgICAgICB2YXIgZGljdF9pZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLmRpY3RfaWQpOwogICAgICAgIC8vIHZhciBydWxlYmFzZWQgPSBKU09OLnBhcnNlKGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZSkKICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0LmtleXdvcmRba10ucnVsZWJhc2VkKTsKICAgICAgICBpZiAobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlKSB7CiAgICAgICAgICBsZXQgdW5pcXVlQ2hhcnNydWxlID0gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmZpbHRlcigoYywgaW5kZXgpID0+IHsKICAgICAgICAgICAgcmV0dXJuIGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZS5pbmRleE9mKGMpID09PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIGZpbHRlcmVkQXJyYXkgPSBkaWN0X2lkLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgICByZXR1cm4gdW5pcXVlQ2hhcnNydWxlLmluZGV4T2YobikgIT09IC0xOwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZEFycmF5JyxmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaWN0X2lkJyxkaWN0X2lkLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdW1kaWN0SWQubGVuZ3RoKTsKICAgICAgICAgIHZhciBwZXJjZW50YWdlID0KICAgICAgICAgICAgKDEwMCAqIHBhcnNlSW50KGZpbHRlcmVkQXJyYXkubGVuZ3RoKSkgLyBwYXJzZUludChkaWN0X2lkLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwZXJjZW50YWdlKTsKICAgICAgICAgIGxpc3Qua2V5d29yZFtrXS5wZXJjZW50YWdlID0gcGVyY2VudGFnZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGlzdC5rZXl3b3JkW2tdLnBlcmNlbnRhZ2UgPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoayArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5saXN0ID0gbGlzdDsKICAgICAgICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRBbGxJbmRleGVzKGFyciwgdmFsKSB7CiAgICAgIHZhciBpbmRleGVzID0gW10sCiAgICAgICAgaSA9IC0xOwogICAgICB3aGlsZSAoKGkgPSBhcnIuaW5kZXhPZih2YWwsIGkgKyAxKSkgIT0gLTEpIHsKICAgICAgICBpbmRleGVzLnB1c2goaSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluZGV4ZXM7CiAgICB9LAogICAgZmluZGZkYShkYXRhKSB7CiAgICAgIHZhciB0ZXh0ID0gWyLguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiIsIuC4reC4oi4iXTsKICAgICAgLy8gdmFyIGVuZCA9IFsnJ10KICAgICAgdmFyIGZpbmRmZGEgPSBkYXRhOwogICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRleHQubGVuZ3RoOyB0KyspIHsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pLCBkYXRhLmxlbmd0aCk7CiAgICAgICAgdmFyIGVuZGluZGV4ID0gdGhpcy5nZXRBbGxJbmRleGVzKGZpbmRmZGEsICIgIik7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSwgZW5kaW5kZXhbMV0pOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwoKICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCB0ZXh0Lmxlbmd0aDsgdisrKSB7CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwodGV4dFt2XSwgIiIpOwogICAgICB9CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoL1teXGQuLV0vZywgJycpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCItIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCLigJMiLCAiIik7CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIiAiLCAiIik7CiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwogICAgICAvLyB2YXIgcmVnZXggPSAvXGQrL2c7CiAgICAgIC8vIHZhciBtYXRjaGVzID0gZmluZGZkYS5tYXRjaChyZWdleCk7ICAvLyBjcmVhdGVzIGFycmF5IGZyb20gbWF0Y2hlcwogICAgICAvLyBjb25zb2xlLmxvZyhtYXRjaGVzWzBdKTsKICAgICAgcmV0dXJuIGZpbmRmZGE7CiAgICB9LAogICAgYXN5bmMgY2hlY2tmZGEoY29udGVudCwgaWQpIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mZGEpOwogICAgICBpZiAodGhpcy5mZGEpIHsKICAgICAgICB2YXIgZmRhID0gdGhpcy5mZGE7CiAgICAgICAgdmFyIHByb2R1Y3Rfc3RhdHVzID0gMDsKICAgICAgICBjb25zdCB1cmwgPSAiaHR0cHM6Ly90YXdhaWZvcmhlYWx0aC5vcmcvYXBpL29yeW9yL2NoZWNrLXByb2R1Y3QiOwogICAgICAgIGNvbnN0IGRhdGEgPSB7IG51bWJlcl9zcmM6IGZkYSB9OwogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04IiwKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwKICAgICAgICB9OwoKICAgICAgICBhd2FpdCBmZXRjaCh1cmwsIG9wdGlvbnMpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgIC50aGVuKGFzeW5jIChkYXRhKSA9PiB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlIHx8IGRhdGEubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgIGRldGFpbDogY29udGVudCwKICAgICAgICAgICAgICAgIGZkYTogdGhpcy5mZGEsCiAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgdHlwZXBybzogIi0iLAogICAgICAgICAgICAgICAgbGNubm86ICItIiwKICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogIi0iLAogICAgICAgICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICAgICAgICBsaWNlbjogIi0iLAogICAgICAgICAgICAgICAgQWRkcjogIi0iLAogICAgICAgICAgICAgICAgTmV3Y29kZTogIi0iLAogICAgICAgICAgICAgICAgc3RhdHVzOiAiLSIsCiAgICAgICAgICAgICAgICB0b2tlbjogIi0iLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMucHJvY2hlY2sucHVzaCh7CiAgICAgICAgICAgICAgICBmZGE6IHRoaXMuZmRhLAogICAgICAgICAgICAgICAgbWFwZmRhOiAiLSIsCiAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgY2F0X3N0YXR1czogMCwKICAgICAgICAgICAgICAgIGZkYV9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICBuYW1lX3N0YXR1czogMCwKICAgICAgICAgICAgICAgIHR5cGVwcm86ICItIiwKICAgICAgICAgICAgICAgIHR5cGU6ICItIiwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gdGhpcy5zdGF0dXMgPSB0cnVlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5jbmNubS5pbmNsdWRlcygi4LiE4LiH4Lit4Lii4Li54LmIIikpCiAgICAgICAgICAgICAgaWYgKGRhdGEuY25jbm0uaW5jbHVkZXMoIuC4hOC4h+C4reC4ouC4ueC5iCIpKSB7CiAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1cyA9IDE7CiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yZmRhID0gImJhY2tncm91bmQtY29sb3I6I2EzZTlhNCI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2xvcmZkYSk7CiAgICAgICAgICAgICAgdmFyIGNvbiA9IHsKICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgcHJvZHVjdGhhOiBkYXRhLnByb2R1Y3RoYSwKICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICB0eXBlcHJvOiBkYXRhLnR5cGVwcm8sCiAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgICAgICAgIC5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2tmZGEiLCBjb24pCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgdmFyIHBybyA9IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgZmRhX3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgbmFtZV9zdGF0dXM6IHJlcy5kYXRhLm1hcG5hbWVzdGF0dXMsCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBybyk7CiAgICAgICAgICAgICAgICAgIGF3YWl0IE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRlbWFwKGlkLCBwcm8pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnByb2R1Y3RoYSArICIgIiArIGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgZmRhOiBmZGEsCiAgICAgICAgICAgICAgICAgICAgICBjbmNubTogZGF0YS5jbmNubSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICAgICAgICAgIGxjbm5vOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdGhhOiBkYXRhLnByb2R1Y3RoYSwKICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICBsaWNlbjogZGF0YS5saWNlbiwKICAgICAgICAgICAgICAgICAgICAgIEFkZHI6IGRhdGEuQWRkciwKICAgICAgICAgICAgICAgICAgICAgIE5ld2NvZGU6IGRhdGEuTmV3Y29kZSwKICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEudG9rZW4sCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jaGVjay5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgbWFwZmRhOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgY25jbm06IGRhdGEuY25jbm0sCiAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICBmZGFfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiByZXMuZGF0YS5tYXBuYW1lc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgdHlwZXBybzogZGF0YS50eXBlcHJvLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEuY2F0ZWdvcnksCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvcmNhdCA9IHJlcy5kYXRhLmNvbG9yY2F0OwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JuYW1lID0gcmVzLmRhdGEuY29sb3JuYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdCk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9jaGVjayk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mZGEpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyB0aGlzLnN0YXR1cyA9IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcm9kdWN0LnB1c2goewogICAgICAgICAgbmFtZTogIi0iLAogICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgZmRhOiB0aGlzLmZkYSwKICAgICAgICAgIGNuY25tOiAiLSIsCiAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICBsY25ubzogIi0iLAogICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgIGxpY2VuOiAiLSIsCiAgICAgICAgICBBZGRyOiAiLSIsCiAgICAgICAgICBOZXdjb2RlOiAiLSIsCiAgICAgICAgICBzdGF0dXM6ICItIiwKICAgICAgICAgIHRva2VuOiAiIiwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByb2NoZWNrLnB1c2goewogICAgICAgICAgZmRhOiB0aGlzLmZkYSwKICAgICAgICAgIG1hcGZkYTogIi0iLAogICAgICAgICAgY25jbm06ICItIiwKICAgICAgICAgIHByb2R1Y3RoYTogIi0iLAogICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICBuYW1lOiAiLSIsCiAgICAgICAgICBwcm9kdWN0X3N0YXR1czogMCwKICAgICAgICAgIGNhdF9zdGF0dXM6IDAsCiAgICAgICAgICBmZGFfc3RhdHVzOiAwLAogICAgICAgICAgbmFtZV9zdGF0dXM6IDAsCiAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICB0eXBlOiAiLSIsCiAgICAgICAgfSk7CgogICAgICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQogICAgICB9CiAgICB9LAogICAgZ2V0ZmRhKGNvbnRlbnQpewogICAgICAgIHZhciB0dCA9IGNvbnRlbnQuc3BsaXQoJyAnKQoKICAgIC8vIGNvbnNvbGUubG9nKHR0KTsKICAgIHZhciBhcnIgPSBbXQogICAgZm9yIChsZXQgbCA9IDA7IGwgPCB0dC5sZW5ndGg7IGwrKykgewogICAgICB2YXIgZmluZGZkYSA9IHR0W2xdLnJlcGxhY2VBbGwoJy0nLCAnJyk7CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIuKAkyIsICIiKTsKICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgiLiIsICIiKTsKICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoL1teXGQuLV0vZywgJycpOwogICAgLy8gY29uc29sZS5sb2coZmluZGZkYSk7CiAgICBpZiAoZmluZGZkYSkgewogICAgICBpZiAoZmluZGZkYS5sZW5ndGggPT0gMTMpIHsKICAgICAgYXJyLnB1c2goZmluZGZkYSkKICAgICAgfQogICAgfQogICAgICAKICAgIH0KICAgIGNvbnNvbGUubG9nKGFycik7CiAgICByZXR1cm4gYXJyOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIHZhciBmID0gdGhpcy5maW5kZmRhKCfguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLuC5gOC4peC4guC4iOC4lOC5geC4iOC5ieC4hyAxMy0xLTEtNzU2Mi0yLTAwMDYnKQogICAgLy8gdmFyIHRleHQgPSBbIuC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIiwi4Lit4LiiLiJdOwogICAgLy8gdmFyIHNlbiA9ICfguK3guKIuMTQtMS0wMjY2Mi0yLTAwMjEg4Lit4LiiLiAxMy0xLTEtNzU2Mi0yLTAwMDYnCiAgICAvLyB2YXIgbCA9IHNlbi5zcGxpdCgnICcpCiAgICAvLyBjb25zb2xlLmxvZyhsKTsKICAgIC8vIHZhciBmID0gdGhpcy5maW5kZmRhKHNlbikKICAgIC8vIHZhciB0ZXh0ID0gWyLguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiIsIuC4reC4oi4iXTsKICAgIC8vICAgLy8gdmFyIGVuZCA9IFsnJ10KICAgIC8vICAgdmFyIGZpbmRmZGEgPSBzZW47CiAgICAvLyAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgLy8gICAgIGNvbnNvbGUubG9nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSk7CiAgICAgICAgCiAgICAvLyAgICAgY29uc29sZS5sb2codGhpcy5nZXRBbGxJbmRleGVzKGwsdGV4dFt0XSkpOwogICAgLy8gICB9CiAgICAvLyBjb25zb2xlLmxvZyhmKTsKLy8gICAgIHZhciBiZXN0ID0gewovLyAgICAgImlkIjogNjcsCi8vICAgICAic2VudGVuY2UiOiB7Ci8vICAgICAgICAgImxlbmd0aCI6IDIsCi8vICAgICAgICAgImFsbGNvdW50IjogMTAwLAovLyAgICAgICAgICJydWxlIjogWwovLyAgICAgICAgICAgICA4ODk5LAovLyAgICAgICAgICAgICA1NwovLyAgICAgICAgIF0sCi8vICAgICAgICAgIm5hbWUiOiBbCi8vICAgICAgICAgICAgICLguITguKfguJrguITguLjguKEiLAovLyAgICAgICAgICAgICAi4LiZ4LmJ4Liz4Lir4LiZ4Lix4LiBIgovLyAgICAgICAgIF0sCi8vICAgICAgICAgIm1hcF9pZCI6IDc1Ci8vICAgICB9Ci8vIH0KLy8gICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRiZXN0cnVsZWJhc2VkKGJlc3QpLnRoZW4oCi8vICAgICAgICAgICAgICAgICAgICAgIChyZXMpID0+IHsKLy8gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKLy8gICAgICAgICAgICAgICAgICAgICB9KTsKICAgIC8vIHZhciB0ZXh0ID0gJ+C4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIDEzLTEtMTM0NjUtNS0wMDUyIOC4iOC4s+C4meC4p+C4meC4quC4tOC4meC4hOC5ieC4siA0MTUg4Liq4LmI4LiH4LiI4Liy4LiBJwogICAgLy8gY29uc29sZS5sb2codGhpcy5maW5kZmRhKHRleHQpKTsKICAgIC8vIHRoaXMuZGF0YS51cmwgPQogICAgLy8gICAiaHR0cHM6Ly9zaG9wZWUuY28udGgvJUUyJTk5JUE2JUVGJUI4JThGJUUwJUI5JTgyJUUwJUI4JTg5JUUwJUI4JUExJUUwJUI5JTgzJUUwJUI4JUFCJUUwJUI4JUExJUUwJUI5JTg4LSVFMCVCOCU4MiVFMCVCOCVBRCVFMCVCOCU4NyVFMCVCOSU4MSVFMCVCOCU5NyVFMCVCOSU4OSVFMiU5OSVBNiVFRiVCOCU4Ri0lRTAlQjglODIlRTAlQjglQjIlRTAlQjglQTIlRTAlQjglOTQlRTAlQjglQjUlRTAlQjglQTElRTAlQjglQjIlRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGLSVFMCVCOCVBNSVFMCVCOCVCNCVFMCVCOSU4MiVFMCVCOCU4QiVFMCVCOSU4OC0lRTAlQjglOUUlRTAlQjglQTUlRTAlQjglQjElRTAlQjglQUEtJUUyJTgwJThCLWNvZmZlZS1saXNob3UtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JTg0JUUwJUI4JUE3JUUwJUI4JTlBJUUwJUI4JTg0JUUwJUI4JUI4JUUwJUI4JUExJUUwJUI4JTk5JUUwJUI5JTg5JUUwJUI4JUIzJUUwJUI4JUFCJUUwJUI4JTk5JUUwJUI4JUIxJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCU4NCVFMCVCOCVCOCVFMCVCOCVBMSVFMCVCOCVBQiVFMCVCOCVCNCVFMCVCOCVBNy0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglQTUlRTAlQjglOTQlRTAlQjglOTklRTAlQjklODklRTAlQjglQjMlRTAlQjglQUIlRTAlQjglOTklRTAlQjglQjElRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JUE1JUUwJUI4JTk0JUUwJUI4JTg0JUUwJUI4JUE3JUUwJUI4JUIyJUUwJUI4JUExJUUwJUI4JUFEJUUwJUI5JTg5JUUwJUI4JUE3JUUwJUI4JTk5IjsKICAgIC8vIHRoaXMuZGF0YS5jb250ZW50ID0KICAgIC8vICAgIu+4j+C4luC5ieC4suC5gOC4m+C5h+C4meC4peC4ueC4geC4hOC5ieC4suC4nuC4tOC4oeC5geC4peC5ieC4pyDguJTguLnguYHguKXguIjguJnguJnguYnguLPguKvguJnguLHguIHguKXguJTguYDguKXguKLguITguYjguLAg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4Liq4Li04LiZ4LiE4LmJ4Liy4LmB4Lil4LmJ4LinIOC4l+C4seC4geC5geC4iuC4l+C4oeC4suC4hOC4uOC4ouC4geC4seC4meC5hOC4lOC5ieC5gOC4peC4ouC4hOC5iOC4sCI7CiAgICAvLyAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgnLWkuJykKICAgIC8vIHZhciBjb250ZW50ID0gdGhpcy5kYXRhLmNvbnRlbnQucmVwbGFjZUFsbCgKICAgIC8vICAgLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywKICAgIC8vICAgIiIKICAgIC8vICk7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKAogICAgLy8gICAvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywKICAgIC8vICAgIiIKICAgIC8vICk7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIC8vIC8vIGNvbnNvbGUubG9nKExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSsnL3dvcmR0b2tlbmRlc2M/dGV4dD0nICsgY29udGVudCk7CiAgICAvLyAvLyBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpKycvd29yZHRva2VuZGVzYz90ZXh0PScrY29udGVudCkudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAvLyAvLyAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vIC8vIH0pCiAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZD90ZXh0PSIgKyBjb250ZW50KTsKICAgIC8vIHZhciBjb24gPSB7CiAgICAvLyAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAvLyB9OwogICAgLy8gYXhpb3MKICAgIC8vICAgLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iICsgY29udGVudCwgY29uKQogICAgLy8gICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAvLyAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gICAgIC8vICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgIC8vICAgICAvLyAgICAgICAgIHZhciBhZHZlcnRpc2UgPSB7CiAgICAvLyAgICAgLy8gICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6MSwKICAgIC8vICAgICAvLyAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOnJlcy5kYXRhW3JdLmtleXdvcmRfZGljdF9pZCwKICAgIC8vICAgICAvLyAgICAgICAgICAgZGljdF9pZDpyZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgLy8gICAgIC8vICAgICAgICAgICBkaWN0X25hbWU6cmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgLy8gICAgIC8vICAgICAgICAgICBzZW46cmVzLmRhdGFbcl0uc2VuLAogICAgLy8gICAgIC8vICAgICAgICAgICBzZW50ZW50OnJlcy5kYXRhW3JdLnNlbnRlbnQsCiAgICAvLyAgICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgLy8gICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oKHJlcyk9PnsKICAgIC8vICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAvLyAgICAgICB9CiAgICAvLyAgIH0pOwogICAgLy8gLy8gIGNvbnNvbGUubG9nKHVybCk7CiAgICAvLyAvLyAgICAgdmFyIHNlbGVjdHBybyA9IHsKICAgIC8vIC8vICAgICAgIHVybDp1cmxbMF0KICAgIC8vIC8vICAgICAgfQogICAgLy8gLy8gICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RfdG9rZW4oc2VsZWN0cHJvKS50aGVuKChyZXMpPT57CiAgICAvLyAvLyAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAvLyB2YXIgbGlzdCA9IHJlcy5kYXRhCiAgICAvLyAvLyB0aGlzLnRva2VuZGF0YShsaXN0KQogICAgLy8gLy8gZm9yIChsZXQgbCA9IDA7IGwgPCBsaXN0LmtleXdvcmQubGVuZ3RoOyBsKyspIHsKICAgIC8vIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5saXN0LmtleXdvcmRbbF0ubWFwKTsKICAgIC8vIC8vICAgLy8gZm9yIChsZXQgbSA9IDA7IG0gPCB0aGlzLmxpc3Qua2V5d29yZFtsXS5sZW5ndGg7IG0rKykgewogICAgLy8gLy8gICAgIGlmIChsaXN0LmtleXdvcmRbbF0ubWFwKSB7CiAgICAvLyAvLyAgICAgICB2YXIgbWFwID0gewogICAgLy8gLy8gICAgIHVybDpKU09OLnN0cmluZ2lmeShsaXN0LmtleXdvcmRbbF0ubWFwKQogICAgLy8gLy8gICAgICB9CiAgICAvLyAvLyAgICAgLy8gIGNvbnNvbGUubG9nKG1hcCk7CiAgICAvLyAvLyAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0bWFwcHJvZHVjdChtYXApLnRoZW4oKHJlcyk9PnsKICAgIC8vIC8vICAgICAgIGxpc3Qua2V5d29yZFtsXS5ydWxlYmFzZSA9IHJlcy5kYXRhCiAgICAvLyAvLyAgICAgICBpZiAobCsxID09IGxpc3Qua2V5d29yZC5sZW5ndGgpIHsKICAgIC8vIC8vICAgICAgICAgdGhpcy5jb21wYXJlKGxpc3QpCiAgICAvLyAvLyAgICAgICB9CiAgICAvLyAvLyAgICAgIH0pOwogICAgLy8gLy8gICAgIH0KICAgIC8vIC8vICAgfQogICAgLy8gLy8gfQogICAgLy8gLy8gY29uc29sZS5sb2codGhpcy5saXN0KTsKICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZTsKICAgIC8vIC8vICB9KQogIH0sCn07Cg=="},{"version":3,"sources":["producttoken.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"producttoken.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div>\n        <!-- <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">URL</label>\n          <textarea\n            v-model=\"data.url\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"3\"\n          ></textarea>\n        </div> -->\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">Content</label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 btn btn-success\">\n          </button\n        >&nbsp;\n        <button @click=\"clear()\" type=\"submit\" class=\"mb-3 btn btn-danger\">\n          \n        </button>\n      </div>\n      <table class=\"table table-bordered\" v-if=\"status\">\n        <thead>\n          <tr>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n               1\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              .\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n          </tr>\n        </thead>\n        <!-- {{procheck}} -->\n        <tbody>\n          <tr v-for=\"(p,o) in procheck\" :key=\"o\">\n            <td :style=\"colorfda\"></td>\n            <td :style=\"colorfda\">{{ p.mapfda }}</td>\n            <td :style=\"colorfda\">{{ p.fda }}</td>\n            <td :style=\"colorfda\">{{ p.cncnm }}</td>\n            <td\n              v-if=\"\n                p.cat_status &&\n                p.name_status &&\n                p.fda_status == 1\n              \"\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #a3e9a4;\n              \"\n            >\n              <span></span>\n            </td>\n            <td\n              v-else\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #f9bdbb;\n              \"\n            >\n              <span></span>\n            </td>\n          </tr>\n          <tr v-for=\"(pp,oo) in procheck\" :key=\"oo+10\">\n            <td :style=\"colorcat\"></td>\n            <td :style=\"colorcat\">{{ pp.typepro }}</td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.typepro\">{{ pp.type }}</span\n              ><span v-else>-</span>\n            </td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.cat_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n          <tr v-for=\"(ppp,ooo) in procheck\" :key=\"ooo+20\">\n            <td :style=\"colorname\"></td>\n            <td :style=\"colorname\">\n              {{ ppp.productha }}<br />{{ ppp.produceng }}\n            </td>\n            <td :style=\"colorname\"><span v-html=\"ppp.name\"></span></td>\n            <td :style=\"colorname\">\n              <span v-if=\"ppp.name_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"status\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n               2\n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: top\">\n              \n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              <br>\n              <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div>\n            </th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\"></td>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\"></th> -->\n            <!-- {{list}} -->\n            \n            <td :style=\"colorkey\" v-if=\"list.keyword != 1\">\n             \n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentence_rulebase\"></span><br /><br />\n                  <span v-html=\"getsentent(k.rule_based_name)\"></span>\n                  <!-- <span v-for=\"(s, idx) in k.rule_based_name\" :key=\"idx\">{{\n                    s\n                  }}</span> -->\n                  <br /><br />\n                  <!-- <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span> -->\n                  <span></span>\n                  <span v-if=\"k.count_rulebased\"\n                    > {{ getpercentage(k) }}%</span\n                  ><br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n                </td>\n                <td>\n                  <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span\n                  >\n                  \n                  <!-- <span v-if=\"answer == 1\"></span\n                  ><span v-if=\"answer == 9\"></span\n                  ><span v-if=\"answer == 0\"></span> -->\n                </td>\n\n                <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td>\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <!-- <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n              <tr>\n                \n                <br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table mt-3\" v-if=\"status\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">FDA</th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">.</th>\n            <!-- <th scope=\"col\"></th> -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(l, i) in product\" :key=\"i\">\n            <td :style=\"l.bg\">{{ l.name }}</td>\n            <td :style=\"l.bg\">{{ l.detail }}</td>\n            <!-- <td :style=\"l.bg\">\n              <div class=\"row\">\n          <div class=\"col-md-2\" v-for=\"(im ,i) in imagelists\" :key=\"i\">\n            <img :src=\"im\" width=\"100%\"/>\n          </div>\n        </div>\n            </td> -->\n            <td :style=\"l.bg\" style=\"width: 300px\">\n              <div>\n                 : {{ l.fda }}<br />\n                <!-- : <span v-html=\"matchname\"></span> -->\n                <!-- : {{l.productha}} -->\n              </div>\n            </td>\n            <td :style=\"l.bg\">{{ cut(l.token) }}</td>\n            <td\n              style=\"background-color: #bdedff\"\n              v-if=\"l.status == 1 || l.status == 3\"\n            >\n              <p class=\"card-text\"> : {{ l.cncnm || \"\" }}</p>\n              <p class=\"card-text\">\n                 :<span> {{ l.typepro }}</span>\n              </p>\n              <p class=\"card-text\">\n                / : <span> {{ l.lcnno }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (TH) : <span> {{ l.productha }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (EN) : <span> {{ l.produceng }}</span>\n              </p>\n              <p class=\"card-text\"> : {{ l.licen }}</p>\n              <p class=\"card-text\"> : {{ l.Addr }}</p>\n              <p class=\"card-text\">Newcode : {{ l.Newcode }}</p>\n            </td>\n            <td :style=\"l.bg\" v-else></td>\n            <!-- <td :style=\"l.bg\">\n            <i class=\"fa fa-circle\" :style=\"l.icon\" aria-hidden=\"true\"></i>\n          </td> -->\n          </tr>\n        </tbody>\n      </table>\n      <clip-loader :loading=\"loading\" :color=\"color\" :size=\"size\"></clip-loader>\n      <!-- Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"AddScopusToken\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ title }}</h5>\n            </div>\n            <div class=\"modal-body\">\n              <form>\n                <div class=\"card-body mt-3\">\n                  <div class=\"form-group mt-3\">\n                    <label></label>\n                    <input\n                      v-model=\"key.name\"\n                      type=\"text\"\n                      min=\"1\"\n                      class=\"form-control form-control-sm\"\n                    />\n                  </div>\n                </div>\n              </form>\n            </div>\n            <div class=\"modal-footer mt-3\">\n              <button type=\"button\" class=\"btn btn-success\" @click=\"save()\">\n                \n              </button>\n              <button\n                id=\"closedcategory\"\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\nimport KeywordService from \"../services/KeywordService\";\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue'\nimport FDATypesService from \"../services/FDATypesService\";\n\nexport default {\n  name: \"App\",\n  components: {\n    ClipLoader\n  },\n  data() {\n    return {\n      color: '#5bc0de',\n      size: '50px',\n      margin: '2px',\n      radius: '2px',\n      loading:false,\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      id: \"\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token: 0,\n      title: \" keyword\",\n      key: {},\n      fda: \"\",\n      product: [],\n      procheck: [],\n      answer:'',\n      typeId:0\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  methods: {\n    getsentent(data){\n      data = JSON.parse(data)\n      // var text = ''\n      var arr =[]\n      for (let d = 0; d < data.length; d++) {\n        // text += data[d]\n        arr.push(data[d])\n      }\n      // console.log(arr);\n      var arrtxt = String(arr)\n      // console.log(arrtxt);\n      arrtxt = arrtxt.replaceAll(\",\",\"<span style='color:red;'> | </span>\")\n      // console.log(arrtxt);\nreturn arrtxt\n    },\n    getstatuscheck(t,f){\n      // console.log(t,f);\n      var text = ''\nif (t == f) {\n  text = ''\n}else if (t > f) {\n  text = ''\n}else if (f > t) {\n  text = ''\n}\nreturn text\n    },\n    clear() {\n      this.data = {};\n      this.product = [];\n      this.procheck = [];\n      this.status = false;\n    },\n    cut(data) {\n      // console.log(data);\n      var mapname = ''\n      if (data != '-' && data != '') {\n        data = data.filter((letter) => letter !== \" \");\n      mapname = data.toString();\n\n      mapname = mapname.replaceAll(\",\", \" | \");\n      }else{\n        mapname = data\n      }\n      \n      return mapname;\n    },\n    save() {\n      //console.log(this.key);\n      if (this.key.name == null || this.key.name == \"\") {\n        alert(\"\");\n      } else {\n        var prodata = {\n          name: this.key.name,\n          status: 1,\n        };\n        //console.log(prodata);\n        KeywordService.createkeyword(prodata).then((res) => {\n          //console.log(res.data);\n          if (res.data.err == 1062) {\n            alert(\"\");\n          } else {\n            DictService.createdict(prodata).then(() => {\n              //console.log(res.data );\n              // RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n\n              document.getElementById(\"closedcategory\").click();\n              alert(\"\");\n              // })\n            });\n          }\n        });\n      }\n    },\n    getpercentage(data) {\n      // var dict = JSON.parse(data.dict_id)\n      // var rule_based_id = JSON.parse(data.rule_based_id)\n      // var re = (100 * data.count_rulebased)/ (rule_based_id.length)\n      return data.count_rulebased;\n    },\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    async savetorule_based(data, answer) {\n      this.answer = answer\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      // console.log(data);\n      var datas = {\n        name :data.rule_based_id,\n        typeId:this.typeId,\n        advertiseId:data.id\n      }\n      \n      // if (!data.mapId) {\n        await MapRuleBasedService.checkintb(data.dict_id).then(async (check) => {\n          // console.log(check.data);\n          var statusfalse = 0\n          var statustrue = 0\n          var weight = 0\n          var advertise_id = []\n          if (check.data) {\n            advertise_id = JSON.parse(check.data.map_advertise)\n          statusfalse = check.data.statusfalse\n          statustrue = check.data.statustrue\n          datas.rulebasedId = check.data.id\n          }\n          if (answer == 1) {\n            statustrue = statustrue+ parseInt(1)\n          }\n          if (answer == 9) {\n            statusfalse = statusfalse + parseInt(1)\n          }\n          // console.log(advertise_id);\n          advertise_id.push(data.id)\n          // console.log(advertise_id);\n          weight = statusfalse+statustrue\n          var maprule = {\n        keyword_id: 1,\n        advertise_id: data.id,\n        status: 9,\n        answer: answer,\n        user: this.currentUser.id,\n        map_dict: JSON.parse(data.dict_id),\n        statusfalse:statusfalse,\n        statustrue:statustrue,\n        weight:weight,\n        map_advertise: advertise_id,\n      };\n          if (check.data) {\n            await MapRuleBasedService.updateanswer(check.data.id, maprule).then(\n          async () => {\n            // console.log(res.data);\n           \n     await KeywordService.updateweight(1,datas).then(async (res)=>{\n            // console.log(res);\n            await this.getdetail();\n            alert(\"\");\n          })\n          }\n        );\n          } else {\n            MapRuleBasedService.createmap_rule_based(maprule).then(\n              async (res) => {\n                // console.log(res.data);\n                var map_id = res.data.id;\n                datas.rulebasedId = map_id\n                var sendata = JSON.parse(data.dict_id);\n                // console.log(sendata);\n                // console.log(dict_name);\n                for (let d = 0; d < sendata.length; d++) {\n                  // console.log(sendata[d]);\n                  if (sendata[d]) {\n                    await DictService.getdict(sendata[d]).then(async (sen) => {\n                    // console.log(sen.data);\n                    var rule = {\n                      map_rule_based_id: map_id,\n                      dict_id: sendata[d],\n                      dict_name: sen.data.name,\n                      no: d + 1,\n                    };\n                    // console.log(rule);\n                    await RuleBasedService.createrule_based(rule).then(async () => {\n                      if (d + 1 == sendata.length) {\n                        await KeywordService.updateweight(1,datas).then(async (res)=>{\n            console.log(res);\n            await this.getdetail();\n            alert(\"\");\n          })\n                      }\n                    });\n                  });\n                  }\n                }\n              }\n            );\n          }\n          \n          \n        });\n     \n        // } else {\n      //   MapRuleBasedService.deletemap_rule_based(data.mapId, maprule).then(\n      //     async () => {\n      //       // console.log(res.data);\n      //       this.getdetail();\n      //       alert(\"\");\n      //     }\n      //   );\n      // }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = '  Shopee     Bluebird() Storage Condition Normal  ,     ,       12    /. 30-1-26764-5-0051  17901           1000  60    1  5   20   93   2  21   50   90   3  51   100   87   4  100  .....................  85  Vitamin C Plus Dietary Supplement Product Bluebird Brand      1   (Active Ingredient) VITAMIN C (100%) - 60  CITRUS BIOFLAVONOID POWDER - 630  BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (/) (MALPIGHIA GLABRA L.)  - 60  ROSEHIP POWDER () (ROSA CANINA L.)  - 60  Rutin - 30  INDIAN GOOSEBERRY POWDER () (PHYLLANTHUS EMBLICA L. )  - 60   (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5  TITANIUM DIOXIDE 171 -1.95    1-2    .. 30-1-26764-5-0051       5                    12.00         _/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    find(){\nvar type = this.findtypeproduct(this.data.content)\nconsole.log(type);\nvar split = type.split(\"\\n\")\nconsole.log(split[3]);\n      var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\nconsole.log(this.finddescription(content));\n    },\n    findtypeproduct(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    getdetail() {\n      // var url = this.data.url.split(\"-i.\");\n      // var url = this.data.url.split(\"-i.\");\n      // this.data.url = url[0];\n      // console.log(this.product_token);\n      var selectpro = {\n        // url: this.data.url,\n        id: this.product_token,\n      };\n      MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n        // console.log(res.data);\n        // var best = this.getMax(res.data.keyword,'count_rulebased')\n        //console.log(best);\n        this.list = res.data;\n        this.status = true;\n        this.loading = false\n        // var data = {\n        //   advertise_id: res.data.keyword[0].product_token_id,\n        // };\n        // MapRuleBasedService.updateweight(\n        //   res.data.keyword[0].map_rule_based_id,\n        //   data\n        // ).then(() => {});\n        // this.list.keyword = [best]\n        // this.status = true\n      });\n    },\n    async search() {\n      this.loading = true\n      // var url = this.data.url.replaceAll(\".\",'');\n      // url = url.split(\"-i\");\n      // this.data.url = url[0];\n      // console.log(this.data.url);\n      this.procheck = [];\n      this.product = [];\n      this.product_token = 0;\n      var con = {};\n      await this.loaddict();\n      this.status = false;\n      // if (this.data.url == null || this.data.url == \"\") {\n      //   alert(\" URL\");\n      // } else \n      if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      } else {\n\n        var findtype = this.findtypeproduct(this.data.content)\n// console.log(type);\nvar split = findtype.split(\"\\n\")\nvar type = split[3]\n// console.log(type);\nawait FDATypesService.getfdatypes(type).then(async (res)=>{\n  // console.log(res.data);\n  if (res.data.length > 0) {\n    this.typeId = res.data[0].id\n  }else{\n    var name = {\n      name : type\n    }\n    await FDATypesService.createfdatype(name).then((res)=>{\n      this.typeId = res.data.id\n    });\n  }\n})\n// console.log(this.typeId);\n        var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        // this.fda = await this.findfda(content);\n\nvar desc = this.finddescription(content)\n        this.fda = await this.getfda(content)[0]\n        console.log(this.fda);\n        // var selectpro = {\n        //   url: this.data.url,\n        //   // id: this.currentUser.id,\n        // };\n        // await MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n          // console.log(res.data);\n          // console.log(content);\n          // if (res.data.id) {\n          //   this.product_token = res.data.id;\n          // }\n          // console.log(this.product_token);\n          // console.log(LinkService.getpythonlink()+'/worktokendesc?text=' + content);\n          con = {\n            content: desc,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // console.log(res.data);\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: desc,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 1,\n              };\n              // console.log(des);\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    await this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: desc,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        // console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then(async (pro) => {\n                                    // console.log(pro.data);\n                                   await this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          await this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      await this.checkfda(content, this.product_token);\n                      con = {\n                        content: desc,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n              }\n            });\n        // });\n      }\n    },\n    getMax(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getMaxlength(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getAllMaxArray(arr, value) {\n      var array = [];\n      arr.map(function (num, idx) {\n        if (num.allcount == value) {\n          array.push(arr[idx]);\n        }\n      });\n      return array;\n    },\n    async tokendata(list) {\n      //console.log(list);\n      if (list.keyword.length > 0) {\n        for (let l = 0; l < list.keyword.length; l++) {\n          //console.log(list.keyword[l].keyword_dict_id);\n          if (list.keyword[l].keyword_dict_id) {\n            var map = {\n              id: list.keyword[l].id,\n              url: list.keyword[l].keyword_dict_id,\n              keyword_id: list.keyword[l].dict_id,\n            };\n            // console.log(map);\n            await MapRuleBasedService.getmapproduct(map).then(async (res) => {\n              // console.log(res.data);\n              var maxvalue = this.getMax(res.data, \"allcount\");\n              // console.log(maxvalue.allcount);\n              var i = this.getAllMaxArray(res.data, maxvalue.allcount);\n              // console.log(i);\n              var bestdata = this.getMax(i, \"length\");\n              // console.log(bestdata);\n              // getAllIndexes\n              // console.log(bestdata);\n              var best = {\n                id: list.keyword[l].id,\n                sentence: bestdata,\n              };\n              // console.log(best);\n              var rule_based_name = bestdata.name.toString();\n              rule_based_name = rule_based_name.replaceAll(\",\", \"\");\n              // console.log(rule_based_name);\n              await axios\n                .get(\n                  LinkService.getpythonlink() +\n                    \"/loaddict?word=\" +\n                    rule_based_name\n                )\n                .then(async () => {\n                  await MapRuleBasedService.getbestrulebased(best).then(\n                    async (res) => {\n                      // console.log(res.data);\n\n                      var rulebased = {\n                        count_rulebased: res.data.count,\n                        sentence_rulebase: res.data.sentence,\n                        rule_based_id: res.data.rule_based_id,\n                        rule_based_name: res.data.rule_based_name,\n                        map_rule_based_id: res.data.map_id,\n                      };\n                      // console.log(rulebased);\n                      // console.log(list.keyword[l].id);\n                      await MapRuleBasedService.updaterulebased(\n                        list.keyword[l].id,\n                        rulebased\n                      ).then(async () => {\n                        if (l + 1 == list.keyword.length) {\n                          await this.getdetail();\n                        }\n                      });\n                    }\n                  );\n                });\n              // list.keyword[l].rulebase = res.data;\n              // if (l + 1 == list.keyword.length) {\n              //   this.compare(list);\n              // }\n            });\n          }\n\n          // }\n        }\n      } else {\n        await this.getdetail();\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          // this.status = true;\n        }\n      }\n    },\n    getAllIndexes(arr, val) {\n      var indexes = [],\n        i = -1;\n      while ((i = arr.indexOf(val, i + 1)) != -1) {\n        indexes.push(i);\n      }\n      return indexes;\n    },\n    findfda(data) {\n      var text = [\"/.\",\".\"];\n      // var end = ['']\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        findfda = findfda.substring(findfda.indexOf(text[t]), data.length);\n        var endindex = this.getAllIndexes(findfda, \" \");\n        findfda = findfda.substring(findfda.indexOf(text[t]), endindex[1]);\n      }\n      // console.log(findfda);\n\n      for (let v = 0; v < text.length; v++) {\n      findfda = findfda.replaceAll(text[v], \"\");\n      }\n      findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n      findfda = findfda.replaceAll(\"-\", \"\");\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\" \", \"\");\n      // console.log(findfda);\n      // var regex = /\\d+/g;\n      // var matches = findfda.match(regex);  // creates array from matches\n      // console.log(matches[0]);\n      return findfda;\n    },\n    async checkfda(content, id) {\n      // console.log(this.fda);\n      if (this.fda) {\n        var fda = this.fda;\n        var product_status = 0;\n        const url = \"https://tawaiforhealth.org/api/oryor/check-product\";\n        const data = { number_src: fda };\n        // console.log(data);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n          },\n          body: JSON.stringify(data),\n        };\n\n        await fetch(url, options)\n          .then((response) => response.json())\n          .then(async (data) => {\n            // console.log(data);\n            if (data.message || data.length > 1) {\n              this.product.push({\n                name: \"-\",\n                detail: content,\n                fda: this.fda,\n                cncnm: \"-\",\n                typepro: \"-\",\n                lcnno: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                licen: \"-\",\n                Addr: \"-\",\n                Newcode: \"-\",\n                status: \"-\",\n                token: \"-\",\n              });\n              this.procheck.push({\n                fda: this.fda,\n                mapfda: \"-\",\n                cncnm: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                name: \"-\",\n                product_status: 0,\n                cat_status: 0,\n                fda_status: 0,\n                name_status: 0,\n                typepro: \"-\",\n                type: \"-\",\n              });\n\n              // this.status = true\n            } else {\n              // console.log(data);\n              // console.log(data.cncnm.includes(\"\"))\n              if (data.cncnm.includes(\"\")) {\n                product_status = 1;\n                this.colorfda = \"background-color:#a3e9a4\";\n              } else {\n                product_status = 3;\n              }\n              // console.log(this.colorfda);\n              var con = {\n                fda: fda,\n                productha: data.productha,\n                produceng: data.produceng,\n                typepro: data.typepro,\n                content: content,\n              };\n              await axios\n                .post(LinkService.getpythonlink() + \"/checkfda\", con)\n                .then(async (res) => {\n                  // console.log(res.data);\n                  var pro = {\n                    name: res.data.name,\n                    fda: fda,\n                    product_status: product_status,\n                    cat_status: res.data.mapcatstatus,\n                    fda_status: product_status,\n                    name_status: res.data.mapnamestatus,\n                  };\n                  // console.log(pro);\n                  await MapRuleBasedService.updatemap(id, pro).then(() => {\n                    // console.log(res.data);\n                    this.product.push({\n                      name: data.productha + \" \" + data.produceng,\n                      detail: content,\n                      fda: fda,\n                      cncnm: data.cncnm,\n                      typepro: data.typepro,\n                      lcnno: data.lcnno,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      licen: data.licen,\n                      Addr: data.Addr,\n                      Newcode: data.Newcode,\n                      status: product_status,\n                      token: res.data.token,\n                    });\n                    this.procheck.push({\n                      fda: fda,\n                      mapfda: data.lcnno,\n                      cncnm: data.cncnm,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      name: res.data.name,\n                      product_status: product_status,\n                      cat_status: res.data.mapcatstatus,\n                      fda_status: product_status,\n                      name_status: res.data.mapnamestatus,\n                      typepro: data.typepro,\n                      type: res.data.category,\n                    });\n                    this.colorcat = res.data.colorcat;\n                    this.colorname = res.data.colorname;\n                    // console.log(this.product);\n                    // console.log(this.procheck);\n                    // console.log(this.fda);\n                  });\n                });\n\n              // this.status = true\n            }\n          });\n      } else {\n        this.product.push({\n          name: \"-\",\n          detail: content,\n          fda: this.fda,\n          cncnm: \"-\",\n          typepro: \"-\",\n          lcnno: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          licen: \"-\",\n          Addr: \"-\",\n          Newcode: \"-\",\n          status: \"-\",\n          token: \"\",\n        });\n        this.procheck.push({\n          fda: this.fda,\n          mapfda: \"-\",\n          cncnm: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          name: \"-\",\n          product_status: 0,\n          cat_status: 0,\n          fda_status: 0,\n          name_status: 0,\n          typepro: \"-\",\n          type: \"-\",\n        });\n\n        // this.status = true\n      }\n    },\n    getfda(content){\n        var tt = content.split(' ')\n\n    // console.log(tt);\n    var arr = []\n    for (let l = 0; l < tt.length; l++) {\n      var findfda = tt[l].replaceAll('-', '');\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\".\", \"\");\n    findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n    // console.log(findfda);\n    if (findfda) {\n      if (findfda.length == 13) {\n      arr.push(findfda)\n      }\n    }\n      \n    }\n    console.log(arr);\n    return arr;\n    }\n  },\n  mounted() {\n    // var f = this.findfda('/. 13-1-1-7562-2-0006')\n    // var text = [\"/.\",\".\"];\n    // var sen = '.14-1-02662-2-0021 . 13-1-1-7562-2-0006'\n    // var l = sen.split(' ')\n    // console.log(l);\n    // var f = this.findfda(sen)\n    // var text = [\"/.\",\".\"];\n    //   // var end = ['']\n    //   var findfda = sen;\n    //   for (let t = 0; t < text.length; t++) {\n    //     console.log(findfda.indexOf(text[t]));\n        \n    //     console.log(this.getAllIndexes(l,text[t]));\n    //   }\n    // console.log(f);\n//     var best = {\n//     \"id\": 67,\n//     \"sentence\": {\n//         \"length\": 2,\n//         \"allcount\": 100,\n//         \"rule\": [\n//             8899,\n//             57\n//         ],\n//         \"name\": [\n//             \"\",\n//             \"\"\n//         ],\n//         \"map_id\": 75\n//     }\n// }\n//                   MapRuleBasedService.getbestrulebased(best).then(\n//                      (res) => {\n//                       console.log(res.data);\n//                     });\n    // var text = '/. 13-1-13465-5-0052  415 '\n    // console.log(this.findfda(text));\n    // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"   \";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}