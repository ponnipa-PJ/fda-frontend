{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/Menu.vue?vue&type=style&index=0&id=18fe60e3&scoped=true&lang=css&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/Menu.vue","mtime":1694592239237},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/css-loader/dist/cjs.js","mtime":1687492401554},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1687492401892},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/postcss-loader/src/index.js","mtime":1687492401651},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaDMgewogIG1hcmdpbjogNDBweCAwIDA7Cn0KdWwgewogIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICBwYWRkaW5nOiAwOwp9CmxpIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luOiAwIDEwcHg7Cn0KYSB7CiAgY29sb3I6IGJsYWNrOwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQojYXBwIHsKICBmb250LWZhbWlseTogIk5pcmFtaXQiOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7Cn0K"},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-3 mb-3\">\n      <div class=\"row mt-5\">\n        <div class=\"form-group col-md-6\">\n          <label for=\"exampleFormControlSelect1\">สิทธิ์การใช้งาน</label>\n          <select\n            v-model=\"role_type\"\n            class=\"form-control form-control-sm\"\n            id=\"exampleFormControlSelect1\"\n            @change=\"getarray()\"\n          >\n            <option v-for=\"(s, i) in roles\" v-bind:value=\"s.id\" :key=\"i + 1\">\n              {{ s.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"row mt-3\">\n        <div class=\"col-12\" v-for=\"m in menus\" :key=\"m.menu_id\">\n          <div class=\"form-group\" style=\"text-align: left\">\n            <label>\n              <input\n                type=\"checkbox\"\n                v-model=\"menu_id\"\n                :id=\"m.page\"\n                :value=\"m.id\"\n              />\n              <span> {{ m.name }}</span>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"row mt-3 mb-3\">\n        <div class=\"col-md-12 text-center\">\n          <button\n            class=\"btn btn-success\"\n            style=\"color: white; width: 200px\"\n            @click=\"save()\"\n          >\n            บันทึก\n          </button>\n          &nbsp;\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst customLabels = {\n  first: \"<<\",\n  last: \">>\",\n  previous: \"<\",\n  next: \">\",\n};\n\nimport UserService from \"../services/UserService.js\";\n\nexport default {\n  name: \"Carlist\",\n  components: {\n    // VueHtml2pdf,\n    // ContentToPrint,\n  },\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      list: [],\n      roles: [],\n      license: \"\",\n      role_type: \"\",\n      licenses: [],\n      customLabels,\n      pageOfItems: [],\n      car_id: \"\",\n      menu_id: [],\n      menus: [],\n    };\n  },\n  methods: {\n    save() {\n      UserService.deleteRoleMenu(this.role_type).then(() => {\n        for (let m = 0; m < this.menu_id.length; m++) {\n          var menu = {\n            menu_id: this.menu_id[m],\n            role_id: this.role_type,\n          };\n          // console.log(menu);\n          UserService.createRoleMenu(menu)\n            .then(() => {\n              // console.log(response.data);\n            })\n            .catch((e) => {\n              console.log(e);\n            });\n        }\n        alert('บันทึกสำเร็จ')\n        setTimeout(function () {\n                    location.reload();\n                  }, 500);\n                  window.scrollTo(0, 0);\n      });\n    },\n    onChangePage(pageOfItems) {\n      // update page of items\n      this.pageOfItems = pageOfItems;\n    },\n    getMenu() {\n      UserService.getMenu().then((res) => {\n        // console.log(res.data);\n        this.menus = res.data;\n      });\n    },\n    getarray() {\n      this.menu_id = [];\n      UserService.getMenubyRoleIDAll(this.role_type).then((res) => {\n        if (res.data.menu == null) {\n          this.menu_id = [];\n        } else {\n          this.menu_id = JSON.parse(res.data.menu);\n        }\n        // console.log(res.data.menu);\n      });\n    },\n    getroles() {\n      UserService.getRoles().then((res) => {\n        //console.log(res.data);\n        this.roles = res.data;\n        this.role_type = this.roles[0].id;\n        this.getarray();\n      });\n    },\n    convertdatetothai(datetimes) {\n      if (datetimes) {\n        const date = new Date(datetimes);\n        const result = date.toLocaleDateString(\"th-TH\", {\n          year: \"numeric\",\n          month: \"short\",\n          day: \"numeric\",\n        });\n        return result;\n      } else {\n        return \"-\";\n      }\n    },\n  },\n  mounted() {\n    this.getMenu();\n    this.getroles();\n  },\n  computed: {\n    filteredList() {\n      return this.licenses.filter((post) => {\n        return post.license.toLowerCase().includes(this.license.toLowerCase());\n      });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: black;\n  text-decoration: none;\n}\n#app {\n  font-family: \"Niramit\";\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n</style>\n"]}]}