{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/List.vue?vue&type=style&index=0&id=264bddce&scoped=true&lang=css&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/List.vue","mtime":1677654957535},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/css-loader/dist/cjs.js","mtime":1687492401554},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1687492401892},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/postcss-loader/src/index.js","mtime":1687492401651},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaDMgewogIG1hcmdpbjogNDBweCAwIDA7Cn0KdWwgewogIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICBwYWRkaW5nOiAwOwp9CmxpIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luOiAwIDEwcHg7Cn0KYSB7CiAgY29sb3I6ICM0MmI5ODM7Cn0KLmZvcm0tY2hlY2sgewogICAgICBkaXNwbGF5OiBpbmxpbmU7Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello container mt-5\">\n    <div class=\"row\">\n      <div class=\"col-md-12\" style=\"text-align:center\" v-if=\"registration_status == 'ดำเนินกิจการ'\">โรงงานอุตสาหกรรมดำเนินการอยู่ ณ วันที่ {{ date }} จำนวน {{list.length}} ราย</div>\n      <div class=\"col-md-12\" style=\"text-align:center\" v-else>โรงงานอุตสาหกรรมที่ปิดกิจการ ณ วันที่ {{ date }} จำนวน {{list.length}} ราย</div>\n\n      <div class=\"col-6\">\n        <label for=\"exampleInputEmail1\" class=\"form-label\"\n          >ชื่อผู้ประกอบอุตสาหกรรม</label\n        >\n        <input\n          v-model=\"excise_name\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"exampleInputEmail1\"\n          aria-describedby=\"emailHelp\"\n        />\n      </div>\n      <div class=\"col-6\">\n        <label for=\"exampleInputEmail1\" class=\"form-label\">โดย</label>\n        <input\n          v-model=\"excise_by\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"exampleInputEmail1\"\n          aria-describedby=\"emailHelp\"\n        />\n      </div>\n      <div class=\"col-6\"></div>\n       <div class=\"col-6 mt-3\" style=\"text-align: right\">\n          <div class=\"form-check\">\n            <input\n            v-model=\"registration_status\"\n            @change=\"search()\"\n              class=\"form-check-input\"\n              id=\"true\"\n              value=\"ดำเนินกิจการ\"\n              type=\"radio\"\n              name=\"true\"\n            />\n            <label class=\"form-check-label\" for=\"true\">ดำเนินกิจการ</label>\n          </div>&nbsp;&nbsp;\n           <div class=\"form-check\">\n            <input\n            v-model=\"registration_status\"\n            @change=\"search()\"\n              class=\"form-check-input\"\n              id=\"false\"\n              value=\"ปิดกิจการ\"\n              type=\"radio\"\n              name=\"false\"\n            />\n            <label class=\"form-check-label\" for=\"false\">ปิดกิจการ</label>\n          </div>\n        </div>\n      <div class=\"col-12\" align=\"center\">\n        <button\n          @click=\"search()\"\n          type=\"submit\"\n          class=\"btn btn-primary\"\n          style=\"margin-top: 10px; text-align: right\"\n        >\n          ค้นหา\n        </button>\n      </div>\n    </div>\n    <div class=\"row\">\n      <!-- <div class=\"col-9\"></div>\n      <div class=\"col-3\" align=\"right\">\n         <div class=\"form-group row\">\n    <label for=\"inputEmail3\" class=\"col-sm-6 col-form-label\">Order By</label>\n    <div class=\"col-sm-6\">\n      <select class=\"custom-select\" id=\"inputGroupSelect01\" v-model=\"sortid\"  @change=\"orderby\">\n    <option value=\"0\">อำเภอ</option>\n    <option value=\"1\">ตำบล</option>\n    <option value=\"2\">เลขทะเบียนสรรพสามิต</option>\n  </select>\n    </div>\n  </div>\n      </div> -->\n      <div class=\"col-12 mt-3\">\n        <table class=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th scope=\"col\" class=\"table-secondary\">ลำดับที่</th>\n              <th scope=\"col\" class=\"table-secondary\">เลขทะเบียนสรรพสามิต</th>\n              <th scope=\"col\" class=\"table-secondary\">รหัสโรงอุตสาหกรรม</th>\n              <th scope=\"col\" class=\"table-secondary\">\n                ชื่อผู้ประกอบอุตสาหกรรม\n              </th>\n              <th scope=\"col\" class=\"table-secondary\">โดย</th>\n              <th scope=\"col\" class=\"table-secondary\">ชื่อโรงอุตสาหกรรม</th>\n              <th scope=\"col\" class=\"table-secondary\">\n                เลขที่ตั้งโรงอุตสาหกรรม\n              </th>\n              <th scope=\"col\" class=\"table-secondary\">หมู่ที่</th>\n              <th scope=\"col\" class=\"table-secondary\">ตำบล</th>\n              <th scope=\"col\" class=\"table-secondary\">อำเภอ</th>\n              <th scope=\"col\" class=\"table-secondary\">จังหวัด</th>\n              <th scope=\"col\" class=\"table-secondary\">รหัสไปรษณีย์</th>\n              <th scope=\"col\" class=\"table-secondary\">วันที่จดทะเบียน</th>\n              <th scope=\"col\" class=\"table-secondary\">วันที่สถานะ</th>\n              <th scope=\"col\" class=\"table-secondary\">สถานะทะเบียน</th>\n              <th scope=\"col\" class=\"table-secondary\">Latitude</th>\n              <th scope=\"col\" class=\"table-secondary\">Longitude</th>\n              <th scope=\"col\" class=\"table-secondary\">พิกัดที่ตั้ง</th>\n              <th scope=\"col\" class=\"table-secondary\">สถานะพิกัด</th>\n              <th scope=\"col\" class=\"table-secondary\">รูปภาพโรงงาน</th>\n              <!-- <th scope=\"col\">เลขที่ตั้งโรงอุตสาหกรรม</th> -->\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(l, i) in list\" :key=\"i+1\">\n              <th>\n                <a\n                target=\"_blank\"\n                  :href=\"'/edit/' + l.id\"\n                  style=\"color: black; text-decoration: none\"\n                  ><svg\n                    width=\"10px\"\n                    height=\"10px\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 512 512\"\n                  >\n                    <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->\n                    <path\n                      d=\"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z\"\n                    />\n                  </svg>\n                  {{ i + 1 }}\n                </a>\n              </th>\n              <td scope=\"row\">\n                <a\n                  :href=\"'/map/' + l.excise_no + '/map'\"\n                  target=\"_blank\"\n                  style=\"color: black; text-decoration: none\"\n                >\n                  {{ l.excise_id }}\n                </a>\n              </td>\n              <td scope=\"row\">{{ l.excise_no }}</td>\n              <td scope=\"row\">{{ l.excise_name }}</td>\n              <td scope=\"row\">{{ l.excise_by }}</td>\n              <td scope=\"row\">{{ l.industrial_name }}</td>\n              <td scope=\"row\">{{ l.industrial_no }}</td>\n              <td scope=\"row\">{{ l.industrial_moo }}</td>\n              <td scope=\"row\">{{ l.industrial_subdistrict }}</td>\n              <td scope=\"row\">{{ l.industrial_district }}</td>\n              <td scope=\"row\">{{ l.industrial_province }}</td>\n              <td scope=\"row\">{{ l.industrial_zipcode }}</td>\n              <td scope=\"row\">{{ convertdatetothai(l.registration_date) }}</td>\n              <td scope=\"row\">{{ convertdatetothai(l.status_date) }}</td>\n              <td scope=\"row\">{{ l.registration_status }}</td>\n              <td scope=\"row\">{{ l.latitude }}</td>\n              <td scope=\"row\">{{ l.longitude }}</td>\n              <td scope=\"row\"> <a\n                  :href=\"'//' + l.fac_url\"\n                  target=\"_blank\"\n                  style=\"color: black; text-decoration: none\"\n                >\n                  {{ l.fac_url }}\n                </a></td>\n              <td scope=\"row\" v-if=\"l.coordinate_status == 0\">ยังไม่ยืนยัน</td>\n              <td scope=\"row\" v-if=\"l.coordinate_status == 1\">ยืนยันแล้ว</td>\n              <td scope=\"row\"><img width=\"100px\" :src=\"l.image\" alt=\"\" /></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <!-- <input id=\"file\" type=\"file\" accept=\"image/*\" @change=\"onFileChange\" />\n    <img v-if=\"itemPreviewImage\" :src=\"itemPreviewImage\" /> -->\n  </div>\n</template>\n\n<script>\nimport DetailExciseService from \"../services/DetailExciseService.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"HelloWorld\",\n  data() {\n    return {\n      list: [],\n      itemPreviewImage: \"\",\n      id: \"\",\n      item: [],\n      img: \"\",\n      image: \"\",\n      excise_name: \"\",\n      excise_by: \"\",\n      sortid:0,\n      date:'',\n      countall:0,\n      registration_status:\"ดำเนินกิจการ\"\n    };\n  },\n  props: {\n    msg: String,\n  },\n  computed: {\n    dataUrl() {\n      return (\n        \"data:image/jpeg;base64,\" +\n        window.btoa(\n          new Uint8Array(this.info.image).reduce(\n            (data, byte) => data + String.fromCharCode(byte),\n            \"\"\n          )\n        )\n      );\n    },\n  },\n  mounted() {\n    const date = new Date();\n    this.date = date.toLocaleDateString(\"th-TH\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n    this.loaddata();\n  },\n  methods: {\n    orderby(event){\nthis.sortid = event.target.value\nDetailExciseService.getDetailExcisesByname('','',this.sortid,this.registration_status)\n        .then((res) => {\n          // console.log(res.data);\n          this.list = res.data;\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    search() {\n      // console.log(this.excise_name);\n      // console.log(this.excise_by);\n      DetailExciseService.getDetailExcisesByname(\n        this.excise_name,\n        this.excise_by,\n        '',\n        this.registration_status\n      )\n        .then((res) => {\n          // console.log(res.data);\n          this.list = res.data\n        //  for (let l = 0; l < res.data.length; l++) {\n        //     if (res.data[l].registration_status != \"ปิดกิจการ\") {\n        //       this.list.push(res.data[l])\n        //     }        \n        //   }\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    getid(id) {\n      this.id = id;\n    },\n    loaddata() {\n      DetailExciseService.getDetailExcisesByname('','',this.sortid,this.registration_status)\n        .then((res) => {\n          // console.log(res.data);\n          for (let l = 0; l < res.data.length; l++) {\n            // console.log(res.data[l].registration_status);\n            if (res.data[l].registration_status != \"ปิดกิจการ\") {\n              this.list.push(res.data[l])\n            }        \n          }\n          this.countall = this.list.length\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    getTypebase64(data) {\n      return data.substring(\"data:image/\".length, data.indexOf(\";base64\"));\n    },\n    onFileChange(evt) {\n      const files = evt.target.files || evt.dataTransfer.files;\n      // const selectedImage = evt.target.files[0]; // get first file\n      // this.createBase64Image(selectedImage);\n      if (!files.length) return;\n      this.createImage(files[0]);\n      // this.createBase64Image(selectedImage);\n    },\n    createBase64Image(fileObject) {\n      const reader = new FileReader();\n      reader.onload = (evt) => {\n        this.image = evt.target.result;\n        this.uploadImage();\n      };\n      reader.readAsDataURL(fileObject);\n    },\n    createImage(file) {\n      const reader = new FileReader();\n\n      reader.onload = (evt) => {\n        this.itemPreviewImage = evt.target.result;\n        this.item.image = evt.target.result;\n        // var buf = Buffer.from(this.item.image, \"base64\"); // Ta-da\n        // console.log(buf);\n        var blob = window.URL.createObjectURL(\n          new Blob([this.item.image], { type: \"image/jpeg\" })\n        );\n        console.log(blob);\n        // console.log(this.item.image);\n        var img = {\n          image: this.item.image,\n        };\n        console.log(img);\n        DetailExciseService.updateImageDetailExcise(this.id, img)\n          .then((res) => {\n            console.log(res.data);\n            this.loaddata();\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      };\n\n      reader.readAsDataURL(file);\n    },\n    uploadImage() {\n      const { image } = this;\n      console.log(image);\n      axios\n        .post(\"http://127.0.0.1:8080/api/upload\", { image })\n        .then((response) => {\n          this.remoteUrl = response.data.url;\n          console.log(this.remoteUrl);\n        })\n        .catch((err) => {\n          return new Error(err.message);\n        });\n    },\n    convertdatetothai(datetimes) {\n      if (datetimes) {\n        var d = new Date(datetimes);\n        var mm = d.getMonth() + 1;\n        var dd = d.getDate();\n        var yy = d.getFullYear();\n\n        var myDateString = dd + \"/\" + mm + \"/\" + yy; //(US)\n        // console.log(myDateString);\n        return myDateString;\n      }\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.form-check {\n      display: inline;\n}\n</style>\n"]}]}