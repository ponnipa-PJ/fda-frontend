{"remainingRequest":"D:\\fda\\fda-frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\fda\\fda-frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\fda\\fda-frontend\\src\\services\\auth\\auth.service.js","dependencies":[{"path":"D:\\fda\\fda-frontend\\src\\services\\auth\\auth.service.js","mtime":1695524600773},{"path":"D:\\fda\\fda-frontend\\babel.config.js","mtime":1695524577754},{"path":"D:\\fda\\fda-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695526242921},{"path":"D:\\fda\\fda-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1695526245291},{"path":"D:\\fda\\fda-frontend\\node_modules\\eslint-loader\\index.js","mtime":1695526221603}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L2ZkYS9mZGEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L2ZkYS9mZGEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9mZGEvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgaHR0cCBmcm9tICIuLi8uLi9odHRwLWNvbW1vbiI7CmltcG9ydCB7IERldmljZVVVSUQgfSBmcm9tICdkZXZpY2UtdXVpZCc7Cgp2YXIgQXV0aFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEF1dGhTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhTZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBdXRoU2VydmljZSwgW3sKICAgIGtleTogImdldFVVSUQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVVSUQoKSB7CiAgICAgIHZhciB1dWlkID0gbmV3IERldmljZVVVSUQoKS5nZXQoKTsKICAgICAgcmV0dXJuIHV1aWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgaHR0cC5wb3N0KCd1c2VyL3NpZ25pbicsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYWNjZXNzVG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmRhJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwoKICAgICAgICAgICAgICAgICAgYWxlcnQoJ+C4iuC4t+C5iOC4reC4q+C4o+C4t+C4reC4o+C4q+C4seC4quC4nOC5iOC4suC4meC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hycpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9naW4oX3gpIHsKICAgICAgICByZXR1cm4gX2xvZ2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2dpbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZmRhJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm9sZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm9sZSgpIHsKICAgICAgcmV0dXJuIGh0dHAuZ2V0KCdyb2xlJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0cGFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0cGFnZShpZCkgewogICAgICByZXR1cm4gaHR0cC5nZXQoIm1lbnUvbWVudWJ5dXNlcmlkLyIgKyBpZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0bmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0bmFtZShpZCkgewogICAgICByZXR1cm4gaHR0cC5nZXQoInVzZXIvIiArIGlkKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBdXRoU2VydmljZTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgbmV3IEF1dGhTZXJ2aWNlKCk7"},{"version":3,"sources":["D:/fda/fda-frontend/src/services/auth/auth.service.js"],"names":["http","DeviceUUID","AuthService","uuid","get","user","post","then","response","console","log","data","accessToken","localStorage","setItem","JSON","stringify","error","$router","push","alert","removeItem","id"],"mappings":";;;;;AAAA,OAAOA,IAAP,MAAiB,mBAAjB;AACA,SAASC,UAAT,QAA2B,aAA3B;;IAEMC,W;;;;;;;WACJ,mBAAS;AACP,UAAIC,IAAI,GAAG,IAAIF,UAAJ,GAAiBG,GAAjB,EAAX;AACF,aAAOD,IAAP;AACE;;;;2EACF,iBAAYE,IAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iDAISL,IAAI,CAACM,IAAL,CAAU,aAAV,EAAyBD,IAAzB,EACJE,IADI,CACC,UAAAC,QAAQ,EAAI;AAChBC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB;;AACA,sBAAIH,QAAQ,CAACG,IAAT,CAAcC,WAAlB,EAA+B;AAC7BC,oBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BC,IAAI,CAACC,SAAL,CAAeR,QAAQ,CAACG,IAAxB,CAA5B;AACD;;AACD,yBAAOH,QAAQ,CAACG,IAAhB;AACD,iBAPI,EAQH,UAAAM,KAAK,EAAI;AACPR,kBAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;;AACA,kBAAA,KAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;;AACAC,kBAAAA,KAAK,CAAC,4BAAD,CAAL;AACD,iBAZE,CAJT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;WAoBA,kBAAS;AACPP,MAAAA,YAAY,CAACQ,UAAb,CAAwB,KAAxB;AACD;;;WAED,gBAAO;AACL,aAAOrB,IAAI,CAACI,GAAL,CAAS,MAAT,CAAP;AACD;;;WAED,iBAAQkB,EAAR,EAAY;AACV,aAAOtB,IAAI,CAACI,GAAL,CAAS,uBAAqBkB,EAA9B,CAAP;AACD;;;WAGD,iBAAQA,EAAR,EAAY;AACV,aAAOtB,IAAI,CAACI,GAAL,CAAS,UAAQkB,EAAjB,CAAP;AACD;;;;;;AAGH,eAAe,IAAIpB,WAAJ,EAAf","sourcesContent":["import http from \"../../http-common\";\r\nimport { DeviceUUID } from 'device-uuid';\r\n\r\nclass AuthService {\r\n  getUUID(){  \r\n    var uuid = new DeviceUUID().get();\r\n  return uuid\r\n   }\r\n  async login(user) {\r\n    // console.log(user)\r\n    // localStorage.setItem('users', JSON.stringify(user));\r\n    // return user\r\n    return http.post('user/signin', user)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        if (response.data.accessToken) {\r\n          localStorage.setItem('fda', JSON.stringify(response.data));\r\n        }\r\n        return response.data;\r\n      },\r\n        error => {\r\n          console.log(error);\r\n          this.$router.push(\"/login\");\r\n          alert('ชื่อหรือรหัสผ่านไม่ถูกต้อง')\r\n        }\r\n      );\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('fda');\r\n  }\r\n\r\n  role() {\r\n    return http.get('role');\r\n  }\r\n\r\n  getpage(id) {\r\n    return http.get(`menu/menubyuserid/`+id);\r\n  }\r\n\r\n  \r\n  getname(id) {\r\n    return http.get(`user/`+id);\r\n  }\r\n\r\n}\r\nexport default new AuthService();"]}]}