{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/thread-loader/dist/cjs.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/addproducttoken.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/addproducttoken.vue","mtime":1701152815526},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/babel.config.js","mtime":1677654957527},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1687492401222},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wb25uaXBhL0RvY3VtZW50cy9HaXRIdWIvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBQcm9kdWN0c1NlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzJwoKaW1wb3J0IERpY3RTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0RpY3RTZXJ2aWNlIjsKaW1wb3J0IFJ1bGVCYXNlZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvUnVsZUJhc2VkU2VydmljZSI7CmltcG9ydCBNYXBSdWxlQmFzZWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL01hcFJ1bGVCYXNlZFNlcnZpY2UiOwppbXBvcnQgTGlua1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTGlua1NlcnZpY2UiOwppbXBvcnQgQWR2ZXJ0aXNlU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9BZHZlcnRpc2VTZXJ2aWNlIjsKaW1wb3J0IEtleXdvcmRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0tleXdvcmRTZXJ2aWNlIjsKaW1wb3J0IENsaXBMb2FkZXIgZnJvbSAndnVlLXNwaW5uZXIvc3JjL0NsaXBMb2FkZXIudnVlJzsKaW1wb3J0IEZEQVR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9GREFUeXBlc1NlcnZpY2UiOwppbXBvcnQgUHJvZHVjdFR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Qcm9kdWN0VHlwZXNTZXJ2aWNlIjsKaW1wb3J0IFJ1bGViYXNlZFR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9SdWxlYmFzZWRUeXBlc1NlcnZpY2UiOwppbXBvcnQgUHJvZHVjdHNTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL1Byb2R1Y3RzU2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBDbGlwTG9hZGVyOiBDbGlwTG9hZGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdHVzcHJvY2hlY2s6IGZhbHNlLAogICAgICBzdGF0dXNsaXN0OiBmYWxzZSwKICAgICAgc3RhdHVzcHJvZHVjdDogZmFsc2UsCiAgICAgIHN0YXR1c3Byb2NoZWNrb25lOiBmYWxzZSwKICAgICAgY29sb3I6ICcjNWJjMGRlJywKICAgICAgc2l6ZTogJzUwcHgnLAogICAgICBtYXJnaW46ICcycHgnLAogICAgICByYWRpdXM6ICcycHgnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbGlzdDogW10sCiAgICAgIHVybDogIiIsCiAgICAgIGZpbGU6ICIiLAogICAgICBzdGF0dXM6IGZhbHNlLAogICAgICB1cmxQYXRoOiAiIiwKICAgICAgaW1hZ2VsaXN0czogIiIsCiAgICAgIHRva2VuaXplOiAiIiwKICAgICAgbWF0Y2huYW1lOiAiIiwKICAgICAgbWF0Y2hjYXRlZ29yeTogIiIsCiAgICAgIHR5cGU6ICIiLAogICAgICBtYXRjaG5hbWVzdW06ICIiLAogICAgICBzdGF0dXNuYW1lOiAwLAogICAgICBzdGF0dXNjYXQ6IDAsCiAgICAgIHN0YXR1c2ZkYTogMCwKICAgICAgY29sb3JuYW1lOiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgY29sb3JmZGE6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBjb2xvcmNhdDogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGlkOiAiIiwKICAgICAga2V5d29yZDogW10sCiAgICAgIGNvbG9ya2V5OiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgZGVzYzogIiIsCiAgICAgIGFyckxpc3Q6IFtdLAogICAgICBhbGxkYXRhOiAwLAogICAgICBiYWNrOiAwLAogICAgICBuZXh0OiAwLAogICAgICBkYXRhOiB7fSwKICAgICAgcHJvZHVjdF90b2tlbjogMCwKICAgICAgdGl0bGU6ICLguYDguJ7guLTguYjguKEga2V5d29yZCIsCiAgICAgIGtleToge30sCiAgICAgIGZkYTogIiIsCiAgICAgIHByb2R1Y3Q6IFtdLAogICAgICBwcm9jaGVjazogW10sCiAgICAgIGFuc3dlcjogJycsCiAgICAgIHR5cGVJZDogMCwKICAgICAgcHJvY2hlY2t0ZXh0OiAnJywKICAgICAgcHJvZHVjdHR5cGVzOiBbXSwKICAgICAgcnVsZWJhc2V0eXBlczogW10sCiAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgc2VsZWN0ZWRGaWxlOiAnJywKICAgICAgaW1nX3BhdGg6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlcjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uRmlsZUNoYW5nZTogZnVuY3Rpb24gb25GaWxlQ2hhbmdlKGV2dCkgewogICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzIHx8IGV2dC5kYXRhVHJhbnNmZXIuZmlsZXM7CiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZXZ0LnRhcmdldC5maWxlc1swXTsKICAgICAgdGhpcy5maWxlbmFtZSA9IHRoaXMuc2VsZWN0ZWRGaWxlLm5hbWU7CiAgICAgIGlmICghZmlsZXMubGVuZ3RoKSByZXR1cm47CiAgICAgIHRoaXMub25VcGxvYWRGaWxlKCk7IC8vIH0KICAgIH0sCiAgICBvblVwbG9hZEZpbGU6IGZ1bmN0aW9uIG9uVXBsb2FkRmlsZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCB0aGlzLnNlbGVjdGVkRmlsZSk7IC8vIGFwcGVuZGluZyBmaWxlCiAgICAgIC8vICBzZW5kaW5nIGZpbGUgdG8gdGhlIGJhY2tlbmQKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmZpbGVuYW1lKTsKICAgICAgLy8gdmFyIGh0dHAgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VwbG9hZGJhbm5lcj9uYW1lPSIrdGhpcy5maWxlbmFtZTsKCiAgICAgIHZhciBodHRwID0gTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi91cGxvYWRpbWc/bmFtZT0iICsgdGhpcy5maWxlbmFtZTsKICAgICAgY29uc29sZS5sb2coTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi91cGxvYWRpbWc/bmFtZT0iICsgdGhpcy5maWxlbmFtZSk7CiAgICAgIGF4aW9zLnBvc3QoaHR0cCwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmRhdGEuaW1nX3BhdGggPSBMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3VwbG9hZHMvaW1nLyIgKyBfdGhpcy5maWxlbmFtZTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5kYXRhLmltZ19wYXRoKTsKICAgICAgICBfdGhpcy5pbWdfcGF0aCA9IExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvdXBsb2Fkcy9pbWcvIiArIF90aGlzLmZpbGVuYW1lOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0cHJvZHVjdHR5cGU6IGZ1bmN0aW9uIGdldHByb2R1Y3R0eXBlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIFByb2R1Y3RUeXBlc1NlcnZpY2UuZ2V0dHlwZXNfcHJvZHVjdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBfdGhpczIucHJvZHVjdHR5cGVzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldHJ1bGViYXNlZHR5cGU6IGZ1bmN0aW9uIGdldHJ1bGViYXNlZHR5cGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgUnVsZWJhc2VkVHlwZXNTZXJ2aWNlLmdldHR5cGVzX3J1bGViYXNlZCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBfdGhpczMucnVsZWJhc2V0eXBlcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRzZW50ZW50OiBmdW5jdGlvbiBnZXRzZW50ZW50KGRhdGEpIHsKICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7IC8vIHZhciB0ZXh0ID0gJycKCiAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykgewogICAgICAgIC8vIHRleHQgKz0gZGF0YVtkXQogICAgICAgIGFyci5wdXNoKGRhdGFbZF0pOwogICAgICB9IC8vIGNvbnNvbGUubG9nKGFycik7CgoKICAgICAgdmFyIGFycnR4dCA9IFN0cmluZyhhcnIpOyAvLyBjb25zb2xlLmxvZyhhcnJ0eHQpOwoKICAgICAgYXJydHh0ID0gYXJydHh0LnJlcGxhY2VBbGwoIiwiLCAiPHNwYW4gc3R5bGU9J2NvbG9yOnJlZDsnPiB8IDwvc3Bhbj4iKTsgLy8gY29uc29sZS5sb2coYXJydHh0KTsKCiAgICAgIHJldHVybiBhcnJ0eHQ7CiAgICB9LAogICAgZ2V0c3RhdHVzY2hlY2s6IGZ1bmN0aW9uIGdldHN0YXR1c2NoZWNrKHQsIGYpIHsKICAgICAgLy8gY29uc29sZS5sb2codCxmKTsKICAgICAgdmFyIHRleHQgPSAnJzsKCiAgICAgIGlmICh0ID09IGYpIHsKICAgICAgICB0ZXh0ID0gJ+C5gOC4geC4tOC4meC4iOC4o+C4tOC4hyc7CiAgICAgIH0gZWxzZSBpZiAodCA+IGYpIHsKICAgICAgICB0ZXh0ID0gJ+C5gOC4geC4tOC4meC4iOC4o+C4tOC4hyc7CiAgICAgIH0gZWxzZSBpZiAoZiA+IHQpIHsKICAgICAgICB0ZXh0ID0gJ+C5hOC4oeC5iOC5gOC4geC4tOC4meC4iOC4o+C4tOC4hyc7CiAgICAgIH0KCiAgICAgIHJldHVybiB0ZXh0OwogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMucHJvZHVjdCA9IFtdOwogICAgICB0aGlzLnByb2NoZWNrID0gW107CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlOwogICAgICB0aGlzLnByb2R1Y3QgPSBbXTsKICAgICAgdGhpcy5wcm9jaGVjayA9IFtdOwogICAgICB0aGlzLnN0YXR1c3Byb2NoZWNrID0gZmFsc2U7CiAgICAgIHRoaXMuc3RhdHVzcHJvZHVjdCA9IGZhbHNlOwogICAgICB0aGlzLnN0YXR1c2xpc3QgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9kdWN0X3Rva2VuID0gMDsKICAgIH0sCiAgICBjdXQ6IGZ1bmN0aW9uIGN1dChkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgbWFwbmFtZSA9ICcnOwoKICAgICAgaWYgKGRhdGEgIT0gJy0nICYmIGRhdGEgIT0gJycpIHsKICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGxldHRlcikgewogICAgICAgICAgcmV0dXJuIGxldHRlciAhPT0gIiAiOwogICAgICAgIH0pOwogICAgICAgIG1hcG5hbWUgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgbWFwbmFtZSA9IG1hcG5hbWUucmVwbGFjZUFsbCgiLCIsICIgfCAiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXBuYW1lID0gZGF0YTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1hcG5hbWU7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmtleSk7CiAgICAgIGlmICh0aGlzLmtleS5uYW1lID09IG51bGwgfHwgdGhpcy5rZXkubmFtZSA9PSAiIikgewogICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKEiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcHJvZGF0YSA9IHsKICAgICAgICAgIG5hbWU6IHRoaXMua2V5Lm5hbWUsCiAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICB9OyAvL2NvbnNvbGUubG9nKHByb2RhdGEpOwoKICAgICAgICBLZXl3b3JkU2VydmljZS5jcmVhdGVrZXl3b3JkKHByb2RhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyID09IDEwNjIpIHsKICAgICAgICAgICAgYWxlcnQoIuC4oeC4teC4hOC4s+C4meC4teC5ieC5g+C4meC4o+C4sOC4muC4muC5geC4peC5ieC4pyIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRGljdFNlcnZpY2UuY3JlYXRlZGljdChwcm9kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhICk7CiAgICAgICAgICAgICAgLy8gUnVsZUJhc2VkU2VydmljZS5jcmVhdGVkY29sdW1ucnVsZV9iYXNlZChyZXMuZGF0YS5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNsb3NlZGNhdGVnb3J5IikuY2xpY2soKTsKICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7IC8vIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZ2V0cGVyY2VudGFnZTogZnVuY3Rpb24gZ2V0cGVyY2VudGFnZShkYXRhKSB7CiAgICAgIC8vIHZhciBkaWN0ID0gSlNPTi5wYXJzZShkYXRhLmRpY3RfaWQpCiAgICAgIC8vIHZhciBydWxlX2Jhc2VkX2lkID0gSlNPTi5wYXJzZShkYXRhLnJ1bGVfYmFzZWRfaWQpCiAgICAgIC8vIHZhciByZSA9ICgxMDAgKiBkYXRhLmNvdW50X3J1bGViYXNlZCkvIChydWxlX2Jhc2VkX2lkLmxlbmd0aCkKICAgICAgcmV0dXJuIGRhdGEuY291bnRfcnVsZWJhc2VkOwogICAgfSwKICAgIHNhdmV0b3J1bGU6IGZ1bmN0aW9uIHNhdmV0b3J1bGUoc2VuLCBhbnN3ZXIpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyhhbnN3ZXIpOwogICAgICB2YXIgaWRkYXRhID0gW107CgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YXNwbGl0W2RdKTsKICAgICAgICBEaWN0U2VydmljZS5nZXRkaWN0cygiIiwgc2VuW2RdKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICAgIHZhciBzcWw7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGFbMF0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgaWRkYXRhLnB1c2gocmVzLmRhdGFbMF0uaWQpOwogICAgICAgICAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coZCsxICwgc2VuLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaWRkYXRhKTsKCgogICAgICAgICAgICAgICAgICAgIGlmICghKGQgKyAxID09IHNlbi5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc3FsID0gIlNFTEVDVCByLiogRlJPTSBtYXBfcnVsZV9iYXNlZCBtIGpvaW4gcnVsZV9iYXNlZCByIG9uIG0ucnVsZV9iYXNlZF9pZCA9IHIuaWQgV0hFUkUgbS5zdGF0dXMgPSAxIGFuZCBkaWN0X2lkID0gJ1siLmNvbmNhdChpZGRhdGEsICJdJyIpOyAvLyBjb25zb2xlLmxvZyhzcWwpOwoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUnVsZUJhc2VkU2VydmljZS5nZXRieWRpY3Qoc3FsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICJ7IjsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaWRkYXRhW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICciZGljdCcgKyBpZGRhdGFbaV0gKyAnIicgKyAiOiIgKyAxICsgIiwiOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICciYW5zd2VyJyArICciJyArICI6IiArIGFuc3dlciArICIsIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgLTEpOwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICJ9IjsgLy8gY29uc29sZS5sb2codGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsgLy8gY29uc29sZS5sb2coanNvbkRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbkRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXJ1bGVfYmFzZWQoanNvbkRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiBpZGRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlbWFwX3J1bGVfYmFzZWQobWFwcnVsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgcHJvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBtYXBfcnVsZV9iYXNlZDpyZXMuZGF0YS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvZHVjdHNTZXJ2aWNlLm1hcF9ydWxlX2Jhc2VkKGlkLHBybykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmdldGRhdGEoKTsgLy8gICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9LCA1MDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZW1hcHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiBhbnN3ZXIKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS51cGRhdGVydWxlX2Jhc2VkKHJlcy5kYXRhWzBdLmlkLCB1cGRhdGVtYXBydWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5nZXRkYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSk7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNlbi5sZW5ndGg7IGQrKykgewogICAgICAgIF9sb29wKGQpOwogICAgICB9CiAgICB9LAogICAgc2F2ZXRvcnVsZV9iYXNlZDogZnVuY3Rpb24gc2F2ZXRvcnVsZV9iYXNlZChkYXRhLCBhbnN3ZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgZGF0YXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNS5hbnN3ZXIgPSBhbnN3ZXI7IC8vIGNvbnNvbGUubG9nKHNlbi5sZW5ndGgpOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Fuc3dlcicsYW5zd2VyKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwoKICAgICAgICAgICAgICAgIGRhdGFzID0gewogICAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnJ1bGVfYmFzZWRfaWQsCiAgICAgICAgICAgICAgICAgIHR5cGVJZDogX3RoaXM1LnR5cGVJZCwKICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlSWQ6IGRhdGEuaWQKICAgICAgICAgICAgICAgIH07IC8vIGlmICghZGF0YS5tYXBJZCkgewoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS5jaGVja2ludGIoZGF0YS5kaWN0X2lkKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGNoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1c2ZhbHNlLCBzdGF0dXN0cnVlLCB3ZWlnaHQsIGFkdmVydGlzZV9pZCwgbWFwcnVsZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2hlY2suZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNmYWxzZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXN0cnVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2VfaWQgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2VfaWQgPSBKU09OLnBhcnNlKGNoZWNrLmRhdGEubWFwX2FkdmVydGlzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c2ZhbHNlID0gY2hlY2suZGF0YS5zdGF0dXNmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzdHJ1ZSA9IGNoZWNrLmRhdGEuc3RhdHVzdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXMucnVsZWJhc2VkSWQgPSBjaGVjay5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXN0cnVlID0gc3RhdHVzdHJ1ZSArIHBhcnNlSW50KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIgPT0gOSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNmYWxzZSA9IHN0YXR1c2ZhbHNlICsgcGFyc2VJbnQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKGFkdmVydGlzZV9pZCk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFkdmVydGlzZV9pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2VfaWQucHVzaChkYXRhLmlkKTsgLy8gY29uc29sZS5sb2coYWR2ZXJ0aXNlX2lkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhZHZlcnRpc2VfaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ID0gc3RhdHVzZmFsc2UgKyBzdGF0dXN0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcnVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlX2lkOiBkYXRhLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcjogYW5zd2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiBfdGhpczUuY3VycmVudFVzZXIuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9kaWN0OiBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c2ZhbHNlOiBzdGF0dXNmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzdHJ1ZTogc3RhdHVzdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiB3ZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9hZHZlcnRpc2U6IGFkdmVydGlzZV9pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZWFuc3dlcihjaGVjay5kYXRhLmlkLCBtYXBydWxlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtleXdvcmRTZXJ2aWNlLnVwZGF0ZXdlaWdodCgxLCBkYXRhcykudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0ZGV0YWlsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcF9pZCwgc2VuZGF0YSwgX2xvb3AyLCBkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwX2lkID0gcmVzLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhcy5ydWxlYmFzZWRJZCA9IG1hcF9pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRhdGEgPSBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCk7IC8vIGNvbnNvbGUubG9nKHNlbmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGljdF9uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDIgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2xvb3AyKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wMiQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZW5kYXRhW2RdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGljdFNlcnZpY2UuZ2V0ZGljdChzZW5kYXRhW2RdKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY2ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihzZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VuLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBfcnVsZV9iYXNlZF9pZDogbWFwX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogc2VuZGF0YVtkXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogc2VuLmRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vOiBkICsgMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKHJ1bGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcnVsZV9iYXNlZChydWxlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGQgKyAxID09IHNlbmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS2V5d29yZFNlcnZpY2UudXBkYXRld2VpZ2h0KDEsIGRhdGFzKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0ZGV0YWlsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2xvb3AyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGQgPCBzZW5kYXRhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5kZWxlZ2F0ZVlpZWxkKF9sb29wMihkKSwgInQwIiwgNyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoZWNra2V5d29yZDogZnVuY3Rpb24gY2hlY2trZXl3b3JkKG5hbWUpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyhuYW1lKTsKICAgICAgLy8gICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hcGkva2V5d29yZF9kaWN0cz9uYW1lPTEnKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAvLyBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICcnKQogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oPzpbXHUyNzAwLVx1MjdiZl18KD86XHVkODNjW1x1ZGRlNi1cdWRkZmZdKXsyfXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1MDAyMy1cdTAwMzldXHVmZTBmP1x1MjBlM3xcdTMyOTl8XHUzMjk3fFx1MzAzZHxcdTMwMzB8XHUyNGMyfFx1ZDgzY1tcdWRkNzAtXHVkZDcxXXxcdWQ4M2NbXHVkZDdlLVx1ZGQ3Zl18XHVkODNjXHVkZDhlfFx1ZDgzY1tcdWRkOTEtXHVkZDlhXXxcdWQ4M2NbXHVkZGU2LVx1ZGRmZl18XHVkODNjW1x1ZGUwMS1cdWRlMDJdfFx1ZDgzY1x1ZGUxYXxcdWQ4M2NcdWRlMmZ8XHVkODNjW1x1ZGUzMi1cdWRlM2FdfFx1ZDgzY1tcdWRlNTAtXHVkZTUxXXxcdTIwM2N8XHUyMDQ5fFtcdTI1YWEtXHUyNWFiXXxcdTI1YjZ8XHUyNWMwfFtcdTI1ZmItXHUyNWZlXXxcdTAwYTl8XHUwMGFlfFx1MjEyMnxcdTIxMzl8XHVkODNjXHVkYzA0fFtcdTI2MDAtXHUyNkZGXXxcdTJiMDV8XHUyYjA2fFx1MmIwN3xcdTJiMWJ8XHUyYjFjfFx1MmI1MHxcdTJiNTV8XHUyMzFhfFx1MjMxYnxcdTIzMjh8XHUyM2NmfFtcdTIzZTktXHUyM2YzXXxbXHUyM2Y4LVx1MjNmYV18XHVkODNjXHVkY2NmfFx1MjkzNHxcdTI5MzV8W1x1MjE5MC1cdTIxZmZdKS9nLCAnJyk7CiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAvLyBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKGBfL2xcX2AsICIiKTsvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgIC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP3RleHQ9JyArIG5hbWUpOwogICAgICB2YXIgZGVzYyA9IHRoaXMuZmluZGRlc2NyaXB0aW9uKG5hbWUpOyAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3dvcmt0b2tlbmRlc2M/dGV4dD0nK2Rlc2MpOwoKICAgICAgYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29ya3Rva2VuZGVzYz90ZXh0PSIgKyBkZXNjKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgX3RoaXM2LmRlc2MgPSByZXMuZGF0YTsKICAgICAgfSk7IC8vIG5hbWUgPSAn4LiC4LmJ4Lit4Lih4Li54Lil4LiI4Liz4LmA4Lie4Liy4Liw4LiC4Lit4LiH4Liq4Li04LiZ4LiE4LmJ4LiyIOC4q+C4oeC4p+C4lOC4q+C4oeC4ueC5iCBTaG9wZWUg4LiB4Lil4Li44LmI4Lih4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LmA4Lie4Li34LmI4Lit4Liq4Li44LiC4Lig4Liy4LieIOC4reC4suC4q+C4suC4o+C5gOC4quC4o+C4tOC4oeC5gOC4nuC4t+C5iOC4reC4hOC4p+C4suC4oeC4h+C4suC4oSDguJzguLTguKcg4Lii4Li14LmI4Lir4LmJ4LitIEJsdWViaXJkKOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCkgU3RvcmFnZSBDb25kaXRpb24gTm9ybWFsIOC4m+C4o+C4sOC5gOC4oOC4l+C4quC4suC4o+C4reC4suC4q+C4suC4oyDguKrguLLguKPguJXguYnguLLguJnguK3guJnguLjguKHguLnguKXguK3guLTguKrguKPguLAsIOC4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDguJvguKPguLDguYDguJfguKjguJXguYnguJnguIHguLPguYDguJnguLTguJTguKrguLTguJnguITguYnguLIg4LmE4LiX4LiiIOC4q+C4meC5ieC4suC4l+C4teC5iOC4guC4reC4h+C4reC4suC4q+C4suC4o+C5gOC4quC4o+C4tOC4oeC4quC4s+C4q+C4o+C4seC4muC4hOC4p+C4suC4oeC4h+C4suC4oSDguJTguLnguYHguKXguKrguLTguKcsIOC4m+C5ieC4reC4h+C4geC4seC4meC4o+C4tOC5ieC4p+C4o+C4reC4oiDguJvguKPguLDguYDguKDguJfguIHguLLguKPguKvguYjguK0g4Lir4LmI4Lit4Lij4Lin4Lih4LiB4Lix4LiZIOC5gOC4nuC4qCDguJfguLHguYnguIfguKrguK3guIfguYDguJ7guKgg4Lit4Liy4Lii4Li44LiB4Liy4Lij4LmA4LiB4LmH4Lia4Lij4Lix4LiB4Lip4LiyIDEyIOC5gOC4lOC4t+C4reC4mSDguJvguKPguLDguYDguKDguJfguILguK3guIfguJzguKXguLTguJXguKDguLHguJPguJHguYzguKLguLIg4LmB4LiE4Lib4LiL4Li54LilIOC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIDMwLTEtMjY3NjQtNS0wMDUxIOC4iOC4s+C4meC4p+C4meC4quC4tOC4meC4hOC5ieC4siAxNzkwMSDguKrguYjguIfguIjguLLguIEg4LiI4Lix4LiH4Lir4Lin4Lix4LiU4LiZ4LiE4Lij4Lij4Liy4LiK4Liq4Li14Lih4LiyIOC4o+C4suC4ouC4peC4sOC5gOC4reC4teC4ouC4lOC4quC4tOC4meC4hOC5ieC4siDguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lie4Lil4Lix4LiqIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4LiV4Lij4LiyIOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCDguILguJnguLLguJQgMTAwMCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgNjAg4LmB4LiE4Lib4LiL4Li54LilIOC5gOC4o+C4l+C4guC4suC4ouC4quC5iOC4hyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMSDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggNSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDIwIOC4geC4o+C4sOC4m+C4uOC4gSDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgOTMg4Lia4Liy4LiXIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCAyIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCAyMSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDUwIOC4geC4o+C4sOC4m+C4uOC4gSDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgOTAg4Lia4Liy4LiXIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCAzIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCA1MSDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsg4LiW4Li24LiHIDEwMCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDg3IOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggNCDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggMTAwIOC4geC4o+C4sOC4m+C4uOC4geC4guC4tuC5ieC4meC5hOC4myAuLi4uLi4uLi4uLi4uLi4uLi4uLi4g4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDg1IOC4muC4suC4lyBWaXRhbWluIEMgUGx1cyBEaWV0YXJ5IFN1cHBsZW1lbnQgUHJvZHVjdCBCbHVlYmlyZCBCcmFuZCDguJzguKXguLTguJXguKDguLHguJPguJHguYzguYDguKrguKPguLTguKHguK3guLLguKvguLLguKPguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lie4Lil4Lix4LiqIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4Liq4LmI4Lin4LiZ4Lib4Lij4Liw4LiB4Lit4Lia4LiX4Lix4LmJ4LiH4Lir4Lih4LiU4LmD4LiZIDEg4LmB4LiE4Lib4LiL4Li54LilIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4teC5iOC4quC4s+C4hOC4seC4jSAoQWN0aXZlIEluZ3JlZGllbnQpIFZJVEFNSU4gQyAoMTAwJSkgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgQ0lUUlVTIEJJT0ZMQVZPTk9JRCBQT1dERVIgLSA2MzAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIEJBUkJBRE9TQ0hFUlJZIFBPV0RFUi9BQ0VST0xBIENIRVJSWSBQT1dERVIgKOC4nOC4h+C4muC4suC4o+C5jOC5gOC4muC5guC4lOC4quC5gOC4iuC4reC4o+C5jOC4o+C4tS/guJzguIfguK3guLDguYDguIvguYLguKPguKXguLLguYDguIrguK3guKPguYzguKPguLUpIChNQUxQSUdISUEgR0xBQlJBIEwuKSDguJzguKUgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgUk9TRUhJUCBQT1dERVIgKOC4nOC4h+C5guC4o+C4quC4ruC4tOC4m+C4quC5jCkgKFJPU0EgQ0FOSU5BIEwuKSDguJzguKUgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgUnV0aW4gLSAzMCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgSU5ESUFOIEdPT1NFQkVSUlkgUE9XREVSICjguJzguIfguKHguLDguILguLLguKHguJvguYnguK3guKEpIChQSFlMTEFOVEhVUyBFTUJMSUNBIEwuICkg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4teC5iOC5hOC4oeC5iOC4quC4s+C4hOC4seC4jSAoSW5hY3RpdmUgSW5ncmVkaWVudCkgRURJQkxFIEdFTEFUSU4gNDI4IC0gOTguNSDguKHguLTguKXguKXguLTguIHguKPguLHguKEgVElUQU5JVU0gRElPWElERSAxNzEgLTEuOTUg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIOC4p+C4tOC4mOC4teC4o+C4seC4muC4m+C4o+C4sOC4l+C4suC4mSDguITguKPguLHguYnguIfguKXguLAgMS0yIOC5geC4hOC4m+C4i+C4ueC4pSDguKvguKXguLHguIfguK3guLLguKvguLLguKPguYDguIrguYnguLIg4LmA4Lil4LiC4LiX4Li14LmIIOC4rS7guKIuIDMwLTEtMjY3NjQtNS0wMDUxIOC4hOC4s+C5gOC4leC4t+C4reC4mSDguITguKfguKPguYDguIHguYfguJrguYPguKvguYnguJ7guYnguJnguYHguKrguIfguYHguJTguIfguYHguKXguLDguITguKfguLLguKHguIrguLfguYnguJkg4LmA4LiU4LmH4LiBIOC4quC4leC4o+C4teC4oeC4teC4hOC4o+C4o+C4oOC5jCDguYHguKXguLDguKrguJXguKPguLXguYPguKvguYnguJnguKHguJrguLjguJXguKPguYTguKHguYjguITguKfguKPguKPguLHguJrguJvguKPguLDguJfguLLguJkg4LiE4Lin4Lij4LiB4Li04LiZ4Lit4Liy4Lir4Liy4Lij4Lir4Lil4Liy4LiB4Lir4Lil4Liy4Lii4LmD4Lir4LmJ4LiE4Lij4LiaIDUg4Lir4Lih4Li54LmIIOC5g+C4meC4quC4seC4lOC4quC5iOC4p+C4meC4l+C4teC5iOC5gOC4q+C4oeC4suC4sOC4quC4oeC5gOC4m+C5h+C4meC4m+C4o+C4sOC4iOC4syDguYTguKHguYjguKHguLXguJzguKXguYPguJnguIHguLLguKPguJvguYnguK3guIfguIHguLHguJnguKvguKPguLfguK3guKPguLHguIHguKnguLLguYLguKPguIQg4Liq4Lij4Lij4Lie4LiE4Li44LiTIOC4m+C4o+C4sOC5guC4ouC4iuC4meC5jOC4guC4reC4h+C4geC4suC4o+C4geC4tOC4meC4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDvuI/guJfguLPguYPguKvguYnguKvguJnguYnguLLguYTguKHguYjguYLguJfguKPguKEg4Lir4LiZ4LmJ4Liy4LiV4Liy4Liq4LiU4LmD4LiqIO+4j+C4iuC5iOC4p+C4ouC4n+C4t+C5ieC4meC4n+C4ueC4nOC4tOC4p+C4q+C4meC5ieC4siDguKrguLTguKcg4Lid4LmJ4LiyIOC4geC4o+C4sCDguKPguLTguYnguKfguKPguK3guKIg4LiU4Li54LiI4Liy4LiH4Lil4LiHIO+4j+C4nOC4tOC4p+C4nuC4o+C4o+C4k+C4meC4uOC5iOC4oeC5gOC4o+C4teC4ouC4muC5gOC4meC4teC4ouC4miDguIrguLjguYjguKHguIrguLfguYjguJkg77iP4Lir4LiZ4LmJ4Liy4LiV4Liy4LiU4Li54LmA4LiU4LmH4LiB4LmB4Lil4Liw4LmA4LiU4LmJ4LiH4LiC4Li24LmJ4LiZIO+4j+C4nOC4tOC4p+C4q+C4meC5ieC4suC4guC4suC4p+C4reC4oeC4iuC4oeC4nuC4uSDguKrguLTguJnguITguYnguLLguJXguLHguJTguKPguK3guJrguJfguLjguIHguKfguLHguJnguYDguKfguKXguLIg4LiV4Lix4LiU4Lij4Lit4Lia4LmA4Lin4Lil4LiyIDEyLjAwIOC4mSDguILguK3guIfguJfguLjguIHguKfguLHguJkg4LmB4LiI4LmJ4LiH4LmC4Lit4LiZ4LmA4LiB4Li04LiZ4LmA4Lin4Lil4LiyIOC4quC5iOC4h+C4o+C4reC4muC4p+C4seC4meC4luC4seC4lOC5hOC4m+C4meC4sOC4iOC5iuC4sCDguKrguYjguIfguJ7guLHguKrguJTguLjguJfguLjguIHguKfguLHguJkg4LmA4Lin4LmJ4LiZ4Lin4Lix4LiZ4Lit4Liy4LiX4Li04LiV4Lii4LmMIOC5geC4peC4sOC4p+C4seC4meC4q+C4ouC4uOC4lOC4meC4seC4geC4guC4seC4leC4pOC4geC4qeC5jCDguILguK3guJrguJ7guKPguLDguITguLjguJPguKXguLnguIHguITguYnguLLguJfguLjguIHguJfguYjguLLguJkg4LiX4Li14LmI4LmE4Lin4LmJ4Lin4Liy4LiH4LmD4LiI4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LiC4Lit4LiH4LmA4Lij4Liy4LmA4Liq4Lih4Lit4Lih4LiyXy9sXF8nCiAgICAgIC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP3RleHQ9JyArIGRlc2MpOwoKICAgICAgdmFyIGNvbiA9IHsKICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iLCBjb24pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgLy8gdGhpcy5rZXl3b3JkLnB1c2gocmVzLmRhdGEpCiAgICAgICAgICBfdGhpczYua2V5d29yZCA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSk7IC8vICAgICB9CiAgICAgIC8vIH0pOwogICAgICAvLyAgICAgICB2YXIgbGlzdGtleXdvcmRzID0gW10KICAgICAgLy8gICAgICAgdmFyIG5hbWVzcGxpdCA9IG5hbWUuc3BsaXQoIiAiKQogICAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZyhuYW1lc3BsaXQpOwogICAgICAvLyAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hcGkva2V5d29yZF9kaWN0cz9uYW1lPTEnKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vICAgICAgICAgdmFyIGtleWxpc3QgPSBbXQogICAgICAvLyAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgLy8gICAgICAgICAgIHJlcy5kYXRhW3JdLm5hbWUgPSByZXMuZGF0YVtyXS5uYW1lLnJlcGxhY2VBbGwoIi4iLCIiKQogICAgICAvLyAgICAgICAgICAgdmFyIGtrID0gcmVzLmRhdGFbcl0ubmFtZS5zcGxpdCgiICIpCiAgICAgIC8vICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtrLmxlbmd0aDsgaysrKSB7CiAgICAgIC8vICAgICAgICAgICAgIGtleWxpc3QucHVzaChra1trXSkKICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgZm9yIChsZXQga2V5ID0gMDsga2V5IDwga2V5bGlzdC5sZW5ndGg7IGtleSsrKSB7CiAgICAgIC8vICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IG5hbWVzcGxpdC5sZW5ndGg7IG4rKykgewogICAgICAvLyAgICAgICAgICAgICBpZiAobmFtZXNwbGl0W25dID09IGtleWxpc3Rba2V5XSAmJiBrZXlsaXN0W2tleV0gIT0gJycgJiYgaXNOYU4oa2V5bGlzdFtrZXldKSkgewogICAgICAvLyAgICAgICAgICAgICAgIGxpc3RrZXl3b3Jkcy5wdXNoKGtleWxpc3Rba2V5XSkKICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXlsaXN0KTsKICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0a2V5d29yZHMpOwogICAgICAvLyAgICAgICBjb25zb2xlLmxvZyhsaXN0a2V5d29yZHMubGVuZ3RoKTsKICAgICAgLy8gICAgICAgICBpZiAobGlzdGtleXdvcmRzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLmNvbG9ya2V5ID0gImJhY2tncm91bmQtY29sb3I6I2EzZTlhNCIKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAvLyAgICAgICAgIGxpc3RrZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgLy8gICAgICBpZihyZXN1bHQuaW5kZXhPZihpdGVtKSA8IDApIHsKICAgICAgLy8gICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgIC8vICAgICAgfQogICAgICAvLyB9KTsKICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgLy8gbGlzdGtleXdvcmRzID0gcmVzdWx0CiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBsaXN0a2V5d29yZHMubGVuZ3RoOyBsKyspIHsKICAgICAgLy8gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP25hbWU9JyArIG5hbWUrJyYmbmFtZV9yZWFsPScpOwogICAgICAvLyAgICAgICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hlY2trZXl3b3JkP25hbWU9JyArIG5hbWUrJyYmbmFtZV9yZWFsPScgKyBsaXN0a2V5d29yZHNbbF0pLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vICAgICAgICAgdGhpcy5rZXl3b3JkLnB1c2gocmVzLmRhdGEpCiAgICAgIC8vICAgICAgIH0pOwogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfSk7CiAgICB9LAogICAgZmluZDogZnVuY3Rpb24gZmluZCgpIHsKICAgICAgdmFyIHR5cGUgPSB0aGlzLmZpbmR0eXBlcHJvZHVjdCh0aGlzLmRhdGEuY29udGVudCk7CiAgICAgIGNvbnNvbGUubG9nKHR5cGUpOwogICAgICB2YXIgc3BsaXQgPSB0eXBlLnNwbGl0KCJcbiIpOwogICAgICBjb25zb2xlLmxvZyhzcGxpdFszXSk7CiAgICAgIHZhciBjb250ZW50ID0gIiI7CiAgICAgIGNvbnRlbnQgPSB0aGlzLmRhdGEuY29udGVudC5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgIiAiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXHVkODNkW1x1ZGUwMC1cdWRlNGZdL2csICIgIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiIyIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIrIiwgIiIpOwogICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfL2xfIiwgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oW1x1MjcwMC1cdTI3QkZdfFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVEQzAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURGRkZdfFtcdTIwMTEtXHUyNkZGXXxcdUQ4M0VbXHVERDEwLVx1RERGRl0pL2csICIgIik7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmluZGRlc2NyaXB0aW9uKGNvbnRlbnQpKTsKICAgIH0sCiAgICBjaGVja2tleTogZnVuY3Rpb24gY2hlY2trZXkoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBjb250ZW50LCBkZXNjLCBjb247CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5sb2FkZGljdCgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjb250ZW50ID0gIiI7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gX3RoaXM3LmRhdGEuY29udGVudC5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICIgIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cdWQ4M2RbXHVkZTAwLVx1ZGU0Zl0vZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8vbF8iLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oW1x1MjcwMC1cdTI3QkZdfFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVEQzAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURGRkZdfFtcdTIwMTEtXHUyNkZGXXxcdUQ4M0VbXHVERDEwLVx1RERGRl0pL2csICIgIik7CiAgICAgICAgICAgICAgICBkZXNjID0gX3RoaXM3LmZpbmRkZXNjcmlwdGlvbihjb250ZW50KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlc2MpOwogICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZCIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZpbmR0eXBlcHJvZHVjdDogZnVuY3Rpb24gZmluZHR5cGVwcm9kdWN0KGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciB0ZXh0ID0gWyLguKvguKHguKfguJTguKvguKHguLnguYgiXTsKICAgICAgdmFyIGZpbmRmZGEgPSBkYXRhOwoKICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0ZXh0Lmxlbmd0aDsgdCsrKSB7CiAgICAgICAgaWYgKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSAhPSAtMSkgewogICAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSk7CiAgICAgICAgfQogICAgICB9IC8vIGlmIChmaW5kZmRhID09ICfguK3guLLguKvguLLguKMnKSB7CiAgICAgIC8vICAgZmluZGZkYSA9IGZpbmRmZGErIGZpbmRmZGErJ+C5gOC4quC4o+C4tOC4oScKICAgICAgLy8gfQoKCiAgICAgIGNvbnNvbGUubG9nKGZpbmRmZGEpOwogICAgICByZXR1cm4gZmluZGZkYTsKICAgIH0sCiAgICBmaW5kZGVzY3JpcHRpb246IGZ1bmN0aW9uIGZpbmRkZXNjcmlwdGlvbihkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgdGV4dCA9IFsi4Lij4Liy4Lii4Lil4Liw4LmA4Lit4Li14Lii4LiU4Liq4Li04LiZ4LiE4LmJ4LiyIl07CiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGlmIChmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkgIT0gLTEpIHsKICAgICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkpOwogICAgICAgIH0KICAgICAgfSAvLyBpZiAoZmluZGZkYSA9PSAn4Lit4Liy4Lir4Liy4LijJykgewogICAgICAvLyAgIGZpbmRmZGEgPSBmaW5kZmRhKyBmaW5kZmRhKyfguYDguKrguKPguLTguKEnCiAgICAgIC8vIH0KICAgICAgLy8gY29uc29sZS5sb2coZmluZGZkYSk7CgoKICAgICAgcmV0dXJuIGZpbmRmZGE7CiAgICB9LAogICAgbG9hZGRpY3Q6IGZ1bmN0aW9uIGxvYWRkaWN0KCkgewogICAgICBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9sb2FkZGljdCIpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgfSkpKTsKICAgIH0sCiAgICBnZXRkZXRhaWw6IGZ1bmN0aW9uIGdldGRldGFpbCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgiLWkuIik7CiAgICAgIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnNwbGl0KCItaS4iKTsKICAgICAgLy8gdGhpcy5kYXRhLnVybCA9IHVybFswXTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKICAgICAgdmFyIHNlbGVjdHBybyA9IHsKICAgICAgICAvLyB1cmw6IHRoaXMuZGF0YS51cmwsCiAgICAgICAgaWQ6IHRoaXMucHJvZHVjdF90b2tlbgogICAgICB9OwogICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RfdG9rZW4oc2VsZWN0cHJvKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMTEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMyhyZXMpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgIC8vIHZhciBiZXN0ID0gdGhpcy5nZXRNYXgocmVzLmRhdGEua2V5d29yZCwnY291bnRfcnVsZWJhc2VkJykKICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhiZXN0KTsKICAgICAgICAgICAgICAgICAgX3RoaXM4Lmxpc3QgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXM4LnN0YXR1c2xpc3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczguc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX3RoaXM4LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOyAvLyB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgLy8gICBhZHZlcnRpc2VfaWQ6IHJlcy5kYXRhLmtleXdvcmRbMF0ucHJvZHVjdF90b2tlbl9pZCwKICAgICAgICAgICAgICAgICAgLy8gfTsKICAgICAgICAgICAgICAgICAgLy8gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGV3ZWlnaHQoCiAgICAgICAgICAgICAgICAgIC8vICAgcmVzLmRhdGEua2V5d29yZFswXS5tYXBfcnVsZV9iYXNlZF9pZCwKICAgICAgICAgICAgICAgICAgLy8gICBkYXRhCiAgICAgICAgICAgICAgICAgIC8vICkudGhlbigoKSA9PiB7fSk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMubGlzdC5rZXl3b3JkID0gW2Jlc3RdCiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NykgewogICAgICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoKSB7CiAgICAgICAgdmFyIGNvbiwgY29udGVudCwgY29udGVudGZ1bGwsIGRlc2M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5yZXBsYWNlQWxsKCIuIiwnJyk7CiAgICAgICAgICAgICAgICAvLyB1cmwgPSB1cmwuc3BsaXQoIi1pIik7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGEudXJsID0gdXJsWzBdOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhLnVybCk7CiAgICAgICAgICAgICAgICBfdGhpczkucHJvZHVjdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXM5LnByb2NoZWNrID0gW107CiAgICAgICAgICAgICAgICBfdGhpczkubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM5LnN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM5LnN0YXR1c3Byb2NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczkuc3RhdHVzcHJvZHVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM5LnN0YXR1c2xpc3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbiA9IHt9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmxvYWRkaWN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkuZGF0YS5jb250ZW50ID09IG51bGwgfHwgX3RoaXM5LmRhdGEuY29udGVudCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKHguYLguIbguKnguJPguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkuZGF0YS51cmwgPT0gbnVsbCB8fCBfdGhpczkuZGF0YS51cmwgPT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhbGVydCgi4LiB4Lij4Li44LiT4Liy4LiB4Lij4Lit4LiB4Lil4Liz4LiU4Lix4Lia4LiC4Lit4LiH4LmA4Lin4LmH4Lia4LmE4LiL4LiV4LmMIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA1MDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM5LmRhdGEudHlwZV9wcm9kdWN0SWQgPT0gbnVsbCB8fCBfdGhpczkuZGF0YS50eXBlX3Byb2R1Y3RJZCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguJvguKPguLDguYDguKDguJfguJzguKXguLTguJXguKDguLHguJPguJHguYwiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkuZGF0YS50eXBlX3J1bGViYXNlZElkID09IG51bGwgfHwgX3RoaXM5LmRhdGEudHlwZV9ydWxlYmFzZWRJZCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguIHguI7guILguK3guIfguKrguLTguJnguITguYnguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICBfdGhpczkubG9hZGluZyA9IHRydWU7IC8vIGNvbnNvbGUubG9nKHR5cGUpOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgLy8gdmFyIGZpbmR0eXBlID0gdGhpcy5maW5kdHlwZXByb2R1Y3QodGhpcy5kYXRhLmNvbnRlbnQpCiAgICAgICAgICAgICAgICAvLyB2YXIgc3BsaXQgPSBmaW5kdHlwZS5zcGxpdCgiXG4iKQogICAgICAgICAgICAgICAgLy8gdmFyIHR5cGUgPSBzcGxpdFszXQogICAgICAgICAgICAgICAgLy8gLy8gY29uc29sZS5sb2codHlwZSk7CiAgICAgICAgICAgICAgICAvLyBhd2FpdCBGREFUeXBlc1NlcnZpY2UuZ2V0ZmRhdHlwZXModHlwZSkudGhlbihhc3luYyAocmVzKT0+ewogICAgICAgICAgICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAvLyAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy50eXBlSWQgPSByZXMuZGF0YVswXS5pZAogICAgICAgICAgICAgICAgLy8gICB9ZWxzZXsKICAgICAgICAgICAgICAgIC8vICAgICB2YXIgbmFtZSA9IHsKICAgICAgICAgICAgICAgIC8vICAgICAgIG5hbWUgOiB0eXBlCiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIGF3YWl0IEZEQVR5cGVzU2VydmljZS5jcmVhdGVmZGF0eXBlKG5hbWUpLnRoZW4oKHJlcyk9PnsKICAgICAgICAgICAgICAgIC8vICAgICAgIHRoaXMudHlwZUlkID0gcmVzLmRhdGEuaWQKICAgICAgICAgICAgICAgIC8vICAgICB9KTsKICAgICAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHlwZUlkKTsKCiAgICAgICAgICAgICAgICBjb250ZW50ID0gIiI7CiAgICAgICAgICAgICAgICBjb250ZW50ZnVsbCA9IF90aGlzOS5kYXRhLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gX3RoaXM5LmRhdGEuY29udGVudC5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICIgIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cdWQ4M2RbXHVkZTAwLVx1ZGU0Zl0vZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8vbF8iLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oW1x1MjcwMC1cdTI3QkZdfFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVEQzAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURGRkZdfFtcdTIwMTEtXHUyNkZGXXxcdUQ4M0VbXHVERDEwLVx1RERGRl0pL2csICIgIik7IC8vIHRoaXMuZmRhID0gYXdhaXQgdGhpcy5maW5kZmRhKGNvbnRlbnQpOwoKICAgICAgICAgICAgICAgIGRlc2MgPSBfdGhpczkuZmluZGRlc2NyaXB0aW9uKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gNDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmdldGZkYShjb250ZW50KVswXTsKCiAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgIF90aGlzOS5mZGEgPSBfY29udGV4dDI0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczkuZmRhKTsKICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgY29udGVudDogZGVzYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi93b3JkdG9rZW5kZXNjIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjEyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjEocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIxJChfY29udGV4dDIzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBzZW50ZW5jZSA9IHJlcy5kYXRhLnNlbnRlbnQucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IF90aGlzOS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2U6IGRlc2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlX2tleXdvcmQ6IHJlcy5kYXRhLnNlbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfaWQ6IHJlcy5kYXRhLmtleXdvcmRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZWZ1bGw6IGNvbnRlbnRmdWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX3J1bGViYXNlZElkOiBfdGhpczkuZGF0YS50eXBlX3J1bGViYXNlZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX3Byb2R1Y3RJZDogX3RoaXM5LmRhdGEudHlwZV9wcm9kdWN0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19wYXRoOiBfdGhpczkuZGF0YS5pbWdfcGF0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkucHJvZHVjdF90b2tlbiA9PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNyhwcm9kdWN0dG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGVja2ZkYShjb250ZW50LCBfdGhpczkucHJvZHVjdF90b2tlbik7IC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjE0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wMywgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDMgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2xvb3AzKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wMyQoX2NvbnRleHQxNykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOyAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiBfdGhpczkucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogcmVzLmRhdGFbcl0uZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbjogcmVzLmRhdGFbcl0uc2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM5LnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkudG9rZW5kYXRhKHByby5kYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2xvb3AzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHIgPCByZXMuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmRlbGVnYXRlWWllbGQoX2xvb3AzKHIpLCAidDAiLCA1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMy5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFkdmVydGlzZVNlcnZpY2UuZGVsZXRlYWR2ZXJ0aXNlKF90aGlzOS5wcm9kdWN0X3Rva2VuKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRwcm9kdWN0X3Rva2VuKF90aGlzOS5wcm9kdWN0X3Rva2VuLCBkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZSh0aGlzLnByb2R1Y3RfdG9rZW4pLnRoZW4oYXN5bmMgKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmNoZWNrZmRhKGNvbnRlbnQsIF90aGlzOS5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vY29uc29sZS5sb2coY29uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coY29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZCIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjE5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3A0LCByLCBzZW50ZW5jZXRva2VuLCBhZHZlcnRpc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQyMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMC5wcmV2ID0gX2NvbnRleHQyMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wNCA9IGZ1bmN0aW9uIF9sb29wNChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gcmVzLmRhdGFbcl0uc2VudGVudC5yZXBsYWNlQWxsKCciJywgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOyAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiBfdGhpczkucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOiByZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW50OiBzZW50ZW5jZXRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW46IHJlcy5kYXRhW3JdLnNlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczkucHJvZHVjdF90b2tlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0a2V5d29yZChnZXRwcm90b2tlbikudGhlbihmdW5jdGlvbiAocHJvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkudG9rZW5kYXRhKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDQocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyMSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMigpIHsKICAgICAgICB2YXIgY29uLCBmaW5kdHlwZSwgc3BsaXQsIHR5cGUsIGNvbnRlbnQsIGNvbnRlbnRmdWxsLCBkZXNjOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzIkKF9jb250ZXh0MzUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNS5wcmV2ID0gX2NvbnRleHQzNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwucmVwbGFjZUFsbCgiLiIsJycpOwogICAgICAgICAgICAgICAgLy8gdXJsID0gdXJsLnNwbGl0KCItaSIpOwogICAgICAgICAgICAgICAgLy8gdGhpcy5kYXRhLnVybCA9IHVybFswXTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YS51cmwpOwogICAgICAgICAgICAgICAgX3RoaXMxMC5wcm9kdWN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczEwLnByb2NoZWNrID0gW107CiAgICAgICAgICAgICAgICBfdGhpczEwLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzMTAuc3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczEwLnN0YXR1c3Byb2NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczEwLnN0YXR1c3Byb2R1Y3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzMTAuc3RhdHVzbGlzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMxMC5wcm9kdWN0X3Rva2VuID0gMDsKICAgICAgICAgICAgICAgIGNvbiA9IHt9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5sb2FkZGljdCgpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxMC5kYXRhLmNvbnRlbnQgPT0gbnVsbCB8fCBfdGhpczEwLmRhdGEuY29udGVudCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKHguYLguIbguKnguJPguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDYwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEwLmRhdGEudXJsID09IG51bGwgfHwgX3RoaXMxMC5kYXRhLnVybCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguKXguLPguJTguLHguJrguILguK3guIfguYDguKfguYfguJrguYTguIvguJXguYwiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDYwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEwLmRhdGEudHlwZV9wcm9kdWN0SWQgPT0gbnVsbCB8fCBfdGhpczEwLmRhdGEudHlwZV9wcm9kdWN0SWQgPT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhbGVydCgi4LiB4Lij4Li44LiT4Liy4LmA4Lil4Li34Lit4LiB4Lib4Lij4Liw4LmA4Lig4LiX4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmMIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSA2MDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxMC5kYXRhLnR5cGVfcnVsZWJhc2VkSWQgPT0gbnVsbCB8fCBfdGhpczEwLmRhdGEudHlwZV9ydWxlYmFzZWRJZCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguIHguI7guILguK3guIfguKrguLTguJnguITguYnguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDYwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfdGhpczEwLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5maW5kdHlwZXByb2R1Y3QoX3RoaXMxMC5kYXRhLmNvbnRlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgZmluZHR5cGUgPSBfY29udGV4dDM1LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaW5kdHlwZSk7CiAgICAgICAgICAgICAgICBzcGxpdCA9IGZpbmR0eXBlLnNwbGl0KCJcbiIpOwogICAgICAgICAgICAgICAgdHlwZSA9IHNwbGl0WzNdOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSAzNzsKICAgICAgICAgICAgICAgIHJldHVybiBGREFUeXBlc1NlcnZpY2UuZ2V0ZmRhdHlwZXModHlwZSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIzKHJlcykgewogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjMkKF9jb250ZXh0MjUpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNS5wcmV2ID0gX2NvbnRleHQyNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC50eXBlSWQgPSByZXMuZGF0YVswXS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRkRBVHlwZXNTZXJ2aWNlLmNyZWF0ZWZkYXR5cGUobmFtZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAudHlwZUlkID0gcmVzLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjMpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy50eXBlSWQpOwogICAgICAgICAgICAgICAgY29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgY29udGVudGZ1bGwgPSBfdGhpczEwLmRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfdGhpczEwLmRhdGEuY29udGVudC5yZXBsYWNlQWxsKC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICIgIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cdWQ4M2RbXHVkZTAwLVx1ZGU0Zl0vZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8vbF8iLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oW1x1MjcwMC1cdTI3QkZdfFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVEQzAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURGRkZdfFtcdTIwMTEtXHUyNkZGXXxcdUQ4M0VbXHVERDEwLVx1RERGRl0pL2csICIgIik7IC8vIHRoaXMuZmRhID0gYXdhaXQgdGhpcy5maW5kZmRhKGNvbnRlbnQpOwoKICAgICAgICAgICAgICAgIGRlc2MgPSBfdGhpczEwLmZpbmRkZXNjcmlwdGlvbihjb250ZW50KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDU1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuZ2V0ZmRhKGNvbnRlbnQpWzBdOwoKICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgX3RoaXMxMC5mZGEgPSBfY29udGV4dDM1LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczEwLmZkYSk7CiAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRlc2MKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSA2MDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29yZHRva2VuZGVzYyIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyMSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMxKHJlcykgewogICAgICAgICAgICAgICAgICAgIHZhciBkZXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMSQoX2NvbnRleHQzNCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDM0LnByZXYgPSBfY29udGV4dDM0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgc2VudGVuY2UgPSByZXMuZGF0YS5zZW50ZW50LnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczEwLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZTogZGVzYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2Vfa2V5d29yZDogcmVzLmRhdGEuc2VudGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogcmVzLmRhdGEua2V5d29yZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlZnVsbDogY29udGVudGZ1bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcnVsZWJhc2VkSWQ6IF90aGlzMTAuZGF0YS50eXBlX3J1bGViYXNlZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX3Byb2R1Y3RJZDogX3RoaXMxMC5kYXRhLnR5cGVfcHJvZHVjdElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdfcGF0aDogX3RoaXMxMC5kYXRhLmltZ19wYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEwLnByb2R1Y3RfdG9rZW4gPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXByb2R1Y3RfdG9rZW4oZGVzKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjIyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjcocHJvZHVjdHRva2VuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNyQoX2NvbnRleHQzMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMwLnByZXYgPSBfY29udGV4dDMwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5wcm9kdWN0X3Rva2VuID0gcHJvZHVjdHRva2VuLmRhdGEuaWQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5jaGVja2ZkYShjb250ZW50LCBfdGhpczEwLnByb2R1Y3RfdG9rZW4pOyAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5wcm9kdWN0X3Rva2VuID0gcHJvZHVjdHRva2VuLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRlc2MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vY29uc29sZS5sb2coY29uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNihyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3A1LCByLCBzZW50ZW5jZXRva2VuLCBhZHZlcnRpc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjYkKF9jb250ZXh0MjkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyOS5wcmV2ID0gX2NvbnRleHQyOS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wNSA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfbG9vcDUocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2xvb3A1JChfY29udGV4dDI4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyOC5wcmV2ID0gX2NvbnRleHQyOC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gcmVzLmRhdGFbcl0uc2VudGVudC5yZXBsYWNlQWxsKCciJywgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7IC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6IF90aGlzMTAucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogcmVzLmRhdGFbcl0uZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbjogcmVzLmRhdGFbcl0uc2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI1JChfY29udGV4dDI3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXMxMC5wcm9kdWN0X3Rva2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RrZXl3b3JkKGdldHByb3Rva2VuKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNChwcm8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjQkKF9jb250ZXh0MjYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC50b2tlbmRhdGEocHJvLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfbG9vcDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEociA8IHJlcy5kYXRhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuZGVsZWdhdGVZaWVsZChfbG9vcDUociksICJ0MCIsIDUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZShfdGhpczEwLnByb2R1Y3RfdG9rZW4pLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMCQoX2NvbnRleHQzMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzMucHJldiA9IF9jb250ZXh0MzMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdHByb2R1Y3RfdG9rZW4oX3RoaXMxMC5wcm9kdWN0X3Rva2VuLCBkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjkkKF9jb250ZXh0MzIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzIucHJldiA9IF9jb250ZXh0MzIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZSh0aGlzLnByb2R1Y3RfdG9rZW4pLnRoZW4oYXN5bmMgKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5jaGVja2ZkYShjb250ZW50LCBfdGhpczEwLnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRlc2MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy9jb25zb2xlLmxvZyhjb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcDYsIHIsIHNlbnRlbmNldG9rZW4sIGFkdmVydGlzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI4JChfY29udGV4dDMxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMxLnByZXYgPSBfY29udGV4dDMxLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3A2ID0gZnVuY3Rpb24gX2xvb3A2KHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNldG9rZW4gPSByZXMuZGF0YVtyXS5zZW50ZW50LnJlcGxhY2VBbGwoJyInLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7IC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6IF90aGlzMTAucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOiByZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW50OiBzZW50ZW5jZXRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW46IHJlcy5kYXRhW3JdLnNlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczEwLnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oZnVuY3Rpb24gKHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC50b2tlbmRhdGEocHJvLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wNihyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDE4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjI4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMxKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDE0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0TWF4OiBmdW5jdGlvbiBnZXRNYXgoYXJyLCBwcm9wKSB7CiAgICAgIHZhciBtYXg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChtYXggPT0gbnVsbCB8fCBwYXJzZUludChhcnJbaV1bcHJvcF0pID4gcGFyc2VJbnQobWF4W3Byb3BdKSkgbWF4ID0gYXJyW2ldOwogICAgICB9CgogICAgICByZXR1cm4gbWF4OwogICAgfSwKICAgIGdldE1heGxlbmd0aDogZnVuY3Rpb24gZ2V0TWF4bGVuZ3RoKGFyciwgcHJvcCkgewogICAgICB2YXIgbWF4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAobWF4ID09IG51bGwgfHwgcGFyc2VJbnQoYXJyW2ldW3Byb3BdKSA+IHBhcnNlSW50KG1heFtwcm9wXSkpIG1heCA9IGFycltpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1heDsKICAgIH0sCiAgICBnZXRBbGxNYXhBcnJheTogZnVuY3Rpb24gZ2V0QWxsTWF4QXJyYXkoYXJyLCB2YWx1ZSkgewogICAgICB2YXIgYXJyYXkgPSBbXTsKICAgICAgYXJyLm1hcChmdW5jdGlvbiAobnVtLCBpZHgpIHsKICAgICAgICBpZiAobnVtLmFsbGNvdW50ID09IHZhbHVlKSB7CiAgICAgICAgICBhcnJheS5wdXNoKGFycltpZHhdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9LAogICAgdG9rZW5kYXRhOiBmdW5jdGlvbiB0b2tlbmRhdGEobGlzdCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzcoKSB7CiAgICAgICAgdmFyIF9sb29wNywgbCwgbWFwOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM3JChfY29udGV4dDQxKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDEucHJldiA9IF9jb250ZXh0NDEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKGxpc3Qua2V5d29yZC5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQxLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2xvb3A3ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9sb29wNyhsKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfbG9vcDckKF9jb250ZXh0NDApIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQwLnByZXYgPSBfY29udGV4dDQwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdC5rZXl3b3JkW2xdLmtleXdvcmRfZGljdF9pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0MC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGxpc3Qua2V5d29yZFtsXS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbGlzdC5rZXl3b3JkW2xdLmtleXdvcmRfZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfaWQ6IGxpc3Qua2V5d29yZFtsXS5kaWN0X2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2cobWFwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0MC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS5nZXRtYXBwcm9kdWN0KG1hcCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjkgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNihyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heHZhbHVlLCBpLCBiZXN0ZGF0YSwgYmVzdCwgcnVsZV9iYXNlZF9uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM2JChfY29udGV4dDM5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzOS5wcmV2ID0gX2NvbnRleHQzOS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4dmFsdWUgPSBfdGhpczExLmdldE1heChyZXMuZGF0YSwgImFsbGNvdW50Iik7IC8vIGNvbnNvbGUubG9nKG1heHZhbHVlLmFsbGNvdW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWF4dmFsdWUuYWxsY291bnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBfdGhpczExLmdldEFsbE1heEFycmF5KHJlcy5kYXRhLCBtYXh2YWx1ZS5hbGxjb3VudCk7IC8vIGNvbnNvbGUubG9nKGkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0ZGF0YSA9IF90aGlzMTEuZ2V0TWF4KGksICJsZW5ndGgiKTsgLy8gY29uc29sZS5sb2coYmVzdGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldEFsbEluZGV4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhiZXN0ZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJlc3RkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXRBbGxJbmRleGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYmVzdGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbGlzdC5rZXl3b3JkW2xdLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2U6IGJlc3RkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2coYmVzdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJlc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfbmFtZSA9IGJlc3RkYXRhLm5hbWUudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWUgPSBydWxlX2Jhc2VkX25hbWUucmVwbGFjZUFsbCgiLCIsICIiKTsgLy8gY29uc29sZS5sb2cocnVsZV9iYXNlZF9uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzOS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvbG9hZGRpY3Q/d29yZD0iICsgcnVsZV9iYXNlZF9uYW1lKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM1JChfY29udGV4dDM4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDM4LnByZXYgPSBfY29udGV4dDM4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzOC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YmVzdHJ1bGViYXNlZChiZXN0KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMzEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlYmFzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM0JChfY29udGV4dDM3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDM3LnByZXYgPSBfY29udGV4dDM3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlYmFzZWQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRfcnVsZWJhc2VkOiByZXMuZGF0YS5jb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZV9ydWxlYmFzZTogcmVzLmRhdGEuc2VudGVuY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEucnVsZV9iYXNlZF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWU6IHJlcy5kYXRhLnJ1bGVfYmFzZWRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBfcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEubWFwX2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKHJ1bGViYXNlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtsXS5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVydWxlYmFzZWQobGlzdC5rZXl3b3JkW2xdLmlkLCBydWxlYmFzZWQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMzJChfY29udGV4dDM2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzYucHJldiA9IF9jb250ZXh0MzYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGwgKyAxID09IGxpc3Qua2V5d29yZC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5nZXRkZXRhaWwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMzEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxOSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjI5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2xvb3A3KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbCA9IDA7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmICghKGwgPCBsaXN0LmtleXdvcmQubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQxLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MS5kZWxlZ2F0ZVlpZWxkKF9sb29wNyhsKSwgInQwIiwgNSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGwrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0MS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0ZGV0YWlsKCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUobGlzdCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB2YXIgX2xvb3A4ID0gZnVuY3Rpb24gX2xvb3A4KGspIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0LmtleXdvcmRba10pOwogICAgICAgIGRpY3RfaWQgPSBKU09OLnBhcnNlKGxpc3Qua2V5d29yZFtrXS5kaWN0X2lkKTsgLy8gdmFyIHJ1bGViYXNlZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlKQogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZWQpOwoKICAgICAgICBpZiAobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlKSB7CiAgICAgICAgICB2YXIgdW5pcXVlQ2hhcnNydWxlID0gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmZpbHRlcihmdW5jdGlvbiAoYywgaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZS5pbmRleE9mKGMpID09PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGRpY3RfaWQuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiB1bmlxdWVDaGFyc3J1bGUuaW5kZXhPZihuKSAhPT0gLTE7CiAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coZmlsdGVyZWRBcnJheSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmlsdGVyZWRBcnJheScsZmlsdGVyZWRBcnJheSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGljdF9pZCcsZGljdF9pZC5sZW5ndGgpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coc3VtZGljdElkLmxlbmd0aCk7CgogICAgICAgICAgcGVyY2VudGFnZSA9IDEwMCAqIHBhcnNlSW50KGZpbHRlcmVkQXJyYXkubGVuZ3RoKSAvIHBhcnNlSW50KGRpY3RfaWQubGVuZ3RoKTsgLy8gY29uc29sZS5sb2cocGVyY2VudGFnZSk7CgogICAgICAgICAgbGlzdC5rZXl3b3JkW2tdLnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsaXN0LmtleXdvcmRba10ucGVyY2VudGFnZSA9IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAoayArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMxMi5saXN0ID0gbGlzdDsgLy8gdGhpcy5zdGF0dXMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbGlzdC5rZXl3b3JkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGRpY3RfaWQ7CiAgICAgICAgdmFyIGZpbHRlcmVkQXJyYXk7CiAgICAgICAgdmFyIHBlcmNlbnRhZ2U7CgogICAgICAgIF9sb29wOChrKTsKICAgICAgfQogICAgfSwKICAgIGdldEFsbEluZGV4ZXM6IGZ1bmN0aW9uIGdldEFsbEluZGV4ZXMoYXJyLCB2YWwpIHsKICAgICAgdmFyIGluZGV4ZXMgPSBbXSwKICAgICAgICAgIGkgPSAtMTsKCiAgICAgIHdoaWxlICgoaSA9IGFyci5pbmRleE9mKHZhbCwgaSArIDEpKSAhPSAtMSkgewogICAgICAgIGluZGV4ZXMucHVzaChpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluZGV4ZXM7CiAgICB9LAogICAgZmluZGZkYTogZnVuY3Rpb24gZmluZGZkYShkYXRhKSB7CiAgICAgIHZhciB0ZXh0ID0gWyLguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiIsICLguK3guKIuIl07IC8vIHZhciBlbmQgPSBbJyddCgogICAgICB2YXIgZmluZGZkYSA9IGRhdGE7CgogICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRleHQubGVuZ3RoOyB0KyspIHsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pLCBkYXRhLmxlbmd0aCk7CiAgICAgICAgdmFyIGVuZGluZGV4ID0gdGhpcy5nZXRBbGxJbmRleGVzKGZpbmRmZGEsICIgIik7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSwgZW5kaW5kZXhbMV0pOwogICAgICB9IC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwoKCiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwgdGV4dC5sZW5ndGg7IHYrKykgewogICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwodGV4dFt2XSwgIiIpOwogICAgICB9CgogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKC9bXlxkLi1dL2csICcnKTsKICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgiLSIsICIiKTsKICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgi4oCTIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCIgIiwgIiIpOyAvLyBjb25zb2xlLmxvZyhmaW5kZmRhKTsKICAgICAgLy8gdmFyIHJlZ2V4ID0gL1xkKy9nOwogICAgICAvLyB2YXIgbWF0Y2hlcyA9IGZpbmRmZGEubWF0Y2gocmVnZXgpOyAgLy8gY3JlYXRlcyBhcnJheSBmcm9tIG1hdGNoZXMKICAgICAgLy8gY29uc29sZS5sb2cobWF0Y2hlc1swXSk7CgogICAgICByZXR1cm4gZmluZGZkYTsKICAgIH0sCiAgICBjaGVja2ZkYTogZnVuY3Rpb24gY2hlY2tmZGEoY29udGVudCwgaWQpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQwKCkgewogICAgICAgIHZhciBmZGEsIHByb2R1Y3Rfc3RhdHVzLCB1cmwsIGRhdGEsIG9wdGlvbnM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MCQoX2NvbnRleHQ0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQ0LnByZXYgPSBfY29udGV4dDQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMTMuZmRhKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmZGEgPSBfdGhpczEzLmZkYTsKICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgIHVybCA9ICJodHRwczovL3Rhd2FpZm9yaGVhbHRoLm9yZy9hcGkvb3J5b3IvY2hlY2stcHJvZHVjdCI7CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICBudW1iZXJfc3JjOiBmZGEKICAgICAgICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKGRhdGEpOwoKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjMzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzkoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb247CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzOSQoX2NvbnRleHQ0MykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQzLnByZXYgPSBfY29udGV4dDQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLm1lc3NhZ2UgfHwgZGF0YS5sZW5ndGggPiAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnByb2R1Y3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGE6IF90aGlzMTMuZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxjbm5vOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGljZW46ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkcjogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOZXdjb2RlOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogIi0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnByb2NoZWNrLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGE6IF90aGlzMTMuZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBmZGE6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY25jbm06ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGFfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lX3N0YXR1czogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXBybzogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiLSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuc3RhdHVzcHJvY2hlY2sgPSB0cnVlOyAvLyB0aGlzLnN0YXR1cyA9IHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuY25jbm0uaW5jbHVkZXMoIuC4hOC4h+C4reC4ouC4ueC5iCIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY25jbm0uaW5jbHVkZXMoIuC4ouC4geC5gOC4peC4tOC4gSIpIHx8IGRhdGEuY25jbm0uaW5jbHVkZXMoIuC5gOC4nuC4tOC4geC4luC4reC4mSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5jb2xvcmZkYSA9ICJiYWNrZ3JvdW5kLWNvbG9yOiNhM2U5YTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbG9yZmRhKTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2xvcmZkYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6IGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlcHJvOiBkYXRhLnR5cGVwcm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2tmZGEiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMzQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzOChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzgkKF9jb250ZXh0NDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0Mi5wcmV2ID0gX2NvbnRleHQ0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGE6IGZkYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYV9zdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lX3N0YXR1czogcmVzLmRhdGEubWFwbmFtZXN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2cocHJvKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRlbWFwKGlkLCBwcm8pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMucHJvZHVjdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnByb2R1Y3RoYSArICIgIiArIGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogY29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGE6IGZkYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmNubTogZGF0YS5jbmNubSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlcHJvOiBkYXRhLnR5cGVwcm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGNubm86IGRhdGEubGNubm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdGhhOiBkYXRhLnByb2R1Y3RoYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6IGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpY2VuOiBkYXRhLmxpY2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHI6IGRhdGEuQWRkciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOZXdjb2RlOiBkYXRhLk5ld2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEudG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnByb2NoZWNrLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcGZkYTogZGF0YS5sY25ubywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmNubTogZGF0YS5jbmNubSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0X3N0YXR1czogcmVzLmRhdGEubWFwY2F0c3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYV9zdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiByZXMuZGF0YS5tYXBuYW1lc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiByZXMuZGF0YS5jYXRlZ29yeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuc3RhdHVzcHJvY2hlY2sgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLmNvbG9yY2F0ID0gcmVzLmRhdGEuY29sb3JjYXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuY29sb3JuYW1lID0gcmVzLmRhdGEuY29sb3JuYW1lOyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2NoZWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mZGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTM4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTM5KTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIxKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuc3RhdHVzcHJvY2hlY2tvbmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczEzLnByb2NoZWNrdGV4dCA9ICdBcGkgdGF3YWlmb3JoZWFsdGgg4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4LiX4Liz4LiH4Liy4LiZ4LmE4LiU4LmJJzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQ0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXMxMy5wcm9kdWN0LnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAiLSIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogY29udGVudCwKICAgICAgICAgICAgICAgICAgZmRhOiBfdGhpczEzLmZkYSwKICAgICAgICAgICAgICAgICAgY25jbm06ICItIiwKICAgICAgICAgICAgICAgICAgdHlwZXBybzogIi0iLAogICAgICAgICAgICAgICAgICBsY25ubzogIi0iLAogICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6ICItIiwKICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICAgICAgICAgIGxpY2VuOiAiLSIsCiAgICAgICAgICAgICAgICAgIEFkZHI6ICItIiwKICAgICAgICAgICAgICAgICAgTmV3Y29kZTogIi0iLAogICAgICAgICAgICAgICAgICBzdGF0dXM6ICItIiwKICAgICAgICAgICAgICAgICAgdG9rZW46ICIiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczEzLnN0YXR1c3Byb2R1Y3QgPSB0cnVlOwoKICAgICAgICAgICAgICAgIF90aGlzMTMucHJvY2hlY2sucHVzaCh7CiAgICAgICAgICAgICAgICAgIGZkYTogX3RoaXMxMy5mZGEsCiAgICAgICAgICAgICAgICAgIG1hcGZkYTogIi0iLAogICAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6ICItIiwKICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgIGNhdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgIGZkYV9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICItIgogICAgICAgICAgICAgICAgfSk7IC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQoKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0ZmRhOiBmdW5jdGlvbiBnZXRmZGEoY29udGVudCkgewogICAgICB2YXIgdHQgPSBjb250ZW50LnNwbGl0KCcgJyk7IC8vIGNvbnNvbGUubG9nKHR0KTsKCiAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdHQubGVuZ3RoOyBsKyspIHsKICAgICAgICB2YXIgZmluZGZkYSA9IHR0W2xdLnJlcGxhY2VBbGwoJy0nLCAnJyk7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgi4oCTIiwgIiIpOwogICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIi4iLCAiIik7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgvW15cZC4tXS9nLCAnJyk7IC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwoKICAgICAgICBpZiAoZmluZGZkYSkgewogICAgICAgICAgaWYgKGZpbmRmZGEubGVuZ3RoID09IDEzKSB7CiAgICAgICAgICAgIGFyci5wdXNoKGZpbmRmZGEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc29sZS5sb2coYXJyKTsKICAgICAgcmV0dXJuIGFycjsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgdGhpcy5wcm9kdWN0X3Rva2VuID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5xdWVyeS5pZCk7CiAgICB0aGlzLmdldHByb2R1Y3R0eXBlKCk7CiAgICB0aGlzLmdldHJ1bGViYXNlZHR5cGUoKTsKCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQpIHsKICAgICAgUHJvZHVjdHNTZXJ2aWNlLmdldHByb2R1Y3R0b2tlbih0aGlzLiRyb3V0ZS5xdWVyeS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMxNC5kYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMxNC5kYXRhLmNvbnRlbnQgPSByZXMuZGF0YS5zZW50ZW5jZWZ1bGw7CiAgICAgICAgX3RoaXMxNC5pbWdfcGF0aCA9IHJlcy5kYXRhLmltZ19wYXRoOyAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSAvLyB2YXIgZiA9IHRoaXMuZmluZGZkYSgn4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi7guYDguKXguILguIjguJTguYHguIjguYnguIcgMTMtMS0xLTc1NjItMi0wMDA2JykKICAgIC8vIHZhciB0ZXh0ID0gWyLguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiIsIuC4reC4oi4iXTsKICAgIC8vIHZhciBzZW4gPSAn4Lit4LiiLjE0LTEtMDI2NjItMi0wMDIxIOC4reC4oi4gMTMtMS0xLTc1NjItMi0wMDA2JwogICAgLy8gdmFyIGwgPSBzZW4uc3BsaXQoJyAnKQogICAgLy8gY29uc29sZS5sb2cobCk7CiAgICAvLyB2YXIgZiA9IHRoaXMuZmluZGZkYShzZW4pCiAgICAvLyB2YXIgdGV4dCA9IFsi4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi4iLCLguK3guKIuIl07CiAgICAvLyAgIC8vIHZhciBlbmQgPSBbJyddCiAgICAvLyAgIHZhciBmaW5kZmRhID0gc2VuOwogICAgLy8gICBmb3IgKGxldCB0ID0gMDsgdCA8IHRleHQubGVuZ3RoOyB0KyspIHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkpOwogICAgLy8gICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0QWxsSW5kZXhlcyhsLHRleHRbdF0pKTsKICAgIC8vICAgfQogICAgLy8gY29uc29sZS5sb2coZik7CiAgICAvLyAgICAgdmFyIGJlc3QgPSB7CiAgICAvLyAgICAgImlkIjogNjcsCiAgICAvLyAgICAgInNlbnRlbmNlIjogewogICAgLy8gICAgICAgICAibGVuZ3RoIjogMiwKICAgIC8vICAgICAgICAgImFsbGNvdW50IjogMTAwLAogICAgLy8gICAgICAgICAicnVsZSI6IFsKICAgIC8vICAgICAgICAgICAgIDg4OTksCiAgICAvLyAgICAgICAgICAgICA1NwogICAgLy8gICAgICAgICBdLAogICAgLy8gICAgICAgICAibmFtZSI6IFsKICAgIC8vICAgICAgICAgICAgICLguITguKfguJrguITguLjguKEiLAogICAgLy8gICAgICAgICAgICAgIuC4meC5ieC4s+C4q+C4meC4seC4gSIKICAgIC8vICAgICAgICAgXSwKICAgIC8vICAgICAgICAgIm1hcF9pZCI6IDc1CiAgICAvLyAgICAgfQogICAgLy8gfQogICAgLy8gICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRiZXN0cnVsZWJhc2VkKGJlc3QpLnRoZW4oCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAocmVzKSA9PiB7CiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gICAgICAgICAgICAgICAgICAgICB9KTsKICAgIC8vIHZhciB0ZXh0ID0gJ+C4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIDEzLTEtMTM0NjUtNS0wMDUyIOC4iOC4s+C4meC4p+C4meC4quC4tOC4meC4hOC5ieC4siA0MTUg4Liq4LmI4LiH4LiI4Liy4LiBJwogICAgLy8gY29uc29sZS5sb2codGhpcy5maW5kZmRhKHRleHQpKTsKICAgIC8vIHRoaXMuZGF0YS51cmwgPQogICAgLy8gICAiaHR0cHM6Ly9zaG9wZWUuY28udGgvJUUyJTk5JUE2JUVGJUI4JThGJUUwJUI5JTgyJUUwJUI4JTg5JUUwJUI4JUExJUUwJUI5JTgzJUUwJUI4JUFCJUUwJUI4JUExJUUwJUI5JTg4LSVFMCVCOCU4MiVFMCVCOCVBRCVFMCVCOCU4NyVFMCVCOSU4MSVFMCVCOCU5NyVFMCVCOSU4OSVFMiU5OSVBNiVFRiVCOCU4Ri0lRTAlQjglODIlRTAlQjglQjIlRTAlQjglQTIlRTAlQjglOTQlRTAlQjglQjUlRTAlQjglQTElRTAlQjglQjIlRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGLSVFMCVCOCVBNSVFMCVCOCVCNCVFMCVCOSU4MiVFMCVCOCU4QiVFMCVCOSU4OC0lRTAlQjglOUUlRTAlQjglQTUlRTAlQjglQjElRTAlQjglQUEtJUUyJTgwJThCLWNvZmZlZS1saXNob3UtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JTg0JUUwJUI4JUE3JUUwJUI4JTlBJUUwJUI4JTg0JUUwJUI4JUI4JUUwJUI4JUExJUUwJUI4JTk5JUUwJUI5JTg5JUUwJUI4JUIzJUUwJUI4JUFCJUUwJUI4JTk5JUUwJUI4JUIxJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCU4NCVFMCVCOCVCOCVFMCVCOCVBMSVFMCVCOCVBQiVFMCVCOCVCNCVFMCVCOCVBNy0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglQTUlRTAlQjglOTQlRTAlQjglOTklRTAlQjklODklRTAlQjglQjMlRTAlQjglQUIlRTAlQjglOTklRTAlQjglQjElRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JUE1JUUwJUI4JTk0JUUwJUI4JTg0JUUwJUI4JUE3JUUwJUI4JUIyJUUwJUI4JUExJUUwJUI4JUFEJUUwJUI5JTg5JUUwJUI4JUE3JUUwJUI4JTk5IjsKICAgIC8vIHRoaXMuZGF0YS5jb250ZW50ID0KICAgIC8vICAgIu+4j+C4luC5ieC4suC5gOC4m+C5h+C4meC4peC4ueC4geC4hOC5ieC4suC4nuC4tOC4oeC5geC4peC5ieC4pyDguJTguLnguYHguKXguIjguJnguJnguYnguLPguKvguJnguLHguIHguKXguJTguYDguKXguKLguITguYjguLAg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4Liq4Li04LiZ4LiE4LmJ4Liy4LmB4Lil4LmJ4LinIOC4l+C4seC4geC5geC4iuC4l+C4oeC4suC4hOC4uOC4ouC4geC4seC4meC5hOC4lOC5ieC5gOC4peC4ouC4hOC5iOC4sCI7CiAgICAvLyAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgnLWkuJykKICAgIC8vIHZhciBjb250ZW50ID0gdGhpcy5kYXRhLmNvbnRlbnQucmVwbGFjZUFsbCgKICAgIC8vICAgLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywKICAgIC8vICAgIiIKICAgIC8vICk7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKAogICAgLy8gICAvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywKICAgIC8vICAgIiIKICAgIC8vICk7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIC8vIC8vIGNvbnNvbGUubG9nKExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSsnL3dvcmR0b2tlbmRlc2M/dGV4dD0nICsgY29udGVudCk7CiAgICAvLyAvLyBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpKycvd29yZHRva2VuZGVzYz90ZXh0PScrY29udGVudCkudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAvLyAvLyAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vIC8vIH0pCiAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZD90ZXh0PSIgKyBjb250ZW50KTsKICAgIC8vIHZhciBjb24gPSB7CiAgICAvLyAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAvLyB9OwogICAgLy8gYXhpb3MKICAgIC8vICAgLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iICsgY29udGVudCwgY29uKQogICAgLy8gICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAvLyAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gICAgIC8vICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgIC8vICAgICAvLyAgICAgICAgIHZhciBhZHZlcnRpc2UgPSB7CiAgICAvLyAgICAgLy8gICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6MSwKICAgIC8vICAgICAvLyAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOnJlcy5kYXRhW3JdLmtleXdvcmRfZGljdF9pZCwKICAgIC8vICAgICAvLyAgICAgICAgICAgZGljdF9pZDpyZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgLy8gICAgIC8vICAgICAgICAgICBkaWN0X25hbWU6cmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgLy8gICAgIC8vICAgICAgICAgICBzZW46cmVzLmRhdGFbcl0uc2VuLAogICAgLy8gICAgIC8vICAgICAgICAgICBzZW50ZW50OnJlcy5kYXRhW3JdLnNlbnRlbnQsCiAgICAvLyAgICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgLy8gICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oKHJlcyk9PnsKICAgIC8vICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAvLyAgICAgICB9CiAgICAvLyAgIH0pOwogICAgLy8gLy8gIGNvbnNvbGUubG9nKHVybCk7CiAgICAvLyAvLyAgICAgdmFyIHNlbGVjdHBybyA9IHsKICAgIC8vIC8vICAgICAgIHVybDp1cmxbMF0KICAgIC8vIC8vICAgICAgfQogICAgLy8gLy8gICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RfdG9rZW4oc2VsZWN0cHJvKS50aGVuKChyZXMpPT57CiAgICAvLyAvLyAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAvLyB2YXIgbGlzdCA9IHJlcy5kYXRhCiAgICAvLyAvLyB0aGlzLnRva2VuZGF0YShsaXN0KQogICAgLy8gLy8gZm9yIChsZXQgbCA9IDA7IGwgPCBsaXN0LmtleXdvcmQubGVuZ3RoOyBsKyspIHsKICAgIC8vIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5saXN0LmtleXdvcmRbbF0ubWFwKTsKICAgIC8vIC8vICAgLy8gZm9yIChsZXQgbSA9IDA7IG0gPCB0aGlzLmxpc3Qua2V5d29yZFtsXS5sZW5ndGg7IG0rKykgewogICAgLy8gLy8gICAgIGlmIChsaXN0LmtleXdvcmRbbF0ubWFwKSB7CiAgICAvLyAvLyAgICAgICB2YXIgbWFwID0gewogICAgLy8gLy8gICAgIHVybDpKU09OLnN0cmluZ2lmeShsaXN0LmtleXdvcmRbbF0ubWFwKQogICAgLy8gLy8gICAgICB9CiAgICAvLyAvLyAgICAgLy8gIGNvbnNvbGUubG9nKG1hcCk7CiAgICAvLyAvLyAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0bWFwcHJvZHVjdChtYXApLnRoZW4oKHJlcyk9PnsKICAgIC8vIC8vICAgICAgIGxpc3Qua2V5d29yZFtsXS5ydWxlYmFzZSA9IHJlcy5kYXRhCiAgICAvLyAvLyAgICAgICBpZiAobCsxID09IGxpc3Qua2V5d29yZC5sZW5ndGgpIHsKICAgIC8vIC8vICAgICAgICAgdGhpcy5jb21wYXJlKGxpc3QpCiAgICAvLyAvLyAgICAgICB9CiAgICAvLyAvLyAgICAgIH0pOwogICAgLy8gLy8gICAgIH0KICAgIC8vIC8vICAgfQogICAgLy8gLy8gfQogICAgLy8gLy8gY29uc29sZS5sb2codGhpcy5saXN0KTsKICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZTsKICAgIC8vIC8vICB9KQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwZA,0B,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,aADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACAC,2BADA;AAEAC,uBAFA;AAGAC,0BAHA;AAIAC,8BAJA;AAKAC,sBALA;AAMAC,kBANA;AAOAC,mBAPA;AAQAC,mBARA;AASAC,oBATA;AAUAC,cAVA;AAWAC,aAXA;AAYAC,cAZA;AAaAC,mBAbA;AAcAC,iBAdA;AAeAC,oBAfA;AAgBAC,kBAhBA;AAiBAC,mBAjBA;AAkBAC,uBAlBA;AAmBAC,cAnBA;AAoBAC,sBApBA;AAqBAC,mBArBA;AAsBAC,kBAtBA;AAuBAC,kBAvBA;AAwBAC,2CAxBA;AAyBAC,0CAzBA;AA0BAC,0CA1BA;AA2BAC,YA3BA;AA4BAC,iBA5BA;AA6BAC,0CA7BA;AA8BAC,cA9BA;AA+BAC,iBA/BA;AAgCAC,gBAhCA;AAiCAC,aAjCA;AAkCAC,aAlCA;AAmCAlC,cAnCA;AAoCAmC,sBApCA;AAqCAC,4BArCA;AAsCAC,aAtCA;AAuCAC,aAvCA;AAwCAC,iBAxCA;AAyCAC,kBAzCA;AA0CAC,gBA1CA;AA2CAC,eA3CA;AA4CAC,sBA5CA;AA6CAC,sBA7CA;AA8CAC,uBA9CA;AA+CAC,kBA/CA;AAgDAC,sBAhDA;AAiDAC;AAjDA;AAmDA,GAzDA;AA0DAC;AACAC,eADA,yBACA;AACA;AACA;AAHA,GA1DA;AA+DAC;AACAC,gBADA,wBACAC,GADA,EACA;AACA;AACA;AAEA;AACA;AACA,0BANA,CAOA;AACA,KATA;AAUAC,gBAVA,0BAUA;AAAA;;AACA;AACAC,iDAFA,CAEA;AACA;AACA;AACA;;AACA;AACAC;AACAC,YACAC,IADA,CACAC,IADA,EACAJ,QADA,EAEAK,IAFA,CAEA;AACA;AACAJ;AACA;AACA,OANA,EAOAK,KAPA,CAOA;AACAL;AACA,OATA;AAUA,KA5BA;AA6BAM,kBA7BA,4BA6BA;AAAA;;AACAC;AACA;AACA;AACA,OAHA;AAIA,KAlCA;AAmCAC,oBAnCA,8BAmCA;AAAA;;AACAC;AACA;AACA;AACA,OAHA;AAIA,KAxCA;AAyCAC,cAzCA,sBAyCAlE,IAzCA,EAyCA;AACAA,8BADA,CAEA;;AACA;;AACA;AACA;AACAmE;AACA,OAPA,CAQA;;;AACA,+BATA,CAUA;;AACAC,6EAXA,CAYA;;AACA;AACA,KAvDA;AAwDAC,kBAxDA,0BAwDAC,CAxDA,EAwDAC,CAxDA,EAwDA;AACA;AACA;;AACA;AACAC;AACA,OAFA,MAEA;AACAA;AACA,OAFA,MAEA;AACAA;AACA;;AACA;AACA,KAnEA;AAoEAC,SApEA,mBAoEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjFA;AAkFAC,OAlFA,eAkFA1E,IAlFA,EAkFA;AACA;AACA;;AACA;AACAA;AAAA;AAAA;AACA2E;AAEAA;AACA,OALA,MAKA;AACAA;AACA;;AAEA;AACA,KA/FA;AAgGAC,QAhGA,kBAgGA;AACA;AACA;AACAC;AACA,OAFA,MAEA;AACA;AACAhF,6BADA;AAEAgB;AAFA,UADA,CAKA;;AACAiE;AACA;AACA;AACAD;AACA,WAFA,MAEA;AACAE;AACA;AACA;AAEAC;AACAH,oCALA,CAMA;AACA,aAPA;AAQA;AACA,SAdA;AAeA;AACA,KA1HA;AA2HAI,iBA3HA,yBA2HAjF,IA3HA,EA2HA;AACA;AACA;AACA;AACA;AACA,KAhIA;AAiIAkF,cAjIA,sBAiIAC,GAjIA,EAiIA1C,MAjIA,EAiIA;AAAA;;AACA;AACA;;AAFA,iCAIA2C,CAJA;AAKA;AACAL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACAM;AACA,qBAJA,CAKA;AACA;;;AANA,0BAOAD,mBAPA;AAAA;AAAA;AAAA;;AAQAE,uBARA,6HAQAD,MARA,SASA;;AATA;AAAA,2BAWAE;AACA;AACA;AACAf;;AACA;AACA;AACAA;AACA;;AACAA;AACAA;AACAA,oCATA,CAUA;;AAAA;AACA,wDAXA,CAYA;;AAAA;AACAe;AACA;AACAC,sDADA;AAEAC,2CAFA;AAGA5E;AAHA;AAKA6E;AACA;AACA;AACA;AACA;AACA;AACAb;;AAEA,6CARA,CASA;AACA;AACA;AACA;;AACA,2BAbA;AAcA,yBApBA;AAqBA,uBAlCA,MAkCA;AACA;AACA;AACApC;AADA;AAGA8C,0DACAI,cADA,EAEAC,aAFA,EAGAhC,IAHA,CAGA;AACAiB;;AAEA;AACA,yBAPA;AAQA;AACA,qBAjDA,CAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AANA;;AAIA;AAAA;AAiEA;AACA,KAvMA;AAwMAgB,oBAxMA,4BAwMA7F,IAxMA,EAwMAyC,MAxMA,EAwMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,uCADA,CAEA;AACA;AACA;;AACAqD,qBALA,GAKA;AACAjG,0CADA;AAEA6C,uCAFA;AAGAqD;AAHA,iBALA,EAWA;;AAXA;AAAA,uBAYAL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACAM,uCAFA,GAEA,CAFA;AAGAC,sCAHA,GAGA,CAHA;AAIAC,kCAJA,GAIA,CAJA;AAKAC,wCALA,GAKA,EALA;;AAMA;AACAA;AACAH;AACAC;AACAH;AACA;;AACA;AACAG;AACA;;AACA;AACAD;AACA,6BAjBA,CAkBA;;;AAAA;AACAG,uDAnBA,CAoBA;;AAAA;AACAD;AACAE,mCAtBA,GAsBA;AACAC,2CADA;AAEAF,mDAFA;AAGAtF,uCAHA;AAIA4B,4CAJA;AAKA6D,yDALA;AAMAC,gEANA;AAOAP,sDAPA;AAQAC,oDARA;AASAC,4CATA;AAUAM;AAVA,6BAtBA;;AAAA,iCAkCAC,UAlCA;AAAA;AAAA;AAAA;;AAAA;AAAA,mCAmCAf,oIACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDAEA,kBAFA;;AAAA;AAGAD;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADA,GAnCA;;AAAA;AAAA;AAAA;;AAAA;AA+CAa;AAAA,kGACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACAgB,8CAFA,GAEAf,WAFA;AAGAG;AACAa,+CAJA,GAIAC,wBAJA,EAKA;AACA;;AANA,sGAOAxB,CAPA;AAAA;AAAA;AAAA;AAAA;AAAA,uDASAuB,UATA;AAAA;AAAA;AAAA;;AAAA;AAAA,yDAUA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA8B,kEAFA,GAEA;AACAC,yFADA;AAEArB,mFAFA;AAGAsB,wFAHA;AAIAC;AAJA,+DAFA,EAQA;;AARA;AAAA,qEASAzB;AAAA;AAAA;AAAA;AAAA;AAAA,8EACAH,uBADA;AAAA;AAAA;AAAA;;AAAA;AAAA,+EAEAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACAtB;AADA;AAAA,2FAEA,kBAFA;;AAAA;AAGAqB;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,4EAFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEATA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,sDAVA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOAO,yCAPA,GAOA,CAPA;;AAAA;AAAA,8CAOAA,kBAPA;AAAA;AAAA;AAAA;;AAAA,8EAOAA,CAPA;;AAAA;AAOAA,2CAPA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADA;;AAAA;AAAA;AAAA;AAAA;;AA/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,oBAZA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2GA,KAnTA;AAoTA6B,gBApTA,wBAoTApH,IApTA,EAoTA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAbA,CAcA;;AACA4D,YACAyD,GADA,CACAC,2DADA,EAEAvD,IAFA,CAEA;AACA;AACA;AACA,OALA,EAfA,CAqBA;AACA;;AACA;AACAwD;AADA;AAGA3D,YACAC,IADA,CACAyD,mDADA,EACAE,GADA,EAEAzD,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,EA1BA,CAmCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,KAxYA;AAyYA0D,QAzYA,kBAyYA;AACA;AACA9D;AACA;AACAA;AACA;AACA4D,6CACA,gEADA,EAEA,EAFA;AAIAA,mCACA,gmBADA,EAEA,GAFA;AAKAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA,+CAxBA,CAwBA;;AACAA,mCACA,sHADA,EAEA,GAFA;AAIA5D;AACA,KAvaA;AAwaA+D,YAxaA,sBAwaA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,iBADA;;AAAA;AAEAH,uBAFA,GAEA,EAFA;AAGAA,yDACA,gEADA,EAEA,EAFA;AAIAA,6CACA,gmBADA,EAEA,GAFA;AAKAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA,yDArBA,CAqBA;;AACAA,6CACA,sHADA,EAEA,GAFA;AAIAtF,oBA1BA,G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;AAUAC,gCAVA;AAWAX,8BAXA;AAYAnK;AAZA,mBAnJA,CAkKA;;;AAlKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoKA,KArxCA;AAsxCAgL,UAtxCA,kBAsxCA/E,OAtxCA,EAsxCA;AACA,kCADA,CAGA;;AACA;;AACA;AACA;AACAK;AACAA;AACAA,qDAJA,CAKA;;AACA;AACA;AACAtD;AACA;AACA;AAEA;;AACAX;AACA;AACA;AA1yCA,GA/DA;AA22CA4I,SA32CA,qBA22CA;AAAA;;AACA;AACA5I;AACA;AACA;;AACA;AACA6I;AACA;AACA;AACA,6CAHA,CAIA;AACA,OALA;AAMA,KAZA,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAv+CA","names":["name","components","ClipLoader","data","statusprocheck","statuslist","statusproduct","statusprocheckone","color","size","margin","radius","loading","list","url","file","status","urlPath","imagelists","tokenize","matchname","matchcategory","type","matchnamesum","statusname","statuscat","statusfda","colorname","colorfda","colorcat","id","keyword","colorkey","desc","arrList","alldata","back","next","product_token","title","key","fda","product","procheck","answer","typeId","prochecktext","producttypes","rulebasetypes","filename","selectedFile","img_path","computed","currentUser","methods","onFileChange","evt","onUploadFile","formData","console","axios","post","http","then","catch","getproducttype","ProductTypesService","getrulebasedtype","RulebasedTypesService","getsentent","arr","arrtxt","getstatuscheck","t","f","text","clear","cut","mapname","save","alert","KeywordService","DictService","document","getpercentage","savetorule","sen","d","iddata","sql","RuleBasedService","rule_based_id","dict_id","MapRuleBasedService","res","updatemaprule","savetorule_based","datas","advertiseId","statusfalse","statustrue","weight","advertise_id","maprule","keyword_id","user","map_dict","map_advertise","check","map_id","sendata","JSON","rule","map_rule_based_id","dict_name","no","checkkeyword","get","LinkService","content","con","find","checkkey","findtypeproduct","findfda","finddescription","loaddict","getdetail","edit","contentfull","des","sentence","sentence_keyword","sentencefull","type_rulebasedId","type_productId","r","sentencetoken","advertise","product_token_id","keyword_dict_id","sentent","AdvertiseService","getprotoken","replaceAll","search","findtype","split","FDATypesService","getMax","prop","max","getMaxlength","getAllMaxArray","value","array","tokendata","l","map","maxvalue","i","bestdata","best","rule_based_name","rulebased","count_rulebased","sentence_rulebase","compare","k","filteredArray","percentage","getAllIndexes","val","indexes","checkfda","product_status","number_src","options","method","headers","Accept","body","fetch","detail","cncnm","typepro","lcnno","productha","produceng","licen","Addr","Newcode","token","mapfda","cat_status","fda_status","name_status","pro","getfda","mounted","ProductsService"],"sourceRoot":"src/components","sources":["addproducttoken.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div>\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">ลำดับของเว็บไซต์</label>\n          <input\n          v-model=\"data.url\"\n                      type=\"text\"\n                      class=\"form-control form-control-sm\"\n                    />\n                    <label for=\"exampleFormControlTextarea1\" class=\"mt-3\">ประเภทผลิตภัณฑ์</label>\n                    <div class=\"form-check\" v-for=\"(p,i) in producttypes\" :key=\"i\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"types\" :id=\"'types'+p.name\" :value=\"p.id\" v-model=\"data.type_productId\">\n  <label class=\"form-check-label\" :for=\"'types'+p.name\">\n    {{p.name}}\n  </label>\n</div>\n<!-- <div class=\"form-check\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios2\" value=\"option2\">\n  <label class=\"form-check-label\" for=\"exampleRadios2\">\n    Second default radio\n  </label>\n</div> -->\n        </div>\n        <div class=\"form-group\">\n                  <label for=\"username\">รูปภาพสินค้า</label><br>\n                  <img :src=\"img_path\" style=\"width:30%\">\n                  <input\n        id=\"my_file\"\n        class=\"form-control\"\n        type=\"file\"\n        accept=\"image/*\"\n        @change=\"onFileChange\"\n      />\n                </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlTextarea1\">รายละเอียดสินค้า</label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <!-- <label for=\"exampleFormControlTextarea1\" class=\"mt-3\">ประเภทผลิตภัณฑ์</label> -->\n                    <div class=\"form-check\" v-for=\"(r,i) in rulebasetypes\" :key=\"i\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"rulebased\" :id=\"'rule'+r.name\" :value=\"r.id\" v-model=\"data.type_rulebasedId\">\n  <label class=\"form-check-label\" :for=\"'rule'+r.name\">\n    {{r.name}}\n  </label>\n</div>\n<div style=\"text-align:center\">\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-success\" v-if=\"!$route.query.id\">\n          เพิ่มข้อมูลสินค้า</button\n        >\n        <button @click=\"edit()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-success\" v-else>\n          แก้ไขข้อมูลสินค้า</button\n        >&nbsp;\n        <button @click=\"clear()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-danger\">\n          ล้างข้อมูล\n        </button>\n      </div>\n    </div>\n      <table class=\"table table-bordered\" v-if=\"statusprocheck\">\n        <thead>\n          <tr>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              เงื่อนไขการตรวจสอบข้อที่ 1\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              ข้อมูลจากฐานข้อมูลอย.\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              ข้อมูลจากเว็บไซต์\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              ผลการตรวจสอบ\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              ข้อสรุป\n            </th>\n          </tr>\n        </thead>\n        <!-- {{procheck}} -->\n        <tbody>\n          <tr v-for=\"(p,o) in procheck\" :key=\"o\">\n            <td :style=\"colorfda\">เลขที่อนุญาต</td>\n            <td :style=\"colorfda\">{{ p.mapfda }}</td>\n            <td :style=\"colorfda\">{{ p.fda }}</td>\n            <td :style=\"colorfda\">{{ p.cncnm }}</td>\n            <td\n              v-if=\"\n                p.cat_status &&\n                p.name_status &&\n                p.fda_status == 1\n              \"\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #a3e9a4;\n              \"\n            >\n              <span>ผ่าน</span>\n            </td>\n            <td\n              v-else\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #f9bdbb;\n              \"\n            >\n              <span>ไม่ผ่าน</span>\n            </td>\n          </tr>\n          <tr v-for=\"(pp,oo) in procheck\" :key=\"oo+10\">\n            <td :style=\"colorcat\">ประเภทผลิตภัณฑ์</td>\n            <td :style=\"colorcat\">{{ pp.typepro }}</td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.typepro\">{{ pp.type }}</span\n              ><span v-else>-</span>\n            </td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.cat_status\">ผ่าน</span\n              ><span v-else>ไม่ผ่าน</span>\n            </td>\n          </tr>\n          <tr v-for=\"(ppp,ooo) in procheck\" :key=\"ooo+20\">\n            <td :style=\"colorname\">ชื่อผลิตภัณฑ์</td>\n            <td :style=\"colorname\">\n              {{ ppp.productha }}<br />{{ ppp.produceng }}\n            </td>\n            <td :style=\"colorname\"><span v-html=\"ppp.name\"></span></td>\n            <td :style=\"colorname\">\n              <span v-if=\"ppp.name_status\">ผ่าน</span\n              ><span v-else>ไม่ผ่าน</span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div style=\"text-align:center\" v-if=\"statusprocheckone && statuslist\"><span> เงื่อนไขการตรวจสอบข้อที่ 1 ไม่สามารถตรวจสอบได้ เนื่องจาก {{prochecktext}}</span></div>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"statuslist\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              เงื่อนไขการตรวจสอบข้อที่ 2\n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: top\">\n              ข้อความโฆษณา\n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              ข้อความโฆษณาเกินจริง<br>\n              <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                        เพิ่ม keyword</i\n                      >\n                    </button>\n                  </div>\n            </th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\">รายละเอียดสินค้า</td>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\">ข้อความโฆษณา</th> -->\n            <!-- {{list}} -->\n            \n            <td :style=\"colorkey\" v-if=\"list.keyword != 1\">\n             \n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentence_rulebase\"></span><br /><br />\n                  <span v-html=\"getsentent(k.rule_based_name)\"></span>\n                  <!-- <span v-for=\"(s, idx) in k.rule_based_name\" :key=\"idx\">{{\n                    s\n                  }}</span> -->\n                  <br /><br />\n                  <!-- <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span> -->\n                  <span>ตรงกฎ</span>\n                  <span v-if=\"k.count_rulebased\"\n                    > {{ getpercentage(k) }}%</span\n                  ><br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                        เพิ่ม keyword</i\n                      >\n                    </button>\n                  </div> -->\n                </td>\n                <td>\n                  <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span\n                  >\n                  \n                  <!-- <span v-if=\"answer == 1\">เกินจริง</span\n                  ><span v-if=\"answer == 9\">ไม่เกินจริง</span\n                  ><span v-if=\"answer == 0\"></span> -->\n                </td>\n\n                <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td>\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <!-- <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                        เพิ่ม keyword</i\n                      >\n                    </button>\n                  </div> -->\n              <tr>\n                ไม่พบข้อความโฆษณาเกินจริง\n                <br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                        เพิ่ม keyword</i\n                      >\n                    </button>\n                  </div> -->\n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table mt-3\" v-if=\"statusproduct\">\n        <thead>\n          <tr>\n            <th scope=\"col\">สินค้า</th>\n            <th scope=\"col\">ข้อมูล</th>\n            <th scope=\"col\">FDA</th>\n            <th scope=\"col\">ตัดคำ</th>\n            <th scope=\"col\">ข้อมูลจากฐานข้อมูลอย.</th>\n            <!-- <th scope=\"col\"></th> -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(l, i) in product\" :key=\"i\">\n            <td :style=\"l.bg\">{{ l.name }}</td>\n            <td :style=\"l.bg\">{{ l.detail }}</td>\n            <!-- <td :style=\"l.bg\">\n              <div class=\"row\">\n          <div class=\"col-md-2\" v-for=\"(im ,i) in imagelists\" :key=\"i\">\n            <img :src=\"im\" width=\"100%\"/>\n          </div>\n        </div>\n            </td> -->\n            <td :style=\"l.bg\" style=\"width: 300px\">\n              <div>\n                เลขที่อนุญาต : {{ l.fda }}<br />\n                <!-- ชื่อผลิตภัณฑ์: <span v-html=\"matchname\"></span> -->\n                <!-- ชื่อผลิตภัณฑ์: {{l.productha}} -->\n              </div>\n            </td>\n            <td :style=\"l.bg\">{{ cut(l.token) }}</td>\n            <td\n              style=\"background-color: #bdedff\"\n              v-if=\"l.status == 1 || l.status == 3\"\n            >\n              <p class=\"card-text\">สถานะ : {{ l.cncnm || \"\" }}</p>\n              <p class=\"card-text\">\n                ประเภทผลิตภัณฑ์ :<span> {{ l.typepro }}</span>\n              </p>\n              <p class=\"card-text\">\n                ใบสำคัญ/เลขที่อนุญาต : <span> {{ l.lcnno }}</span>\n              </p>\n              <p class=\"card-text\">\n                ชื่อผลิตภัณฑ์ (TH) : <span> {{ l.productha }}</span>\n              </p>\n              <p class=\"card-text\">\n                ชื่อผลิตภัณฑ์ (EN) : <span> {{ l.produceng }}</span>\n              </p>\n              <p class=\"card-text\">ชื่อผู้รับอนุญาต : {{ l.licen }}</p>\n              <p class=\"card-text\">สถานที่ผลิต : {{ l.Addr }}</p>\n              <p class=\"card-text\">Newcode : {{ l.Newcode }}</p>\n            </td>\n            <td :style=\"l.bg\" v-else>ไม่พบข้อมูล</td>\n            <!-- <td :style=\"l.bg\">\n            <i class=\"fa fa-circle\" :style=\"l.icon\" aria-hidden=\"true\"></i>\n          </td> -->\n          </tr>\n        </tbody>\n      </table>\n      <clip-loader :loading=\"loading\" :color=\"color\" :size=\"size\"></clip-loader>\n      <!-- Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"AddScopusToken\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ title }}</h5>\n            </div>\n            <div class=\"modal-body\">\n              <form>\n                <div class=\"card-body mt-3\">\n                  <div class=\"form-group mt-3\">\n                    <label>ข้อความ</label>\n                    <input\n                      v-model=\"key.name\"\n                      type=\"text\"\n                      min=\"1\"\n                      class=\"form-control form-control-sm\"\n                    />\n                  </div>\n                </div>\n              </form>\n            </div>\n            <div class=\"modal-footer mt-3\">\n              <button type=\"button\" class=\"btn btn-success\" @click=\"save()\">\n                บันทึก\n              </button>\n              <button\n                id=\"closedcategory\"\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                ปิด\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\nimport KeywordService from \"../services/KeywordService\";\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue'\nimport FDATypesService from \"../services/FDATypesService\";\nimport ProductTypesService from \"../services/ProductTypesService\";\nimport RulebasedTypesService from \"../services/RulebasedTypesService\";\nimport ProductsService from '../services/ProductsService';\n\nexport default {\n  name: \"App\",\n  components: {\n    ClipLoader\n  },\n  data() {\n    return {\n      statusprocheck:false,\n      statuslist:false,\n      statusproduct:false,\n      statusprocheckone:false,\n      color: '#5bc0de',\n      size: '50px',\n      margin: '2px',\n      radius: '2px',\n      loading:false,\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      id: \"\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token: 0,\n      title: \"เพิ่ม keyword\",\n      key: {},\n      fda: \"\",\n      product: [],\n      procheck: [],\n      answer:'',\n      typeId:0,\n      prochecktext:'',\n      producttypes:[],\n      rulebasetypes:[],\n      filename:'',\n      selectedFile:'',\n      img_path:''\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  methods: {\n    onFileChange(evt) {\n      const files = evt.target.files || evt.dataTransfer.files;\n      this.selectedFile = evt.target.files[0];\n      \n      this.filename = this.selectedFile.name;\n      if (!files.length) return;\n      this.onUploadFile();\n      // }\n    },\n    onUploadFile() {\n      const formData = new FormData();\n      formData.append(\"file\", this.selectedFile); // appending file\n      //  sending file to the backend\n      //console.log(this.filename);\n      // var http = \"http://localhost:8080/uploadbanner?name=\"+this.filename;\n      var http = LinkService.getpythonlink()+ \"/uploadimg?name=\"+this.filename;\n      console.log(LinkService.getpythonlink()+ \"/uploadimg?name=\"+this.filename);\n      axios\n        .post(http, formData)\n        .then(() => {    \n          this.data.img_path = LinkService.getpythonlink() +\"/uploads/img/\" + this.filename\n          console.log(this.data.img_path);\n          this.img_path = LinkService.getpythonlink() +\"/uploads/img/\" + this.filename\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    getproducttype(){\n      ProductTypesService.gettypes_product().then((res)=>{\n        // console.log(res.data);\nthis.producttypes = res.data\n      })\n    },\n    getrulebasedtype(){\n      RulebasedTypesService.gettypes_rulebased().then((res)=>{\n        // console.log(res.data);\nthis.rulebasetypes = res.data\n      })\n    },\n    getsentent(data){\n      data = JSON.parse(data)\n      // var text = ''\n      var arr =[]\n      for (let d = 0; d < data.length; d++) {\n        // text += data[d]\n        arr.push(data[d])\n      }\n      // console.log(arr);\n      var arrtxt = String(arr)\n      // console.log(arrtxt);\n      arrtxt = arrtxt.replaceAll(\",\",\"<span style='color:red;'> | </span>\")\n      // console.log(arrtxt);\nreturn arrtxt\n    },\n    getstatuscheck(t,f){\n      // console.log(t,f);\n      var text = ''\nif (t == f) {\n  text = 'เกินจริง'\n}else if (t > f) {\n  text = 'เกินจริง'\n}else if (f > t) {\n  text = 'ไม่เกินจริง'\n}\nreturn text\n    },\n    clear() {\n      \n      this.data = [];\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.product = [];\n      this.procheck = [];\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      this.product_token = 0;\n    },\n    cut(data) {\n      // console.log(data);\n      var mapname = ''\n      if (data != '-' && data != '') {\n        data = data.filter((letter) => letter !== \" \");\n      mapname = data.toString();\n\n      mapname = mapname.replaceAll(\",\", \" | \");\n      }else{\n        mapname = data\n      }\n      \n      return mapname;\n    },\n    save() {\n      //console.log(this.key);\n      if (this.key.name == null || this.key.name == \"\") {\n        alert(\"กรุณากรอกข้อความ\");\n      } else {\n        var prodata = {\n          name: this.key.name,\n          status: 1,\n        };\n        //console.log(prodata);\n        KeywordService.createkeyword(prodata).then((res) => {\n          //console.log(res.data);\n          if (res.data.err == 1062) {\n            alert(\"มีคำนี้ในระบบแล้ว\");\n          } else {\n            DictService.createdict(prodata).then(() => {\n              //console.log(res.data );\n              // RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n\n              document.getElementById(\"closedcategory\").click();\n              alert(\"บันทึกสำเร็จ\");\n              // })\n            });\n          }\n        });\n      }\n    },\n    getpercentage(data) {\n      // var dict = JSON.parse(data.dict_id)\n      // var rule_based_id = JSON.parse(data.rule_based_id)\n      // var re = (100 * data.count_rulebased)/ (rule_based_id.length)\n      return data.count_rulebased;\n    },\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"บันทึกสำเร็จ\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"บันทึกสำเร็จ\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    async savetorule_based(data, answer) {\n      this.answer = answer\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      // console.log(data);\n      var datas = {\n        name :data.rule_based_id,\n        typeId:this.typeId,\n        advertiseId:data.id\n      }\n      \n      // if (!data.mapId) {\n        await MapRuleBasedService.checkintb(data.dict_id).then(async (check) => {\n          // console.log(check.data);\n          var statusfalse = 0\n          var statustrue = 0\n          var weight = 0\n          var advertise_id = []\n          if (check.data) {\n            advertise_id = JSON.parse(check.data.map_advertise)\n          statusfalse = check.data.statusfalse\n          statustrue = check.data.statustrue\n          datas.rulebasedId = check.data.id\n          }\n          if (answer == 1) {\n            statustrue = statustrue+ parseInt(1)\n          }\n          if (answer == 9) {\n            statusfalse = statusfalse + parseInt(1)\n          }\n          // console.log(advertise_id);\n          advertise_id.push(data.id)\n          // console.log(advertise_id);\n          weight = statusfalse+statustrue\n          var maprule = {\n        keyword_id: 1,\n        advertise_id: data.id,\n        status: 9,\n        answer: answer,\n        user: this.currentUser.id,\n        map_dict: JSON.parse(data.dict_id),\n        statusfalse:statusfalse,\n        statustrue:statustrue,\n        weight:weight,\n        map_advertise: advertise_id,\n      };\n          if (check.data) {\n            await MapRuleBasedService.updateanswer(check.data.id, maprule).then(\n          async () => {\n            // console.log(res.data);\n           \n     await KeywordService.updateweight(1,datas).then(async ()=>{\n            // console.log(res);\n            await this.getdetail();\n            alert(\"บันทึกสำเร็จ\");\n          })\n          }\n        );\n          } else {\n            MapRuleBasedService.createmap_rule_based(maprule).then(\n              async (res) => {\n                // console.log(res.data);\n                var map_id = res.data.id;\n                datas.rulebasedId = map_id\n                var sendata = JSON.parse(data.dict_id);\n                // console.log(sendata);\n                // console.log(dict_name);\n                for (let d = 0; d < sendata.length; d++) {\n                  // console.log(sendata[d]);\n                  if (sendata[d]) {\n                    await DictService.getdict(sendata[d]).then(async (sen) => {\n                    // console.log(sen.data);\n                    var rule = {\n                      map_rule_based_id: map_id,\n                      dict_id: sendata[d],\n                      dict_name: sen.data.name,\n                      no: d + 1,\n                    };\n                    // console.log(rule);\n                    await RuleBasedService.createrule_based(rule).then(async () => {\n                      if (d + 1 == sendata.length) {\n                        await KeywordService.updateweight(1,datas).then(async (res)=>{\n            console.log(res);\n            await this.getdetail();\n            alert(\"บันทึกสำเร็จ\");\n          })\n                      }\n                    });\n                  });\n                  }\n                }\n              }\n            );\n          }\n          \n          \n        });\n     \n        // } else {\n      //   MapRuleBasedService.deletemap_rule_based(data.mapId, maprule).then(\n      //     async () => {\n      //       // console.log(res.data);\n      //       this.getdetail();\n      //       alert(\"บันทึกสำเร็จ\");\n      //     }\n      //   );\n      // }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = 'ข้อมูลจำเพาะของสินค้า หมวดหมู่ Shopee กลุ่มผลิตภัณฑ์เพื่อสุขภาพ อาหารเสริมเพื่อความงาม ผิว ยี่ห้อ Bluebird(บลูเบิร์ด) Storage Condition Normal ประเภทสารอาหาร สารต้านอนุมูลอิสระ, วิตามินซี ประเทศต้นกำเนิดสินค้า ไทย หน้าที่ของอาหารเสริมสำหรับความงาม ดูแลสิว, ป้องกันริ้วรอย ประเภทการห่อ ห่อรวมกัน เพศ ทั้งสองเพศ อายุการเก็บรักษา 12 เดือน ประเภทของผลิตภัณฑ์ยา แคปซูล หมายเลขใบอนุญาต/อย. 30-1-26764-5-0051 จำนวนสินค้า 17901 ส่งจาก จังหวัดนครราชสีมา รายละเอียดสินค้า วิตามินซี พลัส ตรา บลูเบิร์ด ตรา บลูเบิร์ด ขนาด 1000 มิลลิกรัม 60 แคปซูล เรทขายส่ง ช่วงราคาที่ 1 สั่งซื้อตั้งแต่ 5 กระปุกขึ้นไป ถึง 20 กระปุก ราคากระปุกละ 93 บาท ช่วงราคาที่ 2 สั่งซื้อตั้งแต่ 21 กระปุกขึ้นไป ถึง 50 กระปุก ราคากระปุกละ 90 บาท ช่วงราคาที่ 3 สั่งซื้อตั้งแต่ 51 กระปุกขึ้นไป ถึง 100 กระปุก ราคากระปุกละ 87 บาท ช่วงราคาที่ 4 สั่งซื้อตั้งแต่ 100 กระปุกขึ้นไป ..................... ราคากระปุกละ 85 บาท Vitamin C Plus Dietary Supplement Product Bluebird Brand ผลิตภัณฑ์เสริมอาหารวิตามินซี พลัส ตรา บลูเบิร์ด ส่วนประกอบทั้งหมดใน 1 แคปซูล ส่วนประกอบที่สำคัญ (Active Ingredient) VITAMIN C (100%) - 60 มิลลิกรัม CITRUS BIOFLAVONOID POWDER - 630 มิลลิกรัม BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (ผงบาร์เบโดสเชอร์รี/ผงอะเซโรลาเชอร์รี) (MALPIGHIA GLABRA L.) ผล - 60 มิลลิกรัม ROSEHIP POWDER (ผงโรสฮิปส์) (ROSA CANINA L.) ผล - 60 มิลลิกรัม Rutin - 30 มิลลิกรัม INDIAN GOOSEBERRY POWDER (ผงมะขามป้อม) (PHYLLANTHUS EMBLICA L. ) ผล - 60 มิลลิกรัม ส่วนประกอบที่ไม่สำคัญ (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5 มิลลิกรัม TITANIUM DIOXIDE 171 -1.95 มิลลิกรัม วิธีรับประทาน ครั้งละ 1-2 แคปซูล หลังอาหารเช้า เลขที่ อ.ย. 30-1-26764-5-0051 คำเตือน ควรเก็บให้พ้นแสงแดงและความชื้น เด็ก สตรีมีครรภ์ และสตรีให้นมบุตรไม่ควรรับประทาน ควรกินอาหารหลากหลายให้ครบ 5 หมู่ ในสัดส่วนที่เหมาะสมเป็นประจำ ไม่มีผลในการป้องกันหรือรักษาโรค สรรพคุณ ประโยชน์ของการกินวิตามินซี ️ทำให้หน้าไม่โทรม หน้าตาสดใส ️ช่วยฟื้นฟูผิวหน้า สิว ฝ้า กระ ริ้วรอย ดูจางลง ️ผิวพรรณนุ่มเรียบเนียบ ชุ่มชื่น ️หน้าตาดูเด็กและเด้งขึ้น ️ผิวหน้าขาวอมชมพู สินค้าตัดรอบทุกวันเวลา ตัดรอบเวลา 12.00 น ของทุกวัน แจ้งโอนเกินเวลา ส่งรอบวันถัดไปนะจ๊ะ ส่งพัสดุทุกวัน เว้นวันอาทิตย์ และวันหยุดนักขัตฤกษ์ ขอบพระคุณลูกค้าทุกท่าน ที่ไว้วางใจผลิตภัณฑ์ของเราเสมอมา_/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    find(){\nvar type = this.findtypeproduct(this.data.content)\nconsole.log(type);\nvar split = type.split(\"\\n\")\nconsole.log(split[3]);\n      var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"•\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\nconsole.log(this.finddescription(content));\n    },\n    async checkkey(){\n      await this.loaddict();\n      var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"•\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n        var desc = this.finddescription(content)\nconsole.log(desc);\nvar con = {\n                      content: desc,\n                    };\n       axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        console.log(res.data);\n                      });\n    },\n    findtypeproduct(data) {\n      console.log(data);\n      var text = [\"หมวดหมู่\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == 'อาหาร') {\n      //   findfda = findfda+ findfda+'เสริม'\n      // }\n      console.log(findfda);\n      return findfda;\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"รายละเอียดสินค้า\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == 'อาหาร') {\n      //   findfda = findfda+ findfda+'เสริม'\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    getdetail() {\n      // var url = this.data.url.split(\"-i.\");\n      // var url = this.data.url.split(\"-i.\");\n      // this.data.url = url[0];\n      // console.log(this.product_token);\n      var selectpro = {\n        // url: this.data.url,\n        id: this.product_token,\n      };\n      MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n        // console.log(res.data);\n        // var best = this.getMax(res.data.keyword,'count_rulebased')\n        //console.log(best);\n        this.list = res.data;\n        this.statuslist = true\n        this.status = true;\n        this.loading = false\n        alert(\"บันทึกสำเร็จ\");\n        // var data = {\n        //   advertise_id: res.data.keyword[0].product_token_id,\n        // };\n        // MapRuleBasedService.updateweight(\n        //   res.data.keyword[0].map_rule_based_id,\n        //   data\n        // ).then(() => {});\n        // this.list.keyword = [best]\n        // this.status = true\n      });\n    },\n    \n    async edit() {\n      // var url = this.data.url.replaceAll(\".\",'');\n      // url = url.split(\"-i\");\n      // this.data.url = url[0];\n      // console.log(this.data.url);\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      var con = {};\n      await this.loaddict();\n      // if (this.data.url == null || this.data.url == \"\") {\n      //   alert(\"กรุณากรอก URL\");\n      // } else \n      if (this.data.content == null || this.data.content == \"\") {\n        alert(\"กรุณากรอกข้อความโฆษณา\");\n      }else if (this.data.url == null || this.data.url == \"\") {\n        alert(\"กรุณากรอกลำดับของเว็บไซต์\");\n      }else if (this.data.type_productId == null || this.data.type_productId == \"\") {\n        alert(\"กรุณาเลือกประเภทผลิตภัณฑ์\");\n      }else if (this.data.type_rulebasedId == null || this.data.type_rulebasedId == \"\") {\n        alert(\"กรุณาเลือกกฎของสินค้า\");\n      } else {\n         \n        this.loading = true\n// console.log(type);\n// console.log(this.data.content);\n// var findtype = this.findtypeproduct(this.data.content)\n// var split = findtype.split(\"\\n\")\n// var type = split[3]\n// // console.log(type);\n// await FDATypesService.getfdatypes(type).then(async (res)=>{\n//   // console.log(res.data);\n//   if (res.data.length > 0) {\n//     this.typeId = res.data[0].id\n//   }else{\n//     var name = {\n//       name : type\n//     }\n//     await FDATypesService.createfdatype(name).then((res)=>{\n//       this.typeId = res.data.id\n//     });\n//   }\n// })\n// console.log(this.typeId);\n        var content = \"\";\n        var contentfull = this.data.content\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"•\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        // this.fda = await this.findfda(content);\n\nvar desc = this.finddescription(content)\n        this.fda = await this.getfda(content)[0]\n        console.log(this.fda);\n          con = {\n            content: desc,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // console.log(res.data);\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: desc,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 2,\n                sentencefull:contentfull,\n                type_rulebasedId:this.data.type_rulebasedId,\n                type_productId:this.data.type_productId,\n                img_path:this.data.img_path\n              };\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: desc,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        // console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then(async (pro) => {\n                                    // console.log(pro.data);\n                                   await this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          await this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                \n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      this.checkfda(content, this.product_token);\n                      con = {\n                        content: desc,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n                }\n            });\n        // });\n      }\n    },\n    async search() {\n      // var url = this.data.url.replaceAll(\".\",'');\n      // url = url.split(\"-i\");\n      // this.data.url = url[0];\n      // console.log(this.data.url);\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      this.product_token = 0;\n      var con = {};\n      await this.loaddict();\n      // if (this.data.url == null || this.data.url == \"\") {\n      //   alert(\"กรุณากรอก URL\");\n      // } else \n      if (this.data.content == null || this.data.content == \"\") {\n        alert(\"กรุณากรอกข้อความโฆษณา\");\n      }else if (this.data.url == null || this.data.url == \"\") {\n        alert(\"กรุณากรอกลำดับของเว็บไซต์\");\n      }else if (this.data.type_productId == null || this.data.type_productId == \"\") {\n        alert(\"กรุณาเลือกประเภทผลิตภัณฑ์\");\n      }else if (this.data.type_rulebasedId == null || this.data.type_rulebasedId == \"\") {\n        alert(\"กรุณาเลือกกฎของสินค้า\");\n      }  else {\n\n        this.loading = true\n        var findtype = await this.findtypeproduct(this.data.content)\nconsole.log(findtype);\nvar split = findtype.split(\"\\n\")\nvar type = split[3]\nconsole.log(type);\nawait FDATypesService.getfdatypes(type).then(async (res)=>{\n  // console.log(res.data);\n  if (res.data.length > 0) {\n    this.typeId = res.data[0].id\n  }else{\n    var name = {\n      name : type\n    }\n    await FDATypesService.createfdatype(name).then((res)=>{\n      this.typeId = res.data.id\n    });\n  }\n})\n// console.log(this.typeId);\n        var content = \"\";\n        var contentfull = this.data.content\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"•\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        // this.fda = await this.findfda(content);\n\nvar desc = this.finddescription(content)\n        this.fda = await this.getfda(content)[0]\n        console.log(this.fda);\n          con = {\n            content: desc,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // console.log(res.data);\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: desc,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 2,\n                sentencefull:contentfull,\n                type_rulebasedId:this.data.type_rulebasedId,\n                type_productId:this.data.type_productId,\n                img_path:this.data.img_path\n              };\n              console.log(des);\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: desc,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        // console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then(async (pro) => {\n                                    // console.log(pro.data);\n                                   await this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          await this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      this.checkfda(content, this.product_token);\n                      con = {\n                        content: desc,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n              }\n            });\n        // });\n      }\n    },\n    getMax(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getMaxlength(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getAllMaxArray(arr, value) {\n      var array = [];\n      arr.map(function (num, idx) {\n        if (num.allcount == value) {\n          array.push(arr[idx]);\n        }\n      });\n      return array;\n    },\n    async tokendata(list) {\n      //console.log(list);\n      if (list.keyword.length > 0) {\n        for (let l = 0; l < list.keyword.length; l++) {\n          //console.log(list.keyword[l].keyword_dict_id);\n          if (list.keyword[l].keyword_dict_id) {\n            var map = {\n              id: list.keyword[l].id,\n              url: list.keyword[l].keyword_dict_id,\n              keyword_id: list.keyword[l].dict_id,\n            };\n            // console.log(map);\n            await MapRuleBasedService.getmapproduct(map).then(async (res) => {\n              // console.log(res.data);\n              var maxvalue = this.getMax(res.data, \"allcount\");\n              // console.log(maxvalue.allcount);\n              var i = this.getAllMaxArray(res.data, maxvalue.allcount);\n              // console.log(i);\n              var bestdata = this.getMax(i, \"length\");\n              // console.log(bestdata);\n              // getAllIndexes\n              // console.log(bestdata);\n              var best = {\n                id: list.keyword[l].id,\n                sentence: bestdata,\n              };\n              // console.log(best);\n              var rule_based_name = bestdata.name.toString();\n              rule_based_name = rule_based_name.replaceAll(\",\", \"\");\n              // console.log(rule_based_name);\n              await axios\n                .get(\n                  LinkService.getpythonlink() +\n                    \"/loaddict?word=\" +\n                    rule_based_name\n                )\n                .then(async () => {\n                  await MapRuleBasedService.getbestrulebased(best).then(\n                    async (res) => {\n                      // console.log(res.data);\n\n                      var rulebased = {\n                        count_rulebased: res.data.count,\n                        sentence_rulebase: res.data.sentence,\n                        rule_based_id: res.data.rule_based_id,\n                        rule_based_name: res.data.rule_based_name,\n                        map_rule_based_id: res.data.map_id,\n                      };\n                      // console.log(rulebased);\n                      // console.log(list.keyword[l].id);\n                      await MapRuleBasedService.updaterulebased(\n                        list.keyword[l].id,\n                        rulebased\n                      ).then(async () => {\n                        if (l + 1 == list.keyword.length) {\n                          await this.getdetail();\n                        }\n                      });\n                    }\n                  );\n                });\n              // list.keyword[l].rulebase = res.data;\n              // if (l + 1 == list.keyword.length) {\n              //   this.compare(list);\n              // }\n            });\n          }\n\n          // }\n        }\n      } else {\n        await this.getdetail();\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          // this.status = true;\n        }\n      }\n    },\n    getAllIndexes(arr, val) {\n      var indexes = [],\n        i = -1;\n      while ((i = arr.indexOf(val, i + 1)) != -1) {\n        indexes.push(i);\n      }\n      return indexes;\n    },\n    findfda(data) {\n      var text = [\"หมายเลขใบอนุญาต/อย.\",\"อย.\"];\n      // var end = ['']\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        findfda = findfda.substring(findfda.indexOf(text[t]), data.length);\n        var endindex = this.getAllIndexes(findfda, \" \");\n        findfda = findfda.substring(findfda.indexOf(text[t]), endindex[1]);\n      }\n      // console.log(findfda);\n\n      for (let v = 0; v < text.length; v++) {\n      findfda = findfda.replaceAll(text[v], \"\");\n      }\n      findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n      findfda = findfda.replaceAll(\"-\", \"\");\n      findfda = findfda.replaceAll(\"–\", \"\");\n      findfda = findfda.replaceAll(\" \", \"\");\n      // console.log(findfda);\n      // var regex = /\\d+/g;\n      // var matches = findfda.match(regex);  // creates array from matches\n      // console.log(matches[0]);\n      return findfda;\n    },\n    async checkfda(content, id) {\n      // console.log(this.fda);\n      if (this.fda) {\n        var fda = this.fda;\n        var product_status = 0;\n        const url = \"https://tawaiforhealth.org/api/oryor/check-product\";\n        const data = { number_src: fda };\n        // console.log(data);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n          },\n          body: JSON.stringify(data),\n        };\n\n        await fetch(url, options)\n          .then((response) => response.json())\n          .then(async (data) => {\n            // console.log(data);\n            if (data.message || data.length > 1) {\n              this.product.push({\n                name: \"-\",\n                detail: content,\n                fda: this.fda,\n                cncnm: \"-\",\n                typepro: \"-\",\n                lcnno: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                licen: \"-\",\n                Addr: \"-\",\n                Newcode: \"-\",\n                status: \"-\",\n                token: \"-\",\n              });\n              this.procheck.push({\n                fda: this.fda,\n                mapfda: \"-\",\n                cncnm: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                name: \"-\",\n                product_status: 0,\n                cat_status: 0,\n                fda_status: 0,\n                name_status: 0,\n                typepro: \"-\",\n                type: \"-\",\n              });\n              this.statusprocheck = true\n              // this.status = true\n            } else {\n              // console.log(data);\n              // console.log(data.cncnm.includes(\"คงอยู่\"))\n              if (data.cncnm.includes(\"ยกเลิก\") || data.cncnm.includes(\"เพิกถอน\")) {\n                product_status = 3;\n              } else {\n                product_status = 1;\n                this.colorfda = \"background-color:#a3e9a4\";\n              }\n              // console.log(this.colorfda);\n              var con = {\n                fda: fda,\n                productha: data.productha,\n                produceng: data.produceng,\n                typepro: data.typepro,\n                content: content,\n              };\n              await axios\n                .post(LinkService.getpythonlink() + \"/checkfda\", con)\n                .then(async (res) => {\n                  // console.log(res.data);\n                  var pro = {\n                    name: res.data.name,\n                    fda: fda,\n                    product_status: product_status,\n                    cat_status: res.data.mapcatstatus,\n                    fda_status: product_status,\n                    name_status: res.data.mapnamestatus,\n                  };\n                  // console.log(pro);\n                  await MapRuleBasedService.updatemap(id, pro).then(() => {\n                    // console.log(res.data);\n                    this.product.push({\n                      name: data.productha + \" \" + data.produceng,\n                      detail: content,\n                      fda: fda,\n                      cncnm: data.cncnm,\n                      typepro: data.typepro,\n                      lcnno: data.lcnno,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      licen: data.licen,\n                      Addr: data.Addr,\n                      Newcode: data.Newcode,\n                      status: product_status,\n                      token: res.data.token,\n                    });\n                    this.procheck.push({\n                      fda: fda,\n                      mapfda: data.lcnno,\n                      cncnm: data.cncnm,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      name: res.data.name,\n                      product_status: product_status,\n                      cat_status: res.data.mapcatstatus,\n                      fda_status: product_status,\n                      name_status: res.data.mapnamestatus,\n                      typepro: data.typepro,\n                      type: res.data.category,\n                    });\n                    this.statusprocheck = true\n                    this.colorcat = res.data.colorcat;\n                    this.colorname = res.data.colorname;\n                    // console.log(this.product);\n                    // console.log(this.procheck);\n                    // console.log(this.fda);\n                  });\n                });\n\n              // this.status = true\n            }\n          }).catch(err=>{\n            console.log(err);\n            this.statusprocheckone = true\n            this.prochecktext = 'Api tawaiforhealth ไม่สามารถทำงานได้'\n          });\n      } else {\n        this.product.push({\n          name: \"-\",\n          detail: content,\n          fda: this.fda,\n          cncnm: \"-\",\n          typepro: \"-\",\n          lcnno: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          licen: \"-\",\n          Addr: \"-\",\n          Newcode: \"-\",\n          status: \"-\",\n          token: \"\",\n        });\n        this.statusproduct = true\n        this.procheck.push({\n          fda: this.fda,\n          mapfda: \"-\",\n          cncnm: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          name: \"-\",\n          product_status: 0,\n          cat_status: 0,\n          fda_status: 0,\n          name_status: 0,\n          typepro: \"-\",\n          type: \"-\",\n        });\n\n        // this.status = true\n      }\n    },\n    getfda(content){\n        var tt = content.split(' ')\n\n    // console.log(tt);\n    var arr = []\n    for (let l = 0; l < tt.length; l++) {\n      var findfda = tt[l].replaceAll('-', '');\n      findfda = findfda.replaceAll(\"–\", \"\");\n      findfda = findfda.replaceAll(\".\", \"\");\n    findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n    // console.log(findfda);\n    if (findfda) {\n      if (findfda.length == 13) {\n      arr.push(findfda)\n      }\n    }\n      \n    }\n    console.log(arr);\n    return arr;\n    }\n  },\n  mounted() {\n    this.product_token = this.$route.query.id\n    console.log(this.$route.query.id);\n    this.getproducttype()\n    this.getrulebasedtype()\n    if (this.$route.query.id) {\n      ProductsService.getproducttoken(this.$route.query.id).then((res)=>{\n        this.data = res.data\n        this.data.content = res.data.sentencefull\n        this.img_path = res.data.img_path\n        // console.log(res.data);\n      })\n    }\n    // var f = this.findfda('หมายเลขใบอนุญาต/อย.เลขจดแจ้ง 13-1-1-7562-2-0006')\n    // var text = [\"หมายเลขใบอนุญาต/อย.\",\"อย.\"];\n    // var sen = 'อย.14-1-02662-2-0021 อย. 13-1-1-7562-2-0006'\n    // var l = sen.split(' ')\n    // console.log(l);\n    // var f = this.findfda(sen)\n    // var text = [\"หมายเลขใบอนุญาต/อย.\",\"อย.\"];\n    //   // var end = ['']\n    //   var findfda = sen;\n    //   for (let t = 0; t < text.length; t++) {\n    //     console.log(findfda.indexOf(text[t]));\n        \n    //     console.log(this.getAllIndexes(l,text[t]));\n    //   }\n    // console.log(f);\n//     var best = {\n//     \"id\": 67,\n//     \"sentence\": {\n//         \"length\": 2,\n//         \"allcount\": 100,\n//         \"rule\": [\n//             8899,\n//             57\n//         ],\n//         \"name\": [\n//             \"ควบคุม\",\n//             \"น้ำหนัก\"\n//         ],\n//         \"map_id\": 75\n//     }\n// }\n//                   MapRuleBasedService.getbestrulebased(best).then(\n//                      (res) => {\n//                       console.log(res.data);\n//                     });\n    // var text = 'หมายเลขใบอนุญาต/อย. 13-1-13465-5-0052 จำนวนสินค้า 415 ส่งจาก'\n    // console.log(this.findfda(text));\n    // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"️ถ้าเป็นลูกค้าพิมแล้ว ดูแลจนน้ำหนักลดเลยค่ะ สั่งซื้อสินค้าแล้ว ทักแชทมาคุยกันได้เลยค่ะ\";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}