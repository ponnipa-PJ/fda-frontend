{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/addproducttoken.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/addproducttoken.vue","mtime":1701146208973},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/babel.config.js","mtime":1677654957527},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wb25uaXBhL0RvY3VtZW50cy9HaXRIdWIvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBQcm9kdWN0c1NlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzJwoKaW1wb3J0IERpY3RTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0RpY3RTZXJ2aWNlIjsKaW1wb3J0IFJ1bGVCYXNlZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvUnVsZUJhc2VkU2VydmljZSI7CmltcG9ydCBNYXBSdWxlQmFzZWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL01hcFJ1bGVCYXNlZFNlcnZpY2UiOwppbXBvcnQgTGlua1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTGlua1NlcnZpY2UiOwppbXBvcnQgQWR2ZXJ0aXNlU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9BZHZlcnRpc2VTZXJ2aWNlIjsKaW1wb3J0IEtleXdvcmRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0tleXdvcmRTZXJ2aWNlIjsKaW1wb3J0IENsaXBMb2FkZXIgZnJvbSAndnVlLXNwaW5uZXIvc3JjL0NsaXBMb2FkZXIudnVlJzsKaW1wb3J0IEZEQVR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9GREFUeXBlc1NlcnZpY2UiOwppbXBvcnQgUHJvZHVjdFR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Qcm9kdWN0VHlwZXNTZXJ2aWNlIjsKaW1wb3J0IFJ1bGViYXNlZFR5cGVzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9SdWxlYmFzZWRUeXBlc1NlcnZpY2UiOwppbXBvcnQgUHJvZHVjdHNTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL1Byb2R1Y3RzU2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBDbGlwTG9hZGVyOiBDbGlwTG9hZGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdHVzcHJvY2hlY2s6IGZhbHNlLAogICAgICBzdGF0dXNsaXN0OiBmYWxzZSwKICAgICAgc3RhdHVzcHJvZHVjdDogZmFsc2UsCiAgICAgIHN0YXR1c3Byb2NoZWNrb25lOiBmYWxzZSwKICAgICAgY29sb3I6ICcjNWJjMGRlJywKICAgICAgc2l6ZTogJzUwcHgnLAogICAgICBtYXJnaW46ICcycHgnLAogICAgICByYWRpdXM6ICcycHgnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbGlzdDogW10sCiAgICAgIHVybDogIiIsCiAgICAgIGZpbGU6ICIiLAogICAgICBzdGF0dXM6IGZhbHNlLAogICAgICB1cmxQYXRoOiAiIiwKICAgICAgaW1hZ2VsaXN0czogIiIsCiAgICAgIHRva2VuaXplOiAiIiwKICAgICAgbWF0Y2huYW1lOiAiIiwKICAgICAgbWF0Y2hjYXRlZ29yeTogIiIsCiAgICAgIHR5cGU6ICIiLAogICAgICBtYXRjaG5hbWVzdW06ICIiLAogICAgICBzdGF0dXNuYW1lOiAwLAogICAgICBzdGF0dXNjYXQ6IDAsCiAgICAgIHN0YXR1c2ZkYTogMCwKICAgICAgY29sb3JuYW1lOiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgY29sb3JmZGE6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBjb2xvcmNhdDogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGlkOiAiIiwKICAgICAga2V5d29yZDogW10sCiAgICAgIGNvbG9ya2V5OiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgZGVzYzogIiIsCiAgICAgIGFyckxpc3Q6IFtdLAogICAgICBhbGxkYXRhOiAwLAogICAgICBiYWNrOiAwLAogICAgICBuZXh0OiAwLAogICAgICBkYXRhOiB7fSwKICAgICAgcHJvZHVjdF90b2tlbjogMCwKICAgICAgdGl0bGU6ICLguYDguJ7guLTguYjguKEga2V5d29yZCIsCiAgICAgIGtleToge30sCiAgICAgIGZkYTogIiIsCiAgICAgIHByb2R1Y3Q6IFtdLAogICAgICBwcm9jaGVjazogW10sCiAgICAgIGFuc3dlcjogJycsCiAgICAgIHR5cGVJZDogMCwKICAgICAgcHJvY2hlY2t0ZXh0OiAnJywKICAgICAgcHJvZHVjdHR5cGVzOiBbXSwKICAgICAgcnVsZWJhc2V0eXBlczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY3VycmVudFVzZXI6IGZ1bmN0aW9uIGN1cnJlbnRVc2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0cHJvZHVjdHR5cGU6IGZ1bmN0aW9uIGdldHByb2R1Y3R0eXBlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgUHJvZHVjdFR5cGVzU2VydmljZS5nZXR0eXBlc19wcm9kdWN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIF90aGlzLnByb2R1Y3R0eXBlcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRydWxlYmFzZWR0eXBlOiBmdW5jdGlvbiBnZXRydWxlYmFzZWR0eXBlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIFJ1bGViYXNlZFR5cGVzU2VydmljZS5nZXR0eXBlc19ydWxlYmFzZWQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgX3RoaXMyLnJ1bGViYXNldHlwZXMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0c2VudGVudDogZnVuY3Rpb24gZ2V0c2VudGVudChkYXRhKSB7CiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOyAvLyB2YXIgdGV4dCA9ICcnCgogICAgICB2YXIgYXJyID0gW107CgogICAgICBmb3IgKHZhciBkID0gMDsgZCA8IGRhdGEubGVuZ3RoOyBkKyspIHsKICAgICAgICAvLyB0ZXh0ICs9IGRhdGFbZF0KICAgICAgICBhcnIucHVzaChkYXRhW2RdKTsKICAgICAgfSAvLyBjb25zb2xlLmxvZyhhcnIpOwoKCiAgICAgIHZhciBhcnJ0eHQgPSBTdHJpbmcoYXJyKTsgLy8gY29uc29sZS5sb2coYXJydHh0KTsKCiAgICAgIGFycnR4dCA9IGFycnR4dC5yZXBsYWNlQWxsKCIsIiwgIjxzcGFuIHN0eWxlPSdjb2xvcjpyZWQ7Jz4gfCA8L3NwYW4+Iik7IC8vIGNvbnNvbGUubG9nKGFycnR4dCk7CgogICAgICByZXR1cm4gYXJydHh0OwogICAgfSwKICAgIGdldHN0YXR1c2NoZWNrOiBmdW5jdGlvbiBnZXRzdGF0dXNjaGVjayh0LCBmKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHQsZik7CiAgICAgIHZhciB0ZXh0ID0gJyc7CgogICAgICBpZiAodCA9PSBmKSB7CiAgICAgICAgdGV4dCA9ICfguYDguIHguLTguJnguIjguKPguLTguIcnOwogICAgICB9IGVsc2UgaWYgKHQgPiBmKSB7CiAgICAgICAgdGV4dCA9ICfguYDguIHguLTguJnguIjguKPguLTguIcnOwogICAgICB9IGVsc2UgaWYgKGYgPiB0KSB7CiAgICAgICAgdGV4dCA9ICfguYTguKHguYjguYDguIHguLTguJnguIjguKPguLTguIcnOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMuZGF0YSA9IFtdOwogICAgICB0aGlzLnByb2R1Y3QgPSBbXTsKICAgICAgdGhpcy5wcm9jaGVjayA9IFtdOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9kdWN0ID0gW107CiAgICAgIHRoaXMucHJvY2hlY2sgPSBbXTsKICAgICAgdGhpcy5zdGF0dXNwcm9jaGVjayA9IGZhbHNlOwogICAgICB0aGlzLnN0YXR1c3Byb2R1Y3QgPSBmYWxzZTsKICAgICAgdGhpcy5zdGF0dXNsaXN0ID0gZmFsc2U7CiAgICAgIHRoaXMucHJvZHVjdF90b2tlbiA9IDA7CiAgICB9LAogICAgY3V0OiBmdW5jdGlvbiBjdXQoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdmFyIG1hcG5hbWUgPSAnJzsKCiAgICAgIGlmIChkYXRhICE9ICctJyAmJiBkYXRhICE9ICcnKSB7CiAgICAgICAgZGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChsZXR0ZXIpIHsKICAgICAgICAgIHJldHVybiBsZXR0ZXIgIT09ICIgIjsKICAgICAgICB9KTsKICAgICAgICBtYXBuYW1lID0gZGF0YS50b1N0cmluZygpOwogICAgICAgIG1hcG5hbWUgPSBtYXBuYW1lLnJlcGxhY2VBbGwoIiwiLCAiIHwgIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFwbmFtZSA9IGRhdGE7CiAgICAgIH0KCiAgICAgIHJldHVybiBtYXBuYW1lOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIC8vY29uc29sZS5sb2codGhpcy5rZXkpOwogICAgICBpZiAodGhpcy5rZXkubmFtZSA9PSBudWxsIHx8IHRoaXMua2V5Lm5hbWUgPT0gIiIpIHsKICAgICAgICBhbGVydCgi4LiB4Lij4Li44LiT4Liy4LiB4Lij4Lit4LiB4LiC4LmJ4Lit4LiE4Lin4Liy4LihIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHByb2RhdGEgPSB7CiAgICAgICAgICBuYW1lOiB0aGlzLmtleS5uYW1lLAogICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgfTsgLy9jb25zb2xlLmxvZyhwcm9kYXRhKTsKCiAgICAgICAgS2V5d29yZFNlcnZpY2UuY3JlYXRla2V5d29yZChwcm9kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmVyciA9PSAxMDYyKSB7CiAgICAgICAgICAgIGFsZXJ0KCLguKHguLXguITguLPguJnguLXguYnguYPguJnguKPguLDguJrguJrguYHguKXguYnguKciKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERpY3RTZXJ2aWNlLmNyZWF0ZWRpY3QocHJvZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSApOwogICAgICAgICAgICAgIC8vIFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlZGNvbHVtbnJ1bGVfYmFzZWQocmVzLmRhdGEuaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbG9zZWRjYXRlZ29yeSIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOyAvLyB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldHBlcmNlbnRhZ2U6IGZ1bmN0aW9uIGdldHBlcmNlbnRhZ2UoZGF0YSkgewogICAgICAvLyB2YXIgZGljdCA9IEpTT04ucGFyc2UoZGF0YS5kaWN0X2lkKQogICAgICAvLyB2YXIgcnVsZV9iYXNlZF9pZCA9IEpTT04ucGFyc2UoZGF0YS5ydWxlX2Jhc2VkX2lkKQogICAgICAvLyB2YXIgcmUgPSAoMTAwICogZGF0YS5jb3VudF9ydWxlYmFzZWQpLyAocnVsZV9iYXNlZF9pZC5sZW5ndGgpCiAgICAgIHJldHVybiBkYXRhLmNvdW50X3J1bGViYXNlZDsKICAgIH0sCiAgICBzYXZldG9ydWxlOiBmdW5jdGlvbiBzYXZldG9ydWxlKHNlbiwgYW5zd2VyKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coYW5zd2VyKTsKICAgICAgdmFyIGlkZGF0YSA9IFtdOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoZCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGFzcGxpdFtkXSk7CiAgICAgICAgRGljdFNlcnZpY2UuZ2V0ZGljdHMoIiIsIHNlbltkXSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgICB2YXIgc3FsOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhWzBdLmlkKTsKICAgICAgICAgICAgICAgICAgICAgIGlkZGF0YS5wdXNoKHJlcy5kYXRhWzBdLmlkKTsKICAgICAgICAgICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKGQrMSAsIHNlbi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkZGF0YSk7CgoKICAgICAgICAgICAgICAgICAgICBpZiAoIShkICsgMSA9PSBzZW4ubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNxbCA9ICJTRUxFQ1Qgci4qIEZST00gbWFwX3J1bGVfYmFzZWQgbSBqb2luIHJ1bGVfYmFzZWQgciBvbiBtLnJ1bGVfYmFzZWRfaWQgPSByLmlkIFdIRVJFIG0uc3RhdHVzID0gMSBhbmQgZGljdF9pZCA9ICdbIi5jb25jYXQoaWRkYXRhLCAiXSciKTsgLy8gY29uc29sZS5sb2coc3FsKTsKCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YnlkaWN0KHNxbCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAieyI7CgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkZGF0YVtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnImRpY3QnICsgaWRkYXRhW2ldICsgJyInICsgIjoiICsgMSArICIsIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnImFuc3dlcicgKyAnIicgKyAiOiIgKyBhbnN3ZXIgKyAiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAifSI7IC8vIGNvbnNvbGUubG9nKHRleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UodGV4dCk7IC8vIGNvbnNvbGUubG9nKGpzb25EYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpzb25EYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVydWxlX2Jhc2VkKGpzb25EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcnVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfaWQ6IHJlcy5kYXRhLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogaWRkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHBybyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbWFwX3J1bGVfYmFzZWQ6cmVzLmRhdGEuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2R1Y3RzU2VydmljZS5tYXBfcnVsZV9iYXNlZChpZCxwcm8pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5nZXRkYXRhKCk7IC8vICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSwgNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVtYXBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcjogYW5zd2VyCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRlcnVsZV9iYXNlZChyZXMuZGF0YVswXS5pZCwgdXBkYXRlbWFwcnVsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0ZGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwogICAgICB9OwoKICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzZW4ubGVuZ3RoOyBkKyspIHsKICAgICAgICBfbG9vcChkKTsKICAgICAgfQogICAgfSwKICAgIHNhdmV0b3J1bGVfYmFzZWQ6IGZ1bmN0aW9uIHNhdmV0b3J1bGVfYmFzZWQoZGF0YSwgYW5zd2VyKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIGRhdGFzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczQuYW5zd2VyID0gYW5zd2VyOyAvLyBjb25zb2xlLmxvZyhzZW4ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhbnN3ZXInLGFuc3dlcik7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKCiAgICAgICAgICAgICAgICBkYXRhcyA9IHsKICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5ydWxlX2Jhc2VkX2lkLAogICAgICAgICAgICAgICAgICB0eXBlSWQ6IF90aGlzNC50eXBlSWQsCiAgICAgICAgICAgICAgICAgIGFkdmVydGlzZUlkOiBkYXRhLmlkCiAgICAgICAgICAgICAgICB9OyAvLyBpZiAoIWRhdGEubWFwSWQpIHsKCiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY2hlY2tpbnRiKGRhdGEuZGljdF9pZCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOChjaGVjaykgewogICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNmYWxzZSwgc3RhdHVzdHJ1ZSwgd2VpZ2h0LCBhZHZlcnRpc2VfaWQsIG1hcHJ1bGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNoZWNrLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzZmFsc2UgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzdHJ1ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlX2lkID0gW107CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlX2lkID0gSlNPTi5wYXJzZShjaGVjay5kYXRhLm1hcF9hZHZlcnRpc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNmYWxzZSA9IGNoZWNrLmRhdGEuc3RhdHVzZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c3RydWUgPSBjaGVjay5kYXRhLnN0YXR1c3RydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzLnJ1bGViYXNlZElkID0gY2hlY2suZGF0YS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5zd2VyID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzdHJ1ZSA9IHN0YXR1c3RydWUgKyBwYXJzZUludCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5zd2VyID09IDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzZmFsc2UgPSBzdGF0dXNmYWxzZSArIHBhcnNlSW50KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhhZHZlcnRpc2VfaWQpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhZHZlcnRpc2VfaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlX2lkLnB1c2goZGF0YS5pZCk7IC8vIGNvbnNvbGUubG9nKGFkdmVydGlzZV9pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYWR2ZXJ0aXNlX2lkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IHN0YXR1c2ZhbHNlICsgc3RhdHVzdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfaWQ6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZV9pZDogZGF0YS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogX3RoaXM0LmN1cnJlbnRVc2VyLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBfZGljdDogSlNPTi5wYXJzZShkYXRhLmRpY3RfaWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNmYWxzZTogc3RhdHVzZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c3RydWU6IHN0YXR1c3RydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogd2VpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBfYWR2ZXJ0aXNlOiBhZHZlcnRpc2VfaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVhbnN3ZXIoY2hlY2suZGF0YS5pZCwgbWFwcnVsZSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLZXl3b3JkU2VydmljZS51cGRhdGV3ZWlnaHQoMSwgZGF0YXMpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5jcmVhdGVtYXBfcnVsZV9iYXNlZChtYXBydWxlKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBfaWQsIHNlbmRhdGEsIF9sb29wMiwgZDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9pZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXMucnVsZWJhc2VkSWQgPSBtYXBfaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kYXRhID0gSlNPTi5wYXJzZShkYXRhLmRpY3RfaWQpOyAvLyBjb25zb2xlLmxvZyhzZW5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRpY3RfbmFtZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3AyID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9sb29wMihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfbG9vcDIkKF9jb250ZXh0NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VuZGF0YVtkXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERpY3RTZXJ2aWNlLmdldGRpY3Qoc2VuZGF0YVtkXSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoc2VuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbi5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwX3J1bGVfYmFzZWRfaWQ6IG1hcF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHNlbmRhdGFbZF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHNlbi5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubzogZCArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyhydWxlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXJ1bGVfYmFzZWQocnVsZSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkICsgMSA9PSBzZW5kYXRhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtleXdvcmRTZXJ2aWNlLnVwZGF0ZXdlaWdodCgxLCBkYXRhcykudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9sb29wMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkIDwgc2VuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguZGVsZWdhdGVZaWVsZChfbG9vcDIoZCksICJ0MCIsIDcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjaGVja2tleXdvcmQ6IGZ1bmN0aW9uIGNoZWNra2V5d29yZChuYW1lKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2cobmFtZSk7CiAgICAgIC8vICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAnJykKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgJycpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7Ly8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBuYW1lKTsKICAgICAgdmFyIGRlc2MgPSB0aGlzLmZpbmRkZXNjcmlwdGlvbihuYW1lKTsgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC93b3JrdG9rZW5kZXNjP3RleHQ9JytkZXNjKTsKCiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3dvcmt0b2tlbmRlc2M/dGV4dD0iICsgZGVzYykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIF90aGlzNS5kZXNjID0gcmVzLmRhdGE7CiAgICAgIH0pOyAvLyBuYW1lID0gJ+C4guC5ieC4reC4oeC4ueC4peC4iOC4s+C5gOC4nuC4suC4sOC4guC4reC4h+C4quC4tOC4meC4hOC5ieC4siDguKvguKHguKfguJTguKvguKHguLnguYggU2hvcGVlIOC4geC4peC4uOC5iOC4oeC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC5gOC4nuC4t+C5iOC4reC4quC4uOC4guC4oOC4suC4niDguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguYDguJ7guLfguYjguK3guITguKfguLLguKHguIfguLLguKEg4Lic4Li04LinIOC4ouC4teC5iOC4q+C5ieC4rSBCbHVlYmlyZCjguJrguKXguLnguYDguJrguLTguKPguYzguJQpIFN0b3JhZ2UgQ29uZGl0aW9uIE5vcm1hbCDguJvguKPguLDguYDguKDguJfguKrguLLguKPguK3guLLguKvguLLguKMg4Liq4Liy4Lij4LiV4LmJ4Liy4LiZ4Lit4LiZ4Li44Lih4Li54Lil4Lit4Li04Liq4Lij4LiwLCDguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lib4Lij4Liw4LmA4LiX4Lio4LiV4LmJ4LiZ4LiB4Liz4LmA4LiZ4Li04LiU4Liq4Li04LiZ4LiE4LmJ4LiyIOC5hOC4l+C4oiDguKvguJnguYnguLLguJfguLXguYjguILguK3guIfguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguKrguLPguKvguKPguLHguJrguITguKfguLLguKHguIfguLLguKEg4LiU4Li54LmB4Lil4Liq4Li04LinLCDguJvguYnguK3guIfguIHguLHguJnguKPguLTguYnguKfguKPguK3guKIg4Lib4Lij4Liw4LmA4Lig4LiX4LiB4Liy4Lij4Lir4LmI4LitIOC4q+C5iOC4reC4o+C4p+C4oeC4geC4seC4mSDguYDguJ7guKgg4LiX4Lix4LmJ4LiH4Liq4Lit4LiH4LmA4Lie4LioIOC4reC4suC4ouC4uOC4geC4suC4o+C5gOC4geC5h+C4muC4o+C4seC4geC4qeC4siAxMiDguYDguJTguLfguK3guJkg4Lib4Lij4Liw4LmA4Lig4LiX4LiC4Lit4LiH4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4Lii4LiyIOC5geC4hOC4m+C4i+C4ueC4pSDguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguIjguLPguJnguKfguJnguKrguLTguJnguITguYnguLIgMTc5MDEg4Liq4LmI4LiH4LiI4Liy4LiBIOC4iOC4seC4h+C4q+C4p+C4seC4lOC4meC4hOC4o+C4o+C4suC4iuC4quC4teC4oeC4siDguKPguLLguKLguKXguLDguYDguK3guLXguKLguJTguKrguLTguJnguITguYnguLIg4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4LiC4LiZ4Liy4LiUIDEwMDAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIDYwIOC5geC4hOC4m+C4i+C4ueC4pSDguYDguKPguJfguILguLLguKLguKrguYjguIcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDEg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDUg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAyMCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkzIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMiDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggMjEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyA1MCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkwIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMyDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggNTEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAxMDAg4LiB4Lij4Liw4Lib4Li44LiBIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NyDguJrguLLguJcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDQg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDEwMCDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsgLi4uLi4uLi4uLi4uLi4uLi4uLi4uIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NSDguJrguLLguJcgVml0YW1pbiBDIFBsdXMgRGlldGFyeSBTdXBwbGVtZW50IFByb2R1Y3QgQmx1ZWJpcmQgQnJhbmQg4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LmA4Liq4Lij4Li04Lih4Lit4Liy4Lir4Liy4Lij4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4seC5ieC4h+C4q+C4oeC4lOC5g+C4mSAxIOC5geC4hOC4m+C4i+C4ueC4pSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguKrguLPguITguLHguI0gKEFjdGl2ZSBJbmdyZWRpZW50KSBWSVRBTUlOIEMgKDEwMCUpIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIENJVFJVUyBCSU9GTEFWT05PSUQgUE9XREVSIC0gNjMwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBCQVJCQURPU0NIRVJSWSBQT1dERVIvQUNFUk9MQSBDSEVSUlkgUE9XREVSICjguJzguIfguJrguLLguKPguYzguYDguJrguYLguJTguKrguYDguIrguK3guKPguYzguKPguLUv4Lic4LiH4Lit4Liw4LmA4LiL4LmC4Lij4Lil4Liy4LmA4LiK4Lit4Lij4LmM4Lij4Li1KSAoTUFMUElHSElBIEdMQUJSQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJPU0VISVAgUE9XREVSICjguJzguIfguYLguKPguKrguK7guLTguJvguKrguYwpIChST1NBIENBTklOQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJ1dGluIC0gMzAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIElORElBTiBHT09TRUJFUlJZIFBPV0RFUiAo4Lic4LiH4Lih4Liw4LiC4Liy4Lih4Lib4LmJ4Lit4LihKSAoUEhZTExBTlRIVVMgRU1CTElDQSBMLiApIOC4nOC4pSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguYTguKHguYjguKrguLPguITguLHguI0gKEluYWN0aXZlIEluZ3JlZGllbnQpIEVESUJMRSBHRUxBVElOIDQyOCAtIDk4LjUg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFRJVEFOSVVNIERJT1hJREUgMTcxIC0xLjk1IOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKfguLTguJjguLXguKPguLHguJrguJvguKPguLDguJfguLLguJkg4LiE4Lij4Lix4LmJ4LiH4Lil4LiwIDEtMiDguYHguITguJvguIvguLnguKUg4Lir4Lil4Lix4LiH4Lit4Liy4Lir4Liy4Lij4LmA4LiK4LmJ4LiyIOC5gOC4peC4guC4l+C4teC5iCDguK0u4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguITguLPguYDguJXguLfguK3guJkg4LiE4Lin4Lij4LmA4LiB4LmH4Lia4LmD4Lir4LmJ4Lie4LmJ4LiZ4LmB4Liq4LiH4LmB4LiU4LiH4LmB4Lil4Liw4LiE4Lin4Liy4Lih4LiK4Li34LmJ4LiZIOC5gOC4lOC5h+C4gSDguKrguJXguKPguLXguKHguLXguITguKPguKPguKDguYwg4LmB4Lil4Liw4Liq4LiV4Lij4Li14LmD4Lir4LmJ4LiZ4Lih4Lia4Li44LiV4Lij4LmE4Lih4LmI4LiE4Lin4Lij4Lij4Lix4Lia4Lib4Lij4Liw4LiX4Liy4LiZIOC4hOC4p+C4o+C4geC4tOC4meC4reC4suC4q+C4suC4o+C4q+C4peC4suC4geC4q+C4peC4suC4ouC5g+C4q+C5ieC4hOC4o+C4miA1IOC4q+C4oeC4ueC5iCDguYPguJnguKrguLHguJTguKrguYjguKfguJnguJfguLXguYjguYDguKvguKHguLLguLDguKrguKHguYDguJvguYfguJnguJvguKPguLDguIjguLMg4LmE4Lih4LmI4Lih4Li14Lic4Lil4LmD4LiZ4LiB4Liy4Lij4Lib4LmJ4Lit4LiH4LiB4Lix4LiZ4Lir4Lij4Li34Lit4Lij4Lix4LiB4Lip4Liy4LmC4Lij4LiEIOC4quC4o+C4o+C4nuC4hOC4uOC4kyDguJvguKPguLDguYLguKLguIrguJnguYzguILguK3guIfguIHguLLguKPguIHguLTguJnguKfguLTguJXguLLguKHguLTguJnguIvguLUg77iP4LiX4Liz4LmD4Lir4LmJ4Lir4LiZ4LmJ4Liy4LmE4Lih4LmI4LmC4LiX4Lij4LihIOC4q+C4meC5ieC4suC4leC4suC4quC4lOC5g+C4qiDvuI/guIrguYjguKfguKLguJ/guLfguYnguJnguJ/guLnguJzguLTguKfguKvguJnguYnguLIg4Liq4Li04LinIOC4neC5ieC4siDguIHguKPguLAg4Lij4Li04LmJ4Lin4Lij4Lit4LiiIOC4lOC4ueC4iOC4suC4h+C4peC4hyDvuI/guJzguLTguKfguJ7guKPguKPguJPguJnguLjguYjguKHguYDguKPguLXguKLguJrguYDguJnguLXguKLguJog4LiK4Li44LmI4Lih4LiK4Li34LmI4LiZIO+4j+C4q+C4meC5ieC4suC4leC4suC4lOC4ueC5gOC4lOC5h+C4geC5geC4peC4sOC5gOC4lOC5ieC4h+C4guC4tuC5ieC4mSDvuI/guJzguLTguKfguKvguJnguYnguLLguILguLLguKfguK3guKHguIrguKHguJ7guLkg4Liq4Li04LiZ4LiE4LmJ4Liy4LiV4Lix4LiU4Lij4Lit4Lia4LiX4Li44LiB4Lin4Lix4LiZ4LmA4Lin4Lil4LiyIOC4leC4seC4lOC4o+C4reC4muC5gOC4p+C4peC4siAxMi4wMCDguJkg4LiC4Lit4LiH4LiX4Li44LiB4Lin4Lix4LiZIOC5geC4iOC5ieC4h+C5guC4reC4meC5gOC4geC4tOC4meC5gOC4p+C4peC4siDguKrguYjguIfguKPguK3guJrguKfguLHguJnguJbguLHguJTguYTguJvguJnguLDguIjguYrguLAg4Liq4LmI4LiH4Lie4Lix4Liq4LiU4Li44LiX4Li44LiB4Lin4Lix4LiZIOC5gOC4p+C5ieC4meC4p+C4seC4meC4reC4suC4l+C4tOC4leC4ouC5jCDguYHguKXguLDguKfguLHguJnguKvguKLguLjguJTguJnguLHguIHguILguLHguJXguKTguIHguKnguYwg4LiC4Lit4Lia4Lie4Lij4Liw4LiE4Li44LiT4Lil4Li54LiB4LiE4LmJ4Liy4LiX4Li44LiB4LiX4LmI4Liy4LiZIOC4l+C4teC5iOC5hOC4p+C5ieC4p+C4suC4h+C5g+C4iOC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC4guC4reC4h+C5gOC4o+C4suC5gOC4quC4oeC4reC4oeC4sl8vbFxfJwogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBkZXNjKTsKCiAgICAgIHZhciBjb24gPSB7CiAgICAgICAgY29udGVudDogZGVzYwogICAgICB9OwogICAgICBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiwgY29uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAgICAgX3RoaXM1LmtleXdvcmQgPSByZXMuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOyAvLyAgICAgfQogICAgICAvLyB9KTsKICAgICAgLy8gICAgICAgdmFyIGxpc3RrZXl3b3JkcyA9IFtdCiAgICAgIC8vICAgICAgIHZhciBuYW1lc3BsaXQgPSBuYW1lLnNwbGl0KCIgIikKICAgICAgLy8gICAgICAgLy8gY29uc29sZS5sb2cobmFtZXNwbGl0KTsKICAgICAgLy8gICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHZhciBrZXlsaXN0ID0gW10KICAgICAgLy8gICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgIC8vICAgICAgICAgICByZXMuZGF0YVtyXS5uYW1lID0gcmVzLmRhdGFbcl0ubmFtZS5yZXBsYWNlQWxsKCIuIiwiIikKICAgICAgLy8gICAgICAgICAgIHZhciBrayA9IHJlcy5kYXRhW3JdLm5hbWUuc3BsaXQoIiAiKQogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBray5sZW5ndGg7IGsrKykgewogICAgICAvLyAgICAgICAgICAgICBrZXlsaXN0LnB1c2goa2tba10pCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGtleSA9IDA7IGtleSA8IGtleWxpc3QubGVuZ3RoOyBrZXkrKykgewogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBuYW1lc3BsaXQubGVuZ3RoOyBuKyspIHsKICAgICAgLy8gICAgICAgICAgICAgaWYgKG5hbWVzcGxpdFtuXSA9PSBrZXlsaXN0W2tleV0gJiYga2V5bGlzdFtrZXldICE9ICcnICYmIGlzTmFOKGtleWxpc3Rba2V5XSkpIHsKICAgICAgLy8gICAgICAgICAgICAgICBsaXN0a2V5d29yZHMucHVzaChrZXlsaXN0W2tleV0pCiAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coa2V5bGlzdCk7CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdGtleXdvcmRzKTsKICAgICAgLy8gICAgICAgY29uc29sZS5sb2cobGlzdGtleXdvcmRzLmxlbmd0aCk7CiAgICAgIC8vICAgICAgICAgaWYgKGxpc3RrZXl3b3Jkcy5sZW5ndGggPT0gMCkgewogICAgICAvLyAgICAgICAgICAgdGhpcy5jb2xvcmtleSA9ICJiYWNrZ3JvdW5kLWNvbG9yOiNhM2U5YTQiCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgLy8gICAgICAgICBsaXN0a2V5d29yZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgIC8vICAgICAgaWYocmVzdWx0LmluZGV4T2YoaXRlbSkgPCAwKSB7CiAgICAgIC8vICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAvLyAgICAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIC8vIGxpc3RrZXl3b3JkcyA9IHJlc3VsdAogICAgICAvLyAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgbGlzdGtleXdvcmRzLmxlbmd0aDsgbCsrKSB7CiAgICAgIC8vICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nKTsKICAgICAgLy8gICAgICAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nICsgbGlzdGtleXdvcmRzW2xdKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAvLyAgICAgICB9KTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0pOwogICAgfSwKICAgIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoKSB7CiAgICAgIHZhciB0eXBlID0gdGhpcy5maW5kdHlwZXByb2R1Y3QodGhpcy5kYXRhLmNvbnRlbnQpOwogICAgICBjb25zb2xlLmxvZyh0eXBlKTsKICAgICAgdmFyIHNwbGl0ID0gdHlwZS5zcGxpdCgiXG4iKTsKICAgICAgY29uc29sZS5sb2coc3BsaXRbM10pOwogICAgICB2YXIgY29udGVudCA9ICIiOwogICAgICBjb250ZW50ID0gdGhpcy5kYXRhLmNvbnRlbnQucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICIgIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIgIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIioiLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiYiLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIuKAoiIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKyIsICIiKTsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXy9sXyIsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFtcdTI3MDAtXHUyN0JGXXxbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REMwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVERkZGXXxbXHUyMDExLVx1MjZGRl18XHVEODNFW1x1REQxMC1cdURERkZdKS9nLCAiICIpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmZpbmRkZXNjcmlwdGlvbihjb250ZW50KSk7CiAgICB9LAogICAgY2hlY2trZXk6IGZ1bmN0aW9uIGNoZWNra2V5KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICB2YXIgY29udGVudCwgZGVzYywgY29uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYubG9hZGRpY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgY29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzNi5kYXRhLmNvbnRlbnQucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oPzpbXHUyNzAwLVx1MjdiZl18KD86XHVkODNjW1x1ZGRlNi1cdWRkZmZdKXsyfXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1MDAyMy1cdTAwMzldXHVmZTBmP1x1MjBlM3xcdTMyOTl8XHUzMjk3fFx1MzAzZHxcdTMwMzB8XHUyNGMyfFx1ZDgzY1tcdWRkNzAtXHVkZDcxXXxcdWQ4M2NbXHVkZDdlLVx1ZGQ3Zl18XHVkODNjXHVkZDhlfFx1ZDgzY1tcdWRkOTEtXHVkZDlhXXxcdWQ4M2NbXHVkZGU2LVx1ZGRmZl18XHVkODNjW1x1ZGUwMS1cdWRlMDJdfFx1ZDgzY1x1ZGUxYXxcdWQ4M2NcdWRlMmZ8XHVkODNjW1x1ZGUzMi1cdWRlM2FdfFx1ZDgzY1tcdWRlNTAtXHVkZTUxXXxcdTIwM2N8XHUyMDQ5fFtcdTI1YWEtXHUyNWFiXXxcdTI1YjZ8XHUyNWMwfFtcdTI1ZmItXHUyNWZlXXxcdTAwYTl8XHUwMGFlfFx1MjEyMnxcdTIxMzl8XHVkODNjXHVkYzA0fFtcdTI2MDAtXHUyNkZGXXxcdTJiMDV8XHUyYjA2fFx1MmIwN3xcdTJiMWJ8XHUyYjFjfFx1MmI1MHxcdTJiNTV8XHUyMzFhfFx1MjMxYnxcdTIzMjh8XHUyM2NmfFtcdTIzZTktXHUyM2YzXXxbXHUyM2Y4LVx1MjNmYV18XHVkODNjXHVkY2NmfFx1MjkzNHxcdTI5MzV8W1x1MjE5MC1cdTIxZmZdKS9nLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXHVkODNkW1x1ZGUwMC1cdWRlNGZdL2csICIgIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIgIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIioiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiIyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIuKAoiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIisiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfL2xfIiwgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFtcdTI3MDAtXHUyN0JGXXxbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REMwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVERkZGXXxbXHUyMDExLVx1MjZGRl18XHVEODNFW1x1REQxMC1cdURERkZdKS9nLCAiICIpOwogICAgICAgICAgICAgICAgZGVzYyA9IF90aGlzNi5maW5kZGVzY3JpcHRpb24oY29udGVudCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXNjKTsKICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgY29udGVudDogZGVzYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHJlcykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g2KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmaW5kdHlwZXByb2R1Y3Q6IGZ1bmN0aW9uIGZpbmR0eXBlcHJvZHVjdChkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgdGV4dCA9IFsi4Lir4Lih4Lin4LiU4Lir4Lih4Li54LmIIl07CiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGlmIChmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkgIT0gLTEpIHsKICAgICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkpOwogICAgICAgIH0KICAgICAgfSAvLyBpZiAoZmluZGZkYSA9PSAn4Lit4Liy4Lir4Liy4LijJykgewogICAgICAvLyAgIGZpbmRmZGEgPSBmaW5kZmRhKyBmaW5kZmRhKyfguYDguKrguKPguLTguKEnCiAgICAgIC8vIH0KCgogICAgICBjb25zb2xlLmxvZyhmaW5kZmRhKTsKICAgICAgcmV0dXJuIGZpbmRmZGE7CiAgICB9LAogICAgZmluZGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBmaW5kZGVzY3JpcHRpb24oZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdmFyIHRleHQgPSBbIuC4o+C4suC4ouC4peC4sOC5gOC4reC4teC4ouC4lOC4quC4tOC4meC4hOC5ieC4siJdOwogICAgICB2YXIgZmluZGZkYSA9IGRhdGE7CgogICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRleHQubGVuZ3RoOyB0KyspIHsKICAgICAgICBpZiAoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pICE9IC0xKSB7CiAgICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pKTsKICAgICAgICB9CiAgICAgIH0gLy8gaWYgKGZpbmRmZGEgPT0gJ+C4reC4suC4q+C4suC4oycpIHsKICAgICAgLy8gICBmaW5kZmRhID0gZmluZGZkYSsgZmluZGZkYSsn4LmA4Liq4Lij4Li04LihJwogICAgICAvLyB9CiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwoKCiAgICAgIHJldHVybiBmaW5kZmRhOwogICAgfSwKICAgIGxvYWRkaWN0OiBmdW5jdGlvbiBsb2FkZGljdCgpIHsKICAgICAgYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvbG9hZGRpY3QiKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKSk7CiAgICB9LAogICAgZ2V0ZGV0YWlsOiBmdW5jdGlvbiBnZXRkZXRhaWwoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwuc3BsaXQoIi1pLiIpOwogICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgiLWkuIik7CiAgICAgIC8vIHRoaXMuZGF0YS51cmwgPSB1cmxbMF07CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgIHZhciBzZWxlY3Rwcm8gPSB7CiAgICAgICAgLy8gdXJsOiB0aGlzLmRhdGEudXJsLAogICAgICAgIGlkOiB0aGlzLnByb2R1Y3RfdG9rZW4KICAgICAgfTsKICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMocmVzKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDE0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAvLyB2YXIgYmVzdCA9IHRoaXMuZ2V0TWF4KHJlcy5kYXRhLmtleXdvcmQsJ2NvdW50X3J1bGViYXNlZCcpCiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYmVzdCk7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5saXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5zdGF0dXNsaXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX3RoaXM3LnN0YXR1cyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsgLy8gdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIC8vICAgYWR2ZXJ0aXNlX2lkOiByZXMuZGF0YS5rZXl3b3JkWzBdLnByb2R1Y3RfdG9rZW5faWQsCiAgICAgICAgICAgICAgICAgIC8vIH07CiAgICAgICAgICAgICAgICAgIC8vIE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRld2VpZ2h0KAogICAgICAgICAgICAgICAgICAvLyAgIHJlcy5kYXRhLmtleXdvcmRbMF0ubWFwX3J1bGVfYmFzZWRfaWQsCiAgICAgICAgICAgICAgICAgIC8vICAgZGF0YQogICAgICAgICAgICAgICAgICAvLyApLnRoZW4oKCkgPT4ge30pOwogICAgICAgICAgICAgICAgICAvLyB0aGlzLmxpc3Qua2V5d29yZCA9IFtiZXN0XQogICAgICAgICAgICAgICAgICAvLyB0aGlzLnN0YXR1cyA9IHRydWUKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDcpIHsKICAgICAgICAgIHJldHVybiBfcmVmMTEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIzKCkgewogICAgICAgIHZhciBjb24sIGZpbmR0eXBlLCBzcGxpdCwgdHlwZSwgY29udGVudCwgY29udGVudGZ1bGwsIGRlc2M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMyQoX2NvbnRleHQyNSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI1LnByZXYgPSBfY29udGV4dDI1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5yZXBsYWNlQWxsKCIuIiwnJyk7CiAgICAgICAgICAgICAgICAvLyB1cmwgPSB1cmwuc3BsaXQoIi1pIik7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGEudXJsID0gdXJsWzBdOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhLnVybCk7CiAgICAgICAgICAgICAgICBfdGhpczgucHJvZHVjdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXM4LnByb2NoZWNrID0gW107CiAgICAgICAgICAgICAgICBfdGhpczgubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM4LnN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM4LnN0YXR1c3Byb2NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczguc3RhdHVzcHJvZHVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM4LnN0YXR1c2xpc3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbiA9IHt9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmxvYWRkaWN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczguZGF0YS5jb250ZW50ID09IG51bGwgfHwgX3RoaXM4LmRhdGEuY29udGVudCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKHguYLguIbguKnguJPguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDU2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczguZGF0YS51cmwgPT0gbnVsbCB8fCBfdGhpczguZGF0YS51cmwgPT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhbGVydCgi4LiB4Lij4Li44LiT4Liy4LiB4Lij4Lit4LiB4Lil4Liz4LiU4Lix4Lia4LiC4Lit4LiH4LmA4Lin4LmH4Lia4LmE4LiL4LiV4LmMIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSA1NjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM4LmRhdGEudHlwZV9wcm9kdWN0SWQgPT0gbnVsbCB8fCBfdGhpczguZGF0YS50eXBlX3Byb2R1Y3RJZCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguJvguKPguLDguYDguKDguJfguJzguKXguLTguJXguKDguLHguJPguJHguYwiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDU2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczguZGF0YS50eXBlX3J1bGViYXNlZElkID09IG51bGwgfHwgX3RoaXM4LmRhdGEudHlwZV9ydWxlYmFzZWRJZCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguIHguI7guILguK3guIfguKrguLTguJnguITguYnguLIiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDU2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICBfdGhpczgubG9hZGluZyA9IHRydWU7IC8vIGNvbnNvbGUubG9nKHR5cGUpOwoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOC5kYXRhLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgZmluZHR5cGUgPSBfdGhpczguZmluZHR5cGVwcm9kdWN0KF90aGlzOC5kYXRhLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgc3BsaXQgPSBmaW5kdHlwZS5zcGxpdCgiXG4iKTsKICAgICAgICAgICAgICAgIHR5cGUgPSBzcGxpdFszXTsgLy8gY29uc29sZS5sb2codHlwZSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgICByZXR1cm4gRkRBVHlwZXNTZXJ2aWNlLmdldGZkYXR5cGVzKHR5cGUpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNChyZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE1KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50eXBlSWQgPSByZXMuZGF0YVswXS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRkRBVHlwZXNTZXJ2aWNlLmNyZWF0ZWZkYXR5cGUobmFtZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50eXBlSWQgPSByZXMuZGF0YS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHlwZUlkKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnRlbnRmdWxsID0gX3RoaXM4LmRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfdGhpczguZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCLigKIiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIrIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXy9sXyIsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhbXHUyNzAwLVx1MjdCRl18W1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURDMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1REZGRl18W1x1MjAxMS1cdTI2RkZdfFx1RDgzRVtcdUREMTAtXHVEREZGXSkvZywgIiAiKTsgLy8gdGhpcy5mZGEgPSBhd2FpdCB0aGlzLmZpbmRmZGEoY29udGVudCk7CgogICAgICAgICAgICAgICAgZGVzYyA9IF90aGlzOC5maW5kZGVzY3JpcHRpb24oY29udGVudCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSA1MTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczguZ2V0ZmRhKGNvbnRlbnQpWzBdOwoKICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgX3RoaXM4LmZkYSA9IF9jb250ZXh0MjUuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOC5mZGEpOwogICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gNTY7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3dvcmR0b2tlbmRlc2MiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMihyZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjIkKF9jb250ZXh0MjQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNC5wcmV2ID0gX2NvbnRleHQyNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHNlbnRlbmNlID0gcmVzLmRhdGEuc2VudGVudC5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM4LmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZTogZGVzYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2Vfa2V5d29yZDogcmVzLmRhdGEuc2VudGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogcmVzLmRhdGEua2V5d29yZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlZnVsbDogY29udGVudGZ1bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcnVsZWJhc2VkSWQ6IF90aGlzOC5kYXRhLnR5cGVfcnVsZWJhc2VkSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcHJvZHVjdElkOiBfdGhpczguZGF0YS50eXBlX3Byb2R1Y3RJZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfdGhpczgucHJvZHVjdF90b2tlbiA9PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOChwcm9kdWN0dG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjAucHJldiA9IF9jb250ZXh0MjAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGVja2ZkYShjb250ZW50LCBfdGhpczgucHJvZHVjdF90b2tlbik7IC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjE1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wMywgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDMgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2xvb3AzKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wMyQoX2NvbnRleHQxOCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOyAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiBfdGhpczgucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogcmVzLmRhdGFbcl0uZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbjogcmVzLmRhdGFbcl0uc2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM4LnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczgudG9rZW5kYXRhKHByby5kYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2xvb3AzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHIgPCByZXMuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmRlbGVnYXRlWWllbGQoX2xvb3AzKHIpLCAidDAiLCA1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZShfdGhpczgucHJvZHVjdF90b2tlbikudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIxKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIxJChfY29udGV4dDIzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0cHJvZHVjdF90b2tlbihfdGhpczgucHJvZHVjdF90b2tlbiwgZGVzKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIwJChfY29udGV4dDIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgQWR2ZXJ0aXNlU2VydmljZS5kZWxldGVhZHZlcnRpc2UodGhpcy5wcm9kdWN0X3Rva2VuKS50aGVuKGFzeW5jICgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGVja2ZkYShjb250ZW50LCBfdGhpczgucHJvZHVjdF90b2tlbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGVzYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wNCwgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDQgPSBmdW5jdGlvbiBfbG9vcDQocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF90b2tlbl9pZDogX3RoaXM4LnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgKyAxID09IHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRwcm90b2tlbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM4LnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oZnVuY3Rpb24gKHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRva2VuZGF0YShwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3A0KHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjIpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMigpIHsKICAgICAgICB2YXIgY29uLCBjb250ZW50LCBjb250ZW50ZnVsbCwgZGVzYzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMyJChfY29udGV4dDM1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzUucHJldiA9IF9jb250ZXh0MzUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnJlcGxhY2VBbGwoIi4iLCcnKTsKICAgICAgICAgICAgICAgIC8vIHVybCA9IHVybC5zcGxpdCgiLWkiKTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuZGF0YS51cmwgPSB1cmxbMF07CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGEudXJsKTsKICAgICAgICAgICAgICAgIF90aGlzOS5wcm9kdWN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczkucHJvY2hlY2sgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzOS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczkuc3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczkuc3RhdHVzcHJvY2hlY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzOS5zdGF0dXNwcm9kdWN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczkuc3RhdHVzbGlzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM5LnByb2R1Y3RfdG9rZW4gPSAwOwogICAgICAgICAgICAgICAgY29uID0ge307CiAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkubG9hZGRpY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghKF90aGlzOS5kYXRhLmNvbnRlbnQgPT0gbnVsbCB8fCBfdGhpczkuZGF0YS5jb250ZW50ID09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4geC4guC5ieC4reC4hOC4p+C4suC4oeC5guC4huC4qeC4k+C4siIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gNTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIGlmICghKF90aGlzOS5kYXRhLnVybCA9PSBudWxsIHx8IF90aGlzOS5kYXRhLnVybCA9PSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguKXguLPguJTguLHguJrguILguK3guIfguYDguKfguYfguJrguYTguIvguJXguYwiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDUxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkuZGF0YS50eXBlX3Byb2R1Y3RJZCA9PSBudWxsIHx8IF90aGlzOS5kYXRhLnR5cGVfcHJvZHVjdElkID09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC5gOC4peC4t+C4reC4geC4m+C4o+C4sOC5gOC4oOC4l+C4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jCIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gNTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzOS5kYXRhLnR5cGVfcnVsZWJhc2VkSWQgPT0gbnVsbCB8fCBfdGhpczkuZGF0YS50eXBlX3J1bGViYXNlZElkID09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC5gOC4peC4t+C4reC4geC4geC4juC4guC4reC4h+C4quC4tOC4meC4hOC5ieC4siIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gNTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgIF90aGlzOS5sb2FkaW5nID0gdHJ1ZTsgLy8gICAgICAgICB2YXIgZmluZHR5cGUgPSBhd2FpdCB0aGlzLmZpbmR0eXBlcHJvZHVjdCh0aGlzLmRhdGEuY29udGVudCkKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbmR0eXBlKTsKICAgICAgICAgICAgICAgIC8vIHZhciBzcGxpdCA9IGZpbmR0eXBlLnNwbGl0KCJcbiIpCiAgICAgICAgICAgICAgICAvLyB2YXIgdHlwZSA9IHNwbGl0WzNdCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0eXBlKTsKICAgICAgICAgICAgICAgIC8vIGF3YWl0IEZEQVR5cGVzU2VydmljZS5nZXRmZGF0eXBlcyh0eXBlKS50aGVuKGFzeW5jIChyZXMpPT57CiAgICAgICAgICAgICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIC8vICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnR5cGVJZCA9IHJlcy5kYXRhWzBdLmlkCiAgICAgICAgICAgICAgICAvLyAgIH1lbHNlewogICAgICAgICAgICAgICAgLy8gICAgIHZhciBuYW1lID0gewogICAgICAgICAgICAgICAgLy8gICAgICAgbmFtZSA6IHR5cGUKICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgYXdhaXQgRkRBVHlwZXNTZXJ2aWNlLmNyZWF0ZWZkYXR5cGUobmFtZSkudGhlbigocmVzKT0+ewogICAgICAgICAgICAgICAgLy8gICAgICAgdGhpcy50eXBlSWQgPSByZXMuZGF0YS5pZAogICAgICAgICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy50eXBlSWQpOwoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnRlbnRmdWxsID0gX3RoaXM5LmRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfdGhpczkuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCLigKIiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIrIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXy9sXyIsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhbXHUyNzAwLVx1MjdCRl18W1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURDMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1REZGRl18W1x1MjAxMS1cdTI2RkZdfFx1RDgzRVtcdUREMTAtXHVEREZGXSkvZywgIiAiKTsgLy8gdGhpcy5mZGEgPSBhd2FpdCB0aGlzLmZpbmRmZGEoY29udGVudCk7CgogICAgICAgICAgICAgICAgZGVzYyA9IF90aGlzOS5maW5kZGVzY3JpcHRpb24oY29udGVudCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuZ2V0ZmRhKGNvbnRlbnQpWzBdOwoKICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgX3RoaXM5LmZkYSA9IF9jb250ZXh0MzUuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOS5mZGEpOwogICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gNTE7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3dvcmR0b2tlbmRlc2MiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMShyZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzEkKF9jb250ZXh0MzQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNC5wcmV2ID0gX2NvbnRleHQzNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHNlbnRlbmNlID0gcmVzLmRhdGEuc2VudGVudC5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM5LmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZTogZGVzYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2Vfa2V5d29yZDogcmVzLmRhdGEuc2VudGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogcmVzLmRhdGEua2V5d29yZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlZnVsbDogY29udGVudGZ1bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcnVsZWJhc2VkSWQ6IF90aGlzOS5kYXRhLnR5cGVfcnVsZWJhc2VkSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcHJvZHVjdElkOiBfdGhpczkuZGF0YS50eXBlX3Byb2R1Y3RJZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfdGhpczkucHJvZHVjdF90b2tlbiA9PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNyhwcm9kdWN0dG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI3JChfY29udGV4dDMwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGVja2ZkYShjb250ZW50LCBfdGhpczkucHJvZHVjdF90b2tlbik7IC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzMC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjIzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjYocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wNSwgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI2JChfY29udGV4dDI5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDUgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2xvb3A1KHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wNSQoX2NvbnRleHQyOCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjgucHJldiA9IF9jb250ZXh0MjgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOyAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZlcnRpc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiBfdGhpczkucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogcmVzLmRhdGFbcl0uZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbjogcmVzLmRhdGFbcl0uc2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI1JChfY29udGV4dDI3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM5LnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI0KHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNCQoX2NvbnRleHQyNikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNi5wcmV2ID0gX2NvbnRleHQyNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkudG9rZW5kYXRhKHByby5kYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDE3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjI1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2xvb3A1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHIgPCByZXMuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LmRlbGVnYXRlWWllbGQoX2xvb3A1KHIpLCAidDAiLCA1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBZHZlcnRpc2VTZXJ2aWNlLmRlbGV0ZWFkdmVydGlzZShfdGhpczkucHJvZHVjdF90b2tlbikudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMwKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMwJChfY29udGV4dDMzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMy5wcmV2ID0gX2NvbnRleHQzMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0cHJvZHVjdF90b2tlbihfdGhpczkucHJvZHVjdF90b2tlbiwgZGVzKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjkoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI5JChfY29udGV4dDMyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMyLnByZXYgPSBfY29udGV4dDMyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgQWR2ZXJ0aXNlU2VydmljZS5kZWxldGVhZHZlcnRpc2UodGhpcy5wcm9kdWN0X3Rva2VuKS50aGVuKGFzeW5jICgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGVja2ZkYShjb250ZW50LCBfdGhpczkucHJvZHVjdF90b2tlbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGVzYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI4KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wNiwgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjgkKF9jb250ZXh0MzEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzEucHJldiA9IF9jb250ZXh0MzEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDYgPSBmdW5jdGlvbiBfbG9vcDYocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF90b2tlbl9pZDogX3RoaXM5LnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgKyAxID09IHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRwcm90b2tlbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM5LnByb2R1Y3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oZnVuY3Rpb24gKHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnRva2VuZGF0YShwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3A2KHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyOCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzEpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMzIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRNYXg6IGZ1bmN0aW9uIGdldE1heChhcnIsIHByb3ApIHsKICAgICAgdmFyIG1heDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG1heCA9PSBudWxsIHx8IHBhcnNlSW50KGFycltpXVtwcm9wXSkgPiBwYXJzZUludChtYXhbcHJvcF0pKSBtYXggPSBhcnJbaV07CiAgICAgIH0KCiAgICAgIHJldHVybiBtYXg7CiAgICB9LAogICAgZ2V0TWF4bGVuZ3RoOiBmdW5jdGlvbiBnZXRNYXhsZW5ndGgoYXJyLCBwcm9wKSB7CiAgICAgIHZhciBtYXg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChtYXggPT0gbnVsbCB8fCBwYXJzZUludChhcnJbaV1bcHJvcF0pID4gcGFyc2VJbnQobWF4W3Byb3BdKSkgbWF4ID0gYXJyW2ldOwogICAgICB9CgogICAgICByZXR1cm4gbWF4OwogICAgfSwKICAgIGdldEFsbE1heEFycmF5OiBmdW5jdGlvbiBnZXRBbGxNYXhBcnJheShhcnIsIHZhbHVlKSB7CiAgICAgIHZhciBhcnJheSA9IFtdOwogICAgICBhcnIubWFwKGZ1bmN0aW9uIChudW0sIGlkeCkgewogICAgICAgIGlmIChudW0uYWxsY291bnQgPT0gdmFsdWUpIHsKICAgICAgICAgIGFycmF5LnB1c2goYXJyW2lkeF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0sCiAgICB0b2tlbmRhdGE6IGZ1bmN0aW9uIHRva2VuZGF0YShsaXN0KSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNygpIHsKICAgICAgICB2YXIgX2xvb3A3LCBsLCBtYXA7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzckKF9jb250ZXh0NDEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0MS5wcmV2ID0gX2NvbnRleHQ0MS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEobGlzdC5rZXl3b3JkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbG9vcDcgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2xvb3A3KGwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wNyQoX2NvbnRleHQ0MCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDAucHJldiA9IF9jb250ZXh0NDAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0LmtleXdvcmRbbF0ua2V5d29yZF9kaWN0X2lkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbGlzdC5rZXl3b3JkW2xdLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBsaXN0LmtleXdvcmRbbF0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogbGlzdC5rZXl3b3JkW2xdLmRpY3RfaWQKICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyhtYXApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldG1hcHByb2R1Y3QobWFwKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyOSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM2KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4dmFsdWUsIGksIGJlc3RkYXRhLCBiZXN0LCBydWxlX2Jhc2VkX25hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzYkKF9jb250ZXh0MzkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDM5LnByZXYgPSBfY29udGV4dDM5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXh2YWx1ZSA9IF90aGlzMTAuZ2V0TWF4KHJlcy5kYXRhLCAiYWxsY291bnQiKTsgLy8gY29uc29sZS5sb2cobWF4dmFsdWUuYWxsY291bnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtYXh2YWx1ZS5hbGxjb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IF90aGlzMTAuZ2V0QWxsTWF4QXJyYXkocmVzLmRhdGEsIG1heHZhbHVlLmFsbGNvdW50KTsgLy8gY29uc29sZS5sb2coaSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RkYXRhID0gX3RoaXMxMC5nZXRNYXgoaSwgImxlbmd0aCIpOyAvLyBjb25zb2xlLmxvZyhiZXN0ZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0QWxsSW5kZXhlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJlc3RkYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYmVzdGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldEFsbEluZGV4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhiZXN0ZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBsaXN0LmtleXdvcmRbbF0uaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZTogYmVzdGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyhiZXN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYmVzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9uYW1lID0gYmVzdGRhdGEubmFtZS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfbmFtZSA9IHJ1bGVfYmFzZWRfbmFtZS5yZXBsYWNlQWxsKCIsIiwgIiIpOyAvLyBjb25zb2xlLmxvZyhydWxlX2Jhc2VkX25hbWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM5Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9sb2FkZGljdD93b3JkPSIgKyBydWxlX2Jhc2VkX25hbWUpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzUkKF9jb250ZXh0MzgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzgucHJldiA9IF9jb250ZXh0MzgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM4Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS5nZXRiZXN0cnVsZWJhc2VkKGJlc3QpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYzMSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM0KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGViYXNlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzQkKF9jb250ZXh0MzcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzcucHJldiA9IF9jb250ZXh0MzcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGViYXNlZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudF9ydWxlYmFzZWQ6IHJlcy5kYXRhLmNvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlX3J1bGViYXNlOiByZXMuZGF0YS5zZW50ZW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX2lkOiByZXMuZGF0YS5ydWxlX2Jhc2VkX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfbmFtZTogcmVzLmRhdGEucnVsZV9iYXNlZF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9ydWxlX2Jhc2VkX2lkOiByZXMuZGF0YS5tYXBfaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2cocnVsZWJhc2VkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2xdLmlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZXJ1bGViYXNlZChsaXN0LmtleXdvcmRbbF0uaWQsIHJ1bGViYXNlZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMzKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzMkKF9jb250ZXh0MzYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNi5wcmV2ID0gX2NvbnRleHQzNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobCArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mzcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mzguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTM1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDE5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfbG9vcDcpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEobCA8IGxpc3Qua2V5d29yZC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLmRlbGVnYXRlWWllbGQoX2xvb3A3KGwpLCAidDAiLCA1KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0MS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQxLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0MS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5nZXRkZXRhaWwoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTM3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29tcGFyZTogZnVuY3Rpb24gY29tcGFyZShsaXN0KSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHZhciBfbG9vcDggPSBmdW5jdGlvbiBfbG9vcDgoaykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtrXSk7CiAgICAgICAgZGljdF9pZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLmRpY3RfaWQpOyAvLyB2YXIgcnVsZWJhc2VkID0gSlNPTi5wYXJzZShsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpCiAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlZCk7CgogICAgICAgIGlmIChsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpIHsKICAgICAgICAgIHZhciB1bmlxdWVDaGFyc3J1bGUgPSBsaXN0LmtleXdvcmRba10ucnVsZWJhc2UuZmlsdGVyKGZ1bmN0aW9uIChjLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmluZGV4T2YoYykgPT09IGluZGV4OwogICAgICAgICAgfSk7CiAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZGljdF9pZC5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZUNoYXJzcnVsZS5pbmRleE9mKG4pICE9PSAtMTsKICAgICAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyhmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZEFycmF5JyxmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaWN0X2lkJyxkaWN0X2lkLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdW1kaWN0SWQubGVuZ3RoKTsKCiAgICAgICAgICBwZXJjZW50YWdlID0gMTAwICogcGFyc2VJbnQoZmlsdGVyZWRBcnJheS5sZW5ndGgpIC8gcGFyc2VJbnQoZGljdF9pZC5sZW5ndGgpOyAvLyBjb25zb2xlLmxvZyhwZXJjZW50YWdlKTsKCiAgICAgICAgICBsaXN0LmtleXdvcmRba10ucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxpc3Qua2V5d29yZFtrXS5wZXJjZW50YWdlID0gMDsKICAgICAgICB9CgogICAgICAgIGlmIChrICsgMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpczExLmxpc3QgPSBsaXN0OyAvLyB0aGlzLnN0YXR1cyA9IHRydWU7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsaXN0LmtleXdvcmQubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgZGljdF9pZDsKICAgICAgICB2YXIgZmlsdGVyZWRBcnJheTsKICAgICAgICB2YXIgcGVyY2VudGFnZTsKCiAgICAgICAgX2xvb3A4KGspOwogICAgICB9CiAgICB9LAogICAgZ2V0QWxsSW5kZXhlczogZnVuY3Rpb24gZ2V0QWxsSW5kZXhlcyhhcnIsIHZhbCkgewogICAgICB2YXIgaW5kZXhlcyA9IFtdLAogICAgICAgICAgaSA9IC0xOwoKICAgICAgd2hpbGUgKChpID0gYXJyLmluZGV4T2YodmFsLCBpICsgMSkpICE9IC0xKSB7CiAgICAgICAgaW5kZXhlcy5wdXNoKGkpOwogICAgICB9CgogICAgICByZXR1cm4gaW5kZXhlczsKICAgIH0sCiAgICBmaW5kZmRhOiBmdW5jdGlvbiBmaW5kZmRhKGRhdGEpIHsKICAgICAgdmFyIHRleHQgPSBbIuC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIiwgIuC4reC4oi4iXTsgLy8gdmFyIGVuZCA9IFsnJ10KCiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSksIGRhdGEubGVuZ3RoKTsKICAgICAgICB2YXIgZW5kaW5kZXggPSB0aGlzLmdldEFsbEluZGV4ZXMoZmluZGZkYSwgIiAiKTsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pLCBlbmRpbmRleFsxXSk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coZmluZGZkYSk7CgoKICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCB0ZXh0Lmxlbmd0aDsgdisrKSB7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCh0ZXh0W3ZdLCAiIik7CiAgICAgIH0KCiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoL1teXGQuLV0vZywgJycpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCItIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCLigJMiLCAiIik7CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIiAiLCAiIik7IC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwogICAgICAvLyB2YXIgcmVnZXggPSAvXGQrL2c7CiAgICAgIC8vIHZhciBtYXRjaGVzID0gZmluZGZkYS5tYXRjaChyZWdleCk7ICAvLyBjcmVhdGVzIGFycmF5IGZyb20gbWF0Y2hlcwogICAgICAvLyBjb25zb2xlLmxvZyhtYXRjaGVzWzBdKTsKCiAgICAgIHJldHVybiBmaW5kZmRhOwogICAgfSwKICAgIGNoZWNrZmRhOiBmdW5jdGlvbiBjaGVja2ZkYShjb250ZW50LCBpZCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNDAoKSB7CiAgICAgICAgdmFyIGZkYSwgcHJvZHVjdF9zdGF0dXMsIHVybCwgZGF0YSwgb3B0aW9uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQwJChfY29udGV4dDQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDQucHJldiA9IF9jb250ZXh0NDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMxMi5mZGEpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZkYSA9IF90aGlzMTIuZmRhOwogICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXMgPSAwOwogICAgICAgICAgICAgICAgdXJsID0gImh0dHBzOi8vdGF3YWlmb3JoZWFsdGgub3JnL2FwaS9vcnlvci9jaGVjay1wcm9kdWN0IjsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIG51bWJlcl9zcmM6IGZkYQogICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMzMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzOShkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM5JChfY29udGV4dDQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDMucHJldiA9IF9jb250ZXh0NDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEubWVzc2FnZSB8fCBkYXRhLmxlbmd0aCA+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJvZHVjdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogX3RoaXMxMi5mZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNuY25tOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGNubm86ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWNlbjogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRyOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ld2NvZGU6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAiLSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJvY2hlY2sucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogX3RoaXMxMi5mZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcGZkYTogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYV9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICItIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5zdGF0dXNwcm9jaGVjayA9IHRydWU7IC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5jbmNubS5pbmNsdWRlcygi4LiE4LiH4Lit4Lii4Li54LmIIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jbmNubS5pbmNsdWRlcygi4Lii4LiB4LmA4Lil4Li04LiBIikgfHwgZGF0YS5jbmNubS5pbmNsdWRlcygi4LmA4Lie4Li04LiB4LiW4Lit4LiZIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXMgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXMgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLmNvbG9yZmRhID0gImJhY2tncm91bmQtY29sb3I6I2EzZTlhNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHRoaXMuY29sb3JmZGEpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbG9yZmRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhOiBmZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogZGF0YS5wcm9kdWN0aGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2ZkYSIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYzNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM4KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzOCQoX2NvbnRleHQ0MikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQyLnByZXYgPSBfY29udGV4dDQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdF9zdGF0dXM6IHJlcy5kYXRhLm1hcGNhdHN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhX3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiByZXMuZGF0YS5tYXBuYW1lc3RhdHVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyhwcm8pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVtYXAoaWQsIHBybykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5wcm9kdWN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEucHJvZHVjdGhhICsgIiAiICsgZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNuY25tOiBkYXRhLmNuY25tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsY25ubzogZGF0YS5sY25ubywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGljZW46IGRhdGEubGljZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkcjogZGF0YS5BZGRyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ld2NvZGU6IGRhdGEuTmV3Y29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiByZXMuZGF0YS50b2tlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJvY2hlY2sucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhOiBmZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwZmRhOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNuY25tOiBkYXRhLmNuY25tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogZGF0YS5wcm9kdWN0aGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhX3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZV9zdGF0dXM6IHJlcy5kYXRhLm1hcG5hbWVzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXBybzogZGF0YS50eXBlcHJvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJlcy5kYXRhLmNhdGVnb3J5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5zdGF0dXNwcm9jaGVjayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuY29sb3JjYXQgPSByZXMuZGF0YS5jb2xvcmNhdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5jb2xvcm5hbWUgPSByZXMuZGF0YS5jb2xvcm5hbWU7IC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvY2hlY2spOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZkYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjM0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzkpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MjEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjMzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi5zdGF0dXNwcm9jaGVja29uZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJvY2hlY2t0ZXh0ID0gJ0FwaSB0YXdhaWZvcmhlYWx0aCDguYTguKHguYjguKrguLLguKHguLLguKPguJbguJfguLPguIfguLLguJnguYTguJTguYknOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0NDQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczEyLnByb2R1Y3QucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgICAgICAgICBmZGE6IF90aGlzMTIuZmRhLAogICAgICAgICAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICAgICAgICAgIGxjbm5vOiAiLSIsCiAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogIi0iLAogICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgICAgICAgICAgbGljZW46ICItIiwKICAgICAgICAgICAgICAgICAgQWRkcjogIi0iLAogICAgICAgICAgICAgICAgICBOZXdjb2RlOiAiLSIsCiAgICAgICAgICAgICAgICAgIHN0YXR1czogIi0iLAogICAgICAgICAgICAgICAgICB0b2tlbjogIiIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzMTIuc3RhdHVzcHJvZHVjdCA9IHRydWU7CgogICAgICAgICAgICAgICAgX3RoaXMxMi5wcm9jaGVjay5wdXNoKHsKICAgICAgICAgICAgICAgICAgZmRhOiBfdGhpczEyLmZkYSwKICAgICAgICAgICAgICAgICAgbWFwZmRhOiAiLSIsCiAgICAgICAgICAgICAgICAgIGNuY25tOiAiLSIsCiAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogIi0iLAogICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgICAgICAgICAgbmFtZTogIi0iLAogICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogMCwKICAgICAgICAgICAgICAgICAgY2F0X3N0YXR1czogMCwKICAgICAgICAgICAgICAgICAgZmRhX3N0YXR1czogMCwKICAgICAgICAgICAgICAgICAgbmFtZV9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgICAgIHR5cGVwcm86ICItIiwKICAgICAgICAgICAgICAgICAgdHlwZTogIi0iCiAgICAgICAgICAgICAgICB9KTsgLy8gdGhpcy5zdGF0dXMgPSB0cnVlCgoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNDApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRmZGE6IGZ1bmN0aW9uIGdldGZkYShjb250ZW50KSB7CiAgICAgIHZhciB0dCA9IGNvbnRlbnQuc3BsaXQoJyAnKTsgLy8gY29uc29sZS5sb2codHQpOwoKICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCB0dC5sZW5ndGg7IGwrKykgewogICAgICAgIHZhciBmaW5kZmRhID0gdHRbbF0ucmVwbGFjZUFsbCgnLScsICcnKTsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCLigJMiLCAiIik7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgiLiIsICIiKTsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKC9bXlxkLi1dL2csICcnKTsgLy8gY29uc29sZS5sb2coZmluZGZkYSk7CgogICAgICAgIGlmIChmaW5kZmRhKSB7CiAgICAgICAgICBpZiAoZmluZGZkYS5sZW5ndGggPT0gMTMpIHsKICAgICAgICAgICAgYXJyLnB1c2goZmluZGZkYSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zb2xlLmxvZyhhcnIpOwogICAgICByZXR1cm4gYXJyOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICB0aGlzLnByb2R1Y3RfdG9rZW4gPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKTsKICAgIHRoaXMuZ2V0cHJvZHVjdHR5cGUoKTsKICAgIHRoaXMuZ2V0cnVsZWJhc2VkdHlwZSgpOwoKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5pZCkgewogICAgICBQcm9kdWN0c1NlcnZpY2UuZ2V0cHJvZHVjdHRva2VuKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczEzLmRhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczEzLmRhdGEuY29udGVudCA9IHJlcy5kYXRhLnNlbnRlbmNlZnVsbDsgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICB9KTsKICAgIH0gLy8gdmFyIGYgPSB0aGlzLmZpbmRmZGEoJ+C4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIu4LmA4Lil4LiC4LiI4LiU4LmB4LiI4LmJ4LiHIDEzLTEtMS03NTYyLTItMDAwNicpCiAgICAvLyB2YXIgdGV4dCA9IFsi4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi4iLCLguK3guKIuIl07CiAgICAvLyB2YXIgc2VuID0gJ+C4reC4oi4xNC0xLTAyNjYyLTItMDAyMSDguK3guKIuIDEzLTEtMS03NTYyLTItMDAwNicKICAgIC8vIHZhciBsID0gc2VuLnNwbGl0KCcgJykKICAgIC8vIGNvbnNvbGUubG9nKGwpOwogICAgLy8gdmFyIGYgPSB0aGlzLmZpbmRmZGEoc2VuKQogICAgLy8gdmFyIHRleHQgPSBbIuC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIiwi4Lit4LiiLiJdOwogICAgLy8gICAvLyB2YXIgZW5kID0gWycnXQogICAgLy8gICB2YXIgZmluZGZkYSA9IHNlbjsKICAgIC8vICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0ZXh0Lmxlbmd0aDsgdCsrKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coZmluZGZkYS5pbmRleE9mKHRleHRbdF0pKTsKICAgIC8vICAgICBjb25zb2xlLmxvZyh0aGlzLmdldEFsbEluZGV4ZXMobCx0ZXh0W3RdKSk7CiAgICAvLyAgIH0KICAgIC8vIGNvbnNvbGUubG9nKGYpOwogICAgLy8gICAgIHZhciBiZXN0ID0gewogICAgLy8gICAgICJpZCI6IDY3LAogICAgLy8gICAgICJzZW50ZW5jZSI6IHsKICAgIC8vICAgICAgICAgImxlbmd0aCI6IDIsCiAgICAvLyAgICAgICAgICJhbGxjb3VudCI6IDEwMCwKICAgIC8vICAgICAgICAgInJ1bGUiOiBbCiAgICAvLyAgICAgICAgICAgICA4ODk5LAogICAgLy8gICAgICAgICAgICAgNTcKICAgIC8vICAgICAgICAgXSwKICAgIC8vICAgICAgICAgIm5hbWUiOiBbCiAgICAvLyAgICAgICAgICAgICAi4LiE4Lin4Lia4LiE4Li44LihIiwKICAgIC8vICAgICAgICAgICAgICLguJnguYnguLPguKvguJnguLHguIEiCiAgICAvLyAgICAgICAgIF0sCiAgICAvLyAgICAgICAgICJtYXBfaWQiOiA3NQogICAgLy8gICAgIH0KICAgIC8vIH0KICAgIC8vICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YmVzdHJ1bGViYXNlZChiZXN0KS50aGVuKAogICAgLy8gICAgICAgICAgICAgICAgICAgICAgKHJlcykgPT4gewogICAgLy8gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAvLyB2YXIgdGV4dCA9ICfguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiAxMy0xLTEzNDY1LTUtMDA1MiDguIjguLPguJnguKfguJnguKrguLTguJnguITguYnguLIgNDE1IOC4quC5iOC4h+C4iOC4suC4gScKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZmluZGZkYSh0ZXh0KSk7CiAgICAvLyB0aGlzLmRhdGEudXJsID0KICAgIC8vICAgImh0dHBzOi8vc2hvcGVlLmNvLnRoLyVFMiU5OSVBNiVFRiVCOCU4RiVFMCVCOSU4MiVFMCVCOCU4OSVFMCVCOCVBMSVFMCVCOSU4MyVFMCVCOCVBQiVFMCVCOCVBMSVFMCVCOSU4OC0lRTAlQjglODIlRTAlQjglQUQlRTAlQjglODclRTAlQjklODElRTAlQjglOTclRTAlQjklODklRTIlOTklQTYlRUYlQjglOEYtJUUwJUI4JTgyJUUwJUI4JUIyJUUwJUI4JUEyJUUwJUI4JTk0JUUwJUI4JUI1JUUwJUI4JUExJUUwJUI4JUIyJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5Ri0lRTAlQjglQTUlRTAlQjglQjQlRTAlQjklODIlRTAlQjglOEIlRTAlQjklODgtJUUwJUI4JTlFJUUwJUI4JUE1JUUwJUI4JUIxJUUwJUI4JUFBLSVFMiU4MCU4Qi1jb2ZmZWUtbGlzaG91LSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCU4NCVFMCVCOCVBNyVFMCVCOCU5QSVFMCVCOCU4NCVFMCVCOCVCOCVFMCVCOCVBMSVFMCVCOCU5OSVFMCVCOSU4OSVFMCVCOCVCMyVFMCVCOCVBQiVFMCVCOCU5OSVFMCVCOCVCMSVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglODQlRTAlQjglQjglRTAlQjglQTElRTAlQjglQUIlRTAlQjglQjQlRTAlQjglQTctJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JUE1JUUwJUI4JTk0JUUwJUI4JTk5JUUwJUI5JTg5JUUwJUI4JUIzJUUwJUI4JUFCJUUwJUI4JTk5JUUwJUI4JUIxJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCVBNSVFMCVCOCU5NCVFMCVCOCU4NCVFMCVCOCVBNyVFMCVCOCVCMiVFMCVCOCVBMSVFMCVCOCVBRCVFMCVCOSU4OSVFMCVCOCVBNyVFMCVCOCU5OSI7CiAgICAvLyB0aGlzLmRhdGEuY29udGVudCA9CiAgICAvLyAgICLvuI/guJbguYnguLLguYDguJvguYfguJnguKXguLnguIHguITguYnguLLguJ7guLTguKHguYHguKXguYnguKcg4LiU4Li54LmB4Lil4LiI4LiZ4LiZ4LmJ4Liz4Lir4LiZ4Lix4LiB4Lil4LiU4LmA4Lil4Lii4LiE4LmI4LiwIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4quC4tOC4meC4hOC5ieC4suC5geC4peC5ieC4pyDguJfguLHguIHguYHguIrguJfguKHguLLguITguLjguKLguIHguLHguJnguYTguJTguYnguYDguKXguKLguITguYjguLAiOwogICAgLy8gLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwuc3BsaXQoJy1pLicpCiAgICAvLyB2YXIgY29udGVudCA9IHRoaXMuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoCiAgICAvLyAgIC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csCiAgICAvLyAgICIiCiAgICAvLyApOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgKICAgIC8vICAgLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csCiAgICAvLyAgICIiCiAgICAvLyApOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiISIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIioiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiIyIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoYF8vbFxfYCwgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAvLyAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JkdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgLy8gLy8gYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSsnL3dvcmR0b2tlbmRlc2M/dGV4dD0nK2NvbnRlbnQpLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgLy8gLy8gICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAvLyB9KQogICAgLy8gY29uc29sZS5sb2coTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iICsgY29udGVudCk7CiAgICAvLyB2YXIgY29uID0gewogICAgLy8gICBjb250ZW50OiBjb250ZW50LAogICAgLy8gfTsKICAgIC8vIGF4aW9zCiAgICAvLyAgIC5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiArIGNvbnRlbnQsIGNvbikKICAgIC8vICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vICAgICAvLyAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAvLyAgICAgLy8gICAgICAgICB2YXIgYWR2ZXJ0aXNlID0gewogICAgLy8gICAgIC8vICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOjEsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGtleXdvcmRfZGljdF9pZDpyZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGRpY3RfaWQ6cmVzLmRhdGFbcl0uZGljdF9pZCwKICAgIC8vICAgICAvLyAgICAgICAgICAgZGljdF9uYW1lOnJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgIC8vICAgICAvLyAgICAgICAgICAgc2VuOnJlcy5kYXRhW3JdLnNlbiwKICAgIC8vICAgICAvLyAgICAgICAgICAgc2VudGVudDpyZXMuZGF0YVtyXS5zZW50ZW50LAogICAgLy8gICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIC8vICAgICAgICAgQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKChyZXMpPT57CiAgICAvLyAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vICAgICAvLyAgICAgICAgIH0pCiAgICAvLyAgICAgLy8gICAgICAgfQogICAgLy8gICB9KTsKICAgIC8vIC8vICBjb25zb2xlLmxvZyh1cmwpOwogICAgLy8gLy8gICAgIHZhciBzZWxlY3Rwcm8gPSB7CiAgICAvLyAvLyAgICAgICB1cmw6dXJsWzBdCiAgICAvLyAvLyAgICAgIH0KICAgIC8vIC8vICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbigocmVzKT0+ewogICAgLy8gLy8gICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gLy8gdmFyIGxpc3QgPSByZXMuZGF0YQogICAgLy8gLy8gdGhpcy50b2tlbmRhdGEobGlzdCkKICAgIC8vIC8vIGZvciAobGV0IGwgPSAwOyBsIDwgbGlzdC5rZXl3b3JkLmxlbmd0aDsgbCsrKSB7CiAgICAvLyAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMubGlzdC5rZXl3b3JkW2xdLm1hcCk7CiAgICAvLyAvLyAgIC8vIGZvciAobGV0IG0gPSAwOyBtIDwgdGhpcy5saXN0LmtleXdvcmRbbF0ubGVuZ3RoOyBtKyspIHsKICAgIC8vIC8vICAgICBpZiAobGlzdC5rZXl3b3JkW2xdLm1hcCkgewogICAgLy8gLy8gICAgICAgdmFyIG1hcCA9IHsKICAgIC8vIC8vICAgICB1cmw6SlNPTi5zdHJpbmdpZnkobGlzdC5rZXl3b3JkW2xdLm1hcCkKICAgIC8vIC8vICAgICAgfQogICAgLy8gLy8gICAgIC8vICBjb25zb2xlLmxvZyhtYXApOwogICAgLy8gLy8gICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldG1hcHByb2R1Y3QobWFwKS50aGVuKChyZXMpPT57CiAgICAvLyAvLyAgICAgICBsaXN0LmtleXdvcmRbbF0ucnVsZWJhc2UgPSByZXMuZGF0YQogICAgLy8gLy8gICAgICAgaWYgKGwrMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAvLyAvLyAgICAgICAgIHRoaXMuY29tcGFyZShsaXN0KQogICAgLy8gLy8gICAgICAgfQogICAgLy8gLy8gICAgICB9KTsKICAgIC8vIC8vICAgICB9CiAgICAvLyAvLyAgIH0KICAgIC8vIC8vIH0KICAgIC8vIC8vIGNvbnNvbGUubG9nKHRoaXMubGlzdCk7CiAgICAvLyB0aGlzLnN0YXR1cyA9IHRydWU7CiAgICAvLyAvLyAgfSkKCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6YA,0B,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,aADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACAC,2BADA;AAEAC,uBAFA;AAGAC,0BAHA;AAIAC,8BAJA;AAKAC,sBALA;AAMAC,kBANA;AAOAC,mBAPA;AAQAC,mBARA;AASAC,oBATA;AAUAC,cAVA;AAWAC,aAXA;AAYAC,cAZA;AAaAC,mBAbA;AAcAC,iBAdA;AAeAC,oBAfA;AAgBAC,kBAhBA;AAiBAC,mBAjBA;AAkBAC,uBAlBA;AAmBAC,cAnBA;AAoBAC,sBApBA;AAqBAC,mBArBA;AAsBAC,kBAtBA;AAuBAC,kBAvBA;AAwBAC,2CAxBA;AAyBAC,0CAzBA;AA0BAC,0CA1BA;AA2BAC,YA3BA;AA4BAC,iBA5BA;AA6BAC,0CA7BA;AA8BAC,cA9BA;AA+BAC,iBA/BA;AAgCAC,gBAhCA;AAiCAC,aAjCA;AAkCAC,aAlCA;AAmCAlC,cAnCA;AAoCAmC,sBApCA;AAqCAC,4BArCA;AAsCAC,aAtCA;AAuCAC,aAvCA;AAwCAC,iBAxCA;AAyCAC,kBAzCA;AA0CAC,gBA1CA;AA2CAC,eA3CA;AA4CAC,sBA5CA;AA6CAC,sBA7CA;AA8CAC;AA9CA;AAgDA,GAtDA;AAuDAC;AACAC,eADA,yBACA;AACA;AACA;AAHA,GAvDA;AA4DAC;AACAC,kBADA,4BACA;AAAA;;AACAC;AACA;AACA;AACA,OAHA;AAIA,KANA;AAOAC,oBAPA,8BAOA;AAAA;;AACAC;AACA;AACA;AACA,OAHA;AAIA,KAZA;AAaAC,cAbA,sBAaArD,IAbA,EAaA;AACAA,8BADA,CAEA;;AACA;;AACA;AACA;AACAsD;AACA,OAPA,CAQA;;;AACA,+BATA,CAUA;;AACAC,6EAXA,CAYA;;AACA;AACA,KA3BA;AA4BAC,kBA5BA,0BA4BAC,CA5BA,EA4BAC,CA5BA,EA4BA;AACA;AACA;;AACA;AACAC;AACA,OAFA,MAEA;AACAA;AACA,OAFA,MAEA;AACAA;AACA;;AACA;AACA,KAvCA;AAwCAC,SAxCA,mBAwCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArDA;AAsDAC,OAtDA,eAsDA7D,IAtDA,EAsDA;AACA;AACA;;AACA;AACAA;AAAA;AAAA;AACA8D;AAEAA;AACA,OALA,MAKA;AACAA;AACA;;AAEA;AACA,KAnEA;AAoEAC,QApEA,kBAoEA;AACA;AACA;AACAC;AACA,OAFA,MAEA;AACA;AACAnE,6BADA;AAEAgB;AAFA,UADA,CAKA;;AACAoD;AACA;AACA;AACAD;AACA,WAFA,MAEA;AACAE;AACA;AACA;AAEAC;AACAH,oCALA,CAMA;AACA,aAPA;AAQA;AACA,SAdA;AAeA;AACA,KA9FA;AA+FAI,iBA/FA,yBA+FApE,IA/FA,EA+FA;AACA;AACA;AACA;AACA;AACA,KApGA;AAqGAqE,cArGA,sBAqGAC,GArGA,EAqGA7B,MArGA,EAqGA;AAAA;;AACA;AACA;;AAFA,iCAIA8B,CAJA;AAKA;AACAL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACAM;AACA,qBAJA,CAKA;AACA;;;AANA,0BAOAD,mBAPA;AAAA;AAAA;AAAA;;AAQAE,uBARA,6HAQAD,MARA,SASA;;AATA;AAAA,2BAWAE;AACA;AACA;AACAf;;AACA;AACA;AACAA;AACA;;AACAA;AACAA;AACAA,oCATA,CAUA;;AAAA;AACA,wDAXA,CAYA;;AAAA;AACAe;AACA;AACAC,sDADA;AAEAC,2CAFA;AAGA/D;AAHA;AAKAgE;AACA;AACA;AACA;AACA;AACA;AACAb;;AAEA,6CARA,CASA;AACA;AACA;AACA;;AACA,2BAbA;AAcA,yBApBA;AAqBA,uBAlCA,MAkCA;AACA;AACA;AACAvB;AADA;AAGAiC,0DACAI,cADA,EAEAC,aAFA,EAGAC,IAHA,CAGA;AACAhB;;AAEA;AACA,yBAPA;AAQA;AACA,qBAjDA,CAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AANA;;AAIA;AAAA;AAiEA;AACA,KA3KA;AA4KAiB,oBA5KA,4BA4KAjF,IA5KA,EA4KAyC,MA5KA,EA4KA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,uCADA,CAEA;AACA;AACA;;AACAyC,qBALA,GAKA;AACArF,0CADA;AAEA6C,uCAFA;AAGAyC;AAHA,iBALA,EAWA;;AAXA;AAAA,uBAYAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACAO,uCAFA,GAEA,CAFA;AAGAC,sCAHA,GAGA,CAHA;AAIAC,kCAJA,GAIA,CAJA;AAKAC,wCALA,GAKA,EALA;;AAMA;AACAA;AACAH;AACAC;AACAH;AACA;;AACA;AACAG;AACA;;AACA;AACAD;AACA,6BAjBA,CAkBA;;;AAAA;AACAG,uDAnBA,CAoBA;;AAAA;AACAD;AACAE,mCAtBA,GAsBA;AACAC,2CADA;AAEAF,mDAFA;AAGA1E,uCAHA;AAIA4B,4CAJA;AAKAiD,yDALA;AAMAC,gEANA;AAOAP,sDAPA;AAQAC,oDARA;AASAC,4CATA;AAUAM;AAVA,6BAtBA;;AAAA,iCAkCAC,UAlCA;AAAA;AAAA;AAAA;;AAAA;AAAA,mCAmCAhB,oIACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDAEA,kBAFA;;AAAA;AAGAD;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADA,GAnCA;;AAAA;AAAA;AAAA;;AAAA;AA+CAa;AAAA,kGACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACAiB,8CAFA,GAEAhB,WAFA;AAGAI;AACAa,+CAJA,GAIAC,wBAJA,EAKA;AACA;;AANA,sGAOAzB,CAPA;AAAA;AAAA;AAAA;AAAA;AAAA,uDASAwB,UATA;AAAA;AAAA;AAAA;;AAAA;AAAA,yDAUA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA+B,kEAFA,GAEA;AACAC,yFADA;AAEAtB,mFAFA;AAGAuB,wFAHA;AAIAC;AAJA,+DAFA,EAQA;;AARA;AAAA,qEASA1B;AAAA;AAAA;AAAA;AAAA;AAAA,8EACAH,uBADA;AAAA;AAAA;AAAA;;AAAA;AAAA,+EAEAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACAoC;AADA;AAAA,2FAEA,kBAFA;;AAAA;AAGArC;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,4EAFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEATA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,sDAVA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOAO,yCAPA,GAOA,CAPA;;AAAA;AAAA,8CAOAA,kBAPA;AAAA;AAAA;AAAA;;AAAA,8EAOAA,CAPA;;AAAA;AAOAA,2CAPA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADA;;AAAA;AAAA;AAAA;AAAA;;AA/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,oBAZA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2GA,KAvRA;AAwRA+B,gBAxRA,wBAwRAzG,IAxRA,EAwRA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAbA,CAcA;;AACA0G,YACAC,GADA,CACAC,2DADA,EAEAzB,IAFA,CAEA;AACA;AACA;AACA,OALA,EAfA,CAqBA;AACA;;AACA;AACA0B;AADA;AAGAH,YACAI,IADA,CACAF,mDADA,EACAG,GADA,EAEA5B,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,EA1BA,CAmCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,KA5WA;AA6WA6B,QA7WA,kBA6WA;AACA;AACAR;AACA;AACAA;AACA;AACAK,6CACA,gEADA,EAEA,EAFA;AAIAA,mCACA,gmBADA,EAEA,GAFA;AAKAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA,+CAxBA,CAwBA;;AACAA,mCACA,sHADA,EAEA,GAFA;AAIAL;AACA,KA3YA;AA4YAS,YA5YA,sBA4YA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,iBADA;;AAAA;AAEAJ,uBAFA,GAEA,EAFA;AAGAA,yDACA,gEADA,EAEA,EAFA;AAIAA,6CACA,gmBADA,EAEA,GAFA;AAKAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA,yDArBA,CAqBA;;AACAA,6CACA,sHADA,EAEA,GAFA;AAIA5E,oBA1BA,GA0BA,+BA1BA;AA2BAuE;AACAO,mBA5BA,GA4BA;AACAF;AADA,iBA5BA;AA+BAH,sBACAI,IADA,CACAF,6CADA,EACAG,GADA,EAEA5B,IAFA;AAAA,sFAEA;AAAA;AAAA;AAAA;AAAA;AACAqB;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFA;;AAAA;AAAA;AAAA;AAAA;;AA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCA,KAhbA;AAibAU,mBAjbA,2BAibA/G,IAjbA,EAibA;AACAqG;AACA;AACA;;AACA;AACA;AACAW;AACA;AACA,OARA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;AAQAC,qEARA;AASAC,6DATA;AAUAC,2DAVA;AAWAC,iEAXA;AAYAtK,kEAZA;AAaAuK;AAbA;;AAeA;AACA9I,oDADA;AAEA+I,8DAFA;AAGAT,6DAHA;AAIAG,qEAJA;AAKAC,qEALA;AAMAnL,+DANA;AAOAsK,0EAPA;AAQAmB,6EARA;AASAC,sEATA;AAUAC,+EAVA;AAWAX,iEAXA;AAYA1J;AAZA;;AAcA;AACA;AACA,iFAjCA,CAkCA;AACA;AACA;AACA,yCArCA,CAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFA;;AAAA;AAAA;AAAA;AAAA,gCAnDA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFA;;AAAA;AAAA;AAAA;AAAA,qBA4GAuK,KA5GA,CA4GA;AACArF;AACA;AACA;AACA,iBAhHA,CAjBA;;AAAA;AAAA;AAAA;;AAAA;AAmIA;AACAxG,2BADA;AAEA8K,iCAFA;AAGArI,kCAHA;AAIAsI,4BAJA;AAKAC,8BALA;AAMAC,4BANA;AAOAC,gCAPA;AAQAC,gCARA;AASAC,4BATA;AAUAC,2BAVA;AAWAC,8BAXA;AAYAtK,6BAZA;AAaAuK;AAbA;;AAeA;;AACA;AACA9I,kCADA;AAEA+I,6BAFA;AAGAT,4BAHA;AAIAG,gCAJA;AAKAC,gCALA;AAMAnL,2BANA;AAOAsK,mCAPA;AAQAmB,+BARA;AASAC,+BATA;AAUAC,gCAVA;AAWAX,8BAXA;AAYA1J;AAZA,mBAnJA,CAkKA;;;AAlKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoKA,KAxvCA;AAyvCAwK,UAzvCA,kBAyvCAjF,OAzvCA,EAyvCA;AACA,kCADA,CAGA;;AACA;;AACA;AACA;AACAM;AACAA;AACAA,qDAJA,CAKA;;AACA;AACA;AACA1D;AACA;AACA;AAEA;;AACA+C;AACA;AACA;AA7wCA,GA5DA;AA20CAuF,SA30CA,qBA20CA;AAAA;;AACA;AACAvF;AACA;AACA;;AACA;AACAwF;AACA;AACA,qDAFA,CAGA;AACA,OAJA;AAKA,KAXA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAt8CA","names":["name","components","ClipLoader","data","statusprocheck","statuslist","statusproduct","statusprocheckone","color","size","margin","radius","loading","list","url","file","status","urlPath","imagelists","tokenize","matchname","matchcategory","type","matchnamesum","statusname","statuscat","statusfda","colorname","colorfda","colorcat","id","keyword","colorkey","desc","arrList","alldata","back","next","product_token","title","key","fda","product","procheck","answer","typeId","prochecktext","producttypes","rulebasetypes","computed","currentUser","methods","getproducttype","ProductTypesService","getrulebasedtype","RulebasedTypesService","getsentent","arr","arrtxt","getstatuscheck","t","f","text","clear","cut","mapname","save","alert","KeywordService","DictService","document","getpercentage","savetorule","sen","d","iddata","sql","RuleBasedService","rule_based_id","dict_id","MapRuleBasedService","res","updatemaprule","then","savetorule_based","datas","advertiseId","statusfalse","statustrue","weight","advertise_id","maprule","keyword_id","user","map_dict","map_advertise","check","map_id","sendata","JSON","rule","map_rule_based_id","dict_name","no","console","checkkeyword","axios","get","LinkService","content","post","con","find","checkkey","findtypeproduct","findfda","finddescription","loaddict","getdetail","edit","findtype","split","FDATypesService","contentfull","des","sentence","sentence_keyword","sentencefull","type_rulebasedId","type_productId","r","sentencetoken","advertise","product_token_id","keyword_dict_id","sentent","AdvertiseService","getprotoken","replaceAll","search","getMax","prop","max","getMaxlength","getAllMaxArray","value","array","tokendata","l","map","maxvalue","i","bestdata","best","rule_based_name","rulebased","count_rulebased","sentence_rulebase","compare","k","filteredArray","percentage","getAllIndexes","val","indexes","checkfda","product_status","number_src","options","method","headers","Accept","body","fetch","detail","cncnm","typepro","lcnno","productha","produceng","licen","Addr","Newcode","token","mapfda","cat_status","fda_status","name_status","pro","catch","getfda","mounted","ProductsService"],"sourceRoot":"src/components","sources":["addproducttoken.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div>\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\"></label>\n          <input\n          v-model=\"data.url\"\n                      type=\"text\"\n                      class=\"form-control form-control-sm\"\n                    />\n                    <label for=\"exampleFormControlTextarea1\" class=\"mt-3\"></label>\n                    <div class=\"form-check\" v-for=\"(p,i) in producttypes\" :key=\"i\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"types\" :id=\"'types'+p.name\" :value=\"p.id\" v-model=\"data.type_productId\">\n  <label class=\"form-check-label\" :for=\"'types'+p.name\">\n    {{p.name}}\n  </label>\n</div>\n<!-- <div class=\"form-check\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios2\" value=\"option2\">\n  <label class=\"form-check-label\" for=\"exampleRadios2\">\n    Second default radio\n  </label>\n</div> -->\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlTextarea1\"></label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <!-- <label for=\"exampleFormControlTextarea1\" class=\"mt-3\"></label> -->\n                    <div class=\"form-check\" v-for=\"(r,i) in rulebasetypes\" :key=\"i\">\n  <input class=\"form-check-input\" type=\"radio\" name=\"rulebased\" :id=\"'rule'+r.name\" :value=\"r.id\" v-model=\"data.type_rulebasedId\">\n  <label class=\"form-check-label\" :for=\"'rule'+r.name\">\n    {{r.name}}\n  </label>\n</div>\n<div style=\"text-align:center\">\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-success\" v-if=\"!$route.query.id\">\n          </button\n        >\n        <button @click=\"edit()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-success\" v-else>\n          </button\n        >&nbsp;\n        <button @click=\"clear()\" type=\"submit\" class=\"mb-3 mt-3 btn btn-danger\">\n          \n        </button>\n      </div>\n    </div>\n      <table class=\"table table-bordered\" v-if=\"statusprocheck\">\n        <thead>\n          <tr>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n               1\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              .\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n          </tr>\n        </thead>\n        <!-- {{procheck}} -->\n        <tbody>\n          <tr v-for=\"(p,o) in procheck\" :key=\"o\">\n            <td :style=\"colorfda\"></td>\n            <td :style=\"colorfda\">{{ p.mapfda }}</td>\n            <td :style=\"colorfda\">{{ p.fda }}</td>\n            <td :style=\"colorfda\">{{ p.cncnm }}</td>\n            <td\n              v-if=\"\n                p.cat_status &&\n                p.name_status &&\n                p.fda_status == 1\n              \"\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #a3e9a4;\n              \"\n            >\n              <span></span>\n            </td>\n            <td\n              v-else\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #f9bdbb;\n              \"\n            >\n              <span></span>\n            </td>\n          </tr>\n          <tr v-for=\"(pp,oo) in procheck\" :key=\"oo+10\">\n            <td :style=\"colorcat\"></td>\n            <td :style=\"colorcat\">{{ pp.typepro }}</td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.typepro\">{{ pp.type }}</span\n              ><span v-else>-</span>\n            </td>\n            <td :style=\"colorcat\">\n              <span v-if=\"pp.cat_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n          <tr v-for=\"(ppp,ooo) in procheck\" :key=\"ooo+20\">\n            <td :style=\"colorname\"></td>\n            <td :style=\"colorname\">\n              {{ ppp.productha }}<br />{{ ppp.produceng }}\n            </td>\n            <td :style=\"colorname\"><span v-html=\"ppp.name\"></span></td>\n            <td :style=\"colorname\">\n              <span v-if=\"ppp.name_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div style=\"text-align:center\" v-if=\"statusprocheckone && statuslist\"><span>  1   {{prochecktext}}</span></div>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"statuslist\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n               2\n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: top\">\n              \n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              <br>\n              <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div>\n            </th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\"></td>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\"></th> -->\n            <!-- {{list}} -->\n            \n            <td :style=\"colorkey\" v-if=\"list.keyword != 1\">\n             \n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentence_rulebase\"></span><br /><br />\n                  <span v-html=\"getsentent(k.rule_based_name)\"></span>\n                  <!-- <span v-for=\"(s, idx) in k.rule_based_name\" :key=\"idx\">{{\n                    s\n                  }}</span> -->\n                  <br /><br />\n                  <!-- <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span> -->\n                  <span></span>\n                  <span v-if=\"k.count_rulebased\"\n                    > {{ getpercentage(k) }}%</span\n                  ><br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n                </td>\n                <td>\n                  <span>{{getstatuscheck(k.statustrue,k.statusfalse)}}</span\n                  >\n                  \n                  <!-- <span v-if=\"answer == 1\"></span\n                  ><span v-if=\"answer == 9\"></span\n                  ><span v-if=\"answer == 0\"></span> -->\n                </td>\n\n                <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td>\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <!-- <div style=\"text-align: right;\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n              <tr>\n                \n                <br /><br />\n                  <!-- <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div> -->\n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table mt-3\" v-if=\"statusproduct\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">FDA</th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">.</th>\n            <!-- <th scope=\"col\"></th> -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(l, i) in product\" :key=\"i\">\n            <td :style=\"l.bg\">{{ l.name }}</td>\n            <td :style=\"l.bg\">{{ l.detail }}</td>\n            <!-- <td :style=\"l.bg\">\n              <div class=\"row\">\n          <div class=\"col-md-2\" v-for=\"(im ,i) in imagelists\" :key=\"i\">\n            <img :src=\"im\" width=\"100%\"/>\n          </div>\n        </div>\n            </td> -->\n            <td :style=\"l.bg\" style=\"width: 300px\">\n              <div>\n                 : {{ l.fda }}<br />\n                <!-- : <span v-html=\"matchname\"></span> -->\n                <!-- : {{l.productha}} -->\n              </div>\n            </td>\n            <td :style=\"l.bg\">{{ cut(l.token) }}</td>\n            <td\n              style=\"background-color: #bdedff\"\n              v-if=\"l.status == 1 || l.status == 3\"\n            >\n              <p class=\"card-text\"> : {{ l.cncnm || \"\" }}</p>\n              <p class=\"card-text\">\n                 :<span> {{ l.typepro }}</span>\n              </p>\n              <p class=\"card-text\">\n                / : <span> {{ l.lcnno }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (TH) : <span> {{ l.productha }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (EN) : <span> {{ l.produceng }}</span>\n              </p>\n              <p class=\"card-text\"> : {{ l.licen }}</p>\n              <p class=\"card-text\"> : {{ l.Addr }}</p>\n              <p class=\"card-text\">Newcode : {{ l.Newcode }}</p>\n            </td>\n            <td :style=\"l.bg\" v-else></td>\n            <!-- <td :style=\"l.bg\">\n            <i class=\"fa fa-circle\" :style=\"l.icon\" aria-hidden=\"true\"></i>\n          </td> -->\n          </tr>\n        </tbody>\n      </table>\n      <clip-loader :loading=\"loading\" :color=\"color\" :size=\"size\"></clip-loader>\n      <!-- Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"AddScopusToken\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ title }}</h5>\n            </div>\n            <div class=\"modal-body\">\n              <form>\n                <div class=\"card-body mt-3\">\n                  <div class=\"form-group mt-3\">\n                    <label></label>\n                    <input\n                      v-model=\"key.name\"\n                      type=\"text\"\n                      min=\"1\"\n                      class=\"form-control form-control-sm\"\n                    />\n                  </div>\n                </div>\n              </form>\n            </div>\n            <div class=\"modal-footer mt-3\">\n              <button type=\"button\" class=\"btn btn-success\" @click=\"save()\">\n                \n              </button>\n              <button\n                id=\"closedcategory\"\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\nimport KeywordService from \"../services/KeywordService\";\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue'\nimport FDATypesService from \"../services/FDATypesService\";\nimport ProductTypesService from \"../services/ProductTypesService\";\nimport RulebasedTypesService from \"../services/RulebasedTypesService\";\nimport ProductsService from '../services/ProductsService';\n\nexport default {\n  name: \"App\",\n  components: {\n    ClipLoader\n  },\n  data() {\n    return {\n      statusprocheck:false,\n      statuslist:false,\n      statusproduct:false,\n      statusprocheckone:false,\n      color: '#5bc0de',\n      size: '50px',\n      margin: '2px',\n      radius: '2px',\n      loading:false,\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      id: \"\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token: 0,\n      title: \" keyword\",\n      key: {},\n      fda: \"\",\n      product: [],\n      procheck: [],\n      answer:'',\n      typeId:0,\n      prochecktext:'',\n      producttypes:[],\n      rulebasetypes:[]\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  methods: {\n    getproducttype(){\n      ProductTypesService.gettypes_product().then((res)=>{\n        // console.log(res.data);\nthis.producttypes = res.data\n      })\n    },\n    getrulebasedtype(){\n      RulebasedTypesService.gettypes_rulebased().then((res)=>{\n        // console.log(res.data);\nthis.rulebasetypes = res.data\n      })\n    },\n    getsentent(data){\n      data = JSON.parse(data)\n      // var text = ''\n      var arr =[]\n      for (let d = 0; d < data.length; d++) {\n        // text += data[d]\n        arr.push(data[d])\n      }\n      // console.log(arr);\n      var arrtxt = String(arr)\n      // console.log(arrtxt);\n      arrtxt = arrtxt.replaceAll(\",\",\"<span style='color:red;'> | </span>\")\n      // console.log(arrtxt);\nreturn arrtxt\n    },\n    getstatuscheck(t,f){\n      // console.log(t,f);\n      var text = ''\nif (t == f) {\n  text = ''\n}else if (t > f) {\n  text = ''\n}else if (f > t) {\n  text = ''\n}\nreturn text\n    },\n    clear() {\n      \n      this.data = [];\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.product = [];\n      this.procheck = [];\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      this.product_token = 0;\n    },\n    cut(data) {\n      // console.log(data);\n      var mapname = ''\n      if (data != '-' && data != '') {\n        data = data.filter((letter) => letter !== \" \");\n      mapname = data.toString();\n\n      mapname = mapname.replaceAll(\",\", \" | \");\n      }else{\n        mapname = data\n      }\n      \n      return mapname;\n    },\n    save() {\n      //console.log(this.key);\n      if (this.key.name == null || this.key.name == \"\") {\n        alert(\"\");\n      } else {\n        var prodata = {\n          name: this.key.name,\n          status: 1,\n        };\n        //console.log(prodata);\n        KeywordService.createkeyword(prodata).then((res) => {\n          //console.log(res.data);\n          if (res.data.err == 1062) {\n            alert(\"\");\n          } else {\n            DictService.createdict(prodata).then(() => {\n              //console.log(res.data );\n              // RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n\n              document.getElementById(\"closedcategory\").click();\n              alert(\"\");\n              // })\n            });\n          }\n        });\n      }\n    },\n    getpercentage(data) {\n      // var dict = JSON.parse(data.dict_id)\n      // var rule_based_id = JSON.parse(data.rule_based_id)\n      // var re = (100 * data.count_rulebased)/ (rule_based_id.length)\n      return data.count_rulebased;\n    },\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    async savetorule_based(data, answer) {\n      this.answer = answer\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      // console.log(data);\n      var datas = {\n        name :data.rule_based_id,\n        typeId:this.typeId,\n        advertiseId:data.id\n      }\n      \n      // if (!data.mapId) {\n        await MapRuleBasedService.checkintb(data.dict_id).then(async (check) => {\n          // console.log(check.data);\n          var statusfalse = 0\n          var statustrue = 0\n          var weight = 0\n          var advertise_id = []\n          if (check.data) {\n            advertise_id = JSON.parse(check.data.map_advertise)\n          statusfalse = check.data.statusfalse\n          statustrue = check.data.statustrue\n          datas.rulebasedId = check.data.id\n          }\n          if (answer == 1) {\n            statustrue = statustrue+ parseInt(1)\n          }\n          if (answer == 9) {\n            statusfalse = statusfalse + parseInt(1)\n          }\n          // console.log(advertise_id);\n          advertise_id.push(data.id)\n          // console.log(advertise_id);\n          weight = statusfalse+statustrue\n          var maprule = {\n        keyword_id: 1,\n        advertise_id: data.id,\n        status: 9,\n        answer: answer,\n        user: this.currentUser.id,\n        map_dict: JSON.parse(data.dict_id),\n        statusfalse:statusfalse,\n        statustrue:statustrue,\n        weight:weight,\n        map_advertise: advertise_id,\n      };\n          if (check.data) {\n            await MapRuleBasedService.updateanswer(check.data.id, maprule).then(\n          async () => {\n            // console.log(res.data);\n           \n     await KeywordService.updateweight(1,datas).then(async ()=>{\n            // console.log(res);\n            await this.getdetail();\n            alert(\"\");\n          })\n          }\n        );\n          } else {\n            MapRuleBasedService.createmap_rule_based(maprule).then(\n              async (res) => {\n                // console.log(res.data);\n                var map_id = res.data.id;\n                datas.rulebasedId = map_id\n                var sendata = JSON.parse(data.dict_id);\n                // console.log(sendata);\n                // console.log(dict_name);\n                for (let d = 0; d < sendata.length; d++) {\n                  // console.log(sendata[d]);\n                  if (sendata[d]) {\n                    await DictService.getdict(sendata[d]).then(async (sen) => {\n                    // console.log(sen.data);\n                    var rule = {\n                      map_rule_based_id: map_id,\n                      dict_id: sendata[d],\n                      dict_name: sen.data.name,\n                      no: d + 1,\n                    };\n                    // console.log(rule);\n                    await RuleBasedService.createrule_based(rule).then(async () => {\n                      if (d + 1 == sendata.length) {\n                        await KeywordService.updateweight(1,datas).then(async (res)=>{\n            console.log(res);\n            await this.getdetail();\n            alert(\"\");\n          })\n                      }\n                    });\n                  });\n                  }\n                }\n              }\n            );\n          }\n          \n          \n        });\n     \n        // } else {\n      //   MapRuleBasedService.deletemap_rule_based(data.mapId, maprule).then(\n      //     async () => {\n      //       // console.log(res.data);\n      //       this.getdetail();\n      //       alert(\"\");\n      //     }\n      //   );\n      // }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = '  Shopee     Bluebird() Storage Condition Normal  ,     ,       12    /. 30-1-26764-5-0051  17901           1000  60    1  5   20   93   2  21   50   90   3  51   100   87   4  100  .....................  85  Vitamin C Plus Dietary Supplement Product Bluebird Brand      1   (Active Ingredient) VITAMIN C (100%) - 60  CITRUS BIOFLAVONOID POWDER - 630  BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (/) (MALPIGHIA GLABRA L.)  - 60  ROSEHIP POWDER () (ROSA CANINA L.)  - 60  Rutin - 30  INDIAN GOOSEBERRY POWDER () (PHYLLANTHUS EMBLICA L. )  - 60   (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5  TITANIUM DIOXIDE 171 -1.95    1-2    .. 30-1-26764-5-0051       5                    12.00         _/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    find(){\nvar type = this.findtypeproduct(this.data.content)\nconsole.log(type);\nvar split = type.split(\"\\n\")\nconsole.log(split[3]);\n      var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\nconsole.log(this.finddescription(content));\n    },\n    async checkkey(){\n      await this.loaddict();\n      var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n        var desc = this.finddescription(content)\nconsole.log(desc);\nvar con = {\n                      content: desc,\n                    };\n       axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        console.log(res.data);\n                      });\n    },\n    findtypeproduct(data) {\n      console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      console.log(findfda);\n      return findfda;\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    getdetail() {\n      // var url = this.data.url.split(\"-i.\");\n      // var url = this.data.url.split(\"-i.\");\n      // this.data.url = url[0];\n      // console.log(this.product_token);\n      var selectpro = {\n        // url: this.data.url,\n        id: this.product_token,\n      };\n      MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n        // console.log(res.data);\n        // var best = this.getMax(res.data.keyword,'count_rulebased')\n        //console.log(best);\n        this.list = res.data;\n        this.statuslist = true\n        this.status = true;\n        this.loading = false\n        alert(\"\");\n        // var data = {\n        //   advertise_id: res.data.keyword[0].product_token_id,\n        // };\n        // MapRuleBasedService.updateweight(\n        //   res.data.keyword[0].map_rule_based_id,\n        //   data\n        // ).then(() => {});\n        // this.list.keyword = [best]\n        // this.status = true\n      });\n    },\n    \n    async edit() {\n      // var url = this.data.url.replaceAll(\".\",'');\n      // url = url.split(\"-i\");\n      // this.data.url = url[0];\n      // console.log(this.data.url);\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      var con = {};\n      await this.loaddict();\n      // if (this.data.url == null || this.data.url == \"\") {\n      //   alert(\" URL\");\n      // } else \n      if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      }else if (this.data.url == null || this.data.url == \"\") {\n        alert(\"\");\n      }else if (this.data.type_productId == null || this.data.type_productId == \"\") {\n        alert(\"\");\n      }else if (this.data.type_rulebasedId == null || this.data.type_rulebasedId == \"\") {\n        alert(\"\");\n      } else {\n         \n        this.loading = true\n// console.log(type);\nconsole.log(this.data.content);\nvar findtype = this.findtypeproduct(this.data.content)\nvar split = findtype.split(\"\\n\")\nvar type = split[3]\n// console.log(type);\nawait FDATypesService.getfdatypes(type).then(async (res)=>{\n  // console.log(res.data);\n  if (res.data.length > 0) {\n    this.typeId = res.data[0].id\n  }else{\n    var name = {\n      name : type\n    }\n    await FDATypesService.createfdatype(name).then((res)=>{\n      this.typeId = res.data.id\n    });\n  }\n})\n// console.log(this.typeId);\n        var content = \"\";\n        var contentfull = this.data.content\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        // this.fda = await this.findfda(content);\n\nvar desc = this.finddescription(content)\n        this.fda = await this.getfda(content)[0]\n        console.log(this.fda);\n          con = {\n            content: desc,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // console.log(res.data);\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: desc,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 2,\n                sentencefull:contentfull,\n                type_rulebasedId:this.data.type_rulebasedId,\n                type_productId:this.data.type_productId\n              };\n              // console.log(des);\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: desc,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        // console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then(async (pro) => {\n                                    // console.log(pro.data);\n                                   await this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          await this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                \n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      this.checkfda(content, this.product_token);\n                      con = {\n                        content: desc,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n                }\n            });\n        // });\n      }\n    },\n    async search() {\n      // var url = this.data.url.replaceAll(\".\",'');\n      // url = url.split(\"-i\");\n      // this.data.url = url[0];\n      // console.log(this.data.url);\n      this.product = [];\n      this.procheck = [];\n      this.loading = false;\n      this.status = false\n      this.statusprocheck = false\n      this.statusproduct = false\n      this.statuslist = false\n      this.product_token = 0;\n      var con = {};\n      await this.loaddict();\n      // if (this.data.url == null || this.data.url == \"\") {\n      //   alert(\" URL\");\n      // } else \n      if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      }else if (this.data.url == null || this.data.url == \"\") {\n        alert(\"\");\n      }else if (this.data.type_productId == null || this.data.type_productId == \"\") {\n        alert(\"\");\n      }else if (this.data.type_rulebasedId == null || this.data.type_rulebasedId == \"\") {\n        alert(\"\");\n      }  else {\n\n        this.loading = true\n//         var findtype = await this.findtypeproduct(this.data.content)\n// console.log(findtype);\n// var split = findtype.split(\"\\n\")\n// var type = split[3]\n// console.log(type);\n// await FDATypesService.getfdatypes(type).then(async (res)=>{\n//   // console.log(res.data);\n//   if (res.data.length > 0) {\n//     this.typeId = res.data[0].id\n//   }else{\n//     var name = {\n//       name : type\n//     }\n//     await FDATypesService.createfdatype(name).then((res)=>{\n//       this.typeId = res.data.id\n//     });\n//   }\n// })\n// console.log(this.typeId);\n        var content = \"\";\n        var contentfull = this.data.content\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        // this.fda = await this.findfda(content);\n\nvar desc = this.finddescription(content)\n        this.fda = await this.getfda(content)[0]\n        console.log(this.fda);\n          con = {\n            content: desc,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // console.log(res.data);\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: desc,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 2,\n                sentencefull:contentfull,\n                type_rulebasedId:this.data.type_rulebasedId,\n                type_productId:this.data.type_productId\n              };\n              // console.log(des);\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: desc,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        // console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then(async (pro) => {\n                                    // console.log(pro.data);\n                                   await this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          await this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      this.checkfda(content, this.product_token);\n                      con = {\n                        content: desc,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n              }\n            });\n        // });\n      }\n    },\n    getMax(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getMaxlength(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getAllMaxArray(arr, value) {\n      var array = [];\n      arr.map(function (num, idx) {\n        if (num.allcount == value) {\n          array.push(arr[idx]);\n        }\n      });\n      return array;\n    },\n    async tokendata(list) {\n      //console.log(list);\n      if (list.keyword.length > 0) {\n        for (let l = 0; l < list.keyword.length; l++) {\n          //console.log(list.keyword[l].keyword_dict_id);\n          if (list.keyword[l].keyword_dict_id) {\n            var map = {\n              id: list.keyword[l].id,\n              url: list.keyword[l].keyword_dict_id,\n              keyword_id: list.keyword[l].dict_id,\n            };\n            // console.log(map);\n            await MapRuleBasedService.getmapproduct(map).then(async (res) => {\n              // console.log(res.data);\n              var maxvalue = this.getMax(res.data, \"allcount\");\n              // console.log(maxvalue.allcount);\n              var i = this.getAllMaxArray(res.data, maxvalue.allcount);\n              // console.log(i);\n              var bestdata = this.getMax(i, \"length\");\n              // console.log(bestdata);\n              // getAllIndexes\n              // console.log(bestdata);\n              var best = {\n                id: list.keyword[l].id,\n                sentence: bestdata,\n              };\n              // console.log(best);\n              var rule_based_name = bestdata.name.toString();\n              rule_based_name = rule_based_name.replaceAll(\",\", \"\");\n              // console.log(rule_based_name);\n              await axios\n                .get(\n                  LinkService.getpythonlink() +\n                    \"/loaddict?word=\" +\n                    rule_based_name\n                )\n                .then(async () => {\n                  await MapRuleBasedService.getbestrulebased(best).then(\n                    async (res) => {\n                      // console.log(res.data);\n\n                      var rulebased = {\n                        count_rulebased: res.data.count,\n                        sentence_rulebase: res.data.sentence,\n                        rule_based_id: res.data.rule_based_id,\n                        rule_based_name: res.data.rule_based_name,\n                        map_rule_based_id: res.data.map_id,\n                      };\n                      // console.log(rulebased);\n                      // console.log(list.keyword[l].id);\n                      await MapRuleBasedService.updaterulebased(\n                        list.keyword[l].id,\n                        rulebased\n                      ).then(async () => {\n                        if (l + 1 == list.keyword.length) {\n                          await this.getdetail();\n                        }\n                      });\n                    }\n                  );\n                });\n              // list.keyword[l].rulebase = res.data;\n              // if (l + 1 == list.keyword.length) {\n              //   this.compare(list);\n              // }\n            });\n          }\n\n          // }\n        }\n      } else {\n        await this.getdetail();\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          // this.status = true;\n        }\n      }\n    },\n    getAllIndexes(arr, val) {\n      var indexes = [],\n        i = -1;\n      while ((i = arr.indexOf(val, i + 1)) != -1) {\n        indexes.push(i);\n      }\n      return indexes;\n    },\n    findfda(data) {\n      var text = [\"/.\",\".\"];\n      // var end = ['']\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        findfda = findfda.substring(findfda.indexOf(text[t]), data.length);\n        var endindex = this.getAllIndexes(findfda, \" \");\n        findfda = findfda.substring(findfda.indexOf(text[t]), endindex[1]);\n      }\n      // console.log(findfda);\n\n      for (let v = 0; v < text.length; v++) {\n      findfda = findfda.replaceAll(text[v], \"\");\n      }\n      findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n      findfda = findfda.replaceAll(\"-\", \"\");\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\" \", \"\");\n      // console.log(findfda);\n      // var regex = /\\d+/g;\n      // var matches = findfda.match(regex);  // creates array from matches\n      // console.log(matches[0]);\n      return findfda;\n    },\n    async checkfda(content, id) {\n      // console.log(this.fda);\n      if (this.fda) {\n        var fda = this.fda;\n        var product_status = 0;\n        const url = \"https://tawaiforhealth.org/api/oryor/check-product\";\n        const data = { number_src: fda };\n        // console.log(data);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n          },\n          body: JSON.stringify(data),\n        };\n\n        await fetch(url, options)\n          .then((response) => response.json())\n          .then(async (data) => {\n            // console.log(data);\n            if (data.message || data.length > 1) {\n              this.product.push({\n                name: \"-\",\n                detail: content,\n                fda: this.fda,\n                cncnm: \"-\",\n                typepro: \"-\",\n                lcnno: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                licen: \"-\",\n                Addr: \"-\",\n                Newcode: \"-\",\n                status: \"-\",\n                token: \"-\",\n              });\n              this.procheck.push({\n                fda: this.fda,\n                mapfda: \"-\",\n                cncnm: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                name: \"-\",\n                product_status: 0,\n                cat_status: 0,\n                fda_status: 0,\n                name_status: 0,\n                typepro: \"-\",\n                type: \"-\",\n              });\n              this.statusprocheck = true\n              // this.status = true\n            } else {\n              // console.log(data);\n              // console.log(data.cncnm.includes(\"\"))\n              if (data.cncnm.includes(\"\") || data.cncnm.includes(\"\")) {\n                product_status = 3;\n              } else {\n                product_status = 1;\n                this.colorfda = \"background-color:#a3e9a4\";\n              }\n              // console.log(this.colorfda);\n              var con = {\n                fda: fda,\n                productha: data.productha,\n                produceng: data.produceng,\n                typepro: data.typepro,\n                content: content,\n              };\n              await axios\n                .post(LinkService.getpythonlink() + \"/checkfda\", con)\n                .then(async (res) => {\n                  // console.log(res.data);\n                  var pro = {\n                    name: res.data.name,\n                    fda: fda,\n                    product_status: product_status,\n                    cat_status: res.data.mapcatstatus,\n                    fda_status: product_status,\n                    name_status: res.data.mapnamestatus,\n                  };\n                  // console.log(pro);\n                  await MapRuleBasedService.updatemap(id, pro).then(() => {\n                    // console.log(res.data);\n                    this.product.push({\n                      name: data.productha + \" \" + data.produceng,\n                      detail: content,\n                      fda: fda,\n                      cncnm: data.cncnm,\n                      typepro: data.typepro,\n                      lcnno: data.lcnno,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      licen: data.licen,\n                      Addr: data.Addr,\n                      Newcode: data.Newcode,\n                      status: product_status,\n                      token: res.data.token,\n                    });\n                    this.procheck.push({\n                      fda: fda,\n                      mapfda: data.lcnno,\n                      cncnm: data.cncnm,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      name: res.data.name,\n                      product_status: product_status,\n                      cat_status: res.data.mapcatstatus,\n                      fda_status: product_status,\n                      name_status: res.data.mapnamestatus,\n                      typepro: data.typepro,\n                      type: res.data.category,\n                    });\n                    this.statusprocheck = true\n                    this.colorcat = res.data.colorcat;\n                    this.colorname = res.data.colorname;\n                    // console.log(this.product);\n                    // console.log(this.procheck);\n                    // console.log(this.fda);\n                  });\n                });\n\n              // this.status = true\n            }\n          }).catch(err=>{\n            console.log(err);\n            this.statusprocheckone = true\n            this.prochecktext = 'Api tawaiforhealth '\n          });\n      } else {\n        this.product.push({\n          name: \"-\",\n          detail: content,\n          fda: this.fda,\n          cncnm: \"-\",\n          typepro: \"-\",\n          lcnno: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          licen: \"-\",\n          Addr: \"-\",\n          Newcode: \"-\",\n          status: \"-\",\n          token: \"\",\n        });\n        this.statusproduct = true\n        this.procheck.push({\n          fda: this.fda,\n          mapfda: \"-\",\n          cncnm: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          name: \"-\",\n          product_status: 0,\n          cat_status: 0,\n          fda_status: 0,\n          name_status: 0,\n          typepro: \"-\",\n          type: \"-\",\n        });\n\n        // this.status = true\n      }\n    },\n    getfda(content){\n        var tt = content.split(' ')\n\n    // console.log(tt);\n    var arr = []\n    for (let l = 0; l < tt.length; l++) {\n      var findfda = tt[l].replaceAll('-', '');\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\".\", \"\");\n    findfda = findfda.replaceAll(/[^\\d.-]/g, '');\n    // console.log(findfda);\n    if (findfda) {\n      if (findfda.length == 13) {\n      arr.push(findfda)\n      }\n    }\n      \n    }\n    console.log(arr);\n    return arr;\n    }\n  },\n  mounted() {\n    this.product_token = this.$route.query.id\n    console.log(this.$route.query.id);\n    this.getproducttype()\n    this.getrulebasedtype()\n    if (this.$route.query.id) {\n      ProductsService.getproducttoken(this.$route.query.id).then((res)=>{\n        this.data = res.data\n        this.data.content = res.data.sentencefull\n        // console.log(res.data);\n      })\n    }\n    // var f = this.findfda('/. 13-1-1-7562-2-0006')\n    // var text = [\"/.\",\".\"];\n    // var sen = '.14-1-02662-2-0021 . 13-1-1-7562-2-0006'\n    // var l = sen.split(' ')\n    // console.log(l);\n    // var f = this.findfda(sen)\n    // var text = [\"/.\",\".\"];\n    //   // var end = ['']\n    //   var findfda = sen;\n    //   for (let t = 0; t < text.length; t++) {\n    //     console.log(findfda.indexOf(text[t]));\n        \n    //     console.log(this.getAllIndexes(l,text[t]));\n    //   }\n    // console.log(f);\n//     var best = {\n//     \"id\": 67,\n//     \"sentence\": {\n//         \"length\": 2,\n//         \"allcount\": 100,\n//         \"rule\": [\n//             8899,\n//             57\n//         ],\n//         \"name\": [\n//             \"\",\n//             \"\"\n//         ],\n//         \"map_id\": 75\n//     }\n// }\n//                   MapRuleBasedService.getbestrulebased(best).then(\n//                      (res) => {\n//                       console.log(res.data);\n//                     });\n    // var text = '/. 13-1-13465-5-0052  415 '\n    // console.log(this.findfda(text));\n    // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"   \";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}