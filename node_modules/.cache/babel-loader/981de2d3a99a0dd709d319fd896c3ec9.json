{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttokenlink.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttokenlink.vue","mtime":1697957083625},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/babel.config.js","mtime":1677654957527},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wb25uaXBhL0RvY3VtZW50cy9HaXRIdWIvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBQcm9kdWN0c1NlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzJwoKaW1wb3J0IERpY3RTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0RpY3RTZXJ2aWNlIjsKaW1wb3J0IFJ1bGVCYXNlZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvUnVsZUJhc2VkU2VydmljZSI7CmltcG9ydCBNYXBSdWxlQmFzZWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL01hcFJ1bGVCYXNlZFNlcnZpY2UiOwppbXBvcnQgTGlua1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTGlua1NlcnZpY2UiOwppbXBvcnQgQWR2ZXJ0aXNlU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9BZHZlcnRpc2VTZXJ2aWNlIjsKaW1wb3J0IEtleXdvcmRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0tleXdvcmRTZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3RzU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Qcm9kdWN0c1NlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcCIsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICB1cmw6ICIiLAogICAgICBmaWxlOiAiIiwKICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgdXJsUGF0aDogIiIsCiAgICAgIGltYWdlbGlzdHM6ICIiLAogICAgICB0b2tlbml6ZTogIiIsCiAgICAgIG1hdGNobmFtZTogIiIsCiAgICAgIG1hdGNoY2F0ZWdvcnk6ICIiLAogICAgICB0eXBlOiAiIiwKICAgICAgbWF0Y2huYW1lc3VtOiAiIiwKICAgICAgc3RhdHVzbmFtZTogMCwKICAgICAgc3RhdHVzY2F0OiAwLAogICAgICBzdGF0dXNmZGE6IDAsCiAgICAgIGNvbG9ybmFtZTogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGNvbG9yZmRhOiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgY29sb3JjYXQ6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBrZXl3b3JkOiBbXSwKICAgICAgY29sb3JrZXk6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBkZXNjOiAiIiwKICAgICAgYXJyTGlzdDogW10sCiAgICAgIGFsbGRhdGE6IDAsCiAgICAgIGJhY2s6IDAsCiAgICAgIG5leHQ6IDAsCiAgICAgIGRhdGE6IHt9LAogICAgICBwcm9kdWN0X3Rva2VuOiAwLAogICAgICB0aXRsZTogJ+C5gOC4nuC4tOC5iOC4oSBrZXl3b3JkJywKICAgICAga2V5OiB7fSwKICAgICAgZmRhOiAnJywKICAgICAgcHJvZHVjdDogW10sCiAgICAgIHByb2NoZWNrOiBbXSwKICAgICAgaWQ6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY3VycmVudFVzZXI6IGZ1bmN0aW9uIGN1cnJlbnRVc2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY3V0OiBmdW5jdGlvbiBjdXQoZGF0YSkgewogICAgICB2YXIgbWFwbmFtZSA9ICcnOwoKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGxldHRlcikgewogICAgICAgICAgcmV0dXJuIGxldHRlciAhPT0gIiAiOwogICAgICAgIH0pOwogICAgICAgIG1hcG5hbWUgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgbWFwbmFtZSA9IG1hcG5hbWUucmVwbGFjZUFsbCgnLCcsICcgfCAnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1hcG5hbWU7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmtleSk7CiAgICAgIGlmICh0aGlzLmtleS5uYW1lID09IG51bGwgfHwgdGhpcy5rZXkubmFtZSA9PSAiIikgewogICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKEiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcHJvZGF0YSA9IHsKICAgICAgICAgIG5hbWU6IHRoaXMua2V5Lm5hbWUsCiAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICB9OyAvL2NvbnNvbGUubG9nKHByb2RhdGEpOyAKCiAgICAgICAgS2V5d29yZFNlcnZpY2UuY3JlYXRla2V5d29yZChwcm9kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmVyciA9PSAxMDYyKSB7CiAgICAgICAgICAgIGFsZXJ0KCfguKHguLXguITguLPguJnguLXguYnguYPguJnguKPguLDguJrguJrguYHguKXguYnguKcnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERpY3RTZXJ2aWNlLmNyZWF0ZWRpY3QocHJvZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSApOwogICAgICAgICAgICAgIC8vIFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlZGNvbHVtbnJ1bGVfYmFzZWQocmVzLmRhdGEuaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbG9zZWRjYXRlZ29yeSIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgYWxlcnQoJ+C4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCcpOyAvLyB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldHBlcmNlbnRhZ2U6IGZ1bmN0aW9uIGdldHBlcmNlbnRhZ2UoZGF0YSkgewogICAgICAvLyB2YXIgZGljdCA9IEpTT04ucGFyc2UoZGF0YS5kaWN0X2lkKQogICAgICAvLyB2YXIgcnVsZV9iYXNlZF9pZCA9IEpTT04ucGFyc2UoZGF0YS5ydWxlX2Jhc2VkX2lkKQogICAgICAvLyB2YXIgcmUgPSAoMTAwICogZGF0YS5jb3VudF9ydWxlYmFzZWQpLyAocnVsZV9iYXNlZF9pZC5sZW5ndGgpCiAgICAgIHJldHVybiBkYXRhLmNvdW50X3J1bGViYXNlZDsKICAgIH0sCiAgICBzYXZldG9ydWxlOiBmdW5jdGlvbiBzYXZldG9ydWxlKHNlbiwgYW5zd2VyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyhhbnN3ZXIpOwogICAgICB2YXIgaWRkYXRhID0gW107CgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YXNwbGl0W2RdKTsKICAgICAgICBEaWN0U2VydmljZS5nZXRkaWN0cygiIiwgc2VuW2RdKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICAgIHZhciBzcWw7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGFbMF0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgaWRkYXRhLnB1c2gocmVzLmRhdGFbMF0uaWQpOwogICAgICAgICAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coZCsxICwgc2VuLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaWRkYXRhKTsKCgogICAgICAgICAgICAgICAgICAgIGlmICghKGQgKyAxID09IHNlbi5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc3FsID0gIlNFTEVDVCByLiogRlJPTSBtYXBfcnVsZV9iYXNlZCBtIGpvaW4gcnVsZV9iYXNlZCByIG9uIG0ucnVsZV9iYXNlZF9pZCA9IHIuaWQgV0hFUkUgbS5zdGF0dXMgPSAxIGFuZCBkaWN0X2lkID0gJ1siLmNvbmNhdChpZGRhdGEsICJdJyIpOyAvLyBjb25zb2xlLmxvZyhzcWwpOwoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUnVsZUJhc2VkU2VydmljZS5nZXRieWRpY3Qoc3FsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICJ7IjsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaWRkYXRhW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICciZGljdCcgKyBpZGRhdGFbaV0gKyAnIicgKyAiOiIgKyAxICsgIiwiOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICciYW5zd2VyJyArICciJyArICI6IiArIGFuc3dlciArICIsIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgLTEpOwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICJ9IjsgLy8gY29uc29sZS5sb2codGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsgLy8gY29uc29sZS5sb2coanNvbkRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbkRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXJ1bGVfYmFzZWQoanNvbkRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiBpZGRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlbWFwX3J1bGVfYmFzZWQobWFwcnVsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgcHJvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBtYXBfcnVsZV9iYXNlZDpyZXMuZGF0YS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvZHVjdHNTZXJ2aWNlLm1hcF9ydWxlX2Jhc2VkKGlkLHBybykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0ZGF0YSgpOyAvLyAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlbWFwcnVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlcgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZXJ1bGVfYmFzZWQocmVzLmRhdGFbMF0uaWQsIHVwZGF0ZW1hcHJ1bGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0ZGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwogICAgICB9OwoKICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzZW4ubGVuZ3RoOyBkKyspIHsKICAgICAgICBfbG9vcChkKTsKICAgICAgfQogICAgfSwKICAgIHNhdmV0b3J1bGVfYmFzZWQ6IGZ1bmN0aW9uIHNhdmV0b3J1bGVfYmFzZWQoZGF0YSwgYW5zd2VyKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coc2VuLmxlbmd0aCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdhbnN3ZXInLGFuc3dlcik7CiAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciBtYXBydWxlID0gewogICAgICAgIGtleXdvcmRfaWQ6IDEsCiAgICAgICAgYWR2ZXJ0aXNlX2lkOiBkYXRhLmlkLAogICAgICAgIHN0YXR1czogMSwKICAgICAgICBhbnN3ZXI6IGFuc3dlciwKICAgICAgICB1c2VyOiB0aGlzLmN1cnJlbnRVc2VyLmlkCiAgICAgIH07CgogICAgICBpZiAoIWRhdGEubWFwSWQpIHsKICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlcykgewogICAgICAgICAgICB2YXIgbWFwX2lkLCBzZW5kYXRhLCBkaWN0X25hbWUsIF9sb29wMiwgZCwgcnVsZTsKCiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIG1hcF9pZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgIHNlbmRhdGEgPSBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCk7CiAgICAgICAgICAgICAgICAgICAgZGljdF9uYW1lID0gSlNPTi5wYXJzZShkYXRhLmRpY3RfbmFtZSk7CgogICAgICAgICAgICAgICAgICAgIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihkKSB7CiAgICAgICAgICAgICAgICAgICAgICBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICBtYXBfcnVsZV9iYXNlZF9pZDogbWFwX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiBzZW5kYXRhW2RdLAogICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IGRpY3RfbmFtZVtkXSwKICAgICAgICAgICAgICAgICAgICAgICAgbm86IGQgKyAxCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVydWxlX2Jhc2VkKHJ1bGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCArIDEgPT0gc2VuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuZ2V0ZGV0YWlsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChkID0gMDsgZCA8IHNlbmRhdGEubGVuZ3RoOyBkKyspIHsKICAgICAgICAgICAgICAgICAgICAgIF9sb29wMihkKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5kZWxldGVtYXBfcnVsZV9iYXNlZChkYXRhLm1hcElkLCBtYXBydWxlKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgIH0pKSk7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja2tleXdvcmQ6IGZ1bmN0aW9uIGNoZWNra2V5d29yZChuYW1lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2cobmFtZSk7CiAgICAgIC8vICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAnJykKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgJycpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7Ly8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBuYW1lKTsKICAgICAgdmFyIGRlc2MgPSB0aGlzLmZpbmRkZXNjcmlwdGlvbihuYW1lKTsgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC93b3JrdG9rZW5kZXNjP3RleHQ9JytkZXNjKTsKCiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3dvcmt0b2tlbmRlc2M/dGV4dD0iICsgZGVzYykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIF90aGlzMy5kZXNjID0gcmVzLmRhdGE7CiAgICAgIH0pOyAvLyBuYW1lID0gJ+C4guC5ieC4reC4oeC4ueC4peC4iOC4s+C5gOC4nuC4suC4sOC4guC4reC4h+C4quC4tOC4meC4hOC5ieC4siDguKvguKHguKfguJTguKvguKHguLnguYggU2hvcGVlIOC4geC4peC4uOC5iOC4oeC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC5gOC4nuC4t+C5iOC4reC4quC4uOC4guC4oOC4suC4niDguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguYDguJ7guLfguYjguK3guITguKfguLLguKHguIfguLLguKEg4Lic4Li04LinIOC4ouC4teC5iOC4q+C5ieC4rSBCbHVlYmlyZCjguJrguKXguLnguYDguJrguLTguKPguYzguJQpIFN0b3JhZ2UgQ29uZGl0aW9uIE5vcm1hbCDguJvguKPguLDguYDguKDguJfguKrguLLguKPguK3guLLguKvguLLguKMg4Liq4Liy4Lij4LiV4LmJ4Liy4LiZ4Lit4LiZ4Li44Lih4Li54Lil4Lit4Li04Liq4Lij4LiwLCDguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lib4Lij4Liw4LmA4LiX4Lio4LiV4LmJ4LiZ4LiB4Liz4LmA4LiZ4Li04LiU4Liq4Li04LiZ4LiE4LmJ4LiyIOC5hOC4l+C4oiDguKvguJnguYnguLLguJfguLXguYjguILguK3guIfguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguKrguLPguKvguKPguLHguJrguITguKfguLLguKHguIfguLLguKEg4LiU4Li54LmB4Lil4Liq4Li04LinLCDguJvguYnguK3guIfguIHguLHguJnguKPguLTguYnguKfguKPguK3guKIg4Lib4Lij4Liw4LmA4Lig4LiX4LiB4Liy4Lij4Lir4LmI4LitIOC4q+C5iOC4reC4o+C4p+C4oeC4geC4seC4mSDguYDguJ7guKgg4LiX4Lix4LmJ4LiH4Liq4Lit4LiH4LmA4Lie4LioIOC4reC4suC4ouC4uOC4geC4suC4o+C5gOC4geC5h+C4muC4o+C4seC4geC4qeC4siAxMiDguYDguJTguLfguK3guJkg4Lib4Lij4Liw4LmA4Lig4LiX4LiC4Lit4LiH4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4Lii4LiyIOC5geC4hOC4m+C4i+C4ueC4pSDguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguIjguLPguJnguKfguJnguKrguLTguJnguITguYnguLIgMTc5MDEg4Liq4LmI4LiH4LiI4Liy4LiBIOC4iOC4seC4h+C4q+C4p+C4seC4lOC4meC4hOC4o+C4o+C4suC4iuC4quC4teC4oeC4siDguKPguLLguKLguKXguLDguYDguK3guLXguKLguJTguKrguLTguJnguITguYnguLIg4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4LiC4LiZ4Liy4LiUIDEwMDAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIDYwIOC5geC4hOC4m+C4i+C4ueC4pSDguYDguKPguJfguILguLLguKLguKrguYjguIcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDEg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDUg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAyMCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkzIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMiDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggMjEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyA1MCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkwIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMyDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggNTEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAxMDAg4LiB4Lij4Liw4Lib4Li44LiBIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NyDguJrguLLguJcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDQg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDEwMCDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsgLi4uLi4uLi4uLi4uLi4uLi4uLi4uIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NSDguJrguLLguJcgVml0YW1pbiBDIFBsdXMgRGlldGFyeSBTdXBwbGVtZW50IFByb2R1Y3QgQmx1ZWJpcmQgQnJhbmQg4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LmA4Liq4Lij4Li04Lih4Lit4Liy4Lir4Liy4Lij4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4seC5ieC4h+C4q+C4oeC4lOC5g+C4mSAxIOC5geC4hOC4m+C4i+C4ueC4pSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguKrguLPguITguLHguI0gKEFjdGl2ZSBJbmdyZWRpZW50KSBWSVRBTUlOIEMgKDEwMCUpIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIENJVFJVUyBCSU9GTEFWT05PSUQgUE9XREVSIC0gNjMwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBCQVJCQURPU0NIRVJSWSBQT1dERVIvQUNFUk9MQSBDSEVSUlkgUE9XREVSICjguJzguIfguJrguLLguKPguYzguYDguJrguYLguJTguKrguYDguIrguK3guKPguYzguKPguLUv4Lic4LiH4Lit4Liw4LmA4LiL4LmC4Lij4Lil4Liy4LmA4LiK4Lit4Lij4LmM4Lij4Li1KSAoTUFMUElHSElBIEdMQUJSQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJPU0VISVAgUE9XREVSICjguJzguIfguYLguKPguKrguK7guLTguJvguKrguYwpIChST1NBIENBTklOQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJ1dGluIC0gMzAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIElORElBTiBHT09TRUJFUlJZIFBPV0RFUiAo4Lic4LiH4Lih4Liw4LiC4Liy4Lih4Lib4LmJ4Lit4LihKSAoUEhZTExBTlRIVVMgRU1CTElDQSBMLiApIOC4nOC4pSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguYTguKHguYjguKrguLPguITguLHguI0gKEluYWN0aXZlIEluZ3JlZGllbnQpIEVESUJMRSBHRUxBVElOIDQyOCAtIDk4LjUg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFRJVEFOSVVNIERJT1hJREUgMTcxIC0xLjk1IOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKfguLTguJjguLXguKPguLHguJrguJvguKPguLDguJfguLLguJkg4LiE4Lij4Lix4LmJ4LiH4Lil4LiwIDEtMiDguYHguITguJvguIvguLnguKUg4Lir4Lil4Lix4LiH4Lit4Liy4Lir4Liy4Lij4LmA4LiK4LmJ4LiyIOC5gOC4peC4guC4l+C4teC5iCDguK0u4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguITguLPguYDguJXguLfguK3guJkg4LiE4Lin4Lij4LmA4LiB4LmH4Lia4LmD4Lir4LmJ4Lie4LmJ4LiZ4LmB4Liq4LiH4LmB4LiU4LiH4LmB4Lil4Liw4LiE4Lin4Liy4Lih4LiK4Li34LmJ4LiZIOC5gOC4lOC5h+C4gSDguKrguJXguKPguLXguKHguLXguITguKPguKPguKDguYwg4LmB4Lil4Liw4Liq4LiV4Lij4Li14LmD4Lir4LmJ4LiZ4Lih4Lia4Li44LiV4Lij4LmE4Lih4LmI4LiE4Lin4Lij4Lij4Lix4Lia4Lib4Lij4Liw4LiX4Liy4LiZIOC4hOC4p+C4o+C4geC4tOC4meC4reC4suC4q+C4suC4o+C4q+C4peC4suC4geC4q+C4peC4suC4ouC5g+C4q+C5ieC4hOC4o+C4miA1IOC4q+C4oeC4ueC5iCDguYPguJnguKrguLHguJTguKrguYjguKfguJnguJfguLXguYjguYDguKvguKHguLLguLDguKrguKHguYDguJvguYfguJnguJvguKPguLDguIjguLMg4LmE4Lih4LmI4Lih4Li14Lic4Lil4LmD4LiZ4LiB4Liy4Lij4Lib4LmJ4Lit4LiH4LiB4Lix4LiZ4Lir4Lij4Li34Lit4Lij4Lix4LiB4Lip4Liy4LmC4Lij4LiEIOC4quC4o+C4o+C4nuC4hOC4uOC4kyDguJvguKPguLDguYLguKLguIrguJnguYzguILguK3guIfguIHguLLguKPguIHguLTguJnguKfguLTguJXguLLguKHguLTguJnguIvguLUg77iP4LiX4Liz4LmD4Lir4LmJ4Lir4LiZ4LmJ4Liy4LmE4Lih4LmI4LmC4LiX4Lij4LihIOC4q+C4meC5ieC4suC4leC4suC4quC4lOC5g+C4qiDvuI/guIrguYjguKfguKLguJ/guLfguYnguJnguJ/guLnguJzguLTguKfguKvguJnguYnguLIg4Liq4Li04LinIOC4neC5ieC4siDguIHguKPguLAg4Lij4Li04LmJ4Lin4Lij4Lit4LiiIOC4lOC4ueC4iOC4suC4h+C4peC4hyDvuI/guJzguLTguKfguJ7guKPguKPguJPguJnguLjguYjguKHguYDguKPguLXguKLguJrguYDguJnguLXguKLguJog4LiK4Li44LmI4Lih4LiK4Li34LmI4LiZIO+4j+C4q+C4meC5ieC4suC4leC4suC4lOC4ueC5gOC4lOC5h+C4geC5geC4peC4sOC5gOC4lOC5ieC4h+C4guC4tuC5ieC4mSDvuI/guJzguLTguKfguKvguJnguYnguLLguILguLLguKfguK3guKHguIrguKHguJ7guLkg4Liq4Li04LiZ4LiE4LmJ4Liy4LiV4Lix4LiU4Lij4Lit4Lia4LiX4Li44LiB4Lin4Lix4LiZ4LmA4Lin4Lil4LiyIOC4leC4seC4lOC4o+C4reC4muC5gOC4p+C4peC4siAxMi4wMCDguJkg4LiC4Lit4LiH4LiX4Li44LiB4Lin4Lix4LiZIOC5geC4iOC5ieC4h+C5guC4reC4meC5gOC4geC4tOC4meC5gOC4p+C4peC4siDguKrguYjguIfguKPguK3guJrguKfguLHguJnguJbguLHguJTguYTguJvguJnguLDguIjguYrguLAg4Liq4LmI4LiH4Lie4Lix4Liq4LiU4Li44LiX4Li44LiB4Lin4Lix4LiZIOC5gOC4p+C5ieC4meC4p+C4seC4meC4reC4suC4l+C4tOC4leC4ouC5jCDguYHguKXguLDguKfguLHguJnguKvguKLguLjguJTguJnguLHguIHguILguLHguJXguKTguIHguKnguYwg4LiC4Lit4Lia4Lie4Lij4Liw4LiE4Li44LiT4Lil4Li54LiB4LiE4LmJ4Liy4LiX4Li44LiB4LiX4LmI4Liy4LiZIOC4l+C4teC5iOC5hOC4p+C5ieC4p+C4suC4h+C5g+C4iOC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC4guC4reC4h+C5gOC4o+C4suC5gOC4quC4oeC4reC4oeC4sl8vbFxfJwogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBkZXNjKTsKCiAgICAgIHZhciBjb24gPSB7CiAgICAgICAgY29udGVudDogZGVzYwogICAgICB9OwogICAgICBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiwgY29uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAgICAgX3RoaXMzLmtleXdvcmQgPSByZXMuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOyAvLyAgICAgfQogICAgICAvLyB9KTsKICAgICAgLy8gICAgICAgdmFyIGxpc3RrZXl3b3JkcyA9IFtdCiAgICAgIC8vICAgICAgIHZhciBuYW1lc3BsaXQgPSBuYW1lLnNwbGl0KCIgIikKICAgICAgLy8gICAgICAgLy8gY29uc29sZS5sb2cobmFtZXNwbGl0KTsKICAgICAgLy8gICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHZhciBrZXlsaXN0ID0gW10KICAgICAgLy8gICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgIC8vICAgICAgICAgICByZXMuZGF0YVtyXS5uYW1lID0gcmVzLmRhdGFbcl0ubmFtZS5yZXBsYWNlQWxsKCIuIiwiIikKICAgICAgLy8gICAgICAgICAgIHZhciBrayA9IHJlcy5kYXRhW3JdLm5hbWUuc3BsaXQoIiAiKQogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBray5sZW5ndGg7IGsrKykgewogICAgICAvLyAgICAgICAgICAgICBrZXlsaXN0LnB1c2goa2tba10pCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGtleSA9IDA7IGtleSA8IGtleWxpc3QubGVuZ3RoOyBrZXkrKykgewogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBuYW1lc3BsaXQubGVuZ3RoOyBuKyspIHsKICAgICAgLy8gICAgICAgICAgICAgaWYgKG5hbWVzcGxpdFtuXSA9PSBrZXlsaXN0W2tleV0gJiYga2V5bGlzdFtrZXldICE9ICcnICYmIGlzTmFOKGtleWxpc3Rba2V5XSkpIHsKICAgICAgLy8gICAgICAgICAgICAgICBsaXN0a2V5d29yZHMucHVzaChrZXlsaXN0W2tleV0pCiAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coa2V5bGlzdCk7CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdGtleXdvcmRzKTsKICAgICAgLy8gICAgICAgY29uc29sZS5sb2cobGlzdGtleXdvcmRzLmxlbmd0aCk7CiAgICAgIC8vICAgICAgICAgaWYgKGxpc3RrZXl3b3Jkcy5sZW5ndGggPT0gMCkgewogICAgICAvLyAgICAgICAgICAgdGhpcy5jb2xvcmtleSA9ICJiYWNrZ3JvdW5kLWNvbG9yOiNhM2U5YTQiCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgLy8gICAgICAgICBsaXN0a2V5d29yZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgIC8vICAgICAgaWYocmVzdWx0LmluZGV4T2YoaXRlbSkgPCAwKSB7CiAgICAgIC8vICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAvLyAgICAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIC8vIGxpc3RrZXl3b3JkcyA9IHJlc3VsdAogICAgICAvLyAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgbGlzdGtleXdvcmRzLmxlbmd0aDsgbCsrKSB7CiAgICAgIC8vICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nKTsKICAgICAgLy8gICAgICAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nICsgbGlzdGtleXdvcmRzW2xdKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAvLyAgICAgICB9KTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0pOwogICAgfSwKICAgIGZpbmRkZXNjcmlwdGlvbjogZnVuY3Rpb24gZmluZGRlc2NyaXB0aW9uKGRhdGEpIHsKICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciB0ZXh0ID0gWyLguKPguLLguKLguKXguLDguYDguK3guLXguKLguJQiXTsKICAgICAgdmFyIGZpbmRmZGEgPSBkYXRhOwoKICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0ZXh0Lmxlbmd0aDsgdCsrKSB7CiAgICAgICAgaWYgKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSAhPSAtMSkgewogICAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSk7CiAgICAgICAgfQogICAgICB9IC8vIGlmIChmaW5kZmRhID09ICfguK3guLLguKvguLLguKMnKSB7CiAgICAgIC8vICAgZmluZGZkYSA9IGZpbmRmZGErIGZpbmRmZGErJ+C5gOC4quC4o+C4tOC4oScKICAgICAgLy8gfQogICAgICAvLyBjb25zb2xlLmxvZyhmaW5kZmRhKTsKCgogICAgICByZXR1cm4gZmluZGZkYTsKICAgIH0sCiAgICBsb2FkZGljdDogZnVuY3Rpb24gbG9hZGRpY3QoKSB7CiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2xvYWRkaWN0IikudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSk7CiAgICB9LAogICAgZ2V0ZGV0YWlsOiBmdW5jdGlvbiBnZXRkZXRhaWwoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwuc3BsaXQoIi1pLiIpOwogICAgICB2YXIgc2VsZWN0cHJvID0gewogICAgICAgIHVybDogdGhpcy5kYXRhLnVybCwKICAgICAgICBpZDogdGhpcy5jdXJyZW50VXNlci5pZAogICAgICB9OwogICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RfdG9rZW4oc2VsZWN0cHJvKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzKSB7CiAgICAgICAgICB2YXIgYmVzdDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICBiZXN0ID0gX3RoaXM0LmdldE1heChyZXMuZGF0YS5rZXl3b3JkLCAnY291bnRfcnVsZWJhc2VkJyk7IC8vY29uc29sZS5sb2coYmVzdCk7CgogICAgICAgICAgICAgICAgICBfdGhpczQubGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpczQubGlzdC5rZXl3b3JkID0gW2Jlc3RdOwoKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciBjb24sIGNvbnRlbnQsIHNlbGVjdHBybzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbiA9IHt9OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUubG9hZGRpY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3RoaXM1LnN0YXR1cyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUuZGF0YS51cmwgPT0gbnVsbCB8fCBfdGhpczUuZGF0YS51cmwgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4gSBVUkwiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM1LmRhdGEuY29udGVudCA9PSBudWxsIHx8IF90aGlzNS5kYXRhLmNvbnRlbnQgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4geC4guC5ieC4reC4hOC4p+C4suC4oeC5guC4huC4qeC4k+C4siIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzNS5kYXRhLmNvbnRlbnQ7IC8vIGNvbnRlbnQgPSB0aGlzLmRhdGEuY29udGVudC5yZXBsYWNlQWxsKAogICAgICAgICAgICAgICAgICAvLyAgIC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csCiAgICAgICAgICAgICAgICAgIC8vICAgIiIKICAgICAgICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgKICAgICAgICAgICAgICAgICAgLy8gICAvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywKICAgICAgICAgICAgICAgICAgLy8gICAiICIKICAgICAgICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgKICAgICAgICAgICAgICAgICAgLy8gICAvXHVkODNkW1x1ZGUwMC1cdWRlNGZdL2csIiAiCiAgICAgICAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgJyAnKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiIyIsICIiKTsKICAgICAgICAgICAgICAgICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgi4oCiIiwgIiIpOwogICAgICAgICAgICAgICAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIrIiwgIiIpOwogICAgICAgICAgICAgICAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGBfL2xcX2AsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgICAgICAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oW1x1MjcwMC1cdTI3QkZdfFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVEQzAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURGRkZdfFtcdTIwMTEtXHUyNkZGXXxcdUQ4M0VbXHVERDEwLVx1RERGRl0pL2csICcgJyk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZmRhID0gYXdhaXQgdGhpcy5maW5kZmRhKGNvbnRlbnQpCiAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2codGhpcy5mZGEpOwogICAgICAgICAgICAgICAgICAvLyB2YXIgdXJsID0gdGhpcy5kYXRhLnVybC5zcGxpdCgiLWkuIik7CiAgICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyh1cmwpOwoKICAgICAgICAgICAgICAgICAgc2VsZWN0cHJvID0gewogICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXM1LmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgIGlkOiBfdGhpczUuY3VycmVudFVzZXIuaWQKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEubGVuZ3RoID09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JrdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29yZHRva2VuZGVzYyIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBzZW50ZW5jZSA9IHJlcy5kYXRhLnNlbnRlbnQucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczUuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2U6IGNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2Vfa2V5d29yZDogcmVzLmRhdGEuc2VudGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkX2lkOiByZXMuZGF0YS5rZXl3b3JkSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vY29uc29sZS5sb2coZGVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhwcm9kdWN0dG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5jaGVja2ZkYShjb250ZW50LCBwcm9kdWN0dG9rZW4uZGF0YS5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvL2NvbnNvbGUubG9nKGNvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcDMsIHIsIHNlbnRlbmNldG9rZW4sIGFkdmVydGlzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHJlcy5kYXRhW3JdLnNlbnRlbnQucmVwbGFjZUFsbCgnIicsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF90b2tlbl9pZDogX3RoaXM1LnByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfZGljdF9pZDogcmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVudDogc2VudGVuY2V0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0a2V5d29yZChzZWxlY3Rwcm8pLnRoZW4oZnVuY3Rpb24gKHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnByb2R1Y3RfdG9rZW4gPSBwcm8uZGF0YS5pZDsgLy8gdGhpcy5saXN0ID0gcmVzLmRhdGEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmxpc3QgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnRva2VuZGF0YShwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3AzKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuZ2V0ZGV0YWlsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gaWYgKGtleXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmVzLmRhdGFbbF0ua2V5d29yZCA9IGtleXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJlcy5kYXRhW2xdLmtleXdvcmQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGwgKyAxID09IHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMubGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5nZXRkZXRhaWwoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuY2hlY2tmZGEoY29udGVudCwgcmVzLmRhdGEuaWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnRva2VuZGF0YShyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuZmRhID0gcmVzLmRhdGEuZmRhOyAvLyB0aGlzLmxpc3QgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnByb2R1Y3RfdG9rZW4gPSByZXMuZGF0YS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnN0YXR1cyA9IHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldE1heDogZnVuY3Rpb24gZ2V0TWF4KGFyciwgcHJvcCkgewogICAgICB2YXIgbWF4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAobWF4ID09IG51bGwgfHwgcGFyc2VJbnQoYXJyW2ldW3Byb3BdKSA+IHBhcnNlSW50KG1heFtwcm9wXSkpIG1heCA9IGFycltpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1heDsKICAgIH0sCiAgICB0b2tlbmRhdGE6IGZ1bmN0aW9uIHRva2VuZGF0YShsaXN0KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgLy9jb25zb2xlLmxvZyhsaXN0KTsKICAgICAgaWYgKGxpc3Qua2V5d29yZC5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIF9sb29wNCA9IGZ1bmN0aW9uIF9sb29wNChsKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtsXS5rZXl3b3JkX2RpY3RfaWQpOwogICAgICAgICAgaWYgKGxpc3Qua2V5d29yZFtsXS5rZXl3b3JkX2RpY3RfaWQpIHsKICAgICAgICAgICAgbWFwID0gewogICAgICAgICAgICAgIGlkOiBsaXN0LmtleXdvcmRbbF0uaWQsCiAgICAgICAgICAgICAgdXJsOiBsaXN0LmtleXdvcmRbbF0ua2V5d29yZF9kaWN0X2lkLAogICAgICAgICAgICAgIGtleXdvcmRfaWQ6IGxpc3Qua2V5d29yZFtsXS5kaWN0X2lkCiAgICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKG1hcCk7CgogICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldG1hcHByb2R1Y3QobWFwKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICB2YXIgYmVzdGRhdGEgPSBfdGhpczYuZ2V0TWF4KHJlcy5kYXRhLCAnYWxsY291bnQnKTsgLy9jb25zb2xlLmxvZyhiZXN0ZGF0YSk7CgoKICAgICAgICAgICAgICB2YXIgYmVzdCA9IHsKICAgICAgICAgICAgICAgIGlkOiBsaXN0LmtleXdvcmRbbF0uaWQsCiAgICAgICAgICAgICAgICBzZW50ZW5jZTogYmVzdGRhdGEKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YmVzdHJ1bGViYXNlZChiZXN0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgdmFyIHJ1bGViYXNlZCA9IHsKICAgICAgICAgICAgICAgICAgY291bnRfcnVsZWJhc2VkOiByZXMuZGF0YS5jb3VudCwKICAgICAgICAgICAgICAgICAgc2VudGVuY2VfcnVsZWJhc2U6IHJlcy5kYXRhLnNlbnRlbmNlLAogICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX2lkOiByZXMuZGF0YS5ydWxlX2Jhc2VkX2lkLAogICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWU6IHJlcy5kYXRhLnJ1bGVfYmFzZWRfbmFtZQogICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2xdLmlkKTsKCiAgICAgICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLnVwZGF0ZXJ1bGViYXNlZChsaXN0LmtleXdvcmRbbF0uaWQsIHJ1bGViYXNlZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChsICsgMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmdldGRldGFpbCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsgLy8gbGlzdC5rZXl3b3JkW2xdLnJ1bGViYXNlID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgLy8gaWYgKGwgKyAxID09IGxpc3Qua2V5d29yZC5sZW5ndGgpIHsKICAgICAgICAgICAgICAvLyAgIHRoaXMuY29tcGFyZShsaXN0KTsKICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAvLyB9CgogICAgICAgIH07CgogICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbGlzdC5rZXl3b3JkLmxlbmd0aDsgbCsrKSB7CiAgICAgICAgICB2YXIgbWFwOwoKICAgICAgICAgIF9sb29wNChsKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRkZXRhaWwoKTsKICAgICAgfQogICAgfSwKICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUobGlzdCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBfbG9vcDUgPSBmdW5jdGlvbiBfbG9vcDUoaykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtrXSk7CiAgICAgICAgZGljdF9pZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLmRpY3RfaWQpOyAvLyB2YXIgcnVsZWJhc2VkID0gSlNPTi5wYXJzZShsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpCiAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlZCk7CgogICAgICAgIGlmIChsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpIHsKICAgICAgICAgIHZhciB1bmlxdWVDaGFyc3J1bGUgPSBsaXN0LmtleXdvcmRba10ucnVsZWJhc2UuZmlsdGVyKGZ1bmN0aW9uIChjLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmluZGV4T2YoYykgPT09IGluZGV4OwogICAgICAgICAgfSk7CiAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZGljdF9pZC5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZUNoYXJzcnVsZS5pbmRleE9mKG4pICE9PSAtMTsKICAgICAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyhmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZEFycmF5JyxmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaWN0X2lkJyxkaWN0X2lkLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdW1kaWN0SWQubGVuZ3RoKTsKCiAgICAgICAgICBwZXJjZW50YWdlID0gMTAwICogcGFyc2VJbnQoZmlsdGVyZWRBcnJheS5sZW5ndGgpIC8gcGFyc2VJbnQoZGljdF9pZC5sZW5ndGgpOyAvLyBjb25zb2xlLmxvZyhwZXJjZW50YWdlKTsKCiAgICAgICAgICBsaXN0LmtleXdvcmRba10ucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxpc3Qua2V5d29yZFtrXS5wZXJjZW50YWdlID0gMDsKICAgICAgICB9CgogICAgICAgIGlmIChrICsgMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpczcubGlzdCA9IGxpc3Q7CiAgICAgICAgICBfdGhpczcuc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBkaWN0X2lkOwogICAgICAgIHZhciBmaWx0ZXJlZEFycmF5OwogICAgICAgIHZhciBwZXJjZW50YWdlOwoKICAgICAgICBfbG9vcDUoayk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBbGxJbmRleGVzOiBmdW5jdGlvbiBnZXRBbGxJbmRleGVzKGFyciwgdmFsKSB7CiAgICAgIHZhciBpbmRleGVzID0gW10sCiAgICAgICAgICBpID0gLTE7CgogICAgICB3aGlsZSAoKGkgPSBhcnIuaW5kZXhPZih2YWwsIGkgKyAxKSkgIT0gLTEpIHsKICAgICAgICBpbmRleGVzLnB1c2goaSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbmRleGVzOwogICAgfSwKICAgIGZpbmRmZGE6IGZ1bmN0aW9uIGZpbmRmZGEoZGF0YSkgewogICAgICB2YXIgdGV4dCA9IFsn4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi4nXTsgLy8gdmFyIGVuZCA9IFsnJ10KCiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSksIGRhdGEubGVuZ3RoKTsKICAgICAgICB2YXIgZW5kaW5kZXggPSB0aGlzLmdldEFsbEluZGV4ZXMoZmluZGZkYSwgJyAnKTsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pLCBlbmRpbmRleFsxXSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKGZpbmRmZGEpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCLguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiIsICIiKTsKICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgiLSIsICIiKTsKICAgICAgZmluZGZkYSA9IGZpbmRmZGEucmVwbGFjZUFsbCgi4oCTIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCIgIiwgIiIpOyAvLyBjb25zb2xlLmxvZyhmaW5kZmRhKTsKICAgICAgLy8gdmFyIHJlZ2V4ID0gL1xkKy9nOwogICAgICAvLyB2YXIgbWF0Y2hlcyA9IGZpbmRmZGEubWF0Y2gocmVnZXgpOyAgLy8gY3JlYXRlcyBhcnJheSBmcm9tIG1hdGNoZXMKICAgICAgLy8gY29uc29sZS5sb2cobWF0Y2hlc1swXSk7CgogICAgICByZXR1cm4gZmluZGZkYTsKICAgIH0sCiAgICBjaGVja2ZkYTogZnVuY3Rpb24gY2hlY2tmZGEoY29udGVudCwgaWQpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyh0aGlzLmZkYSk7CgogICAgICBpZiAodGhpcy5mZGEpIHsKICAgICAgICB2YXIgZmRhID0gdGhpcy5mZGE7CiAgICAgICAgdmFyIHByb2R1Y3Rfc3RhdHVzID0gMDsKICAgICAgICB2YXIgdXJsID0gImh0dHBzOi8vdGF3YWlmb3JoZWFsdGgub3JnL2FwaS9vcnlvci9jaGVjay1wcm9kdWN0IjsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICJudW1iZXJfc3JjIjogZmRhCiAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgICAgIH07CiAgICAgICAgZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgIF90aGlzOC5wcm9kdWN0LnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICctJywKICAgICAgICAgICAgICBkZXRhaWw6IGNvbnRlbnQsCiAgICAgICAgICAgICAgZmRhOiBfdGhpczguZmRhLAogICAgICAgICAgICAgIGNuY25tOiAnLScsCiAgICAgICAgICAgICAgdHlwZXBybzogJy0nLAogICAgICAgICAgICAgIGxjbm5vOiAnLScsCiAgICAgICAgICAgICAgcHJvZHVjdGhhOiAnLScsCiAgICAgICAgICAgICAgcHJvZHVjZW5nOiAnLScsCiAgICAgICAgICAgICAgbGljZW46ICctJywKICAgICAgICAgICAgICBBZGRyOiAnLScsCiAgICAgICAgICAgICAgTmV3Y29kZTogJy0nLAogICAgICAgICAgICAgIHN0YXR1czogJy0nLAogICAgICAgICAgICAgIHRva2VuOiAnJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzOC5wcm9jaGVjayA9IHsKICAgICAgICAgICAgICBmZGE6IF90aGlzOC5mZGEsCiAgICAgICAgICAgICAgbWFwZmRhOiAnLScsCiAgICAgICAgICAgICAgY25jbm06ICctJywKICAgICAgICAgICAgICBwcm9kdWN0aGE6ICctJywKICAgICAgICAgICAgICBwcm9kdWNlbmc6ICctJywKICAgICAgICAgICAgICBuYW1lOiAnLScsCiAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgY2F0X3N0YXR1czogMCwKICAgICAgICAgICAgICBmZGFfc3RhdHVzOiAwLAogICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiAwLAogICAgICAgICAgICAgIHR5cGVwcm86ICctJywKICAgICAgICAgICAgICB0eXBlOiAnLScKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXM4LnN0YXR1cyA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5jbmNubS5pbmNsdWRlcygi4LiE4LiH4Lit4Lii4Li54LmIIikpOwoKICAgICAgICAgICAgaWYgKGRhdGEuY25jbm0uaW5jbHVkZXMoIuC4hOC4h+C4reC4ouC4ueC5iCIpKSB7CiAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXMgPSAxOwogICAgICAgICAgICAgIF90aGlzOC5jb2xvcmZkYSA9ICJiYWNrZ3JvdW5kLWNvbG9yOiNhM2U5YTQiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZHVjdF9zdGF0dXMpOwogICAgICAgICAgICB2YXIgY29uID0gewogICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgIHByb2R1Y3RoYTogZGF0YS5wcm9kdWN0aGEsCiAgICAgICAgICAgICAgcHJvZHVjZW5nOiBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICB0eXBlcHJvOiBkYXRhLnR5cGVwcm8sCiAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICB9OwogICAgICAgICAgICBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2tmZGEiLCBjb24pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKHJlcykgewogICAgICAgICAgICAgICAgdmFyIHBybzsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBybyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhX3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZV9zdGF0dXM6IHJlcy5kYXRhLm1hcG5hbWVzdGF0dXMKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvKTsKICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVtYXAoaWQsIHBybykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvZHVjdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEucHJvZHVjdGhhICsgJyAnICsgZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGE6IF90aGlzOC5mZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmNubTogZGF0YS5jbmNubSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxjbm5vOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdGhhOiBkYXRhLnByb2R1Y3RoYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y2VuZzogZGF0YS5wcm9kdWNlbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWNlbjogZGF0YS5saWNlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHI6IGRhdGEuQWRkciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ld2NvZGU6IGRhdGEuTmV3Y29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEudG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnByb2NoZWNrID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhOiBfdGhpczguZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwZmRhOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY25jbm06IGRhdGEuY25jbm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGFfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiByZXMuZGF0YS5tYXBuYW1lc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXBybzogZGF0YS50eXBlcHJvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEuY2F0ZWdvcnkKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jb2xvcmNhdCA9IHJlcy5kYXRhLmNvbG9yY2F0OwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jb2xvcm5hbWUgPSByZXMuZGF0YS5jb2xvcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXM4LnByb2R1Y3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOC5wcm9jaGVjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXM4LmZkYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgIF90aGlzOC5zdGF0dXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvZHVjdC5wdXNoKHsKICAgICAgICAgIG5hbWU6ICctJywKICAgICAgICAgIGRldGFpbDogY29udGVudCwKICAgICAgICAgIGZkYTogdGhpcy5mZGEsCiAgICAgICAgICBjbmNubTogJy0nLAogICAgICAgICAgdHlwZXBybzogJy0nLAogICAgICAgICAgbGNubm86ICctJywKICAgICAgICAgIHByb2R1Y3RoYTogJy0nLAogICAgICAgICAgcHJvZHVjZW5nOiAnLScsCiAgICAgICAgICBsaWNlbjogJy0nLAogICAgICAgICAgQWRkcjogJy0nLAogICAgICAgICAgTmV3Y29kZTogJy0nLAogICAgICAgICAgc3RhdHVzOiAnLScsCiAgICAgICAgICB0b2tlbjogJycKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByb2NoZWNrID0gewogICAgICAgICAgZmRhOiB0aGlzLmZkYSwKICAgICAgICAgIG1hcGZkYTogJy0nLAogICAgICAgICAgY25jbm06ICctJywKICAgICAgICAgIHByb2R1Y3RoYTogJy0nLAogICAgICAgICAgcHJvZHVjZW5nOiAnLScsCiAgICAgICAgICBuYW1lOiAnLScsCiAgICAgICAgICBwcm9kdWN0X3N0YXR1czogMCwKICAgICAgICAgIGNhdF9zdGF0dXM6IDAsCiAgICAgICAgICBmZGFfc3RhdHVzOiAwLAogICAgICAgICAgbmFtZV9zdGF0dXM6IDAsCiAgICAgICAgICB0eXBlcHJvOiAnLScsCiAgICAgICAgICB0eXBlOiAnLScKICAgICAgICB9OwogICAgICAgIHRoaXMuc3RhdHVzID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKTsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIGNvbnNvbGUubG9nKHRoaXMuaWQpOwogICAgUHJvZHVjdHNTZXJ2aWNlLmdldHByb2R1Y3RrZXl3b3JkKHRoaXMuaWQpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMTEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihyZXMpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIF90aGlzOS5kYXRhID0ge307CiAgICAgICAgICAgICAgICBfdGhpczkuZGF0YS51cmwgPSByZXMuZGF0YVswXS51cmwsIF90aGlzOS5kYXRhLmNvbnRlbnQgPSByZXMuZGF0YVswXS5jb250ZW50OwogICAgICAgICAgICAgICAgX3RoaXM5LmZkYSA9IHJlcy5kYXRhWzBdLmZkYTsKCiAgICAgICAgICAgICAgICBfdGhpczkuc2VhcmNoKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDkpIHsKICAgICAgICByZXR1cm4gX3JlZjExLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOyAvLyB2YXIgdGV4dCA9ICfguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiAxMy0xLTEzNDY1LTUtMDA1MiDguIjguLPguJnguKfguJnguKrguLTguJnguITguYnguLIgNDE1IOC4quC5iOC4h+C4iOC4suC4gScKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZmluZGZkYSh0ZXh0KSk7CiAgICAvLyB0aGlzLmRhdGEudXJsID0KICAgIC8vICAgImh0dHBzOi8vc2hvcGVlLmNvLnRoLyVFMiU5OSVBNiVFRiVCOCU4RiVFMCVCOSU4MiVFMCVCOCU4OSVFMCVCOCVBMSVFMCVCOSU4MyVFMCVCOCVBQiVFMCVCOCVBMSVFMCVCOSU4OC0lRTAlQjglODIlRTAlQjglQUQlRTAlQjglODclRTAlQjklODElRTAlQjglOTclRTAlQjklODklRTIlOTklQTYlRUYlQjglOEYtJUUwJUI4JTgyJUUwJUI4JUIyJUUwJUI4JUEyJUUwJUI4JTk0JUUwJUI4JUI1JUUwJUI4JUExJUUwJUI4JUIyJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5Ri0lRTAlQjglQTUlRTAlQjglQjQlRTAlQjklODIlRTAlQjglOEIlRTAlQjklODgtJUUwJUI4JTlFJUUwJUI4JUE1JUUwJUI4JUIxJUUwJUI4JUFBLSVFMiU4MCU4Qi1jb2ZmZWUtbGlzaG91LSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCU4NCVFMCVCOCVBNyVFMCVCOCU5QSVFMCVCOCU4NCVFMCVCOCVCOCVFMCVCOCVBMSVFMCVCOCU5OSVFMCVCOSU4OSVFMCVCOCVCMyVFMCVCOCVBQiVFMCVCOCU5OSVFMCVCOCVCMSVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglODQlRTAlQjglQjglRTAlQjglQTElRTAlQjglQUIlRTAlQjglQjQlRTAlQjglQTctJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JUE1JUUwJUI4JTk0JUUwJUI4JTk5JUUwJUI5JTg5JUUwJUI4JUIzJUUwJUI4JUFCJUUwJUI4JTk5JUUwJUI4JUIxJUUwJUI4JTgxLSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCVBNSVFMCVCOCU5NCVFMCVCOCU4NCVFMCVCOCVBNyVFMCVCOCVCMiVFMCVCOCVBMSVFMCVCOCVBRCVFMCVCOSU4OSVFMCVCOCVBNyVFMCVCOCU5OSI7CiAgICAvLyB0aGlzLmRhdGEuY29udGVudCA9CiAgICAvLyAgICLvuI/guJbguYnguLLguYDguJvguYfguJnguKXguLnguIHguITguYnguLLguJ7guLTguKHguYHguKXguYnguKcg4LiU4Li54LmB4Lil4LiI4LiZ4LiZ4LmJ4Liz4Lir4LiZ4Lix4LiB4Lil4LiU4LmA4Lil4Lii4LiE4LmI4LiwIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4quC4tOC4meC4hOC5ieC4suC5geC4peC5ieC4pyDguJfguLHguIHguYHguIrguJfguKHguLLguITguLjguKLguIHguLHguJnguYTguJTguYnguYDguKXguKLguITguYjguLAiOwogICAgLy8gLy8gdmFyIHVybCA9IHRoaXMuZGF0YS51cmwuc3BsaXQoJy1pLicpCiAgICAvLyB2YXIgY29udGVudCA9IHRoaXMuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoCiAgICAvLyAgIC8oW1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURGMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1RERGRl0pL2csCiAgICAvLyAgICIiCiAgICAvLyApOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgKICAgIC8vICAgLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csCiAgICAvLyAgICIiCiAgICAvLyApOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiISIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIioiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiIyIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoYF8vbFxfYCwgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAvLyAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JkdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgLy8gLy8gYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSsnL3dvcmR0b2tlbmRlc2M/dGV4dD0nK2NvbnRlbnQpLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgLy8gLy8gICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAvLyB9KQogICAgLy8gY29uc29sZS5sb2coTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2tleXdvcmQ/dGV4dD0iICsgY29udGVudCk7CiAgICAvLyB2YXIgY29uID0gewogICAgLy8gICBjb250ZW50OiBjb250ZW50LAogICAgLy8gfTsKICAgIC8vIGF4aW9zCiAgICAvLyAgIC5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiArIGNvbnRlbnQsIGNvbikKICAgIC8vICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vICAgICAvLyAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAvLyAgICAgLy8gICAgICAgICB2YXIgYWR2ZXJ0aXNlID0gewogICAgLy8gICAgIC8vICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOjEsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGtleXdvcmRfZGljdF9pZDpyZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGRpY3RfaWQ6cmVzLmRhdGFbcl0uZGljdF9pZCwKICAgIC8vICAgICAvLyAgICAgICAgICAgZGljdF9uYW1lOnJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgIC8vICAgICAvLyAgICAgICAgICAgc2VuOnJlcy5kYXRhW3JdLnNlbiwKICAgIC8vICAgICAvLyAgICAgICAgICAgc2VudGVudDpyZXMuZGF0YVtyXS5zZW50ZW50LAogICAgLy8gICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIC8vICAgICAgICAgQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKChyZXMpPT57CiAgICAvLyAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vICAgICAvLyAgICAgICAgIH0pCiAgICAvLyAgICAgLy8gICAgICAgfQogICAgLy8gICB9KTsKICAgIC8vIC8vICBjb25zb2xlLmxvZyh1cmwpOwogICAgLy8gLy8gICAgIHZhciBzZWxlY3Rwcm8gPSB7CiAgICAvLyAvLyAgICAgICB1cmw6dXJsWzBdCiAgICAvLyAvLyAgICAgIH0KICAgIC8vIC8vICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbigocmVzKT0+ewogICAgLy8gLy8gICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gLy8gdmFyIGxpc3QgPSByZXMuZGF0YQogICAgLy8gLy8gdGhpcy50b2tlbmRhdGEobGlzdCkKICAgIC8vIC8vIGZvciAobGV0IGwgPSAwOyBsIDwgbGlzdC5rZXl3b3JkLmxlbmd0aDsgbCsrKSB7CiAgICAvLyAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMubGlzdC5rZXl3b3JkW2xdLm1hcCk7CiAgICAvLyAvLyAgIC8vIGZvciAobGV0IG0gPSAwOyBtIDwgdGhpcy5saXN0LmtleXdvcmRbbF0ubGVuZ3RoOyBtKyspIHsKICAgIC8vIC8vICAgICBpZiAobGlzdC5rZXl3b3JkW2xdLm1hcCkgewogICAgLy8gLy8gICAgICAgdmFyIG1hcCA9IHsKICAgIC8vIC8vICAgICB1cmw6SlNPTi5zdHJpbmdpZnkobGlzdC5rZXl3b3JkW2xdLm1hcCkKICAgIC8vIC8vICAgICAgfQogICAgLy8gLy8gICAgIC8vICBjb25zb2xlLmxvZyhtYXApOwogICAgLy8gLy8gICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldG1hcHByb2R1Y3QobWFwKS50aGVuKChyZXMpPT57CiAgICAvLyAvLyAgICAgICBsaXN0LmtleXdvcmRbbF0ucnVsZWJhc2UgPSByZXMuZGF0YQogICAgLy8gLy8gICAgICAgaWYgKGwrMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAvLyAvLyAgICAgICAgIHRoaXMuY29tcGFyZShsaXN0KQogICAgLy8gLy8gICAgICAgfQogICAgLy8gLy8gICAgICB9KTsKICAgIC8vIC8vICAgICB9CiAgICAvLyAvLyAgIH0KICAgIC8vIC8vIH0KICAgIC8vIC8vIGNvbnNvbGUubG9nKHRoaXMubGlzdCk7CiAgICAvLyB0aGlzLnN0YXR1cyA9IHRydWU7CiAgICAvLyAvLyAgfSkKICB9Cn07"},{"version":3,"mappings":"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AAA;AAAA;AAKA;AACA,KA/JA;AAgKA8B,gBAhKA,wBAgKAtE,IAhKA,EAgKA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAbA,CAcA;;AACAuE,YACAC,GADA,CACAC,2DADA,EAEAf,IAFA,CAEA;AACA;AACA;AACA,OALA,EAfA,CAqBA;AACA;;AACA;AACAgB;AADA;AAGAH,YACAI,IADA,CACAF,mDADA,EACAG,GADA,EAEAlB,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,EA1BA,CAmCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,KApPA;AAqPAmB,mBArPA,2BAqPA3E,IArPA,EAqPA;AACA;AACA;AACA;;AACA;AACA;AACA4E;AACA;AACA,OARA,CASA;AACA;AACA;AACA;;;AACA;AACA,KAnQA;AAoQAC,YApQA,sBAoQA;AACAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,KAtQA;AAuQAS,aAvQA,uBAuQA;AAAA;;AACA;AACA;AACA5E,0BADA;AAEA6B;AAFA;AAIAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA0B,sBAFA,GAEA,kDAFA,EAGA;;AACA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAOA,KApRA;AAqRAC,UArRA,oBAqRA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAN,mBADA,GACA,EADA;AAAA;AAAA,uBAEA,iBAFA;;AAAA;AAGA;;AACA;AACApC;AACA,iBAFA,MAEA;AACAA;AACA,iBAFA,MAEA;AACAkC,yBADA,GACA,mBADA,EAEA;AACA;AACA;AACA;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A;AAQAC,6CARA;AASAC,2CATA;AAUAC,iDAVA;AAWAxH,kDAXA;AAYAyH;AAZA;;AAcA;AACAjG,2CADA;AAEAkG,8CAFA;AAGAT,6CAHA;AAIAG,qDAJA;AAKAC,qDALA;AAMA3H,+CANA;AAOAiI,0DAPA;AAQAC,6DARA;AASAC,sDATA;AAUAC,+DAVA;AAWAZ,iDAXA;AAYA5G;AAZA;AAcA;AACA;AACAmG;AACAA;AACAA;AACA,yBAnCA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFA;;AAAA;AAAA;AAAA;AAAA;AAmDA;AACA;AACA,SA1GA;AA2GA,OA1HA,MA0HA;AACA;AAAA/G;AACAsH,yBADA;AAEAxF,uBAFA;AAGAyF,oBAHA;AAIAC,sBAJA;AAKAC,oBALA;AAMAC,wBANA;AAOAC,wBAPA;AAQAC,oBARA;AASAC,mBATA;AAUAC,sBAVA;AAWAxH,qBAXA;AAYAyH;AAZA;AAcA;AACAjG,uBADA;AAEAkG,qBAFA;AAGAT,oBAHA;AAIAG,wBAJA;AAKAC,wBALA;AAMA3H,mBANA;AAOAiI,2BAPA;AAQAC,uBARA;AASAC,uBATA;AAUAC,wBAVA;AAWAZ,sBAXA;AAYA5G;AAZA;AAeA;AACA;AAGA;AAjrBA,GA5CA;AA+tBA0H,SA/tBA,qBA+tBA;AAAA;;AACAvB;AACA;AACAA;AACAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AACAxB;AACA;AACA,mDACA,yCADA;AAEA;;AACA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,SAJA,CAYA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxzBA","names":["name","components","data","list","url","file","status","urlPath","imagelists","tokenize","matchname","matchcategory","type","matchnamesum","statusname","statuscat","statusfda","colorname","colorfda","colorcat","keyword","colorkey","desc","arrList","alldata","back","next","product_token","title","key","fda","product","procheck","id","computed","currentUser","methods","cut","mapname","save","alert","KeywordService","DictService","document","getpercentage","savetorule","sen","answer","d","iddata","sql","RuleBasedService","text","rule_based_id","dict_id","MapRuleBasedService","res","updatemaprule","then","savetorule_based","keyword_id","advertise_id","user","map_id","sendata","JSON","dict_name","rule","map_rule_based_id","no","checkkeyword","axios","get","LinkService","content","post","con","finddescription","findfda","loaddict","getdetail","best","search","selectpro","des","sentence","sentence_keyword","r","sentencetoken","advertise","product_token_id","keyword_dict_id","sentent","AdvertiseService","getMax","arr","prop","max","tokendata","l","map","count_rulebased","sentence_rulebase","rule_based_name","compare","k","filteredArray","percentage","getAllIndexes","val","indexes","console","checkfda","method","headers","Accept","body","fetch","detail","cncnm","typepro","lcnno","productha","produceng","licen","Addr","Newcode","token","mapfda","product_status","cat_status","fda_status","name_status","pro","mounted","ProductsService"],"sourceRoot":"src/components","sources":["producttokenlink.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n   \n    <div class=\"row\">\n      <div>\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">URL</label>\n          <textarea\n            v-model=\"data.url\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"3\"\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlTextarea1\">Content</label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 btn btn-success\">\n          \n        </button>\n      </div>\n      <table class=\"table table-bordered\" v-if=\"status\">\n      <thead>\n        <tr>\n          <th scope=\"col\" style=\"text-align:center;background-color:#ffb454\"> 1</th>\n          <th scope=\"col\" style=\"text-align:center;background-color:#ffb454\">.</th>\n          <th scope=\"col\" style=\"text-align:center;background-color:#ffb454\"></th>\n          <th scope=\"col\" style=\"text-align:center;background-color:#ffb454\"></th>\n          <th scope=\"col\" style=\"text-align:center;background-color:#ffb454\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td :style=\"colorfda\"></td>\n          <td :style=\"colorfda\">{{procheck.mapfda}}</td>\n          <td :style=\"colorfda\">{{procheck.fda}}</td>\n          <td :style=\"colorfda\"><span v-if=\"procheck.fda_status == 1\"></span><span v-else></span></td>\n          <td v-if=\"procheck.cat_status && procheck.name_status && procheck.fda_status\" rowspan=\"3\" style=\"text-align: center;vertical-align: middle;background-color:#a3e9a4\">\n          <span></span></td>\n          <td v-else rowspan=\"3\" style=\"text-align: center;vertical-align: middle;background-color:#f9bdbb\">\n          <span></span></td>\n        </tr>\n        <tr>\n          <td :style=\"colorcat\"></td>\n          <td :style=\"colorcat\">{{ procheck.typepro}}</td>\n          <td :style=\"colorcat\"><span v-if=\"procheck.typepro\">{{procheck.type}}</span><span v-else>-</span> </td>\n          <td :style=\"colorcat\"><span v-if=\"procheck.cat_status\"></span><span v-else></span></td>\n        </tr>\n        <tr>\n          <td :style=\"colorname\"></td>\n          <td :style=\"colorname\">{{ procheck.productha }}<br/>{{ procheck.produceng }}</td>\n          <td :style=\"colorname\"><span v-html=\"procheck.name\"></span></td>\n          <td :style=\"colorname\"><span v-if=\"procheck.name_status\"></span><span v-else></span></td>\n        </tr>\n      </tbody>\n      </table>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"status\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454\"></th>\n            <th style=\"background-color: #ffb454\"></th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\"></th> -->\n            <td :style=\"colorkey\" v-if=\"list.keyword != 0\">\n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentence_rulebase\"></span><br><br>\n                  <span v-for=\"(s,idx) in k.rule_based_name\" :key=\"idx\">{{s}}</span>\n                  <br><br>\n<span v-if=\"k.count_rulebased\"> {{(getpercentage(k))}}%</span><br><br>\n<div style=\"text-align:left\"> <button\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#AddScopusToken\"\n           type=\"submit\" class=\"mb-3 btn btn-success\">\n      <i class=\"fa fa-plus\" aria-hidden=\"true\">  keyword</i>\n    </button></div>\n                </td>\n                <td>\n                  <span v-if=\"k.answer == 1\"></span\n                  ><span v-if=\"k.answer == 9\"></span\n                  ><span v-if=\"k.answer == 0\"></span>\n                </td>\n\n                <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td>\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <tr>\n                \n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table mt-3\" v-if=\"status\">\n      <thead>\n        <tr>\n          <th scope=\"col\"></th>\n          <th scope=\"col\"></th>\n          <th scope=\"col\"></th>\n          <th scope=\"col\"></th>\n          <th scope=\"col\">.</th>\n          <!-- <th scope=\"col\"></th> -->\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(l, i) in product\" :key=\"i\">\n          <td :style=\"l.bg\">{{ l.name }}</td>\n          <td :style=\"l.bg\">{{ l.detail }}</td>\n          <!-- <td :style=\"l.bg\">\n              <div class=\"row\">\n          <div class=\"col-md-2\" v-for=\"(im ,i) in imagelists\" :key=\"i\">\n            <img :src=\"im\" width=\"100%\"/>\n          </div>\n        </div>\n            </td> -->\n          <td :style=\"l.bg\" style=\"width:300px\"><div >{{ l.fda }}<br/>\n           </div></td>\n          <td :style=\"l.bg\">{{cut(l.token)}}</td>\n          <td style=\"background-color:#BDEDFF\" v-if=\"l.status == 1 || l.status == 3\">\n            <p class=\"card-text\"> : {{ l.cncnm || '' }}</p>\n            <p class=\"card-text\"> :<span> {{ l.typepro }}</span></p>\n            <p class=\"card-text\">/ : <span> {{ l.lcnno }}</span></p>\n            <p class=\"card-text\"> (TH) : <span> {{ l.productha }}</span></p>\n            <p class=\"card-text\"> (EN) : <span> {{ l.produceng }}</span></p>\n            <p class=\"card-text\"> : {{ l.licen }}</p>\n            <p class=\"card-text\"> : {{ l.Addr }}</p>\n            <p class=\"card-text\">Newcode : {{ l.Newcode }}</p>\n          </td>\n          <td :style=\"l.bg\" v-else> </td>\n          <!-- <td :style=\"l.bg\">\n            <i class=\"fa fa-circle\" :style=\"l.icon\" aria-hidden=\"true\"></i>\n          </td> -->\n        </tr>\n      </tbody>\n    </table>\n        <!-- Modal -->\n  <div\n      class=\"modal fade\"\n      id=\"AddScopusToken\"\n      tabindex=\"-1\"\n      aria-labelledby=\"exampleModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ title }}</h5>\n            \n          </div>\n          <div class=\"modal-body\">\n            <form>\n              <div class=\"card-body mt-3\">\n                <div class=\"form-group mt-3\">\n                  <label></label>\n                  <input\n                    v-model=\"key.name\"\n                    type=\"text\"\n                    min=\"1\"\n                    class=\"form-control form-control-sm\"\n                  />\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer mt-3\">\n            <button type=\"button\" class=\"btn btn-success\" @click=\"save()\">\n              \n            </button>\n            <button\n            id=\"closedcategory\"\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\nimport KeywordService from \"../services/KeywordService\";\nimport ProductsService from \"../services/ProductsService\";\n\nexport default {\n  name: \"App\",\n  components: {},\n  data() {\n    return {\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token:0,\n      title:' keyword',\n      key:{},\n      fda:'',\n      product:[],\n      procheck:[],\n      id:0\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  methods: {\ncut(data){\n  var mapname = ''\n  if (data) {\n    \n  data = data.filter((letter) => letter !== \" \");\n  mapname = data.toString()\n\n  mapname = mapname.replaceAll(',', ' | ')\n  }\n  return mapname\n},\n    save() {\n      //console.log(this.key);\n      if (this.key.name == null || this.key.name == \"\") {\n        alert(\"\");\n      } else {\n        var prodata = {\n          name: this.key.name,\n          status:1,\n        };\n        //console.log(prodata); \n          KeywordService.createkeyword(prodata).then((res) => {\n            //console.log(res.data);\n            if (res.data.err == 1062) {\n              alert('')\n            }else{\n          DictService.createdict(prodata).then(() => {\n            //console.log(res.data );\n            // RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n              \n            document.getElementById(\"closedcategory\").click();\n            alert('')\n          // })\n        })\n      }\n      })\n      }\n    },\n    getpercentage(data){\n// var dict = JSON.parse(data.dict_id)\n// var rule_based_id = JSON.parse(data.rule_based_id)\n// var re = (100 * data.count_rulebased)/ (rule_based_id.length)\nreturn data.count_rulebased\n    },\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    savetorule_based(data, answer) {\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      //console.log(data);\n\n      var maprule = {\n        keyword_id: 1,\n        advertise_id: data.id,\n        status: 1,\n        answer: answer,\n        user: this.currentUser.id,\n      };\n      if (!data.mapId) {\n        \n      MapRuleBasedService.createmap_rule_based(maprule).then(async (res) => {\n        // console.log(res.data);\n        var map_id = res.data.id;\n        var sendata = JSON.parse(data.dict_id);\n        var dict_name = JSON.parse(data.dict_name);\n        for (let d = 0; d < sendata.length; d++) {\n          var rule = {\n            map_rule_based_id: map_id,\n            dict_id: sendata[d],\n            dict_name: dict_name[d],\n            no: d + 1,\n          };\n          RuleBasedService.createrule_based(rule).then(() => {\n            if (d + 1 == sendata.length) {      \n               this.getdetail()\n\n              alert(\"\");\n            }\n          });\n        }\n      });\n\n      }else{\n      MapRuleBasedService.deletemap_rule_based(data.mapId,maprule).then(async () => {\n        // console.log(res.data);\n       this.getdetail()\n        alert(\"\");\n      });\n    }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = '  Shopee     Bluebird() Storage Condition Normal  ,     ,       12    /. 30-1-26764-5-0051  17901           1000  60    1  5   20   93   2  21   50   90   3  51   100   87   4  100  .....................  85  Vitamin C Plus Dietary Supplement Product Bluebird Brand      1   (Active Ingredient) VITAMIN C (100%) - 60  CITRUS BIOFLAVONOID POWDER - 630  BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (/) (MALPIGHIA GLABRA L.)  - 60  ROSEHIP POWDER () (ROSA CANINA L.)  - 60  Rutin - 30  INDIAN GOOSEBERRY POWDER () (PHYLLANTHUS EMBLICA L. )  - 60   (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5  TITANIUM DIOXIDE 171 -1.95    1-2    .. 30-1-26764-5-0051       5                    12.00         _/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    getdetail(){\n      // var url = this.data.url.split(\"-i.\");\n      var selectpro = {\n          url: this.data.url,\n          id:this.currentUser.id\n        };\n        MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n          //console.log(res.data);\n          var best = this.getMax(res.data.keyword,'count_rulebased')\n          //console.log(best);\n          this.list = res.data\n          this.list.keyword = [best]\n        })\n    },\n    async search() {\n      var con ={}\n      await this.loaddict();\n      this.status = false;\n      if (this.data.url == null || this.data.url == \"\") {\n        alert(\" URL\");\n      } else if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      } else {\n        var content = this.data.content\n        // content = this.data.content.replaceAll(\n        //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n        //   \"\"\n        // );\n        // content = content.replaceAll(\n        //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n        //   \" \"\n        // );\n        \n        // content = content.replaceAll(\n        //   /\\ud83d[\\ude00-\\ude4f]/g,\" \"\n        // );\n        // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, ' ');\n        // content = content.replaceAll(\"_\", \"\");\n        // content = content.replaceAll(\"!\", \"\");\n        // content = content.replaceAll(\"*\", \"\");\n        // content = content.replaceAll(\"&\", \"\");\n        // content = content.replaceAll(\"#\", \"\");\n        // content = content.replaceAll(\"\", \"\");\n        // content = content.replaceAll(\"+\", \"\");\n        // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        // content = content.replaceAll(/([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g, ' ');\n\n        // this.fda = await this.findfda(content)\n        //         console.log(this.fda);\n        // var url = this.data.url.split(\"-i.\");\n        //  console.log(url);\n        var selectpro = {\n          url: this.data.url,\n          id:this.currentUser.id\n        };\n        MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n          //console.log(res.data);\n          // console.log(content);\n          if (res.data.length == 0) {\n            // console.log(LinkService.getpythonlink()+'/worktokendesc?text=' + content);\n             con = {\n              content: content,\n            };\n            await axios\n              .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n              .then(async (res) => {\n                // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n                var des = {\n                  url: this.data.url,\n                  sentence: content,\n                  sentence_keyword: res.data.sentent,\n                  keyword_id:res.data.keywordId,\n                  status: 1,\n                };\n                //console.log(des);\n                await MapRuleBasedService.createproduct_token(des).then(\n                   async (producttoken) => {\n\n                await this.checkfda(content,producttoken.data.id)\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                     con = {\n              content: content,\n            };\n            //console.log(con);\n                     axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        //console.log(res.data);\n                        if (res.data.length > 0) {\n                        for (let r = 0; r < res.data.length; r++) {\n                          var sentencetoken = res.data[r].sentent.replaceAll(\n                            '\"',\n                            \"\"\n                          ); // eslint-disable-line\n                          sentencetoken = sentencetoken.replaceAll(\n                            \"<spanstyle\",\n                            \"<span style\"\n                          );\n\n                          // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                          var advertise = {\n                            product_token_id: this.product_token,\n                            keyword_dict_id: res.data[r].keyword_dict_id,\n                            dict_id: res.data[r].dict_id,\n                            dict_name: res.data[r].dict_name,\n                            sentent: sentencetoken,\n                            sen: res.data[r].sen,\n                          };\n                          //console.log(this.product_token);\n                          AdvertiseService.createadvertise(advertise).then(\n                            () => {\n                              if (r + 1 == res.data.length) {\n                                MapRuleBasedService.getproductkeyword(\n                                  selectpro\n                                ).then((pro) => {\n                                  this.product_token = pro.data.id\n                                  // this.list = res.data\n                                  this.tokendata(pro.data);\n                                });\n                              }\n                            }\n                          );\n                        }\n                          \n                        }else{\n                        this.getdetail()\n                        }\n                        // if (keys.data.length > 0) {\n                        //   res.data[l].keyword = keys.data\n                        // } else {\n                        //   res.data[l].keyword = 0\n                        // }\n                        // if (l + 1 == res.data.length) {\n                        //   this.list = res.data\n                        // }\n                      });\n                  }\n                );\n              });\n          } else {\n            // this.getdetail()\n            this.checkfda(content,res.data.id)\n            this.tokendata(res.data)\n            this.fda = res.data.fda\n            // this.list = res.data\n            // this.product_token = res.data.id\n            // // console.log(this.list);\n            // this.status = true\n          }\n        });\n      }\n    },\n    getMax(arr, prop) {\n    var max;\n    for (var i=0 ; i< arr.length ; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n            max = arr[i];\n    }\n    return max;\n},\n    tokendata(list) {\n      //console.log(list);\n      if (list.keyword.length > 0) {\n      for (let l = 0; l < list.keyword.length; l++) {\n        //console.log(list.keyword[l].keyword_dict_id);\n        if (list.keyword[l].keyword_dict_id) {\n          var map = {\n            id: list.keyword[l].id,\n            url: list.keyword[l].keyword_dict_id,\n            keyword_id:list.keyword[l].dict_id,\n          };\n          // console.log(map);\n          MapRuleBasedService.getmapproduct(map).then((res) => {\n            //console.log(res.data);\n            var bestdata = this.getMax(res.data,'allcount')\n            //console.log(bestdata);\n            var best = {\n            id: list.keyword[l].id,\n            sentence: bestdata,\n          };\n            MapRuleBasedService.getbestrulebased(best).then((res) => {\n              //console.log(res.data);\n              var rulebased = {\n            count_rulebased: res.data.count,\n            sentence_rulebase: res.data.sentence,\n            rule_based_id:res.data.rule_based_id,\n            rule_based_name:res.data.rule_based_name\n          };\n          // console.log(list.keyword[l].id);\n              MapRuleBasedService.updaterulebased(list.keyword[l].id,rulebased).then(() => {\n              if (l+1 == list.keyword.length) {\n                this.getdetail()\n              }\n              })\n            })\n            // list.keyword[l].rulebase = res.data;\n            // if (l + 1 == list.keyword.length) {\n            //   this.compare(list);\n            // }\n          });\n        }\n\n        // }\n      }\n        \n      }else{\n        this.getdetail()\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          this.status = true;\n        }\n      }\n    },\n    getAllIndexes(arr, val) {\n  var indexes = [], i = -1;\n  while ((i = arr.indexOf(val, i + 1)) != -1) {\n      indexes.push(i);\n  }\n  return indexes;\n},\n    findfda(data) {\n      var text = ['/.']\n      // var end = ['']\n      var findfda = data\n      for (let t = 0; t < text.length; t++) {\n        findfda = findfda.substring(findfda.indexOf(text[t]),data.length); \n        var endindex = this.getAllIndexes(findfda,' ')        \n        findfda = findfda.substring(findfda.indexOf(text[t]),endindex[1]);       \n      }\n      console.log(findfda);\n\n      findfda = findfda.replaceAll(\"/.\", \"\");\n      findfda = findfda.replaceAll(\"-\", \"\");\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\" \", \"\");\n      // console.log(findfda);\n      // var regex = /\\d+/g;\n      // var matches = findfda.match(regex);  // creates array from matches\n      // console.log(matches[0]);\n      return findfda\n    },\n    checkfda(content,id){\n    console.log(this.fda);\n    if (this.fda) {\n      var fda = this.fda\n    var product_status = 0\n    const url = \"https://tawaiforhealth.org/api/oryor/check-product\";\n            const data = { \"number_src\": fda };\n// console.log(data);\n            const options = {\n              method: \"POST\",\n              headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n              body: JSON.stringify(data),\n            };\n\n            fetch(url, options)\n              .then((response) => response.json())\n              .then((data) => {\n                if (data.message) {\n                  this.product.push({name:'-',\n          detail:content,\n          fda:this.fda,\n          cncnm:'-',\n          typepro:'-',\n          lcnno:'-',\n          productha:'-',\n          produceng:'-',\n          licen:'-',\n          Addr:'-',\n          Newcode:'-',\n          status:'-',\n          token:'',\n        })\n        this.procheck ={\n          fda:this.fda,\n          mapfda:'-',\n          cncnm:'-',\n          productha:'-',\n          produceng:'-',\n          name:'-',\n          product_status:0,\n          cat_status:0,\n          fda_status:0,\n          name_status:0,\n          typepro:'-',\n          type:'-',\n        }\n\n        this.status = true\n                }else{\n                  console.log(data);\n                  console.log(data.cncnm.includes(\"\"))\n                  if (data.cncnm.includes(\"\")) {\n                    product_status = 1\n                    this.colorfda=\"background-color:#a3e9a4\"\n                  }else{\n                  product_status = 3\n\n                  }\n                  console.log(product_status);\n                  var con = {\n      fda: fda,\n      productha:data.productha,\n      produceng:data.produceng,\n      typepro:data.typepro,\n      content: content\n      \n    };\n    axios\n      .post(LinkService.getpythonlink() + \"/checkfda\", con)\n      .then(async (res) => {\n        console.log(res.data);\n        var pro = {\n          name:res.data.name,\n          fda:fda,\n          product_status:product_status,\n          cat_status:res.data.mapcatstatus,\n          fda_status:product_status,\n          name_status:res.data.mapnamestatus\n        }\n        console.log(pro);\n        MapRuleBasedService.updatemap(id,pro).then(()=>{\n          // console.log(res.data); \n          this.product.push({name:data.productha+' '+data.produceng,\n          detail:content,\n          fda:this.fda,\n          cncnm:data.cncnm,\n          typepro:data.typepro,\n          lcnno:data.lcnno,\n          productha:data.productha,\n          produceng:data.produceng,\n          licen:data.licen,\n          Addr:data.Addr,\n          Newcode:data.Newcode,\n          status:product_status,\n          token:res.data.token,\n        })\n        this.procheck ={\n          fda:this.fda,\n          mapfda:data.lcnno,\n          cncnm:data.cncnm,\n          productha:data.productha,\n          produceng:data.produceng,\n          name:res.data.name,\n          product_status:product_status,\n          cat_status:res.data.mapcatstatus,\n          fda_status:product_status,\n          name_status:res.data.mapnamestatus,\n          typepro:data.typepro,\n          type:res.data.category,\n        }\n        this.colorcat =res.data.colorcat\n        this.colorname=res.data.colorname\n        console.log(this.product);\n        console.log(this.procheck);\n        console.log(this.fda);\n        })\n    })\n\n    this.status = true\n                }\n  })\n    }else{\n      this.product.push({name:'-',\n          detail:content,\n          fda:this.fda,\n          cncnm:'-',\n          typepro:'-',\n          lcnno:'-',\n          productha:'-',\n          produceng:'-',\n          licen:'-',\n          Addr:'-',\n          Newcode:'-',\n          status:'-',\n          token:'',\n        })\n        this.procheck ={\n          fda:this.fda,\n          mapfda:'-',\n          cncnm:'-',\n          productha:'-',\n          produceng:'-',\n          name:'-',\n          product_status:0,\n          cat_status:0,\n          fda_status:0,\n          name_status:0,\n          typepro:'-',\n          type:'-',\n        }\n\n        this.status = true\n    }\n    \n   \n    }\n  },\n  mounted() {\n    console.log(this.$route.query.id);\n    this.id = this.$route.query.id\n    console.log(this.id);\n    ProductsService.getproductkeyword(this.id).then(async (res) => {\n      console.log(res.data);\n      this.data = {}\n      this.data.url = res.data[0].url,\n      this.data.content = res.data[0].content\n      this.fda = res.data[0].fda\n      this.search()\n    })\n    // var text = '/. 13-1-13465-5-0052  415 '\n    // console.log(this.findfda(text));\n\n  // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"   \";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}