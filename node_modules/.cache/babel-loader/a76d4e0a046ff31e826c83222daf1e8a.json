{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue","mtime":1697538019794},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/babel.config.js","mtime":1677654957527},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wb25uaXBhL0RvY3VtZW50cy9HaXRIdWIvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOyAvLyBpbXBvcnQgUHJvZHVjdHNTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL1Byb2R1Y3RzU2VydmljZS5qcycKCmltcG9ydCBEaWN0U2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9EaWN0U2VydmljZSI7CmltcG9ydCBSdWxlQmFzZWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL1J1bGVCYXNlZFNlcnZpY2UiOwppbXBvcnQgTWFwUnVsZUJhc2VkU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9NYXBSdWxlQmFzZWRTZXJ2aWNlIjsKaW1wb3J0IExpbmtTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0xpbmtTZXJ2aWNlIjsKaW1wb3J0IEFkdmVydGlzZVNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQWR2ZXJ0aXNlU2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIHVybDogIiIsCiAgICAgIGZpbGU6ICIiLAogICAgICBzdGF0dXM6IGZhbHNlLAogICAgICB1cmxQYXRoOiAiIiwKICAgICAgaW1hZ2VsaXN0czogIiIsCiAgICAgIHRva2VuaXplOiAiIiwKICAgICAgbWF0Y2huYW1lOiAiIiwKICAgICAgbWF0Y2hjYXRlZ29yeTogIiIsCiAgICAgIHR5cGU6ICIiLAogICAgICBtYXRjaG5hbWVzdW06ICIiLAogICAgICBzdGF0dXNuYW1lOiAwLAogICAgICBzdGF0dXNjYXQ6IDAsCiAgICAgIHN0YXR1c2ZkYTogMCwKICAgICAgY29sb3JuYW1lOiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgY29sb3JmZGE6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBjb2xvcmNhdDogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGlkOiAiIiwKICAgICAga2V5d29yZDogW10sCiAgICAgIGNvbG9ya2V5OiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgZGVzYzogIiIsCiAgICAgIGFyckxpc3Q6IFtdLAogICAgICBhbGxkYXRhOiAwLAogICAgICBiYWNrOiAwLAogICAgICBuZXh0OiAwLAogICAgICBkYXRhOiB7fSwKICAgICAgcHJvZHVjdF90b2tlbjogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmV0b3J1bGU6IGZ1bmN0aW9uIHNhdmV0b3J1bGUoc2VuLCBhbnN3ZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKGFuc3dlcik7CiAgICAgIHZhciBpZGRhdGEgPSBbXTsKCiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGQpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhc3BsaXRbZF0pOwogICAgICAgIERpY3RTZXJ2aWNlLmdldGRpY3RzKCIiLCBzZW5bZF0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXMpIHsKICAgICAgICAgICAgdmFyIHNxbDsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YVswXS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICBpZGRhdGEucHVzaChyZXMuZGF0YVswXS5pZCk7CiAgICAgICAgICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhkKzEgLCBzZW4ubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpZGRhdGEpOwoKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZCArIDEgPT0gc2VuLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzcWwgPSAiU0VMRUNUIHIuKiBGUk9NIG1hcF9ydWxlX2Jhc2VkIG0gam9pbiBydWxlX2Jhc2VkIHIgb24gbS5ydWxlX2Jhc2VkX2lkID0gci5pZCBXSEVSRSBtLnN0YXR1cyA9IDEgYW5kIGRpY3RfaWQgPSAnWyIuY29uY2F0KGlkZGF0YSwgIl0nIik7IC8vIGNvbnNvbGUubG9nKHNxbCk7CgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBSdWxlQmFzZWRTZXJ2aWNlLmdldGJ5ZGljdChzcWwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gInsiOwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpZGRhdGFbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gJyJkaWN0JyArIGlkZGF0YVtpXSArICciJyArICI6IiArIDEgKyAiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gJyJhbnN3ZXInICsgJyInICsgIjoiICsgYW5zd2VyICsgIiwiOwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gIn0iOyAvLyBjb25zb2xlLmxvZyh0ZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHRleHQpOyAvLyBjb25zb2xlLmxvZyhqc29uRGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhqc29uRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcnVsZV9iYXNlZChqc29uRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX2lkOiByZXMuZGF0YS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IGlkZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5jcmVhdGVtYXBfcnVsZV9iYXNlZChtYXBydWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBwcm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIG1hcF9ydWxlX2Jhc2VkOnJlcy5kYXRhLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9kdWN0c1NlcnZpY2UubWFwX3J1bGVfYmFzZWQoaWQscHJvKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nZXRkYXRhKCk7IC8vICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSwgNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVtYXBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcjogYW5zd2VyCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRlcnVsZV9iYXNlZChyZXMuZGF0YVswXS5pZCwgdXBkYXRlbWFwcnVsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nZXRkYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSk7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNlbi5sZW5ndGg7IGQrKykgewogICAgICAgIF9sb29wKGQpOwogICAgICB9CiAgICB9LAogICAgc2F2ZXRvcnVsZV9iYXNlZDogZnVuY3Rpb24gc2F2ZXRvcnVsZV9iYXNlZChkYXRhLCBhbnN3ZXIpIHsKICAgICAgLy8gY29uc29sZS5sb2coc2VuLmxlbmd0aCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdhbnN3ZXInLGFuc3dlcik7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgbWFwcnVsZSA9IHsKICAgICAgICBrZXl3b3JkX2lkOiAxLAogICAgICAgIGFkdmVydGlzZV9pZDogbnVsbCwKICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgYW5zd2VyOiBhbnN3ZXIsCiAgICAgICAgdXNlcjogMQogICAgICB9OwogICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXMpIHsKICAgICAgICAgIHZhciBtYXBfaWQsIHNlbmRhdGEsIGRpY3RfbmFtZSwgX2xvb3AyLCBkLCBydWxlOwoKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgbWFwX2lkID0gcmVzLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgIHNlbmRhdGEgPSBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCk7CiAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZSA9IEpTT04ucGFyc2UoZGF0YS5kaWN0X25hbWUpOwoKICAgICAgICAgICAgICAgICAgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKGQpIHsKICAgICAgICAgICAgICAgICAgICBydWxlID0gewogICAgICAgICAgICAgICAgICAgICAgbWFwX3J1bGVfYmFzZWRfaWQ6IG1hcF9pZCwKICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHNlbmRhdGFbZF0sCiAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IGRpY3RfbmFtZVtkXSwKICAgICAgICAgICAgICAgICAgICAgIG5vOiBkICsgMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVydWxlX2Jhc2VkKHJ1bGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGQgKyAxID09IHNlbmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIGZvciAoZCA9IDA7IGQgPCBzZW5kYXRhLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvb3AyKGQpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsgLy8gaWYgKGlkLmxlbmd0aCAhPSBzZW4ubGVuZ3RoKSB7CiAgICAgIC8vICAgZm9yIChsZXQgYSA9IDA7IGEgPCBzZW4ubGVuZ3RoOyBhKyspIHsKICAgICAgLy8gICAgIERpY3RTZXJ2aWNlLmdldGRpY3RzKCIiLCBzZW5bYV0pLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAvLyAgICAgICAgIHZhciBwcm9kYXRhID0gewogICAgICAvLyAgICAgICAgICAgbmFtZTogc2VuW2FdLAogICAgICAvLyAgICAgICAgICAgc3RhdHVzOiAxLAogICAgICAvLyAgICAgICAgIH07CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZGF0YSk7CiAgICAgIC8vICAgICAgICAgRGljdFNlcnZpY2UuY3JlYXRlZGljdChwcm9kYXRhKS50aGVuKCgpID0+IHsKICAgICAgLy8gICAgICAgICAgIC8vICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVkY29sdW1ucnVsZV9iYXNlZChyZXMuZGF0YS5pZCkudGhlbigoKSA9PiB7CiAgICAgIC8vICAgICAgICAgICAvLyB9KTsKICAgICAgLy8gICAgICAgICAgIGlmIChhICsgMSA9PSBzZW4ubGVuZ3RoKSB7CiAgICAgIC8vICAgICAgICAgICAgIHRoaXMuc2F2ZXRvcnVsZShzZW4sIGFuc3dlcik7CiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfSk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgIH0KICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gdGhpcy5zYXZldG9ydWxlKHNlbmRhdGEsIGFuc3dlcik7CiAgICAgIC8vIH0KICAgICAgLy8gICAgICAgdGhpcy5hcnJMaXN0ID0gW10KICAgICAgLy8gICAgICAgY29uc29sZS5sb2coYW5zd2VyKTsKICAgICAgLy8ga2V5d29yZD0ga2V5d29yZC50b1N0cmluZygpOwogICAgICAvLyB2YXIgZGF0YSA9IGtleXdvcmQucmVwbGFjZUFsbCgnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZCI+JywnJykKICAgICAgLy8gICBkYXRhID0gZGF0YS5yZXBsYWNlQWxsKCc8L3NwYW4+JywnJykKICAgICAgLy8gICBkYXRhID0gZGF0YS5yZXBsYWNlQWxsKCcgICcsJyAnKQogICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAvLyAgIHZhciBkYXRhc3BsaXQgPSBkYXRhLnNwbGl0KCIgIikKICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhkYXRhc3BsaXQpOwogICAgICAvLyAgIGZvciAobGV0IGQgPSAwOyBkIDwgZGF0YXNwbGl0Lmxlbmd0aDsgZCsrKSB7CiAgICAgIC8vICAgICBpZiAoZGF0YXNwbGl0W2RdICE9ICcnKSB7CiAgICAgIC8vICAgICAgIHRoaXMuYXJyTGlzdC5wdXNoKGRhdGFzcGxpdFtkXSkKICAgICAgLy8gICAgICAgLy8gY29uc29sZS5sb2coZGF0YXNwbGl0W2RdKTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9CiAgICAgIC8vICAgY29uc29sZS5sb2codGhpcy5hcnJMaXN0KTsKICAgICAgLy8gICAgIGZvciAobGV0IGEgPSAwOyBhIDwgdGhpcy5hcnJMaXN0Lmxlbmd0aDsgYSsrKSB7CiAgICAgIC8vICAgICBEaWN0U2VydmljZS5nZXRkaWN0cygnJyx0aGlzLmFyckxpc3RbYV0pLnRoZW4oKHJlcyk9PnsKICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8vICAgICAgICAgICB2YXIgcHJvZGF0YSA9IHsKICAgICAgLy8gICAgICAgICAgIG5hbWU6IHRoaXMuYXJyTGlzdFthXSwKICAgICAgLy8gICAgICAgICAgIHN0YXR1czoxLAogICAgICAvLyAgICAgICAgIH07CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZGF0YSk7CiAgICAgIC8vICAgICAgICAgICBEaWN0U2VydmljZS5jcmVhdGVkaWN0KHByb2RhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAgICAgICBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZWRjb2x1bW5ydWxlX2Jhc2VkKHJlcy5kYXRhLmlkKS50aGVuKCgpID0+IHsKICAgICAgLy8gICAgICAgICAgIH0pOwogICAgICAvLyAgICAgICAgIH0pOwogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfSkKICAgICAgLy8gICAgICAgICBpZiAoYSsxPT0gdGhpcy5hcnJMaXN0Lmxlbmd0aCkgewogICAgICAvLyAgICAgICB0aGlzLnNhdmV0b3J1bGUoYW5zd2VyKQogICAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZygxKTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIH0KICAgIH0sCiAgICBjaGVja2tleXdvcmQ6IGZ1bmN0aW9uIGNoZWNra2V5d29yZChuYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2cobmFtZSk7CiAgICAgIC8vICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIC8vIGZvciAobGV0IHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAnJykKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgJycpOwogICAgICAvLyAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8oXHJcbnxcbnxccikvZ20sICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiISIsICIiKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgiKiIsICIiKTsKICAgICAgLy8gbmFtZSA9IG5hbWUucmVwbGFjZUFsbChgXy9sXF9gLCAiIik7Ly8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBuYW1lKTsKICAgICAgdmFyIGRlc2MgPSB0aGlzLmZpbmRkZXNjcmlwdGlvbihuYW1lKTsgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC93b3JrdG9rZW5kZXNjP3RleHQ9JytkZXNjKTsKCiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL3dvcmt0b2tlbmRlc2M/dGV4dD0iICsgZGVzYykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIF90aGlzMi5kZXNjID0gcmVzLmRhdGE7CiAgICAgIH0pOyAvLyBuYW1lID0gJ+C4guC5ieC4reC4oeC4ueC4peC4iOC4s+C5gOC4nuC4suC4sOC4guC4reC4h+C4quC4tOC4meC4hOC5ieC4siDguKvguKHguKfguJTguKvguKHguLnguYggU2hvcGVlIOC4geC4peC4uOC5iOC4oeC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC5gOC4nuC4t+C5iOC4reC4quC4uOC4guC4oOC4suC4niDguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguYDguJ7guLfguYjguK3guITguKfguLLguKHguIfguLLguKEg4Lic4Li04LinIOC4ouC4teC5iOC4q+C5ieC4rSBCbHVlYmlyZCjguJrguKXguLnguYDguJrguLTguKPguYzguJQpIFN0b3JhZ2UgQ29uZGl0aW9uIE5vcm1hbCDguJvguKPguLDguYDguKDguJfguKrguLLguKPguK3guLLguKvguLLguKMg4Liq4Liy4Lij4LiV4LmJ4Liy4LiZ4Lit4LiZ4Li44Lih4Li54Lil4Lit4Li04Liq4Lij4LiwLCDguKfguLTguJXguLLguKHguLTguJnguIvguLUg4Lib4Lij4Liw4LmA4LiX4Lio4LiV4LmJ4LiZ4LiB4Liz4LmA4LiZ4Li04LiU4Liq4Li04LiZ4LiE4LmJ4LiyIOC5hOC4l+C4oiDguKvguJnguYnguLLguJfguLXguYjguILguK3guIfguK3guLLguKvguLLguKPguYDguKrguKPguLTguKHguKrguLPguKvguKPguLHguJrguITguKfguLLguKHguIfguLLguKEg4LiU4Li54LmB4Lil4Liq4Li04LinLCDguJvguYnguK3guIfguIHguLHguJnguKPguLTguYnguKfguKPguK3guKIg4Lib4Lij4Liw4LmA4Lig4LiX4LiB4Liy4Lij4Lir4LmI4LitIOC4q+C5iOC4reC4o+C4p+C4oeC4geC4seC4mSDguYDguJ7guKgg4LiX4Lix4LmJ4LiH4Liq4Lit4LiH4LmA4Lie4LioIOC4reC4suC4ouC4uOC4geC4suC4o+C5gOC4geC5h+C4muC4o+C4seC4geC4qeC4siAxMiDguYDguJTguLfguK3guJkg4Lib4Lij4Liw4LmA4Lig4LiX4LiC4Lit4LiH4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4Lii4LiyIOC5geC4hOC4m+C4i+C4ueC4pSDguKvguKHguLLguKLguYDguKXguILguYPguJrguK3guJnguLjguI3guLLguJUv4Lit4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguIjguLPguJnguKfguJnguKrguLTguJnguITguYnguLIgMTc5MDEg4Liq4LmI4LiH4LiI4Liy4LiBIOC4iOC4seC4h+C4q+C4p+C4seC4lOC4meC4hOC4o+C4o+C4suC4iuC4quC4teC4oeC4siDguKPguLLguKLguKXguLDguYDguK3guLXguKLguJTguKrguLTguJnguITguYnguLIg4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4leC4o+C4siDguJrguKXguLnguYDguJrguLTguKPguYzguJQg4LiC4LiZ4Liy4LiUIDEwMDAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIDYwIOC5geC4hOC4m+C4i+C4ueC4pSDguYDguKPguJfguILguLLguKLguKrguYjguIcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDEg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDUg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAyMCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkzIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMiDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggMjEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyA1MCDguIHguKPguLDguJvguLjguIEg4Lij4Liy4LiE4Liy4LiB4Lij4Liw4Lib4Li44LiB4Lil4LiwIDkwIOC4muC4suC4lyDguIrguYjguKfguIfguKPguLLguITguLLguJfguLXguYggMyDguKrguLHguYjguIfguIvguLfguYnguK3guJXguLHguYnguIfguYHguJXguYggNTEg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIOC4luC4tuC4hyAxMDAg4LiB4Lij4Liw4Lib4Li44LiBIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NyDguJrguLLguJcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDQg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDEwMCDguIHguKPguLDguJvguLjguIHguILguLbguYnguJnguYTguJsgLi4uLi4uLi4uLi4uLi4uLi4uLi4uIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA4NSDguJrguLLguJcgVml0YW1pbiBDIFBsdXMgRGlldGFyeSBTdXBwbGVtZW50IFByb2R1Y3QgQmx1ZWJpcmQgQnJhbmQg4Lic4Lil4Li04LiV4Lig4Lix4LiT4LiR4LmM4LmA4Liq4Lij4Li04Lih4Lit4Liy4Lir4Liy4Lij4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4nuC4peC4seC4qiDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4quC5iOC4p+C4meC4m+C4o+C4sOC4geC4reC4muC4l+C4seC5ieC4h+C4q+C4oeC4lOC5g+C4mSAxIOC5geC4hOC4m+C4i+C4ueC4pSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguKrguLPguITguLHguI0gKEFjdGl2ZSBJbmdyZWRpZW50KSBWSVRBTUlOIEMgKDEwMCUpIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIENJVFJVUyBCSU9GTEFWT05PSUQgUE9XREVSIC0gNjMwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBCQVJCQURPU0NIRVJSWSBQT1dERVIvQUNFUk9MQSBDSEVSUlkgUE9XREVSICjguJzguIfguJrguLLguKPguYzguYDguJrguYLguJTguKrguYDguIrguK3guKPguYzguKPguLUv4Lic4LiH4Lit4Liw4LmA4LiL4LmC4Lij4Lil4Liy4LmA4LiK4Lit4Lij4LmM4Lij4Li1KSAoTUFMUElHSElBIEdMQUJSQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJPU0VISVAgUE9XREVSICjguJzguIfguYLguKPguKrguK7guLTguJvguKrguYwpIChST1NBIENBTklOQSBMLikg4Lic4LilIC0gNjAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFJ1dGluIC0gMzAg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIElORElBTiBHT09TRUJFUlJZIFBPV0RFUiAo4Lic4LiH4Lih4Liw4LiC4Liy4Lih4Lib4LmJ4Lit4LihKSAoUEhZTExBTlRIVVMgRU1CTElDQSBMLiApIOC4nOC4pSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLXguYjguYTguKHguYjguKrguLPguITguLHguI0gKEluYWN0aXZlIEluZ3JlZGllbnQpIEVESUJMRSBHRUxBVElOIDQyOCAtIDk4LjUg4Lih4Li04Lil4Lil4Li04LiB4Lij4Lix4LihIFRJVEFOSVVNIERJT1hJREUgMTcxIC0xLjk1IOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSDguKfguLTguJjguLXguKPguLHguJrguJvguKPguLDguJfguLLguJkg4LiE4Lij4Lix4LmJ4LiH4Lil4LiwIDEtMiDguYHguITguJvguIvguLnguKUg4Lir4Lil4Lix4LiH4Lit4Liy4Lir4Liy4Lij4LmA4LiK4LmJ4LiyIOC5gOC4peC4guC4l+C4teC5iCDguK0u4LiiLiAzMC0xLTI2NzY0LTUtMDA1MSDguITguLPguYDguJXguLfguK3guJkg4LiE4Lin4Lij4LmA4LiB4LmH4Lia4LmD4Lir4LmJ4Lie4LmJ4LiZ4LmB4Liq4LiH4LmB4LiU4LiH4LmB4Lil4Liw4LiE4Lin4Liy4Lih4LiK4Li34LmJ4LiZIOC5gOC4lOC5h+C4gSDguKrguJXguKPguLXguKHguLXguITguKPguKPguKDguYwg4LmB4Lil4Liw4Liq4LiV4Lij4Li14LmD4Lir4LmJ4LiZ4Lih4Lia4Li44LiV4Lij4LmE4Lih4LmI4LiE4Lin4Lij4Lij4Lix4Lia4Lib4Lij4Liw4LiX4Liy4LiZIOC4hOC4p+C4o+C4geC4tOC4meC4reC4suC4q+C4suC4o+C4q+C4peC4suC4geC4q+C4peC4suC4ouC5g+C4q+C5ieC4hOC4o+C4miA1IOC4q+C4oeC4ueC5iCDguYPguJnguKrguLHguJTguKrguYjguKfguJnguJfguLXguYjguYDguKvguKHguLLguLDguKrguKHguYDguJvguYfguJnguJvguKPguLDguIjguLMg4LmE4Lih4LmI4Lih4Li14Lic4Lil4LmD4LiZ4LiB4Liy4Lij4Lib4LmJ4Lit4LiH4LiB4Lix4LiZ4Lir4Lij4Li34Lit4Lij4Lix4LiB4Lip4Liy4LmC4Lij4LiEIOC4quC4o+C4o+C4nuC4hOC4uOC4kyDguJvguKPguLDguYLguKLguIrguJnguYzguILguK3guIfguIHguLLguKPguIHguLTguJnguKfguLTguJXguLLguKHguLTguJnguIvguLUg77iP4LiX4Liz4LmD4Lir4LmJ4Lir4LiZ4LmJ4Liy4LmE4Lih4LmI4LmC4LiX4Lij4LihIOC4q+C4meC5ieC4suC4leC4suC4quC4lOC5g+C4qiDvuI/guIrguYjguKfguKLguJ/guLfguYnguJnguJ/guLnguJzguLTguKfguKvguJnguYnguLIg4Liq4Li04LinIOC4neC5ieC4siDguIHguKPguLAg4Lij4Li04LmJ4Lin4Lij4Lit4LiiIOC4lOC4ueC4iOC4suC4h+C4peC4hyDvuI/guJzguLTguKfguJ7guKPguKPguJPguJnguLjguYjguKHguYDguKPguLXguKLguJrguYDguJnguLXguKLguJog4LiK4Li44LmI4Lih4LiK4Li34LmI4LiZIO+4j+C4q+C4meC5ieC4suC4leC4suC4lOC4ueC5gOC4lOC5h+C4geC5geC4peC4sOC5gOC4lOC5ieC4h+C4guC4tuC5ieC4mSDvuI/guJzguLTguKfguKvguJnguYnguLLguILguLLguKfguK3guKHguIrguKHguJ7guLkg4Liq4Li04LiZ4LiE4LmJ4Liy4LiV4Lix4LiU4Lij4Lit4Lia4LiX4Li44LiB4Lin4Lix4LiZ4LmA4Lin4Lil4LiyIOC4leC4seC4lOC4o+C4reC4muC5gOC4p+C4peC4siAxMi4wMCDguJkg4LiC4Lit4LiH4LiX4Li44LiB4Lin4Lix4LiZIOC5geC4iOC5ieC4h+C5guC4reC4meC5gOC4geC4tOC4meC5gOC4p+C4peC4siDguKrguYjguIfguKPguK3guJrguKfguLHguJnguJbguLHguJTguYTguJvguJnguLDguIjguYrguLAg4Liq4LmI4LiH4Lie4Lix4Liq4LiU4Li44LiX4Li44LiB4Lin4Lix4LiZIOC5gOC4p+C5ieC4meC4p+C4seC4meC4reC4suC4l+C4tOC4leC4ouC5jCDguYHguKXguLDguKfguLHguJnguKvguKLguLjguJTguJnguLHguIHguILguLHguJXguKTguIHguKnguYwg4LiC4Lit4Lia4Lie4Lij4Liw4LiE4Li44LiT4Lil4Li54LiB4LiE4LmJ4Liy4LiX4Li44LiB4LiX4LmI4Liy4LiZIOC4l+C4teC5iOC5hOC4p+C5ieC4p+C4suC4h+C5g+C4iOC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC4guC4reC4h+C5gOC4o+C4suC5gOC4quC4oeC4reC4oeC4sl8vbFxfJwogICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD90ZXh0PScgKyBkZXNjKTsKCiAgICAgIHZhciBjb24gPSB7CiAgICAgICAgY29udGVudDogZGVzYwogICAgICB9OwogICAgICBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiwgY29uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAgICAgX3RoaXMyLmtleXdvcmQgPSByZXMuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOyAvLyAgICAgfQogICAgICAvLyB9KTsKICAgICAgLy8gICAgICAgdmFyIGxpc3RrZXl3b3JkcyA9IFtdCiAgICAgIC8vICAgICAgIHZhciBuYW1lc3BsaXQgPSBuYW1lLnNwbGl0KCIgIikKICAgICAgLy8gICAgICAgLy8gY29uc29sZS5sb2cobmFtZXNwbGl0KTsKICAgICAgLy8gICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL2tleXdvcmRfZGljdHM/bmFtZT0xJykudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHZhciBrZXlsaXN0ID0gW10KICAgICAgLy8gICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgIC8vICAgICAgICAgICByZXMuZGF0YVtyXS5uYW1lID0gcmVzLmRhdGFbcl0ubmFtZS5yZXBsYWNlQWxsKCIuIiwiIikKICAgICAgLy8gICAgICAgICAgIHZhciBrayA9IHJlcy5kYXRhW3JdLm5hbWUuc3BsaXQoIiAiKQogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBray5sZW5ndGg7IGsrKykgewogICAgICAvLyAgICAgICAgICAgICBrZXlsaXN0LnB1c2goa2tba10pCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGtleSA9IDA7IGtleSA8IGtleWxpc3QubGVuZ3RoOyBrZXkrKykgewogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBuYW1lc3BsaXQubGVuZ3RoOyBuKyspIHsKICAgICAgLy8gICAgICAgICAgICAgaWYgKG5hbWVzcGxpdFtuXSA9PSBrZXlsaXN0W2tleV0gJiYga2V5bGlzdFtrZXldICE9ICcnICYmIGlzTmFOKGtleWxpc3Rba2V5XSkpIHsKICAgICAgLy8gICAgICAgICAgICAgICBsaXN0a2V5d29yZHMucHVzaChrZXlsaXN0W2tleV0pCiAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coa2V5bGlzdCk7CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdGtleXdvcmRzKTsKICAgICAgLy8gICAgICAgY29uc29sZS5sb2cobGlzdGtleXdvcmRzLmxlbmd0aCk7CiAgICAgIC8vICAgICAgICAgaWYgKGxpc3RrZXl3b3Jkcy5sZW5ndGggPT0gMCkgewogICAgICAvLyAgICAgICAgICAgdGhpcy5jb2xvcmtleSA9ICJiYWNrZ3JvdW5kLWNvbG9yOiNhM2U5YTQiCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgLy8gICAgICAgICBsaXN0a2V5d29yZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgIC8vICAgICAgaWYocmVzdWx0LmluZGV4T2YoaXRlbSkgPCAwKSB7CiAgICAgIC8vICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAvLyAgICAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIC8vIGxpc3RrZXl3b3JkcyA9IHJlc3VsdAogICAgICAvLyAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgbGlzdGtleXdvcmRzLmxlbmd0aDsgbCsrKSB7CiAgICAgIC8vICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nKTsKICAgICAgLy8gICAgICAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoZWNra2V5d29yZD9uYW1lPScgKyBuYW1lKycmJm5hbWVfcmVhbD0nICsgbGlzdGtleXdvcmRzW2xdKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyAgICAgICAgIHRoaXMua2V5d29yZC5wdXNoKHJlcy5kYXRhKQogICAgICAvLyAgICAgICB9KTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0pOwogICAgfSwKICAgIGZpbmRkZXNjcmlwdGlvbjogZnVuY3Rpb24gZmluZGRlc2NyaXB0aW9uKGRhdGEpIHsKICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciB0ZXh0ID0gWyLguKPguLLguKLguKXguLDguYDguK3guLXguKLguJQiXTsKICAgICAgdmFyIGZpbmRmZGEgPSBkYXRhOwoKICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0ZXh0Lmxlbmd0aDsgdCsrKSB7CiAgICAgICAgaWYgKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSAhPSAtMSkgewogICAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSk7CiAgICAgICAgfQogICAgICB9IC8vIGlmIChmaW5kZmRhID09ICfguK3guLLguKvguLLguKMnKSB7CiAgICAgIC8vICAgZmluZGZkYSA9IGZpbmRmZGErIGZpbmRmZGErJ+C5gOC4quC4o+C4tOC4oScKICAgICAgLy8gfQogICAgICAvLyBjb25zb2xlLmxvZyhmaW5kZmRhKTsKCgogICAgICByZXR1cm4gZmluZGZkYTsKICAgIH0sCiAgICBsb2FkZGljdDogZnVuY3Rpb24gbG9hZGRpY3QoKSB7CiAgICAgIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2xvYWRkaWN0IikudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIGNvbnRlbnQsIHVybCwgc2VsZWN0cHJvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmxvYWRkaWN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzMy5zdGF0dXMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmRhdGEudXJsID09IG51bGwgfHwgX3RoaXMzLmRhdGEudXJsID09ICIiKSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIEgVVJMIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5kYXRhLmNvbnRlbnQgPT0gbnVsbCB8fCBfdGhpczMuZGF0YS5jb250ZW50ID09ICIiKSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guITguKfguLLguKHguYLguIbguKnguJPguLIiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAiIjsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzMy5kYXRhLmNvbnRlbnQucmVwbGFjZUFsbCgvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLCAiIik7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICIiKTsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXHVkODNkW1x1ZGUwMC1cdWRlNGZdL2csICIiKTsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiICIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCJfIiwgIiIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIhIiwgIiIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCImIiwgIiIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIjIiwgIiIpOwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCLigKIiLCAiIik7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIisiLCAiIik7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIl8vbF8iLCAiIik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICAgICAgICAgIHVybCA9IF90aGlzMy5kYXRhLnVybC5zcGxpdCgiLWkuIik7IC8vICBjb25zb2xlLmxvZyh1cmwpOwoKICAgICAgICAgICAgICAgICAgc2VsZWN0cHJvID0gewogICAgICAgICAgICAgICAgICAgIHVybDogdXJsWzBdCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdF90b2tlbihzZWxlY3Rwcm8pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBjb247CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7IC8vIGNvbnNvbGUubG9nKGNvbnRlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEubGVuZ3RoID09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JrdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29yZHRva2VuZGVzYyIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsgLy8gdmFyIHNlbnRlbmNlID0gcmVzLmRhdGEuc2VudGVudC5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgc2VudGVuY2UgPSByZXMuZGF0YS5zZW50ZW50LnJlcGxhY2VBbGwoIjxzcGFuc3R5bGUiLCAiPHNwYW4gc3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlOiBfdGhpczMuZGF0YS5jb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlX2tleXdvcmQ6IHJlcy5kYXRhLnNlbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9pZDogcmVzLmRhdGEua2V5d29yZElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXByb2R1Y3RfdG9rZW4oZGVzKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdF90b2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF90b2tlbiA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkIiwgY29uKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3AzLCByLCBzZW50ZW5jZXRva2VuLCBhZHZlcnRpc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gcmVzLmRhdGFbcl0uc2VudGVudC5yZXBsYWNlQWxsKCciJywgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7IC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6IHByb2R1Y3RfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkX2RpY3RfaWQ6IHJlcy5kYXRhW3JdLmtleXdvcmRfZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X25hbWU6IHJlcy5kYXRhW3JdLmRpY3RfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbnQ6IHNlbnRlbmNldG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW46IHJlcy5kYXRhW3JdLnNlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR2ZXJ0aXNlU2VydmljZS5jcmVhdGVhZHZlcnRpc2UoYWR2ZXJ0aXNlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICsgMSA9PSByZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0X3Rva2VuKHNlbGVjdHBybykudGhlbihmdW5jdGlvbiAocHJvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByb2R1Y3RfdG9rZW4gPSBwcm8uZGF0YS5pZDsgLy8gdGhpcy5saXN0ID0gcmVzLmRhdGEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5saXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudG9rZW5kYXRhKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgcmVzLmRhdGEubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDMocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gaWYgKGtleXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmVzLmRhdGFbbF0ua2V5d29yZCA9IGtleXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJlcy5kYXRhW2xdLmtleXdvcmQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGwgKyAxID09IHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMubGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnRva2VuZGF0YShyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucHJvZHVjdF90b2tlbiA9IHJlcy5kYXRhLmlkOyAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHRva2VuZGF0YTogZnVuY3Rpb24gdG9rZW5kYXRhKGxpc3QpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyhsaXN0KTsKCiAgICAgIHZhciBfbG9vcDQgPSBmdW5jdGlvbiBfbG9vcDQobCkgewogICAgICAgIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtsXS5rZXl3b3JkX2RpY3RfaWQpOwoKICAgICAgICBpZiAobGlzdC5rZXl3b3JkW2xdLmtleXdvcmRfZGljdF9pZCkgewogICAgICAgICAgbWFwID0gewogICAgICAgICAgICB1cmw6IEpTT04uc3RyaW5naWZ5KGxpc3Qua2V5d29yZFtsXS5rZXl3b3JkX2RpY3RfaWQpLAogICAgICAgICAgICBrZXl3b3JkX2lkOiBsaXN0LmtleXdvcmRbbF0uZGljdF9pZAogICAgICAgICAgfTsKICAgICAgICAgIGNvbnNvbGUubG9nKG1hcCk7CiAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldG1hcHByb2R1Y3QobWFwKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgbGlzdC5rZXl3b3JkW2xdLnJ1bGViYXNlID0gcmVzLmRhdGE7CgogICAgICAgICAgICBpZiAobCArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgICAgICAgICAgIF90aGlzNC5jb21wYXJlKGxpc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIH0KCiAgICAgIH07CgogICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGwrKykgewogICAgICAgIHZhciBtYXA7CgogICAgICAgIF9sb29wNChsKTsKICAgICAgfQogICAgfSwKICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUobGlzdCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBfbG9vcDUgPSBmdW5jdGlvbiBfbG9vcDUoaykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtrXSk7CiAgICAgICAgZGljdF9pZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLmRpY3RfaWQpOyAvLyB2YXIgcnVsZWJhc2VkID0gSlNPTi5wYXJzZShsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpCiAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlZCk7CgogICAgICAgIGlmIChsaXN0LmtleXdvcmRba10ucnVsZWJhc2UpIHsKICAgICAgICAgIHZhciB1bmlxdWVDaGFyc3J1bGUgPSBsaXN0LmtleXdvcmRba10ucnVsZWJhc2UuZmlsdGVyKGZ1bmN0aW9uIChjLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmluZGV4T2YoYykgPT09IGluZGV4OwogICAgICAgICAgfSk7CiAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZGljdF9pZC5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZUNoYXJzcnVsZS5pbmRleE9mKG4pICE9PSAtMTsKICAgICAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyhmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZEFycmF5JyxmaWx0ZXJlZEFycmF5KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaWN0X2lkJyxkaWN0X2lkLmxlbmd0aCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdW1kaWN0SWQubGVuZ3RoKTsKCiAgICAgICAgICBwZXJjZW50YWdlID0gMTAwICogcGFyc2VJbnQoZmlsdGVyZWRBcnJheS5sZW5ndGgpIC8gcGFyc2VJbnQoZGljdF9pZC5sZW5ndGgpOyAvLyBjb25zb2xlLmxvZyhwZXJjZW50YWdlKTsKCiAgICAgICAgICBsaXN0LmtleXdvcmRba10ucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxpc3Qua2V5d29yZFtrXS5wZXJjZW50YWdlID0gMDsKICAgICAgICB9CgogICAgICAgIGlmIChrICsgMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpczUubGlzdCA9IGxpc3Q7CiAgICAgICAgICBfdGhpczUuc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBkaWN0X2lkOwogICAgICAgIHZhciBmaWx0ZXJlZEFycmF5OwogICAgICAgIHZhciBwZXJjZW50YWdlOwoKICAgICAgICBfbG9vcDUoayk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7Ly8gdGhpcy5kYXRhLnVybCA9CiAgICAvLyAgICJodHRwczovL3Nob3BlZS5jby50aC8lRTIlOTklQTYlRUYlQjglOEYlRTAlQjklODIlRTAlQjglODklRTAlQjglQTElRTAlQjklODMlRTAlQjglQUIlRTAlQjglQTElRTAlQjklODgtJUUwJUI4JTgyJUUwJUI4JUFEJUUwJUI4JTg3JUUwJUI5JTgxJUUwJUI4JTk3JUUwJUI5JTg5JUUyJTk5JUE2JUVGJUI4JThGLSVFMCVCOCU4MiVFMCVCOCVCMiVFMCVCOCVBMiVFMCVCOCU5NCVFMCVCOCVCNSVFMCVCOCVBMSVFMCVCOCVCMiVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYtJUUwJUI4JUE1JUUwJUI4JUI0JUUwJUI5JTgyJUUwJUI4JThCJUUwJUI5JTg4LSVFMCVCOCU5RSVFMCVCOCVBNSVFMCVCOCVCMSVFMCVCOCVBQS0lRTIlODAlOEItY29mZmVlLWxpc2hvdS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglODQlRTAlQjglQTclRTAlQjglOUElRTAlQjglODQlRTAlQjglQjglRTAlQjglQTElRTAlQjglOTklRTAlQjklODklRTAlQjglQjMlRTAlQjglQUIlRTAlQjglOTklRTAlQjglQjElRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JTg0JUUwJUI4JUI4JUUwJUI4JUExJUUwJUI4JUFCJUUwJUI4JUI0JUUwJUI4JUE3LSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCVBNSVFMCVCOCU5NCVFMCVCOCU5OSVFMCVCOSU4OSVFMCVCOCVCMyVFMCVCOCVBQiVFMCVCOCU5OSVFMCVCOCVCMSVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglQTUlRTAlQjglOTQlRTAlQjglODQlRTAlQjglQTclRTAlQjglQjIlRTAlQjglQTElRTAlQjglQUQlRTAlQjklODklRTAlQjglQTclRTAlQjglOTkiOwogICAgLy8gdGhpcy5kYXRhLmNvbnRlbnQgPQogICAgLy8gICAi77iP4LiW4LmJ4Liy4LmA4Lib4LmH4LiZ4Lil4Li54LiB4LiE4LmJ4Liy4Lie4Li04Lih4LmB4Lil4LmJ4LinIOC4lOC4ueC5geC4peC4iOC4meC4meC5ieC4s+C4q+C4meC4seC4geC4peC4lOC5gOC4peC4ouC4hOC5iOC4sCDguKrguLHguYjguIfguIvguLfguYnguK3guKrguLTguJnguITguYnguLLguYHguKXguYnguKcg4LiX4Lix4LiB4LmB4LiK4LiX4Lih4Liy4LiE4Li44Lii4LiB4Lix4LiZ4LmE4LiU4LmJ4LmA4Lil4Lii4LiE4LmI4LiwIjsKICAgIC8vIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnNwbGl0KCctaS4nKQogICAgLy8gdmFyIGNvbnRlbnQgPSB0aGlzLmRhdGEuY29udGVudC5yZXBsYWNlQWxsKAogICAgLy8gICAvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLAogICAgLy8gICAiIgogICAgLy8gKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoCiAgICAvLyAgIC8oPzpbXHUyNzAwLVx1MjdiZl18KD86XHVkODNjW1x1ZGRlNi1cdWRkZmZdKXsyfXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1MDAyMy1cdTAwMzldXHVmZTBmP1x1MjBlM3xcdTMyOTl8XHUzMjk3fFx1MzAzZHxcdTMwMzB8XHUyNGMyfFx1ZDgzY1tcdWRkNzAtXHVkZDcxXXxcdWQ4M2NbXHVkZDdlLVx1ZGQ3Zl18XHVkODNjXHVkZDhlfFx1ZDgzY1tcdWRkOTEtXHVkZDlhXXxcdWQ4M2NbXHVkZGU2LVx1ZGRmZl18XHVkODNjW1x1ZGUwMS1cdWRlMDJdfFx1ZDgzY1x1ZGUxYXxcdWQ4M2NcdWRlMmZ8XHVkODNjW1x1ZGUzMi1cdWRlM2FdfFx1ZDgzY1tcdWRlNTAtXHVkZTUxXXxcdTIwM2N8XHUyMDQ5fFtcdTI1YWEtXHUyNWFiXXxcdTI1YjZ8XHUyNWMwfFtcdTI1ZmItXHUyNWZlXXxcdTAwYTl8XHUwMGFlfFx1MjEyMnxcdTIxMzl8XHVkODNjXHVkYzA0fFtcdTI2MDAtXHUyNkZGXXxcdTJiMDV8XHUyYjA2fFx1MmIwN3xcdTJiMWJ8XHUyYjFjfFx1MmI1MHxcdTJiNTV8XHUyMzFhfFx1MjMxYnxcdTIzMjh8XHUyM2NmfFtcdTIzZTktXHUyM2YzXXxbXHUyM2Y4LVx1MjNmYV18XHVkODNjXHVkY2NmfFx1MjkzNHxcdTI5MzV8W1x1MjE5MC1cdTIxZmZdKS9nLAogICAgLy8gICAiIgogICAgLy8gKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGBfL2xcX2AsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgLy8gLy8gY29uc29sZS5sb2coTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpKycvd29yZHRva2VuZGVzYz90ZXh0PScgKyBjb250ZW50KTsKICAgIC8vIC8vIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JkdG9rZW5kZXNjP3RleHQ9Jytjb250ZW50KS50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgIC8vIC8vICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gLy8gfSkKICAgIC8vIGNvbnNvbGUubG9nKExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiArIGNvbnRlbnQpOwogICAgLy8gdmFyIGNvbiA9IHsKICAgIC8vICAgY29udGVudDogY29udGVudCwKICAgIC8vIH07CiAgICAvLyBheGlvcwogICAgLy8gICAucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZD90ZXh0PSIgKyBjb250ZW50LCBjb24pCiAgICAvLyAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAgICAgLy8gICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgLy8gICAgIC8vICAgICAgICAgdmFyIGFkdmVydGlzZSA9IHsKICAgIC8vICAgICAvLyAgICAgICAgICAgcHJvZHVjdF90b2tlbl9pZDoxLAogICAgLy8gICAgIC8vICAgICAgICAgICBrZXl3b3JkX2RpY3RfaWQ6cmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgLy8gICAgIC8vICAgICAgICAgICBkaWN0X2lkOnJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGRpY3RfbmFtZTpyZXMuZGF0YVtyXS5kaWN0X25hbWUsCiAgICAvLyAgICAgLy8gICAgICAgICAgIHNlbjpyZXMuZGF0YVtyXS5zZW4sCiAgICAvLyAgICAgLy8gICAgICAgICAgIHNlbnRlbnQ6cmVzLmRhdGFbcl0uc2VudGVudCwKICAgIC8vICAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAvLyAgICAgICAgIEFkdmVydGlzZVNlcnZpY2UuY3JlYXRlYWR2ZXJ0aXNlKGFkdmVydGlzZSkudGhlbigocmVzKT0+ewogICAgLy8gICAgIC8vICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAgICAgLy8gICAgICAgICB9KQogICAgLy8gICAgIC8vICAgICAgIH0KICAgIC8vICAgfSk7CiAgICAvLyAvLyAgY29uc29sZS5sb2codXJsKTsKICAgIC8vIC8vICAgICB2YXIgc2VsZWN0cHJvID0gewogICAgLy8gLy8gICAgICAgdXJsOnVybFswXQogICAgLy8gLy8gICAgICB9CiAgICAvLyAvLyAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdF90b2tlbihzZWxlY3Rwcm8pLnRoZW4oKHJlcyk9PnsKICAgIC8vIC8vICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vIC8vIHZhciBsaXN0ID0gcmVzLmRhdGEKICAgIC8vIC8vIHRoaXMudG9rZW5kYXRhKGxpc3QpCiAgICAvLyAvLyBmb3IgKGxldCBsID0gMDsgbCA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGwrKykgewogICAgLy8gLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3Qua2V5d29yZFtsXS5tYXApOwogICAgLy8gLy8gICAvLyBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMubGlzdC5rZXl3b3JkW2xdLmxlbmd0aDsgbSsrKSB7CiAgICAvLyAvLyAgICAgaWYgKGxpc3Qua2V5d29yZFtsXS5tYXApIHsKICAgIC8vIC8vICAgICAgIHZhciBtYXAgPSB7CiAgICAvLyAvLyAgICAgdXJsOkpTT04uc3RyaW5naWZ5KGxpc3Qua2V5d29yZFtsXS5tYXApCiAgICAvLyAvLyAgICAgIH0KICAgIC8vIC8vICAgICAvLyAgY29uc29sZS5sb2cobWFwKTsKICAgIC8vIC8vICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRtYXBwcm9kdWN0KG1hcCkudGhlbigocmVzKT0+ewogICAgLy8gLy8gICAgICAgbGlzdC5rZXl3b3JkW2xdLnJ1bGViYXNlID0gcmVzLmRhdGEKICAgIC8vIC8vICAgICAgIGlmIChsKzEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgLy8gLy8gICAgICAgICB0aGlzLmNvbXBhcmUobGlzdCkKICAgIC8vIC8vICAgICAgIH0KICAgIC8vIC8vICAgICAgfSk7CiAgICAvLyAvLyAgICAgfQogICAgLy8gLy8gICB9CiAgICAvLyAvLyB9CiAgICAvLyAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgLy8gdGhpcy5zdGF0dXMgPSB0cnVlOwogICAgLy8gLy8gIH0pCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA,0B,CACA;;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,aADA;AAEAC,gBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,cADA;AAEAC,aAFA;AAGAC,cAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC,oBANA;AAOAC,kBAPA;AAQAC,mBARA;AASAC,uBATA;AAUAC,cAVA;AAWAC,sBAXA;AAYAC,mBAZA;AAaAC,kBAbA;AAcAC,kBAdA;AAeAC,2CAfA;AAgBAC,0CAhBA;AAiBAC,0CAjBA;AAkBAC,YAlBA;AAmBAC,iBAnBA;AAoBAC,0CApBA;AAqBAC,cArBA;AAsBAC,iBAtBA;AAuBAC,gBAvBA;AAwBAC,aAxBA;AAyBAC,aAzBA;AA0BAzB,cA1BA;AA2BA0B;AA3BA;AA6BA,GAjCA;AAkCAC;AACAC,cADA,sBACAC,GADA,EACAC,MADA,EACA;AAAA;;AACA;AACA;;AAFA,iCAIAC,CAJA;AAKA;AACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACAC;AACA,qBAJA,CAKA;AACA;;;AANA,0BAOAF,mBAPA;AAAA;AAAA;AAAA;;AAQAG,uBARA,6HAQAD,MARA,SASA;;AATA;AAAA,2BAWAE;AACA;AACA;AACAC;;AACA;AACA;AACAA;AACA;;AACAA;AACAA;AACAA,oCATA,CAUA;;AAAA;AACA,wDAXA,CAYA;;AAAA;AACAD;AACA;AACAE,sDADA;AAEAC,2CAFA;AAGAlC;AAHA;AAKAmC;AACA;AACA;AACA;AACA;AACA;AACAC;;AAEA,4CARA,CASA;AACA;AACA;AACA;;AACA,2BAbA;AAcA,yBApBA;AAqBA,uBAlCA,MAkCA;AACA;AACA;AACAV;AADA;AAGAK,0DACAM,cADA,EAEAC,aAFA,EAGAC,IAHA,CAGA;AACAH;;AAEA;AACA,yBAPA;AAQA;AACA,qBAjDA,CAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AANA;;AAIA;AAAA;AAiEA;AACA,KAvEA;AAwEAI,oBAxEA,4BAwEA5C,IAxEA,EAwEA8B,MAxEA,EAwEA;AACA;AACA;AACA;AAEA;AACAe,qBADA;AAEAC,0BAFA;AAGA1C,iBAHA;AAIA0B,sBAJA;AAKAiB;AALA;AAOAR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA;AACAS,wBAFA,GAEAP,WAFA;AAGAQ,yBAHA,GAGAC,wBAHA;AAIAC,2BAJA,GAIAD,0BAJA;;AAAA,2CAKAnB,CALA;AAMAqB;AACAC,+CADA;AAEAf,yCAFA;AAGAa,6CAHA;AAIAG;AAJA,qBANA;AAYAnB;AACA;AACAK;AACA;AACA,qBAJA;AAZA;;AAKA;AAAA;AAYA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,WAZA,CAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtKA;AAuKAe,gBAvKA,wBAuKAzD,IAvKA,EAuKA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAbA,CAcA;;AACA0D,YACAC,GADA,CACAC,2DADA,EAEAf,IAFA,CAEA;AACA;AACA;AACA,OALA,EAfA,CAqBA;AACA;;AACA;AACAgB;AADA;AAGAH,YACAI,IADA,CACAF,mDADA,EACAG,GADA,EAEAlB,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,EA1BA,CAmCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,KA3PA;AA4PAmB,mBA5PA,2BA4PA9D,IA5PA,EA4PA;AACA;AACA;AACA;;AACA;AACA;AACA+D;AACA;AACA,OARA,CASA;AACA;AACA;AACA;;;AACA;AACA,KA1QA;AA2QAC,YA3QA,sBA2QA;AACAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,KA7QA;AA8QAS,UA9QA,oBA8QA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,iBADA;;AAAA;AAEA;;AACA;AACAzB;AACA,iBAFA,MAEA;AACAA;AACA,iBAFA,MAEA;AACAmB,yBADA,GACA,EADA;AAEAA,2DACA,gEADA,EAEA,EAFA;AAIAA,+CACA,gmBADA,EAEA,EAFA;AAKAA,+CACA,wBADA,EACA,EADA;AAGAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA,2DAtBA,CAsBA;;AACAzD,qBAvBA,GAuBA,4BAvBA,EAwBA;;AACAgE,2BAzBA,GAyBA;AACAhE;AADA,mBAzBA;AA4BAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA4B,oDADA,CAEA;;AAFA,oCAGA1B,oBAHA;AAAA;AAAA;AAAA;;AAIA;AACAoB,iCALA,GAKA;AACAF;AADA,+BALA;AAAA;AAAA,qCAQAH,MACAI,IADA,CACAF,8CADA,EACAG,GADA,EAEAlB,IAFA;AAAA,oGAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAwB,gEADA,CAEA;;AAAA;AACAC,6CAHA,GAGA;AACAlE,uDADA;AAEAmE,yEAFA;AAGAC,8EAHA;AAIAzB,0EAJA;AAKAzC;AALA,2CAHA;AAUA+D;AAVA;AAAA,iDAWA5B;AAAA,gHACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACAb,mEAFA,GAEAe,WAFA;AAAA;AAAA,6DAIAe,MACAI,IADA,CACAF,6CADA,EACAG,GADA,EAEAlB,IAFA;AAAA,4HAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACAwB;;AADA,2FAEAI,CAFA;AAGAC,mHACA,GADA,EAEA,EAFA,CAHA,EAMA;;AAAA;AACAA,6GACA,YADA,EAEA,aAFA,EAPA,CAYA;;AAAA;AACAC;AACAC,qGADA;AAEAC,kHAFA;AAGArC,kGAHA;AAIAa,sGAJA;AAKAyB,4FALA;AAMA/C;AANA,qEAbA;AAqBAgD,qHACA;AACA;AACAtC,6GACA2B,SADA,EAEAvB,IAFA,CAEA;AACA,6GADA,CAEA;;AAAA;AACA;AACA,yEANA;AAOA;AACA,qEAXA;AArBA;;AAEA;AAAA;AAgCA,mEAlCA,CAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AA1CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAFA;;AAAA;AAAA;AAAA;AAAA,0DAJA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CADA;;AAAA;AAAA;AAAA;AAAA,8CAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFA;;AAAA;AAAA;AAAA;AAAA,kCARA;;AAAA;AAAA;AAAA;;AAAA;AA4EA;;AACA,iEA7EA,CA8EA;;AA9EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAiFA;;AApHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqHA,KAnYA;AAoYAmC,aApYA,qBAoYA7E,IApYA,EAoYA;AAAA;;AACAkE;;AADA,mCAEAY,CAFA;AAGAZ;;AACA;AACAa;AACA9E,gEADA;AAEA2C;AAFA,WADA;AAKAsB;AACA5B;AACAtC;;AACA;AACA;AACA;AACA,WALA;AAMA,SAhBA,CAkBA;;AAlBA;;AAEA;AAAA,YAGA+E,GAHA;;AAAA;AAiBA;AACA,KAxZA;AAyZAC,WAzZA,mBAyZAhF,IAzZA,EAyZA;AAAA;;AAAA,mCACAiF,CADA;AAEA;AACA5C,qDAHA,EAIA;AACA;;AACA;AACA;AACA;AACA,WAFA;AAGA6C;AACA;AACA,WAFA,CAJA,EAOA;AACA;AACA;AACA;;AACAC,uBACA,+DAZA,EAaA;;AACAnF;AACA,SAfA,MAeA;AACAA;AACA;;AACA;AACA;AACA;AACA;AA3BA;;AACA;AAAA,YAEAqC,OAFA;AAAA,YASA6C,aATA;AAAA,YAgBAC,UAhBA;;AAAA;AA2BA;AACA;AAtbA,GAlCA;AA0dAC,SA1dA,qBA0dA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAriBA","names":["name","components","data","list","url","file","status","urlPath","imagelists","tokenize","matchname","matchcategory","type","matchnamesum","statusname","statuscat","statusfda","colorname","colorfda","colorcat","id","keyword","colorkey","desc","arrList","alldata","back","next","product_token","methods","savetorule","sen","answer","d","DictService","iddata","sql","RuleBasedService","text","rule_based_id","dict_id","MapRuleBasedService","alert","res","updatemaprule","then","savetorule_based","keyword_id","advertise_id","user","map_id","sendata","JSON","dict_name","rule","map_rule_based_id","no","checkkeyword","axios","get","LinkService","content","post","con","finddescription","findfda","loaddict","search","selectpro","console","des","sentence","sentence_keyword","r","sentencetoken","advertise","product_token_id","keyword_dict_id","sentent","AdvertiseService","tokendata","l","map","compare","k","filteredArray","percentage","mounted"],"sourceRoot":"src/components","sources":["producttoken.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div>\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">URL</label>\n          <textarea\n            v-model=\"data.url\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"3\"\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlTextarea1\">Content</label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 btn btn-success\">\n          \n        </button>\n      </div>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"status\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454\"></th>\n            <th style=\"background-color: #ffb454\"></th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\"></th> -->\n            <td :style=\"colorkey\" v-if=\"list.keyword != 0\">\n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentent\"></span><br />\n                  {{ k.percentage.toFixed(2) }}%\n                </td>\n                <!-- <td>\n                  <span v-if=\"k.status == 1\"></span\n                  ><span v-if=\"k.status == 9\"></span\n                  ><span v-if=\"k.status == 0\"></span>\n                </td> -->\n\n                <!-- <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td> -->\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <tr>\n                \n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\n\nexport default {\n  name: \"App\",\n  components: {},\n  data() {\n    return {\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      id: \"\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token:0\n    };\n  },\n  methods: {\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    savetorule_based(data, answer) {\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      // console.log(data);\n\n      var maprule = {\n        keyword_id: 1,\n        advertise_id: null,\n        status: 1,\n        answer: answer,\n        user: 1,\n      };\n      MapRuleBasedService.createmap_rule_based(maprule).then(async (res) => {\n        // console.log(res.data);\n        var map_id = res.data.id;\n        var sendata = JSON.parse(data.dict_id);\n        var dict_name = JSON.parse(data.dict_name);\n        for (let d = 0; d < sendata.length; d++) {\n          var rule = {\n            map_rule_based_id: map_id,\n            dict_id: sendata[d],\n            dict_name: dict_name[d],\n            no: d + 1,\n          };\n          RuleBasedService.createrule_based(rule).then(() => {\n            if (d + 1 == sendata.length) {\n              alert(\"\");\n            }\n          });\n        }\n      });\n\n      // if (id.length != sen.length) {\n      //   for (let a = 0; a < sen.length; a++) {\n      //     DictService.getdicts(\"\", sen[a]).then((res) => {\n      //       // console.log(res.data);\n      //       if (res.data.length == 0) {\n      //         var prodata = {\n      //           name: sen[a],\n      //           status: 1,\n      //         };\n      //         // console.log(prodata);\n      //         DictService.createdict(prodata).then(() => {\n      //           //   RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n\n      //           // });\n      //           if (a + 1 == sen.length) {\n      //             this.savetorule(sen, answer);\n      //           }\n      //         });\n      //       }\n      //     });\n      //   }\n      // } else {\n      // this.savetorule(sendata, answer);\n      // }\n      //       this.arrList = []\n      //       console.log(answer);\n      // keyword= keyword.toString();\n      // var data = keyword.replaceAll('<span style=\"color:red\">','')\n      //   data = data.replaceAll('</span>','')\n      //   data = data.replaceAll('  ',' ')\n      //   // console.log(data);\n      //   var datasplit = data.split(\" \")\n      //   // console.log(datasplit);\n      //   for (let d = 0; d < datasplit.length; d++) {\n      //     if (datasplit[d] != '') {\n      //       this.arrList.push(datasplit[d])\n      //       // console.log(datasplit[d]);\n\n      //     }\n      //   }\n\n      //   console.log(this.arrList);\n      //     for (let a = 0; a < this.arrList.length; a++) {\n      //     DictService.getdicts('',this.arrList[a]).then((res)=>{\n      //         // console.log(res.data);\n      //         if (res.data.length == 0) {\n      //           var prodata = {\n      //           name: this.arrList[a],\n      //           status:1,\n      //         };\n      //         // console.log(prodata);\n      //           DictService.createdict(prodata).then((res) => {\n      //             RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n      //           });\n      //         });\n      //         }\n      //       })\n      //         if (a+1== this.arrList.length) {\n      //       this.savetorule(answer)\n      //       // console.log(1);\n      //     }\n      //     }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = '  Shopee     Bluebird() Storage Condition Normal  ,     ,       12    /. 30-1-26764-5-0051  17901           1000  60    1  5   20   93   2  21   50   90   3  51   100   87   4  100  .....................  85  Vitamin C Plus Dietary Supplement Product Bluebird Brand      1   (Active Ingredient) VITAMIN C (100%) - 60  CITRUS BIOFLAVONOID POWDER - 630  BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (/) (MALPIGHIA GLABRA L.)  - 60  ROSEHIP POWDER () (ROSA CANINA L.)  - 60  Rutin - 30  INDIAN GOOSEBERRY POWDER () (PHYLLANTHUS EMBLICA L. )  - 60   (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5  TITANIUM DIOXIDE 171 -1.95    1-2    .. 30-1-26764-5-0051       5                    12.00         _/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    async search() {\n      await this.loaddict();\n      this.status = false;\n      if (this.data.url == null || this.data.url == \"\") {\n        alert(\" URL\");\n      } else if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      } else {\n        var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \"\"\n        );\n        \n        content = content.replaceAll(\n          /\\ud83d[\\ude00-\\ude4f]/g,\"\"\n        );\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        var url = this.data.url.split(\"-i.\");\n        //  console.log(url);\n        var selectpro = {\n          url: url[0],\n        };\n        MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n          console.log(res.data);\n          // console.log(content);\n          if (res.data.length == 0) {\n            // console.log(LinkService.getpythonlink()+'/worktokendesc?text=' + content);\n            var con = {\n              content: content,\n            };\n            await axios\n              .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n              .then(async (res) => {\n                console.log(res.data);\n                // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n                var des = {\n                  url: url[0],\n                  sentence: this.data.content,\n                  sentence_keyword: res.data.sentent,\n                  keyword_id:res.data.keywordId,\n                  status: 1,\n                };\n                console.log(des);\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (res) => {\n                    // console.log(res.data.id);\n                    var product_token = res.data.id;\n\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        console.log(res.data);\n                        for (let r = 0; r < res.data.length; r++) {\n                          var sentencetoken = res.data[r].sentent.replaceAll(\n                            '\"',\n                            \"\"\n                          ); // eslint-disable-line\n                          sentencetoken = sentencetoken.replaceAll(\n                            \"<spanstyle\",\n                            \"<span style\"\n                          );\n\n                          // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                          var advertise = {\n                            product_token_id: product_token,\n                            keyword_dict_id: res.data[r].keyword_dict_id,\n                            dict_id: res.data[r].dict_id,\n                            dict_name: res.data[r].dict_name,\n                            sentent: sentencetoken,\n                            sen: res.data[r].sen,\n                          };\n                          AdvertiseService.createadvertise(advertise).then(\n                            () => {\n                              if (r + 1 == res.data.length) {\n                                MapRuleBasedService.getproduct_token(\n                                  selectpro\n                                ).then((pro) => {\n                                  this.product_token = pro.data.id\n                                  // this.list = res.data\n                                  this.tokendata(pro.data);\n                                });\n                              }\n                            }\n                          );\n                        }\n                        // if (keys.data.length > 0) {\n                        //   res.data[l].keyword = keys.data\n                        // } else {\n                        //   res.data[l].keyword = 0\n                        // }\n                        // if (l + 1 == res.data.length) {\n                        //   this.list = res.data\n                        // }\n                      });\n                  }\n                );\n              });\n          } else {\n            this.tokendata(res.data);\n            this.product_token = res.data.id\n            // console.log(this.list);\n          }\n        });\n      }\n    },\n    tokendata(list) {\n      console.log(list);\n      for (let l = 0; l < list.keyword.length; l++) {\n        console.log(list.keyword[l].keyword_dict_id);\n        if (list.keyword[l].keyword_dict_id) {\n          var map = {\n            url: JSON.stringify(list.keyword[l].keyword_dict_id),\n            keyword_id:list.keyword[l].dict_id,\n          };\n          console.log(map);\n          MapRuleBasedService.getmapproduct(map).then((res) => {\n            list.keyword[l].rulebase = res.data;\n            if (l + 1 == list.keyword.length) {\n              this.compare(list);\n            }\n          });\n        }\n\n        // }\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          this.status = true;\n        }\n      }\n    },\n  },\n  mounted() {\n    // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"   \";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}