{"remainingRequest":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/src/components/producttoken.vue","mtime":1699260064978},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/babel.config.js","mtime":1677654957527},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/babel-loader/lib/index.js","mtime":1687492401655},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1687492401267},{"path":"/Users/ponnipa/Documents/GitHub/fda-frontend/node_modules/vue-loader/lib/index.js","mtime":1687492401738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wb25uaXBhL0RvY3VtZW50cy9HaXRIdWIvZmRhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBQcm9kdWN0c1NlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzJwoKaW1wb3J0IERpY3RTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0RpY3RTZXJ2aWNlIjsKaW1wb3J0IFJ1bGVCYXNlZFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvUnVsZUJhc2VkU2VydmljZSI7CmltcG9ydCBNYXBSdWxlQmFzZWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL01hcFJ1bGVCYXNlZFNlcnZpY2UiOwppbXBvcnQgTGlua1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTGlua1NlcnZpY2UiOwppbXBvcnQgQWR2ZXJ0aXNlU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9BZHZlcnRpc2VTZXJ2aWNlIjsKaW1wb3J0IEtleXdvcmRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL0tleXdvcmRTZXJ2aWNlIjsKaW1wb3J0IENsaXBMb2FkZXIgZnJvbSAndnVlLXNwaW5uZXIvc3JjL0NsaXBMb2FkZXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGNvbXBvbmVudHM6IHsKICAgIENsaXBMb2FkZXI6IENsaXBMb2FkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2xvcjogJyM1YmMwZGUnLAogICAgICBzaXplOiAnNTBweCcsCiAgICAgIG1hcmdpbjogJzJweCcsCiAgICAgIHJhZGl1czogJzJweCcsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGxpc3Q6IFtdLAogICAgICB1cmw6ICIiLAogICAgICBmaWxlOiAiIiwKICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgdXJsUGF0aDogIiIsCiAgICAgIGltYWdlbGlzdHM6ICIiLAogICAgICB0b2tlbml6ZTogIiIsCiAgICAgIG1hdGNobmFtZTogIiIsCiAgICAgIG1hdGNoY2F0ZWdvcnk6ICIiLAogICAgICB0eXBlOiAiIiwKICAgICAgbWF0Y2huYW1lc3VtOiAiIiwKICAgICAgc3RhdHVzbmFtZTogMCwKICAgICAgc3RhdHVzY2F0OiAwLAogICAgICBzdGF0dXNmZGE6IDAsCiAgICAgIGNvbG9ybmFtZTogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGNvbG9yZmRhOiAiYmFja2dyb3VuZC1jb2xvcjojZjliZGJiIiwKICAgICAgY29sb3JjYXQ6ICJiYWNrZ3JvdW5kLWNvbG9yOiNmOWJkYmIiLAogICAgICBpZDogIiIsCiAgICAgIGtleXdvcmQ6IFtdLAogICAgICBjb2xvcmtleTogImJhY2tncm91bmQtY29sb3I6I2Y5YmRiYiIsCiAgICAgIGRlc2M6ICIiLAogICAgICBhcnJMaXN0OiBbXSwKICAgICAgYWxsZGF0YTogMCwKICAgICAgYmFjazogMCwKICAgICAgbmV4dDogMCwKICAgICAgZGF0YToge30sCiAgICAgIHByb2R1Y3RfdG9rZW46IDAsCiAgICAgIHRpdGxlOiAi4LmA4Lie4Li04LmI4LihIGtleXdvcmQiLAogICAgICBrZXk6IHt9LAogICAgICBmZGE6ICIiLAogICAgICBwcm9kdWN0OiBbXSwKICAgICAgcHJvY2hlY2s6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlcjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5kYXRhID0ge307CiAgICAgIHRoaXMucHJvZHVjdCA9IFtdOwogICAgICB0aGlzLnByb2NoZWNrID0ge307CiAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7CiAgICB9LAogICAgY3V0OiBmdW5jdGlvbiBjdXQoZGF0YSkgewogICAgICBkYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGxldHRlcikgewogICAgICAgIHJldHVybiBsZXR0ZXIgIT09ICIgIjsKICAgICAgfSk7CiAgICAgIHZhciBtYXBuYW1lID0gZGF0YS50b1N0cmluZygpOwogICAgICBtYXBuYW1lID0gbWFwbmFtZS5yZXBsYWNlQWxsKCIsIiwgIiB8ICIpOwogICAgICByZXR1cm4gbWFwbmFtZTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMua2V5KTsKICAgICAgaWYgKHRoaXMua2V5Lm5hbWUgPT0gbnVsbCB8fCB0aGlzLmtleS5uYW1lID09ICIiKSB7CiAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4geC4guC5ieC4reC4hOC4p+C4suC4oSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwcm9kYXRhID0gewogICAgICAgICAgbmFtZTogdGhpcy5rZXkubmFtZSwKICAgICAgICAgIHN0YXR1czogMQogICAgICAgIH07IC8vY29uc29sZS5sb2cocHJvZGF0YSk7CgogICAgICAgIEtleXdvcmRTZXJ2aWNlLmNyZWF0ZWtleXdvcmQocHJvZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnIgPT0gMTA2MikgewogICAgICAgICAgICBhbGVydCgi4Lih4Li14LiE4Liz4LiZ4Li14LmJ4LmD4LiZ4Lij4Liw4Lia4Lia4LmB4Lil4LmJ4LinIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBEaWN0U2VydmljZS5jcmVhdGVkaWN0KHByb2RhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEgKTsKICAgICAgICAgICAgICAvLyBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZWRjb2x1bW5ydWxlX2Jhc2VkKHJlcy5kYXRhLmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2xvc2VkY2F0ZWdvcnkiKS5jbGljaygpOwogICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsgLy8gfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRwZXJjZW50YWdlOiBmdW5jdGlvbiBnZXRwZXJjZW50YWdlKGRhdGEpIHsKICAgICAgLy8gdmFyIGRpY3QgPSBKU09OLnBhcnNlKGRhdGEuZGljdF9pZCkKICAgICAgLy8gdmFyIHJ1bGVfYmFzZWRfaWQgPSBKU09OLnBhcnNlKGRhdGEucnVsZV9iYXNlZF9pZCkKICAgICAgLy8gdmFyIHJlID0gKDEwMCAqIGRhdGEuY291bnRfcnVsZWJhc2VkKS8gKHJ1bGVfYmFzZWRfaWQubGVuZ3RoKQogICAgICByZXR1cm4gZGF0YS5jb3VudF9ydWxlYmFzZWQ7CiAgICB9LAogICAgc2F2ZXRvcnVsZTogZnVuY3Rpb24gc2F2ZXRvcnVsZShzZW4sIGFuc3dlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coYW5zd2VyKTsKICAgICAgdmFyIGlkZGF0YSA9IFtdOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoZCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGFzcGxpdFtkXSk7CiAgICAgICAgRGljdFNlcnZpY2UuZ2V0ZGljdHMoIiIsIHNlbltkXSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgICB2YXIgc3FsOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhWzBdLmlkKTsKICAgICAgICAgICAgICAgICAgICAgIGlkZGF0YS5wdXNoKHJlcy5kYXRhWzBdLmlkKTsKICAgICAgICAgICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKGQrMSAsIHNlbi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkZGF0YSk7CgoKICAgICAgICAgICAgICAgICAgICBpZiAoIShkICsgMSA9PSBzZW4ubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNxbCA9ICJTRUxFQ1Qgci4qIEZST00gbWFwX3J1bGVfYmFzZWQgbSBqb2luIHJ1bGVfYmFzZWQgciBvbiBtLnJ1bGVfYmFzZWRfaWQgPSByLmlkIFdIRVJFIG0uc3RhdHVzID0gMSBhbmQgZGljdF9pZCA9ICdbIi5jb25jYXQoaWRkYXRhLCAiXSciKTsgLy8gY29uc29sZS5sb2coc3FsKTsKCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YnlkaWN0KHNxbCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAieyI7CgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkZGF0YVtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnImRpY3QnICsgaWRkYXRhW2ldICsgJyInICsgIjoiICsgMSArICIsIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnImFuc3dlcicgKyAnIicgKyAiOiIgKyBhbnN3ZXIgKyAiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAifSI7IC8vIGNvbnNvbGUubG9nKHRleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UodGV4dCk7IC8vIGNvbnNvbGUubG9nKGpzb25EYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpzb25EYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS5jcmVhdGVydWxlX2Jhc2VkKGpzb25EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcnVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfYmFzZWRfaWQ6IHJlcy5kYXRhLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogaWRkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHBybyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbWFwX3J1bGVfYmFzZWQ6cmVzLmRhdGEuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2R1Y3RzU2VydmljZS5tYXBfcnVsZV9iYXNlZChpZCxwcm8pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdldGRhdGEoKTsgLy8gICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9LCA1MDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZW1hcHJ1bGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiBhbnN3ZXIKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgUnVsZUJhc2VkU2VydmljZS51cGRhdGVydWxlX2Jhc2VkKHJlcy5kYXRhWzBdLmlkLCB1cGRhdGVtYXBydWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdldGRhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgfSkpOwoKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSgpKTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgc2VuLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgX2xvb3AoZCk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZldG9ydWxlX2Jhc2VkOiBmdW5jdGlvbiBzYXZldG9ydWxlX2Jhc2VkKGRhdGEsIGFuc3dlcikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKHNlbi5sZW5ndGgpOwogICAgICAvLyBjb25zb2xlLmxvZygnYW5zd2VyJyxhbnN3ZXIpOwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdmFyIG1hcHJ1bGUgPSB7CiAgICAgICAga2V5d29yZF9pZDogMSwKICAgICAgICBhZHZlcnRpc2VfaWQ6IHRoaXMucHJvZHVjdF90b2tlbiwKICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgYW5zd2VyOiBhbnN3ZXIsCiAgICAgICAgdXNlcjogdGhpcy5jdXJyZW50VXNlci5pZCwKICAgICAgICBtYXBfZGljdDogSlNPTi5wYXJzZShkYXRhLmRpY3RfaWQpCiAgICAgIH07CgogICAgICBpZiAoIWRhdGEubWFwSWQpIHsKICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNoZWNraW50YihkYXRhLmRpY3RfaWQpLnRoZW4oZnVuY3Rpb24gKGNoZWNrKSB7CiAgICAgICAgICBpZiAoY2hlY2suY291bnQgPT0gMSkgewogICAgICAgICAgICBhbGVydCgi4Lih4Li14Lij4Li54Lib4Lib4Lij4Liw4LmC4Lii4LiE4LiZ4Li14LmJ4Lit4Lii4Li54LmI4LmD4LiZIHJ1bGUgYmFzZWQg4LmB4Lil4LmJ4LinIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZW1hcF9ydWxlX2Jhc2VkKG1hcHJ1bGUpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBtYXBfaWQsIHNlbmRhdGEsIF9sb29wMiwgZDsKCiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9pZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICBzZW5kYXRhID0gSlNPTi5wYXJzZShkYXRhLmRpY3RfaWQpOyAvLyBjb25zb2xlLmxvZyhzZW5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGljdF9uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wMiA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfbG9vcDIoZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfbG9vcDIkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERpY3RTZXJ2aWNlLmdldGRpY3Qoc2VuZGF0YVtkXSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihzZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VuLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwX3J1bGVfYmFzZWRfaWQ6IG1hcF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9pZDogc2VuZGF0YVtkXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9uYW1lOiBzZW4uZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubzogZCArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKHJ1bGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSdWxlQmFzZWRTZXJ2aWNlLmNyZWF0ZXJ1bGVfYmFzZWQocnVsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkICsgMSA9PSBzZW5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5nZXRkZXRhaWwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuC4muC4seC4meC4l+C4tuC4geC4quC4s+C5gOC4o+C5h+C4iCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfbG9vcDIpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkIDwgc2VuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmRlbGVnYXRlWWllbGQoX2xvb3AyKGQpLCAidDAiLCA2KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZGVsZXRlbWFwX3J1bGVfYmFzZWQoZGF0YS5tYXBJZCwgbWFwcnVsZSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5nZXRkZXRhaWwoKTsKCiAgICAgICAgICAgICAgICAgIGFsZXJ0KCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICB9KSkpOwogICAgICB9CiAgICB9LAogICAgY2hlY2trZXl3b3JkOiBmdW5jdGlvbiBjaGVja2tleXdvcmQobmFtZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKG5hbWUpOwogICAgICAvLyAgIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS9rZXl3b3JkX2RpY3RzP25hbWU9MScpLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAvLyBmb3IgKGxldCByID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgIC8vIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywgJycpCiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyg/OltcdTI3MDAtXHUyN2JmXXwoPzpcdWQ4M2NbXHVkZGU2LVx1ZGRmZl0pezJ9fFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHUwMDIzLVx1MDAzOV1cdWZlMGY/XHUyMGUzfFx1MzI5OXxcdTMyOTd8XHUzMDNkfFx1MzAzMHxcdTI0YzJ8XHVkODNjW1x1ZGQ3MC1cdWRkNzFdfFx1ZDgzY1tcdWRkN2UtXHVkZDdmXXxcdWQ4M2NcdWRkOGV8XHVkODNjW1x1ZGQ5MS1cdWRkOWFdfFx1ZDgzY1tcdWRkZTYtXHVkZGZmXXxcdWQ4M2NbXHVkZTAxLVx1ZGUwMl18XHVkODNjXHVkZTFhfFx1ZDgzY1x1ZGUyZnxcdWQ4M2NbXHVkZTMyLVx1ZGUzYV18XHVkODNjW1x1ZGU1MC1cdWRlNTFdfFx1MjAzY3xcdTIwNDl8W1x1MjVhYS1cdTI1YWJdfFx1MjViNnxcdTI1YzB8W1x1MjVmYi1cdTI1ZmVdfFx1MDBhOXxcdTAwYWV8XHUyMTIyfFx1MjEzOXxcdWQ4M2NcdWRjMDR8W1x1MjYwMC1cdTI2RkZdfFx1MmIwNXxcdTJiMDZ8XHUyYjA3fFx1MmIxYnxcdTJiMWN8XHUyYjUwfFx1MmI1NXxcdTIzMWF8XHUyMzFifFx1MjMyOHxcdTIzY2Z8W1x1MjNlOS1cdTIzZjNdfFtcdTIzZjgtXHUyM2ZhXXxcdWQ4M2NcdWRjY2Z8XHUyOTM0fFx1MjkzNXxbXHUyMTkwLVx1MjFmZl0pL2csICcnKTsKICAgICAgLy8gICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiIik7CiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoIl8iLCAiIik7CiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgIC8vICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoIioiLCAiIik7CiAgICAgIC8vIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoYF8vbFxfYCwgIiIpOy8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/dGV4dD0nICsgbmFtZSk7CiAgICAgIHZhciBkZXNjID0gdGhpcy5maW5kZGVzY3JpcHRpb24obmFtZSk7IC8vIGNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvd29ya3Rva2VuZGVzYz90ZXh0PScrZGVzYyk7CgogICAgICBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi93b3JrdG9rZW5kZXNjP3RleHQ9IiArIGRlc2MpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBfdGhpczMuZGVzYyA9IHJlcy5kYXRhOwogICAgICB9KTsgLy8gbmFtZSA9ICfguILguYnguK3guKHguLnguKXguIjguLPguYDguJ7guLLguLDguILguK3guIfguKrguLTguJnguITguYnguLIg4Lir4Lih4Lin4LiU4Lir4Lih4Li54LmIIFNob3BlZSDguIHguKXguLjguYjguKHguJzguKXguLTguJXguKDguLHguJPguJHguYzguYDguJ7guLfguYjguK3guKrguLjguILguKDguLLguJ4g4Lit4Liy4Lir4Liy4Lij4LmA4Liq4Lij4Li04Lih4LmA4Lie4Li34LmI4Lit4LiE4Lin4Liy4Lih4LiH4Liy4LihIOC4nOC4tOC4pyDguKLguLXguYjguKvguYnguK0gQmx1ZWJpcmQo4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUKSBTdG9yYWdlIENvbmRpdGlvbiBOb3JtYWwg4Lib4Lij4Liw4LmA4Lig4LiX4Liq4Liy4Lij4Lit4Liy4Lir4Liy4LijIOC4quC4suC4o+C4leC5ieC4suC4meC4reC4meC4uOC4oeC4ueC4peC4reC4tOC4quC4o+C4sCwg4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IOC4m+C4o+C4sOC5gOC4l+C4qOC4leC5ieC4meC4geC4s+C5gOC4meC4tOC4lOC4quC4tOC4meC4hOC5ieC4siDguYTguJfguKIg4Lir4LiZ4LmJ4Liy4LiX4Li14LmI4LiC4Lit4LiH4Lit4Liy4Lir4Liy4Lij4LmA4Liq4Lij4Li04Lih4Liq4Liz4Lir4Lij4Lix4Lia4LiE4Lin4Liy4Lih4LiH4Liy4LihIOC4lOC4ueC5geC4peC4quC4tOC4pywg4Lib4LmJ4Lit4LiH4LiB4Lix4LiZ4Lij4Li04LmJ4Lin4Lij4Lit4LiiIOC4m+C4o+C4sOC5gOC4oOC4l+C4geC4suC4o+C4q+C5iOC4rSDguKvguYjguK3guKPguKfguKHguIHguLHguJkg4LmA4Lie4LioIOC4l+C4seC5ieC4h+C4quC4reC4h+C5gOC4nuC4qCDguK3guLLguKLguLjguIHguLLguKPguYDguIHguYfguJrguKPguLHguIHguKnguLIgMTIg4LmA4LiU4Li34Lit4LiZIOC4m+C4o+C4sOC5gOC4oOC4l+C4guC4reC4h+C4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC4ouC4siDguYHguITguJvguIvguLnguKUg4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi4gMzAtMS0yNjc2NC01LTAwNTEg4LiI4Liz4LiZ4Lin4LiZ4Liq4Li04LiZ4LiE4LmJ4LiyIDE3OTAxIOC4quC5iOC4h+C4iOC4suC4gSDguIjguLHguIfguKvguKfguLHguJTguJnguITguKPguKPguLLguIrguKrguLXguKHguLIg4Lij4Liy4Lii4Lil4Liw4LmA4Lit4Li14Lii4LiU4Liq4Li04LiZ4LiE4LmJ4LiyIOC4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDguJ7guKXguLHguKog4LiV4Lij4LiyIOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCDguJXguKPguLIg4Lia4Lil4Li54LmA4Lia4Li04Lij4LmM4LiUIOC4guC4meC4suC4lCAxMDAwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSA2MCDguYHguITguJvguIvguLnguKUg4LmA4Lij4LiX4LiC4Liy4Lii4Liq4LmI4LiHIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCAxIOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCA1IOC4geC4o+C4sOC4m+C4uOC4geC4guC4tuC5ieC4meC5hOC4myDguJbguLbguIcgMjAg4LiB4Lij4Liw4Lib4Li44LiBIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA5MyDguJrguLLguJcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDIg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDIxIOC4geC4o+C4sOC4m+C4uOC4geC4guC4tuC5ieC4meC5hOC4myDguJbguLbguIcgNTAg4LiB4Lij4Liw4Lib4Li44LiBIOC4o+C4suC4hOC4suC4geC4o+C4sOC4m+C4uOC4geC4peC4sCA5MCDguJrguLLguJcg4LiK4LmI4Lin4LiH4Lij4Liy4LiE4Liy4LiX4Li14LmIIDMg4Liq4Lix4LmI4LiH4LiL4Li34LmJ4Lit4LiV4Lix4LmJ4LiH4LmB4LiV4LmIIDUxIOC4geC4o+C4sOC4m+C4uOC4geC4guC4tuC5ieC4meC5hOC4myDguJbguLbguIcgMTAwIOC4geC4o+C4sOC4m+C4uOC4gSDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgODcg4Lia4Liy4LiXIOC4iuC5iOC4p+C4h+C4o+C4suC4hOC4suC4l+C4teC5iCA0IOC4quC4seC5iOC4h+C4i+C4t+C5ieC4reC4leC4seC5ieC4h+C5geC4leC5iCAxMDAg4LiB4Lij4Liw4Lib4Li44LiB4LiC4Li24LmJ4LiZ4LmE4LibIC4uLi4uLi4uLi4uLi4uLi4uLi4uLiDguKPguLLguITguLLguIHguKPguLDguJvguLjguIHguKXguLAgODUg4Lia4Liy4LiXIFZpdGFtaW4gQyBQbHVzIERpZXRhcnkgU3VwcGxlbWVudCBQcm9kdWN0IEJsdWViaXJkIEJyYW5kIOC4nOC4peC4tOC4leC4oOC4seC4k+C4keC5jOC5gOC4quC4o+C4tOC4oeC4reC4suC4q+C4suC4o+C4p+C4tOC4leC4suC4oeC4tOC4meC4i+C4tSDguJ7guKXguLHguKog4LiV4Lij4LiyIOC4muC4peC4ueC5gOC4muC4tOC4o+C5jOC4lCDguKrguYjguKfguJnguJvguKPguLDguIHguK3guJrguJfguLHguYnguIfguKvguKHguJTguYPguJkgMSDguYHguITguJvguIvguLnguKUg4Liq4LmI4Lin4LiZ4Lib4Lij4Liw4LiB4Lit4Lia4LiX4Li14LmI4Liq4Liz4LiE4Lix4LiNIChBY3RpdmUgSW5ncmVkaWVudCkgVklUQU1JTiBDICgxMDAlKSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBDSVRSVVMgQklPRkxBVk9OT0lEIFBPV0RFUiAtIDYzMCDguKHguLTguKXguKXguLTguIHguKPguLHguKEgQkFSQkFET1NDSEVSUlkgUE9XREVSL0FDRVJPTEEgQ0hFUlJZIFBPV0RFUiAo4Lic4LiH4Lia4Liy4Lij4LmM4LmA4Lia4LmC4LiU4Liq4LmA4LiK4Lit4Lij4LmM4Lij4Li1L+C4nOC4h+C4reC4sOC5gOC4i+C5guC4o+C4peC4suC5gOC4iuC4reC4o+C5jOC4o+C4tSkgKE1BTFBJR0hJQSBHTEFCUkEgTC4pIOC4nOC4pSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBST1NFSElQIFBPV0RFUiAo4Lic4LiH4LmC4Lij4Liq4Liu4Li04Lib4Liq4LmMKSAoUk9TQSBDQU5JTkEgTC4pIOC4nOC4pSAtIDYwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBSdXRpbiAtIDMwIOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBJTkRJQU4gR09PU0VCRVJSWSBQT1dERVIgKOC4nOC4h+C4oeC4sOC4guC4suC4oeC4m+C5ieC4reC4oSkgKFBIWUxMQU5USFVTIEVNQkxJQ0EgTC4gKSDguJzguKUgLSA2MCDguKHguLTguKXguKXguLTguIHguKPguLHguKEg4Liq4LmI4Lin4LiZ4Lib4Lij4Liw4LiB4Lit4Lia4LiX4Li14LmI4LmE4Lih4LmI4Liq4Liz4LiE4Lix4LiNIChJbmFjdGl2ZSBJbmdyZWRpZW50KSBFRElCTEUgR0VMQVRJTiA0MjggLSA5OC41IOC4oeC4tOC4peC4peC4tOC4geC4o+C4seC4oSBUSVRBTklVTSBESU9YSURFIDE3MSAtMS45NSDguKHguLTguKXguKXguLTguIHguKPguLHguKEg4Lin4Li04LiY4Li14Lij4Lix4Lia4Lib4Lij4Liw4LiX4Liy4LiZIOC4hOC4o+C4seC5ieC4h+C4peC4sCAxLTIg4LmB4LiE4Lib4LiL4Li54LilIOC4q+C4peC4seC4h+C4reC4suC4q+C4suC4o+C5gOC4iuC5ieC4siDguYDguKXguILguJfguLXguYgg4LitLuC4oi4gMzAtMS0yNjc2NC01LTAwNTEg4LiE4Liz4LmA4LiV4Li34Lit4LiZIOC4hOC4p+C4o+C5gOC4geC5h+C4muC5g+C4q+C5ieC4nuC5ieC4meC5geC4quC4h+C5geC4lOC4h+C5geC4peC4sOC4hOC4p+C4suC4oeC4iuC4t+C5ieC4mSDguYDguJTguYfguIEg4Liq4LiV4Lij4Li14Lih4Li14LiE4Lij4Lij4Lig4LmMIOC5geC4peC4sOC4quC4leC4o+C4teC5g+C4q+C5ieC4meC4oeC4muC4uOC4leC4o+C5hOC4oeC5iOC4hOC4p+C4o+C4o+C4seC4muC4m+C4o+C4sOC4l+C4suC4mSDguITguKfguKPguIHguLTguJnguK3guLLguKvguLLguKPguKvguKXguLLguIHguKvguKXguLLguKLguYPguKvguYnguITguKPguJogNSDguKvguKHguLnguYgg4LmD4LiZ4Liq4Lix4LiU4Liq4LmI4Lin4LiZ4LiX4Li14LmI4LmA4Lir4Lih4Liy4Liw4Liq4Lih4LmA4Lib4LmH4LiZ4Lib4Lij4Liw4LiI4LizIOC5hOC4oeC5iOC4oeC4teC4nOC4peC5g+C4meC4geC4suC4o+C4m+C5ieC4reC4h+C4geC4seC4meC4q+C4o+C4t+C4reC4o+C4seC4geC4qeC4suC5guC4o+C4hCDguKrguKPguKPguJ7guITguLjguJMg4Lib4Lij4Liw4LmC4Lii4LiK4LiZ4LmM4LiC4Lit4LiH4LiB4Liy4Lij4LiB4Li04LiZ4Lin4Li04LiV4Liy4Lih4Li04LiZ4LiL4Li1IO+4j+C4l+C4s+C5g+C4q+C5ieC4q+C4meC5ieC4suC5hOC4oeC5iOC5guC4l+C4o+C4oSDguKvguJnguYnguLLguJXguLLguKrguJTguYPguKog77iP4LiK4LmI4Lin4Lii4Lif4Li34LmJ4LiZ4Lif4Li54Lic4Li04Lin4Lir4LiZ4LmJ4LiyIOC4quC4tOC4pyDguJ3guYnguLIg4LiB4Lij4LiwIOC4o+C4tOC5ieC4p+C4o+C4reC4oiDguJTguLnguIjguLLguIfguKXguIcg77iP4Lic4Li04Lin4Lie4Lij4Lij4LiT4LiZ4Li44LmI4Lih4LmA4Lij4Li14Lii4Lia4LmA4LiZ4Li14Lii4LiaIOC4iuC4uOC5iOC4oeC4iuC4t+C5iOC4mSDvuI/guKvguJnguYnguLLguJXguLLguJTguLnguYDguJTguYfguIHguYHguKXguLDguYDguJTguYnguIfguILguLbguYnguJkg77iP4Lic4Li04Lin4Lir4LiZ4LmJ4Liy4LiC4Liy4Lin4Lit4Lih4LiK4Lih4Lie4Li5IOC4quC4tOC4meC4hOC5ieC4suC4leC4seC4lOC4o+C4reC4muC4l+C4uOC4geC4p+C4seC4meC5gOC4p+C4peC4siDguJXguLHguJTguKPguK3guJrguYDguKfguKXguLIgMTIuMDAg4LiZIOC4guC4reC4h+C4l+C4uOC4geC4p+C4seC4mSDguYHguIjguYnguIfguYLguK3guJnguYDguIHguLTguJnguYDguKfguKXguLIg4Liq4LmI4LiH4Lij4Lit4Lia4Lin4Lix4LiZ4LiW4Lix4LiU4LmE4Lib4LiZ4Liw4LiI4LmK4LiwIOC4quC5iOC4h+C4nuC4seC4quC4lOC4uOC4l+C4uOC4geC4p+C4seC4mSDguYDguKfguYnguJnguKfguLHguJnguK3guLLguJfguLTguJXguKLguYwg4LmB4Lil4Liw4Lin4Lix4LiZ4Lir4Lii4Li44LiU4LiZ4Lix4LiB4LiC4Lix4LiV4Lik4LiB4Lip4LmMIOC4guC4reC4muC4nuC4o+C4sOC4hOC4uOC4k+C4peC4ueC4geC4hOC5ieC4suC4l+C4uOC4geC4l+C5iOC4suC4mSDguJfguLXguYjguYTguKfguYnguKfguLLguIfguYPguIjguJzguKXguLTguJXguKDguLHguJPguJHguYzguILguK3guIfguYDguKPguLLguYDguKrguKHguK3guKHguLJfL2xcXycKICAgICAgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/dGV4dD0nICsgZGVzYyk7CgogICAgICB2YXIgY29uID0gewogICAgICAgIGNvbnRlbnQ6IGRlc2MKICAgICAgfTsKICAgICAgYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZD90ZXh0PSIsIGNvbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyB0aGlzLmtleXdvcmQucHVzaChyZXMuZGF0YSkKICAgICAgICAgIF90aGlzMy5rZXl3b3JkID0gcmVzLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsgLy8gICAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vICAgICAgIHZhciBsaXN0a2V5d29yZHMgPSBbXQogICAgICAvLyAgICAgICB2YXIgbmFtZXNwbGl0ID0gbmFtZS5zcGxpdCgiICIpCiAgICAgIC8vICAgICAgIC8vIGNvbnNvbGUubG9nKG5hbWVzcGxpdCk7CiAgICAgIC8vICAgICAgIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS9rZXl3b3JkX2RpY3RzP25hbWU9MScpLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gICAgICAgICB2YXIga2V5bGlzdCA9IFtdCiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgICAvLyAgICAgICAgICAgcmVzLmRhdGFbcl0ubmFtZSA9IHJlcy5kYXRhW3JdLm5hbWUucmVwbGFjZUFsbCgiLiIsIiIpCiAgICAgIC8vICAgICAgICAgICB2YXIga2sgPSByZXMuZGF0YVtyXS5uYW1lLnNwbGl0KCIgIikKICAgICAgLy8gICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2subGVuZ3RoOyBrKyspIHsKICAgICAgLy8gICAgICAgICAgICAga2V5bGlzdC5wdXNoKGtrW2tdKQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICBmb3IgKGxldCBrZXkgPSAwOyBrZXkgPCBrZXlsaXN0Lmxlbmd0aDsga2V5KyspIHsKICAgICAgLy8gICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbmFtZXNwbGl0Lmxlbmd0aDsgbisrKSB7CiAgICAgIC8vICAgICAgICAgICAgIGlmIChuYW1lc3BsaXRbbl0gPT0ga2V5bGlzdFtrZXldICYmIGtleWxpc3Rba2V5XSAhPSAnJyAmJiBpc05hTihrZXlsaXN0W2tleV0pKSB7CiAgICAgIC8vICAgICAgICAgICAgICAgbGlzdGtleXdvcmRzLnB1c2goa2V5bGlzdFtrZXldKQogICAgICAvLyAgICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleWxpc3QpOwogICAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3RrZXl3b3Jkcyk7CiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGxpc3RrZXl3b3Jkcy5sZW5ndGgpOwogICAgICAvLyAgICAgICAgIGlmIChsaXN0a2V5d29yZHMubGVuZ3RoID09IDApIHsKICAgICAgLy8gICAgICAgICAgIHRoaXMuY29sb3JrZXkgPSAiYmFja2dyb3VuZC1jb2xvcjojYTNlOWE0IgogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIC8vICAgICAgICAgbGlzdGtleXdvcmRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAvLyAgICAgIGlmKHJlc3VsdC5pbmRleE9mKGl0ZW0pIDwgMCkgewogICAgICAvLyAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgLy8gICAgICB9CiAgICAgIC8vIH0pOwogICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAvLyBsaXN0a2V5d29yZHMgPSByZXN1bHQKICAgICAgLy8gICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IGxpc3RrZXl3b3Jkcy5sZW5ndGg7IGwrKykgewogICAgICAvLyAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/bmFtZT0nICsgbmFtZSsnJiZuYW1lX3JlYWw9Jyk7CiAgICAgIC8vICAgICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9jaGVja2tleXdvcmQ/bmFtZT0nICsgbmFtZSsnJiZuYW1lX3JlYWw9JyArIGxpc3RrZXl3b3Jkc1tsXSkudGhlbigocmVzKSA9PiB7CiAgICAgIC8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgLy8gICAgICAgICB0aGlzLmtleXdvcmQucHVzaChyZXMuZGF0YSkKICAgICAgLy8gICAgICAgfSk7CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICB9KTsKICAgIH0sCiAgICBmaW5kZGVzY3JpcHRpb246IGZ1bmN0aW9uIGZpbmRkZXNjcmlwdGlvbihkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB2YXIgdGV4dCA9IFsi4Lij4Liy4Lii4Lil4Liw4LmA4Lit4Li14Lii4LiUIl07CiAgICAgIHZhciBmaW5kZmRhID0gZGF0YTsKCiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGV4dC5sZW5ndGg7IHQrKykgewogICAgICAgIGlmIChmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkgIT0gLTEpIHsKICAgICAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnN1YnN0cmluZyhmaW5kZmRhLmluZGV4T2YodGV4dFt0XSkpOwogICAgICAgIH0KICAgICAgfSAvLyBpZiAoZmluZGZkYSA9PSAn4Lit4Liy4Lir4Liy4LijJykgewogICAgICAvLyAgIGZpbmRmZGEgPSBmaW5kZmRhKyBmaW5kZmRhKyfguYDguKrguKPguLTguKEnCiAgICAgIC8vIH0KICAgICAgLy8gY29uc29sZS5sb2coZmluZGZkYSk7CgoKICAgICAgcmV0dXJuIGZpbmRmZGE7CiAgICB9LAogICAgbG9hZGRpY3Q6IGZ1bmN0aW9uIGxvYWRkaWN0KCkgewogICAgICBheGlvcy5nZXQoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9sb2FkZGljdCIpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkpOwogICAgfSwKICAgIGdldGRldGFpbDogZnVuY3Rpb24gZ2V0ZGV0YWlsKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnNwbGl0KCItaS4iKTsKICAgICAgdmFyIHVybCA9IHRoaXMuZGF0YS51cmwuc3BsaXQoIi1pLiIpOwogICAgICB0aGlzLmRhdGEudXJsID0gdXJsWzBdOwogICAgICB2YXIgc2VsZWN0cHJvID0gewogICAgICAgIHVybDogdGhpcy5kYXRhLnVybCwKICAgICAgICBpZDogdGhpcy5jdXJyZW50VXNlci5pZAogICAgICB9OwogICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldHByb2R1Y3RfdG9rZW4oc2VsZWN0cHJvKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YTsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsgLy8gdmFyIGJlc3QgPSB0aGlzLmdldE1heChyZXMuZGF0YS5rZXl3b3JkLCdjb3VudF9ydWxlYmFzZWQnKQogICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGJlc3QpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM0Lmxpc3QgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXM0LnN0YXR1cyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlX2lkOiByZXMuZGF0YS5rZXl3b3JkWzBdLnByb2R1Y3RfdG9rZW5faWQKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGV3ZWlnaHQocmVzLmRhdGEua2V5d29yZFswXS5tYXBfcnVsZV9iYXNlZF9pZCwgZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7fSk7IC8vIHRoaXMubGlzdC5rZXl3b3JkID0gW2Jlc3RdCiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQpIHsKICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHZhciB1cmwsIGNvbiwgY29udGVudCwgc2VsZWN0cHJvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNy5wcmV2ID0gX2NvbnRleHQxNy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM1LmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdXJsID0gX3RoaXM1LmRhdGEudXJsLnJlcGxhY2VBbGwoIi4iLCAnJyk7CiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3BsaXQoIi1pIik7CiAgICAgICAgICAgICAgICBfdGhpczUuZGF0YS51cmwgPSB1cmxbMF07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczUuZGF0YS51cmwpOwogICAgICAgICAgICAgICAgX3RoaXM1LnByb2NoZWNrID0ge307CiAgICAgICAgICAgICAgICBfdGhpczUucHJvZHVjdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXM1LnByb2R1Y3RfdG9rZW4gPSAwOwogICAgICAgICAgICAgICAgY29uID0ge307CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUubG9hZGRpY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF90aGlzNS5zdGF0dXMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczUuZGF0YS51cmwgPT0gbnVsbCB8fCBfdGhpczUuZGF0YS51cmwgPT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhbGVydCgi4LiB4Lij4Li44LiT4Liy4LiB4Lij4Lit4LiBIFVSTCIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNDE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNS5kYXRhLmNvbnRlbnQgPT0gbnVsbCB8fCBfdGhpczUuZGF0YS5jb250ZW50ID09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYWxlcnQoIuC4geC4o+C4uOC4k+C4suC4geC4o+C4reC4geC4guC5ieC4reC4hOC4p+C4suC4oeC5guC4huC4qeC4k+C4siIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNDE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfdGhpczUuZGF0YS5jb250ZW50LnJlcGxhY2VBbGwoLyhbXHVFMDAwLVx1RjhGRl18XHVEODNDW1x1REYwMC1cdURGRkZdfFx1RDgzRFtcdURDMDAtXHVEREZGXSkvZywgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKD86W1x1MjcwMC1cdTI3YmZdfCg/Olx1ZDgzY1tcdWRkZTYtXHVkZGZmXSl7Mn18W1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdfFtcdTAwMjMtXHUwMDM5XVx1ZmUwZj9cdTIwZTN8XHUzMjk5fFx1MzI5N3xcdTMwM2R8XHUzMDMwfFx1MjRjMnxcdWQ4M2NbXHVkZDcwLVx1ZGQ3MV18XHVkODNjW1x1ZGQ3ZS1cdWRkN2ZdfFx1ZDgzY1x1ZGQ4ZXxcdWQ4M2NbXHVkZDkxLVx1ZGQ5YV18XHVkODNjW1x1ZGRlNi1cdWRkZmZdfFx1ZDgzY1tcdWRlMDEtXHVkZTAyXXxcdWQ4M2NcdWRlMWF8XHVkODNjXHVkZTJmfFx1ZDgzY1tcdWRlMzItXHVkZTNhXXxcdWQ4M2NbXHVkZTUwLVx1ZGU1MV18XHUyMDNjfFx1MjA0OXxbXHUyNWFhLVx1MjVhYl18XHUyNWI2fFx1MjVjMHxbXHUyNWZiLVx1MjVmZV18XHUwMGE5fFx1MDBhZXxcdTIxMjJ8XHUyMTM5fFx1ZDgzY1x1ZGMwNHxbXHUyNjAwLVx1MjZGRl18XHUyYjA1fFx1MmIwNnxcdTJiMDd8XHUyYjFifFx1MmIxY3xcdTJiNTB8XHUyYjU1fFx1MjMxYXxcdTIzMWJ8XHUyMzI4fFx1MjNjZnxbXHUyM2U5LVx1MjNmM118W1x1MjNmOC1cdTIzZmFdfFx1ZDgzY1x1ZGNjZnxcdTI5MzR8XHUyOTM1fFtcdTIxOTAtXHUyMWZmXSkvZywgIiAiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1x1ZDgzZFtcdWRlMDAtXHVkZTRmXS9nLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxyXG58XG58XHIpL2dtLCAiICIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCLigKIiLCAiIik7CiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIrIiwgIiIpOwogICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXy9sXyIsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhbXHUyNzAwLVx1MjdCRl18W1x1RTAwMC1cdUY4RkZdfFx1RDgzQ1tcdURDMDAtXHVERkZGXXxcdUQ4M0RbXHVEQzAwLVx1REZGRl18W1x1MjAxMS1cdTI2RkZdfFx1RDgzRVtcdUREMTAtXHVEREZGXSkvZywgIiAiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5maW5kZmRhKGNvbnRlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgX3RoaXM1LmZkYSA9IF9jb250ZXh0MTcuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzNS5mZGEpOwogICAgICAgICAgICAgICAgc2VsZWN0cHJvID0gewogICAgICAgICAgICAgICAgICB1cmw6IF90aGlzNS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzNS5jdXJyZW50VXNlci5pZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDQxOwogICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdF90b2tlbihzZWxlY3Rwcm8pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KHJlcykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTYpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnByb2R1Y3RfdG9rZW4gPSByZXMuZGF0YS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5wcm9kdWN0X3Rva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSsnL3dvcmt0b2tlbmRlc2M/dGV4dD0nICsgY29udGVudCk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JrdG9rZW5kZXNjP3RleHQ9JyArIGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvd29yZHRva2VuZGVzYyIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDE1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBzZW50ZW5jZSA9IHJlcy5kYXRhLnNlbnRlbnQucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IF90aGlzNS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2U6IGNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlX2tleXdvcmQ6IHJlcy5kYXRhLnNlbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfaWQ6IHJlcy5kYXRhLmtleXdvcmRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfdGhpczUucHJvZHVjdF90b2tlbiA9PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuY3JlYXRlcHJvZHVjdF90b2tlbihkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkocHJvZHVjdHRva2VuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3R0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUucHJvZHVjdF90b2tlbiA9IHByb2R1Y3R0b2tlbi5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuY2hlY2tmZGEoY29udGVudCwgX3RoaXM1LnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9kdWN0dG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnByb2R1Y3RfdG9rZW4gPSBwcm9kdWN0dG9rZW4uZGF0YS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy9jb25zb2xlLmxvZyhjb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZCIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wMywgciwgc2VudGVuY2V0b2tlbiwgYWR2ZXJ0aXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wMyA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfbG9vcDMocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2xvb3AzJChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gcmVzLmRhdGFbcl0uc2VudGVudC5yZXBsYWNlQWxsKCciJywgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCI8c3BhbnN0eWxlIiwgIjxzcGFuIHN0eWxlIik7IC8vIHNlbnRlbmNldG9rZW4gPSBzZW50ZW5jZXRva2VuLnJlcGxhY2VBbGwoJyJjb2xvcjpyZWRcIicsJyJjb2xvcjpyZWQiJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmVydGlzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdG9rZW5faWQ6IF90aGlzNS5wcm9kdWN0X3Rva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOiByZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2lkOiByZXMuZGF0YVtyXS5kaWN0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9uYW1lOiByZXMuZGF0YVtyXS5kaWN0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW50OiBzZW50ZW5jZXRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuOiByZXMuZGF0YVtyXS5zZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFkdmVydGlzZVNlcnZpY2UuY3JlYXRlYWR2ZXJ0aXNlKGFkdmVydGlzZSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0cHJvdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyICsgMSA9PSByZXMuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRwcm90b2tlbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IF90aGlzNS5wcm9kdWN0X3Rva2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdGtleXdvcmQoZ2V0cHJvdG9rZW4pLnRoZW4oZnVuY3Rpb24gKHBybykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUudG9rZW5kYXRhKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9sb29wMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyIDwgcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5kZWxlZ2F0ZVlpZWxkKF9sb29wMyhyKSwgInQwIiwgNSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5nZXRkZXRhaWwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFkdmVydGlzZVNlcnZpY2UuZGVsZXRlYWR2ZXJ0aXNlKF90aGlzNS5wcm9kdWN0X3Rva2VuKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UudXBkYXRwcm9kdWN0X3Rva2VuKF90aGlzNS5wcm9kdWN0X3Rva2VuLCBkZXMpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmNoZWNrZmRhKGNvbnRlbnQsIF90aGlzNS5wcm9kdWN0X3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vY29uc29sZS5sb2coY29uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coY29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZCIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjE0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3A0LCByLCBzZW50ZW5jZXRva2VuLCBhZHZlcnRpc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wNCA9IGZ1bmN0aW9uIF9sb29wNChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXRva2VuID0gcmVzLmRhdGFbcl0uc2VudGVudC5yZXBsYWNlQWxsKCciJywgIiIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgiPHNwYW5zdHlsZSIsICI8c3BhbiBzdHlsZSIpOyAvLyBzZW50ZW5jZXRva2VuID0gc2VudGVuY2V0b2tlbi5yZXBsYWNlQWxsKCciY29sb3I6cmVkXCInLCciY29sb3I6cmVkIicpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VudGVuY2V0b2tlbiA9IHNlbnRlbmNldG9rZW4ucmVwbGFjZUFsbCgnImNvbG9yOnJlZFwiJywnImNvbG9yOnJlZCInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0aXNlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3Rva2VuX2lkOiBfdGhpczUucHJvZHVjdF90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZF9kaWN0X2lkOiByZXMuZGF0YVtyXS5rZXl3b3JkX2RpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfaWQ6IHJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfbmFtZTogcmVzLmRhdGFbcl0uZGljdF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW50OiBzZW50ZW5jZXRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW46IHJlcy5kYXRhW3JdLnNlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHZlcnRpc2VTZXJ2aWNlLmNyZWF0ZWFkdmVydGlzZShhZHZlcnRpc2UpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociArIDEgPT0gcmVzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldHByb3Rva2VuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczUucHJvZHVjdF90b2tlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRwcm9kdWN0a2V5d29yZChnZXRwcm90b2tlbikudGhlbihmdW5jdGlvbiAocHJvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm8uZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUudG9rZW5kYXRhKHByby5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IHJlcy5kYXRhLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDQocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE0KTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldE1heDogZnVuY3Rpb24gZ2V0TWF4KGFyciwgcHJvcCkgewogICAgICB2YXIgbWF4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAobWF4ID09IG51bGwgfHwgcGFyc2VJbnQoYXJyW2ldW3Byb3BdKSA+IHBhcnNlSW50KG1heFtwcm9wXSkpIG1heCA9IGFycltpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1heDsKICAgIH0sCiAgICBnZXRNYXhsZW5ndGg6IGZ1bmN0aW9uIGdldE1heGxlbmd0aChhcnIsIHByb3ApIHsKICAgICAgdmFyIG1heDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG1heCA9PSBudWxsIHx8IHBhcnNlSW50KGFycltpXVtwcm9wXSkgPiBwYXJzZUludChtYXhbcHJvcF0pKSBtYXggPSBhcnJbaV07CiAgICAgIH0KCiAgICAgIHJldHVybiBtYXg7CiAgICB9LAogICAgZ2V0QWxsTWF4QXJyYXk6IGZ1bmN0aW9uIGdldEFsbE1heEFycmF5KGFyciwgdmFsdWUpIHsKICAgICAgdmFyIGFycmF5ID0gW107CiAgICAgIGFyci5tYXAoZnVuY3Rpb24gKG51bSwgaWR4KSB7CiAgICAgICAgaWYgKG51bS5hbGxjb3VudCA9PSB2YWx1ZSkgewogICAgICAgICAgYXJyYXkucHVzaChhcnJbaWR4XSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIHRva2VuZGF0YTogZnVuY3Rpb24gdG9rZW5kYXRhKGxpc3QpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgdmFyIF9sb29wNSwgbCwgbWFwOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDIyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjIucHJldiA9IF9jb250ZXh0MjIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKGxpc3Qua2V5d29yZC5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2xvb3A1ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9sb29wNShsKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfbG9vcDUkKF9jb250ZXh0MjEpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIxLnByZXYgPSBfY29udGV4dDIxLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdC5rZXl3b3JkW2xdLmtleXdvcmRfZGljdF9pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGxpc3Qua2V5d29yZFtsXS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbGlzdC5rZXl3b3JkW2xdLmtleXdvcmRfZGljdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRfaWQ6IGxpc3Qua2V5d29yZFtsXS5kaWN0X2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2cobWFwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS5nZXRtYXBwcm9kdWN0KG1hcCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heHZhbHVlLCBpLCBiZXN0ZGF0YSwgYmVzdCwgcnVsZV9iYXNlZF9uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMC5wcmV2ID0gX2NvbnRleHQyMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4dmFsdWUgPSBfdGhpczYuZ2V0TWF4KHJlcy5kYXRhLCAiYWxsY291bnQiKTsgLy8gY29uc29sZS5sb2cobWF4dmFsdWUuYWxsY291bnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtYXh2YWx1ZS5hbGxjb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IF90aGlzNi5nZXRBbGxNYXhBcnJheShyZXMuZGF0YSwgbWF4dmFsdWUuYWxsY291bnQpOyAvLyBjb25zb2xlLmxvZyhpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdGRhdGEgPSBfdGhpczYuZ2V0TWF4KGksICJsZW5ndGgiKTsgLy8gY29uc29sZS5sb2coYmVzdGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldEFsbEluZGV4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhiZXN0ZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJlc3RkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXRBbGxJbmRleGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYmVzdGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbGlzdC5rZXl3b3JkW2xdLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudGVuY2U6IGJlc3RkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWUgPSBiZXN0ZGF0YS5uYW1lLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9uYW1lID0gcnVsZV9iYXNlZF9uYW1lLnJlcGxhY2VBbGwoIiwiLCAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocnVsZV9iYXNlZF9uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvbG9hZGRpY3Q/d29yZD0iICsgcnVsZV9iYXNlZF9uYW1lKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0YmVzdHJ1bGViYXNlZChiZXN0KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNihyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlYmFzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlYmFzZWQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRfcnVsZWJhc2VkOiByZXMuZGF0YS5jb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZV9ydWxlYmFzZTogcmVzLmRhdGEuc2VudGVuY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEucnVsZV9iYXNlZF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2Jhc2VkX25hbWU6IHJlcy5kYXRhLnJ1bGVfYmFzZWRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBfcnVsZV9iYXNlZF9pZDogcmVzLmRhdGEubWFwX2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJ1bGViYXNlZCk7IC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtsXS5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVydWxlYmFzZWQobGlzdC5rZXl3b3JkW2xdLmlkLCBydWxlYmFzZWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsICsgMSA9PSBsaXN0LmtleXdvcmQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuZ2V0ZGV0YWlsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfbG9vcDUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEobCA8IGxpc3Qua2V5d29yZC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmRlbGVnYXRlWWllbGQoX2xvb3A1KGwpLCAidDAiLCA1KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXM2LmdldGRldGFpbCgpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjb21wYXJlOiBmdW5jdGlvbiBjb21wYXJlKGxpc3QpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgX2xvb3A2ID0gZnVuY3Rpb24gX2xvb3A2KGspIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0LmtleXdvcmRba10pOwogICAgICAgIGRpY3RfaWQgPSBKU09OLnBhcnNlKGxpc3Qua2V5d29yZFtrXS5kaWN0X2lkKTsgLy8gdmFyIHJ1bGViYXNlZCA9IEpTT04ucGFyc2UobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlKQogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZWQpOwoKICAgICAgICBpZiAobGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlKSB7CiAgICAgICAgICB2YXIgdW5pcXVlQ2hhcnNydWxlID0gbGlzdC5rZXl3b3JkW2tdLnJ1bGViYXNlLmZpbHRlcihmdW5jdGlvbiAoYywgaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3Qua2V5d29yZFtrXS5ydWxlYmFzZS5pbmRleE9mKGMpID09PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGRpY3RfaWQuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiB1bmlxdWVDaGFyc3J1bGUuaW5kZXhPZihuKSAhPT0gLTE7CiAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coZmlsdGVyZWRBcnJheSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmlsdGVyZWRBcnJheScsZmlsdGVyZWRBcnJheSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGljdF9pZCcsZGljdF9pZC5sZW5ndGgpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coc3VtZGljdElkLmxlbmd0aCk7CgogICAgICAgICAgcGVyY2VudGFnZSA9IDEwMCAqIHBhcnNlSW50KGZpbHRlcmVkQXJyYXkubGVuZ3RoKSAvIHBhcnNlSW50KGRpY3RfaWQubGVuZ3RoKTsgLy8gY29uc29sZS5sb2cocGVyY2VudGFnZSk7CgogICAgICAgICAgbGlzdC5rZXl3b3JkW2tdLnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsaXN0LmtleXdvcmRba10ucGVyY2VudGFnZSA9IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAoayArIDEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgICAgICAgX3RoaXM3Lmxpc3QgPSBsaXN0OyAvLyB0aGlzLnN0YXR1cyA9IHRydWU7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsaXN0LmtleXdvcmQubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgZGljdF9pZDsKICAgICAgICB2YXIgZmlsdGVyZWRBcnJheTsKICAgICAgICB2YXIgcGVyY2VudGFnZTsKCiAgICAgICAgX2xvb3A2KGspOwogICAgICB9CiAgICB9LAogICAgZ2V0QWxsSW5kZXhlczogZnVuY3Rpb24gZ2V0QWxsSW5kZXhlcyhhcnIsIHZhbCkgewogICAgICB2YXIgaW5kZXhlcyA9IFtdLAogICAgICAgICAgaSA9IC0xOwoKICAgICAgd2hpbGUgKChpID0gYXJyLmluZGV4T2YodmFsLCBpICsgMSkpICE9IC0xKSB7CiAgICAgICAgaW5kZXhlcy5wdXNoKGkpOwogICAgICB9CgogICAgICByZXR1cm4gaW5kZXhlczsKICAgIH0sCiAgICBmaW5kZmRhOiBmdW5jdGlvbiBmaW5kZmRhKGRhdGEpIHsKICAgICAgdmFyIHRleHQgPSBbIuC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIl07IC8vIHZhciBlbmQgPSBbJyddCgogICAgICB2YXIgZmluZGZkYSA9IGRhdGE7CgogICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRleHQubGVuZ3RoOyB0KyspIHsKICAgICAgICBmaW5kZmRhID0gZmluZGZkYS5zdWJzdHJpbmcoZmluZGZkYS5pbmRleE9mKHRleHRbdF0pLCBkYXRhLmxlbmd0aCk7CiAgICAgICAgdmFyIGVuZGluZGV4ID0gdGhpcy5nZXRBbGxJbmRleGVzKGZpbmRmZGEsICIgIik7CiAgICAgICAgZmluZGZkYSA9IGZpbmRmZGEuc3Vic3RyaW5nKGZpbmRmZGEuaW5kZXhPZih0ZXh0W3RdKSwgZW5kaW5kZXhbMV0pOwogICAgICB9IC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwoKCiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIuC4q+C4oeC4suC4ouC5gOC4peC4guC5g+C4muC4reC4meC4uOC4jeC4suC4lS/guK3guKIuIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCItIiwgIiIpOwogICAgICBmaW5kZmRhID0gZmluZGZkYS5yZXBsYWNlQWxsKCLigJMiLCAiIik7CiAgICAgIGZpbmRmZGEgPSBmaW5kZmRhLnJlcGxhY2VBbGwoIiAiLCAiIik7IC8vIGNvbnNvbGUubG9nKGZpbmRmZGEpOwogICAgICAvLyB2YXIgcmVnZXggPSAvXGQrL2c7CiAgICAgIC8vIHZhciBtYXRjaGVzID0gZmluZGZkYS5tYXRjaChyZWdleCk7ICAvLyBjcmVhdGVzIGFycmF5IGZyb20gbWF0Y2hlcwogICAgICAvLyBjb25zb2xlLmxvZyhtYXRjaGVzWzBdKTsKCiAgICAgIHJldHVybiBmaW5kZmRhOwogICAgfSwKICAgIGNoZWNrZmRhOiBmdW5jdGlvbiBjaGVja2ZkYShjb250ZW50LCBpZCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmRhKTsKCiAgICAgIGlmICh0aGlzLmZkYSkgewogICAgICAgIHZhciBmZGEgPSB0aGlzLmZkYTsKICAgICAgICB2YXIgcHJvZHVjdF9zdGF0dXMgPSAwOwogICAgICAgIHZhciB1cmwgPSAiaHR0cHM6Ly90YXdhaWZvcmhlYWx0aC5vcmcvYXBpL29yeW9yL2NoZWNrLXByb2R1Y3QiOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgbnVtYmVyX3NyYzogZmRhCiAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgICAgIH07CiAgICAgICAgZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgIF90aGlzOC5wcm9kdWN0LnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgICAgICBkZXRhaWw6IGNvbnRlbnQsCiAgICAgICAgICAgICAgZmRhOiBfdGhpczguZmRhLAogICAgICAgICAgICAgIGNuY25tOiAiLSIsCiAgICAgICAgICAgICAgdHlwZXBybzogIi0iLAogICAgICAgICAgICAgIGxjbm5vOiAiLSIsCiAgICAgICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICAgICAgcHJvZHVjZW5nOiAiLSIsCiAgICAgICAgICAgICAgbGljZW46ICItIiwKICAgICAgICAgICAgICBBZGRyOiAiLSIsCiAgICAgICAgICAgICAgTmV3Y29kZTogIi0iLAogICAgICAgICAgICAgIHN0YXR1czogIi0iLAogICAgICAgICAgICAgIHRva2VuOiAiIgogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzOC5wcm9jaGVjayA9IHsKICAgICAgICAgICAgICBmZGE6IF90aGlzOC5mZGEsCiAgICAgICAgICAgICAgbWFwZmRhOiAiLSIsCiAgICAgICAgICAgICAgY25jbm06ICItIiwKICAgICAgICAgICAgICBwcm9kdWN0aGE6ICItIiwKICAgICAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgICAgICBuYW1lOiAiLSIsCiAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IDAsCiAgICAgICAgICAgICAgY2F0X3N0YXR1czogMCwKICAgICAgICAgICAgICBmZGFfc3RhdHVzOiAwLAogICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiAwLAogICAgICAgICAgICAgIHR5cGVwcm86ICItIiwKICAgICAgICAgICAgICB0eXBlOiAiLSIKICAgICAgICAgICAgfTsgLy8gdGhpcy5zdGF0dXMgPSB0cnVlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5jbmNubS5pbmNsdWRlcygi4LiE4LiH4Lit4Lii4Li54LmIIikpCiAgICAgICAgICAgIGlmIChkYXRhLmNuY25tLmluY2x1ZGVzKCLguITguIfguK3guKLguLnguYgiKSkgewogICAgICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzID0gMTsKICAgICAgICAgICAgICBfdGhpczguY29sb3JmZGEgPSAiYmFja2dyb3VuZC1jb2xvcjojYTNlOWE0IjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1cyA9IDM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOC5jb2xvcmZkYSk7CiAgICAgICAgICAgIHZhciBjb24gPSB7CiAgICAgICAgICAgICAgZmRhOiBmZGEsCiAgICAgICAgICAgICAgcHJvZHVjdGhhOiBkYXRhLnByb2R1Y3RoYSwKICAgICAgICAgICAgICBwcm9kdWNlbmc6IGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgIHR5cGVwcm86IGRhdGEudHlwZXBybywKICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGF4aW9zLnBvc3QoTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpICsgIi9jaGVja2ZkYSIsIGNvbikudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjE4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAocmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMCQoX2NvbnRleHQyMykgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmRhOiBmZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9zdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNhdF9zdGF0dXM6IHJlcy5kYXRhLm1hcGNhdHN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICBmZGFfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lX3N0YXR1czogcmVzLmRhdGEubWFwbmFtZXN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBjb25zb2xlLmxvZyhwcm8pOwoKICAgICAgICAgICAgICAgICAgICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS51cGRhdGVtYXAoaWQsIHBybykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9kdWN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5wcm9kdWN0aGEgKyAiICIgKyBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogY29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY25jbm06IGRhdGEuY25jbm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlcHJvOiBkYXRhLnR5cGVwcm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsY25ubzogZGF0YS5sY25ubywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RoYTogZGF0YS5wcm9kdWN0aGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWNlbmc6IGRhdGEucHJvZHVjZW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGljZW46IGRhdGEubGljZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRyOiBkYXRhLkFkZHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOZXdjb2RlOiBkYXRhLk5ld2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHByb2R1Y3Rfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHJlcy5kYXRhLnRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9jaGVjayA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkYTogZmRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwZmRhOiBkYXRhLmxjbm5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY25jbm06IGRhdGEuY25jbm0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aGE6IGRhdGEucHJvZHVjdGhhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZW5nOiBkYXRhLnByb2R1Y2VuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X3N0YXR1czogcHJvZHVjdF9zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRfc3RhdHVzOiByZXMuZGF0YS5tYXBjYXRzdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZGFfc3RhdHVzOiBwcm9kdWN0X3N0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVfc3RhdHVzOiByZXMuZGF0YS5tYXBuYW1lc3RhdHVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXBybzogZGF0YS50eXBlcHJvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEuY2F0ZWdvcnkKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jb2xvcmNhdCA9IHJlcy5kYXRhLmNvbG9yY2F0OwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jb2xvcm5hbWUgPSByZXMuZGF0YS5jb2xvcm5hbWU7IC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9jaGVjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mZGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjApOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDEyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSgpKTsgLy8gdGhpcy5zdGF0dXMgPSB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcm9kdWN0LnB1c2goewogICAgICAgICAgbmFtZTogIi0iLAogICAgICAgICAgZGV0YWlsOiBjb250ZW50LAogICAgICAgICAgZmRhOiB0aGlzLmZkYSwKICAgICAgICAgIGNuY25tOiAiLSIsCiAgICAgICAgICB0eXBlcHJvOiAiLSIsCiAgICAgICAgICBsY25ubzogIi0iLAogICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgIGxpY2VuOiAiLSIsCiAgICAgICAgICBBZGRyOiAiLSIsCiAgICAgICAgICBOZXdjb2RlOiAiLSIsCiAgICAgICAgICBzdGF0dXM6ICItIiwKICAgICAgICAgIHRva2VuOiAiIgogICAgICAgIH0pOwogICAgICAgIHRoaXMucHJvY2hlY2sgPSB7CiAgICAgICAgICBmZGE6IHRoaXMuZmRhLAogICAgICAgICAgbWFwZmRhOiAiLSIsCiAgICAgICAgICBjbmNubTogIi0iLAogICAgICAgICAgcHJvZHVjdGhhOiAiLSIsCiAgICAgICAgICBwcm9kdWNlbmc6ICItIiwKICAgICAgICAgIG5hbWU6ICItIiwKICAgICAgICAgIHByb2R1Y3Rfc3RhdHVzOiAwLAogICAgICAgICAgY2F0X3N0YXR1czogMCwKICAgICAgICAgIGZkYV9zdGF0dXM6IDAsCiAgICAgICAgICBuYW1lX3N0YXR1czogMCwKICAgICAgICAgIHR5cGVwcm86ICItIiwKICAgICAgICAgIHR5cGU6ICItIgogICAgICAgIH07IC8vIHRoaXMuc3RhdHVzID0gdHJ1ZQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgey8vICAgICB2YXIgYmVzdCA9IHsKICAgIC8vICAgICAiaWQiOiA2NywKICAgIC8vICAgICAic2VudGVuY2UiOiB7CiAgICAvLyAgICAgICAgICJsZW5ndGgiOiAyLAogICAgLy8gICAgICAgICAiYWxsY291bnQiOiAxMDAsCiAgICAvLyAgICAgICAgICJydWxlIjogWwogICAgLy8gICAgICAgICAgICAgODg5OSwKICAgIC8vICAgICAgICAgICAgIDU3CiAgICAvLyAgICAgICAgIF0sCiAgICAvLyAgICAgICAgICJuYW1lIjogWwogICAgLy8gICAgICAgICAgICAgIuC4hOC4p+C4muC4hOC4uOC4oSIsCiAgICAvLyAgICAgICAgICAgICAi4LiZ4LmJ4Liz4Lir4LiZ4Lix4LiBIgogICAgLy8gICAgICAgICBdLAogICAgLy8gICAgICAgICAibWFwX2lkIjogNzUKICAgIC8vICAgICB9CiAgICAvLyB9CiAgICAvLyAgICAgICAgICAgICAgICAgICBNYXBSdWxlQmFzZWRTZXJ2aWNlLmdldGJlc3RydWxlYmFzZWQoYmVzdCkudGhlbigKICAgIC8vICAgICAgICAgICAgICAgICAgICAgIChyZXMpID0+IHsKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgLy8gdmFyIHRleHQgPSAn4Lir4Lih4Liy4Lii4LmA4Lil4LiC4LmD4Lia4Lit4LiZ4Li44LiN4Liy4LiVL+C4reC4oi4gMTMtMS0xMzQ2NS01LTAwNTIg4LiI4Liz4LiZ4Lin4LiZ4Liq4Li04LiZ4LiE4LmJ4LiyIDQxNSDguKrguYjguIfguIjguLLguIEnCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbmRmZGEodGV4dCkpOwogICAgLy8gdGhpcy5kYXRhLnVybCA9CiAgICAvLyAgICJodHRwczovL3Nob3BlZS5jby50aC8lRTIlOTklQTYlRUYlQjglOEYlRTAlQjklODIlRTAlQjglODklRTAlQjglQTElRTAlQjklODMlRTAlQjglQUIlRTAlQjglQTElRTAlQjklODgtJUUwJUI4JTgyJUUwJUI4JUFEJUUwJUI4JTg3JUUwJUI5JTgxJUUwJUI4JTk3JUUwJUI5JTg5JUUyJTk5JUE2JUVGJUI4JThGLSVFMCVCOCU4MiVFMCVCOCVCMiVFMCVCOCVBMiVFMCVCOCU5NCVFMCVCOCVCNSVFMCVCOCVBMSVFMCVCOCVCMiVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYtJUUwJUI4JUE1JUUwJUI4JUI0JUUwJUI5JTgyJUUwJUI4JThCJUUwJUI5JTg4LSVFMCVCOCU5RSVFMCVCOCVBNSVFMCVCOCVCMSVFMCVCOCVBQS0lRTIlODAlOEItY29mZmVlLWxpc2hvdS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglODQlRTAlQjglQTclRTAlQjglOUElRTAlQjglODQlRTAlQjglQjglRTAlQjglQTElRTAlQjglOTklRTAlQjklODklRTAlQjglQjMlRTAlQjglQUIlRTAlQjglOTklRTAlQjglQjElRTAlQjglODEtJUUwJUI4JTgxJUUwJUI4JUIyJUUwJUI5JTgxJUUwJUI4JTlGJUUwJUI4JTg0JUUwJUI4JUI4JUUwJUI4JUExJUUwJUI4JUFCJUUwJUI4JUI0JUUwJUI4JUE3LSVFMCVCOCU4MSVFMCVCOCVCMiVFMCVCOSU4MSVFMCVCOCU5RiVFMCVCOCVBNSVFMCVCOCU5NCVFMCVCOCU5OSVFMCVCOSU4OSVFMCVCOCVCMyVFMCVCOCVBQiVFMCVCOCU5OSVFMCVCOCVCMSVFMCVCOCU4MS0lRTAlQjglODElRTAlQjglQjIlRTAlQjklODElRTAlQjglOUYlRTAlQjglQTUlRTAlQjglOTQlRTAlQjglODQlRTAlQjglQTclRTAlQjglQjIlRTAlQjglQTElRTAlQjglQUQlRTAlQjklODklRTAlQjglQTclRTAlQjglOTkiOwogICAgLy8gdGhpcy5kYXRhLmNvbnRlbnQgPQogICAgLy8gICAi77iP4LiW4LmJ4Liy4LmA4Lib4LmH4LiZ4Lil4Li54LiB4LiE4LmJ4Liy4Lie4Li04Lih4LmB4Lil4LmJ4LinIOC4lOC4ueC5geC4peC4iOC4meC4meC5ieC4s+C4q+C4meC4seC4geC4peC4lOC5gOC4peC4ouC4hOC5iOC4sCDguKrguLHguYjguIfguIvguLfguYnguK3guKrguLTguJnguITguYnguLLguYHguKXguYnguKcg4LiX4Lix4LiB4LmB4LiK4LiX4Lih4Liy4LiE4Li44Lii4LiB4Lix4LiZ4LmE4LiU4LmJ4LmA4Lil4Lii4LiE4LmI4LiwIjsKICAgIC8vIC8vIHZhciB1cmwgPSB0aGlzLmRhdGEudXJsLnNwbGl0KCctaS4nKQogICAgLy8gdmFyIGNvbnRlbnQgPSB0aGlzLmRhdGEuY29udGVudC5yZXBsYWNlQWxsKAogICAgLy8gICAvKFtcdUUwMDAtXHVGOEZGXXxcdUQ4M0NbXHVERjAwLVx1REZGRl18XHVEODNEW1x1REMwMC1cdURERkZdKS9nLAogICAgLy8gICAiIgogICAgLy8gKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoCiAgICAvLyAgIC8oPzpbXHUyNzAwLVx1MjdiZl18KD86XHVkODNjW1x1ZGRlNi1cdWRkZmZdKXsyfXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1MDAyMy1cdTAwMzldXHVmZTBmP1x1MjBlM3xcdTMyOTl8XHUzMjk3fFx1MzAzZHxcdTMwMzB8XHUyNGMyfFx1ZDgzY1tcdWRkNzAtXHVkZDcxXXxcdWQ4M2NbXHVkZDdlLVx1ZGQ3Zl18XHVkODNjXHVkZDhlfFx1ZDgzY1tcdWRkOTEtXHVkZDlhXXxcdWQ4M2NbXHVkZGU2LVx1ZGRmZl18XHVkODNjW1x1ZGUwMS1cdWRlMDJdfFx1ZDgzY1x1ZGUxYXxcdWQ4M2NcdWRlMmZ8XHVkODNjW1x1ZGUzMi1cdWRlM2FdfFx1ZDgzY1tcdWRlNTAtXHVkZTUxXXxcdTIwM2N8XHUyMDQ5fFtcdTI1YWEtXHUyNWFiXXxcdTI1YjZ8XHUyNWMwfFtcdTI1ZmItXHUyNWZlXXxcdTAwYTl8XHUwMGFlfFx1MjEyMnxcdTIxMzl8XHVkODNjXHVkYzA0fFtcdTI2MDAtXHUyNkZGXXxcdTJiMDV8XHUyYjA2fFx1MmIwN3xcdTJiMWJ8XHUyYjFjfFx1MmI1MHxcdTJiNTV8XHUyMzFhfFx1MjMxYnxcdTIzMjh8XHUyM2NmfFtcdTIzZTktXHUyM2YzXXxbXHUyM2Y4LVx1MjNmYV18XHVkODNjXHVkY2NmfFx1MjkzNHxcdTI5MzV8W1x1MjE5MC1cdTIxZmZdKS9nLAogICAgLy8gICAiIgogICAgLy8gKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcclxufFxufFxyKS9nbSwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiXyIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiEiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCIqIiwgIiIpOwogICAgLy8gY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgiJiIsICIiKTsKICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoIiMiLCAiIik7CiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGBfL2xcX2AsICIiKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgLy8gLy8gY29uc29sZS5sb2coTGlua1NlcnZpY2UuZ2V0cHl0aG9ubGluaygpKycvd29yZHRva2VuZGVzYz90ZXh0PScgKyBjb250ZW50KTsKICAgIC8vIC8vIGF4aW9zLmdldChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkrJy93b3JkdG9rZW5kZXNjP3RleHQ9Jytjb250ZW50KS50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgIC8vIC8vICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgLy8gLy8gfSkKICAgIC8vIGNvbnNvbGUubG9nKExpbmtTZXJ2aWNlLmdldHB5dGhvbmxpbmsoKSArICIvY2hlY2trZXl3b3JkP3RleHQ9IiArIGNvbnRlbnQpOwogICAgLy8gdmFyIGNvbiA9IHsKICAgIC8vICAgY29udGVudDogY29udGVudCwKICAgIC8vIH07CiAgICAvLyBheGlvcwogICAgLy8gICAucG9zdChMaW5rU2VydmljZS5nZXRweXRob25saW5rKCkgKyAiL2NoZWNra2V5d29yZD90ZXh0PSIgKyBjb250ZW50LCBjb24pCiAgICAvLyAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAgICAgLy8gICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXMuZGF0YS5sZW5ndGg7IHIrKykgewogICAgLy8gICAgIC8vICAgICAgICAgdmFyIGFkdmVydGlzZSA9IHsKICAgIC8vICAgICAvLyAgICAgICAgICAgcHJvZHVjdF90b2tlbl9pZDoxLAogICAgLy8gICAgIC8vICAgICAgICAgICBrZXl3b3JkX2RpY3RfaWQ6cmVzLmRhdGFbcl0ua2V5d29yZF9kaWN0X2lkLAogICAgLy8gICAgIC8vICAgICAgICAgICBkaWN0X2lkOnJlcy5kYXRhW3JdLmRpY3RfaWQsCiAgICAvLyAgICAgLy8gICAgICAgICAgIGRpY3RfbmFtZTpyZXMuZGF0YVtyXS5kaWN0X25hbWUsCiAgICAvLyAgICAgLy8gICAgICAgICAgIHNlbjpyZXMuZGF0YVtyXS5zZW4sCiAgICAvLyAgICAgLy8gICAgICAgICAgIHNlbnRlbnQ6cmVzLmRhdGFbcl0uc2VudGVudCwKICAgIC8vICAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAvLyAgICAgICAgIEFkdmVydGlzZVNlcnZpY2UuY3JlYXRlYWR2ZXJ0aXNlKGFkdmVydGlzZSkudGhlbigocmVzKT0+ewogICAgLy8gICAgIC8vICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAvLyAgICAgLy8gICAgICAgICB9KQogICAgLy8gICAgIC8vICAgICAgIH0KICAgIC8vICAgfSk7CiAgICAvLyAvLyAgY29uc29sZS5sb2codXJsKTsKICAgIC8vIC8vICAgICB2YXIgc2VsZWN0cHJvID0gewogICAgLy8gLy8gICAgICAgdXJsOnVybFswXQogICAgLy8gLy8gICAgICB9CiAgICAvLyAvLyAgICAgIE1hcFJ1bGVCYXNlZFNlcnZpY2UuZ2V0cHJvZHVjdF90b2tlbihzZWxlY3Rwcm8pLnRoZW4oKHJlcyk9PnsKICAgIC8vIC8vICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgIC8vIC8vIHZhciBsaXN0ID0gcmVzLmRhdGEKICAgIC8vIC8vIHRoaXMudG9rZW5kYXRhKGxpc3QpCiAgICAvLyAvLyBmb3IgKGxldCBsID0gMDsgbCA8IGxpc3Qua2V5d29yZC5sZW5ndGg7IGwrKykgewogICAgLy8gLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3Qua2V5d29yZFtsXS5tYXApOwogICAgLy8gLy8gICAvLyBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMubGlzdC5rZXl3b3JkW2xdLmxlbmd0aDsgbSsrKSB7CiAgICAvLyAvLyAgICAgaWYgKGxpc3Qua2V5d29yZFtsXS5tYXApIHsKICAgIC8vIC8vICAgICAgIHZhciBtYXAgPSB7CiAgICAvLyAvLyAgICAgdXJsOkpTT04uc3RyaW5naWZ5KGxpc3Qua2V5d29yZFtsXS5tYXApCiAgICAvLyAvLyAgICAgIH0KICAgIC8vIC8vICAgICAvLyAgY29uc29sZS5sb2cobWFwKTsKICAgIC8vIC8vICAgICAgTWFwUnVsZUJhc2VkU2VydmljZS5nZXRtYXBwcm9kdWN0KG1hcCkudGhlbigocmVzKT0+ewogICAgLy8gLy8gICAgICAgbGlzdC5rZXl3b3JkW2xdLnJ1bGViYXNlID0gcmVzLmRhdGEKICAgIC8vIC8vICAgICAgIGlmIChsKzEgPT0gbGlzdC5rZXl3b3JkLmxlbmd0aCkgewogICAgLy8gLy8gICAgICAgICB0aGlzLmNvbXBhcmUobGlzdCkKICAgIC8vIC8vICAgICAgIH0KICAgIC8vIC8vICAgICAgfSk7CiAgICAvLyAvLyAgICAgfQogICAgLy8gLy8gICB9CiAgICAvLyAvLyB9CiAgICAvLyAvLyBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgLy8gdGhpcy5zdGF0dXMgPSB0cnVlOwogICAgLy8gLy8gIH0pCiAgfQp9Ow=="},{"version":3,"mappings":"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BAXA;AAYArI,qBAZA;AAaAsI;AAbA;AAeA;AACA7G,uBADA;AAEA8G,qBAFA;AAGAT,oBAHA;AAIAG,wBAJA;AAKAC,wBALA;AAMA9I,mBANA;AAOAoJ,2BAPA;AAQAC,uBARA;AASAC,uBATA;AAUAC,wBAVA;AAWAZ,sBAXA;AAYAzH;AAZA,UAhBA,CA+BA;AACA;AACA;AAnzBA,GAnDA;AAw2BAuI,SAx2BA,qBAw2BA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAz8BA","names":["name","components","ClipLoader","data","color","size","margin","radius","loading","list","url","file","status","urlPath","imagelists","tokenize","matchname","matchcategory","type","matchnamesum","statusname","statuscat","statusfda","colorname","colorfda","colorcat","id","keyword","colorkey","desc","arrList","alldata","back","next","product_token","title","key","fda","product","procheck","computed","currentUser","methods","clear","cut","mapname","save","alert","KeywordService","DictService","document","getpercentage","savetorule","sen","answer","d","iddata","sql","RuleBasedService","text","rule_based_id","dict_id","MapRuleBasedService","res","updatemaprule","then","savetorule_based","console","keyword_id","advertise_id","user","map_dict","map_id","sendata","JSON","rule","map_rule_based_id","dict_name","no","checkkeyword","axios","get","LinkService","content","post","con","finddescription","findfda","loaddict","getdetail","search","selectpro","des","sentence","sentence_keyword","r","sentencetoken","advertise","product_token_id","keyword_dict_id","sentent","AdvertiseService","getprotoken","replaceAll","getMax","arr","prop","max","getMaxlength","getAllMaxArray","value","array","tokendata","l","map","maxvalue","i","bestdata","best","rule_based_name","rulebased","count_rulebased","sentence_rulebase","compare","k","filteredArray","percentage","getAllIndexes","val","indexes","checkfda","number_src","method","headers","Accept","body","fetch","detail","cncnm","typepro","lcnno","productha","produceng","licen","Addr","Newcode","token","mapfda","product_status","cat_status","fda_status","name_status","pro","mounted"],"sourceRoot":"src/components","sources":["producttoken.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div>\n        <div class=\"form-group mt-5\">\n          <label for=\"exampleFormControlTextarea1\">URL</label>\n          <textarea\n            v-model=\"data.url\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"3\"\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlTextarea1\">Content</label>\n          <textarea\n            v-model=\"data.content\"\n            class=\"form-control\"\n            id=\"exampleFormControlTextarea1\"\n            rows=\"7\"\n          ></textarea>\n        </div>\n        <button @click=\"search()\" type=\"submit\" class=\"mb-3 btn btn-success\">\n          </button\n        >&nbsp;\n        <button @click=\"clear()\" type=\"submit\" class=\"mb-3 btn btn-danger\">\n          \n        </button>\n      </div>\n      <table class=\"table table-bordered\" v-if=\"status\">\n        <thead>\n          <tr>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n               1\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              .\n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n            <th\n              scope=\"col\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #ffb454;\n              \"\n            >\n              \n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td :style=\"colorfda\"></td>\n            <td :style=\"colorfda\">{{ procheck.mapfda }}</td>\n            <td :style=\"colorfda\">{{ procheck.fda }}</td>\n            <td :style=\"colorfda\">{{ procheck.cncnm }}</td>\n            <td\n              v-if=\"\n                procheck.cat_status &&\n                procheck.name_status &&\n                procheck.fda_status == 1\n              \"\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #a3e9a4;\n              \"\n            >\n              <span></span>\n            </td>\n            <td\n              v-else\n              rowspan=\"3\"\n              style=\"\n                text-align: center;\n                vertical-align: middle;\n                background-color: #f9bdbb;\n              \"\n            >\n              <span></span>\n            </td>\n          </tr>\n          <tr>\n            <td :style=\"colorcat\"></td>\n            <td :style=\"colorcat\">{{ procheck.typepro }}</td>\n            <td :style=\"colorcat\">\n              <span v-if=\"procheck.typepro\">{{ procheck.type }}</span\n              ><span v-else>-</span>\n            </td>\n            <td :style=\"colorcat\">\n              <span v-if=\"procheck.cat_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n          <tr>\n            <td :style=\"colorname\"></td>\n            <td :style=\"colorname\">\n              {{ procheck.productha }}<br />{{ procheck.produceng }}\n            </td>\n            <td :style=\"colorname\"><span v-html=\"procheck.name\"></span></td>\n            <td :style=\"colorname\">\n              <span v-if=\"procheck.name_status\"></span\n              ><span v-else></span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table table-bordered mt-3 mb-5\" v-if=\"status\">\n        <tbody>\n          <tr>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n               2\n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              \n            </th>\n            <th style=\"background-color: #ffb454; vertical-align: middle\">\n              \n            </th>\n          </tr>\n          <tr>\n            <td :style=\"colorkey\"></td>\n            <td :style=\"colorkey\" style=\"width: 40%\">\n              <span v-html=\"list.sentence_keyword\"></span>\n            </td>\n            <!-- <th :style=\"colorkey\"></th> -->\n            <td :style=\"colorkey\" v-if=\"list.keyword != 0\">\n              <tr v-for=\"(k, i) in list.keyword\" :key=\"i\">\n                <td>\n                  <span v-html=\"k.sentence_rulebase\"></span><br /><br />\n                  <span v-for=\"(s, idx) in k.rule_based_name\" :key=\"idx\">{{\n                    s\n                  }}</span>\n                  <br /><br />\n                  <span v-if=\"k.count_rulebased\"\n                    > {{ getpercentage(k) }}%</span\n                  ><br /><br />\n                  <div style=\"text-align: left\">\n                    <button\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#AddScopusToken\"\n                      type=\"submit\"\n                      class=\"mb-3 btn btn-success\"\n                    >\n                      <i class=\"fa fa-plus\" aria-hidden=\"true\">\n                         keyword</i\n                      >\n                    </button>\n                  </div>\n                </td>\n                <td>\n                  <span v-if=\"k.answer == 1\"></span\n                  ><span v-if=\"k.answer == 9\"></span\n                  ><span v-if=\"k.answer == 0\"></span>\n                </td>\n\n                <td>\n                  <button\n                    @click=\"savetorule_based(k, 1)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-success\"\n                  >\n                    <i class=\"fa fa-check\"></i></button\n                  >&nbsp;\n                  <button\n                    @click=\"savetorule_based(k, 9)\"\n                    type=\"submit\"\n                    class=\"mb-3 btn btn-danger\"\n                  >\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </td>\n              </tr>\n            </td>\n            <td :style=\"colorkey\" v-else>\n              <tr>\n                \n              </tr>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <table class=\"table mt-3\" v-if=\"status\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">FDA</th>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">.</th>\n            <!-- <th scope=\"col\"></th> -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(l, i) in product\" :key=\"i\">\n            <td :style=\"l.bg\">{{ l.name }}</td>\n            <td :style=\"l.bg\">{{ l.detail }}</td>\n            <!-- <td :style=\"l.bg\">\n              <div class=\"row\">\n          <div class=\"col-md-2\" v-for=\"(im ,i) in imagelists\" :key=\"i\">\n            <img :src=\"im\" width=\"100%\"/>\n          </div>\n        </div>\n            </td> -->\n            <td :style=\"l.bg\" style=\"width: 300px\">\n              <div>\n                 : {{ l.fda }}<br />\n                <!-- : <span v-html=\"matchname\"></span> -->\n                <!-- : {{l.productha}} -->\n              </div>\n            </td>\n            <td :style=\"l.bg\">{{ cut(l.token) }}</td>\n            <td\n              style=\"background-color: #bdedff\"\n              v-if=\"l.status == 1 || l.status == 3\"\n            >\n              <p class=\"card-text\"> : {{ l.cncnm || \"\" }}</p>\n              <p class=\"card-text\">\n                 :<span> {{ l.typepro }}</span>\n              </p>\n              <p class=\"card-text\">\n                / : <span> {{ l.lcnno }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (TH) : <span> {{ l.productha }}</span>\n              </p>\n              <p class=\"card-text\">\n                 (EN) : <span> {{ l.produceng }}</span>\n              </p>\n              <p class=\"card-text\"> : {{ l.licen }}</p>\n              <p class=\"card-text\"> : {{ l.Addr }}</p>\n              <p class=\"card-text\">Newcode : {{ l.Newcode }}</p>\n            </td>\n            <td :style=\"l.bg\" v-else></td>\n            <!-- <td :style=\"l.bg\">\n            <i class=\"fa fa-circle\" :style=\"l.icon\" aria-hidden=\"true\"></i>\n          </td> -->\n          </tr>\n        </tbody>\n      </table>\n      <clip-loader :loading=\"loading\" :color=\"color\" :size=\"size\"></clip-loader>\n      <!-- Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"AddScopusToken\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ title }}</h5>\n            </div>\n            <div class=\"modal-body\">\n              <form>\n                <div class=\"card-body mt-3\">\n                  <div class=\"form-group mt-3\">\n                    <label></label>\n                    <input\n                      v-model=\"key.name\"\n                      type=\"text\"\n                      min=\"1\"\n                      class=\"form-control form-control-sm\"\n                    />\n                  </div>\n                </div>\n              </form>\n            </div>\n            <div class=\"modal-footer mt-3\">\n              <button type=\"button\" class=\"btn btn-success\" @click=\"save()\">\n                \n              </button>\n              <button\n                id=\"closedcategory\"\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// import ProductsService from '../services/ProductsService.js'\nimport DictService from \"../services/DictService\";\nimport RuleBasedService from \"../services/RuleBasedService\";\nimport MapRuleBasedService from \"../services/MapRuleBasedService\";\nimport LinkService from \"../services/LinkService\";\nimport AdvertiseService from \"../services/AdvertiseService\";\nimport KeywordService from \"../services/KeywordService\";\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue'\n\nexport default {\n  name: \"App\",\n  components: {\n    ClipLoader,\n  },\n  data() {\n    return {\n      color: '#5bc0de',\n      size: '50px',\n      margin: '2px',\n      radius: '2px',\n      loading:true,\n      list: [],\n      url: \"\",\n      file: \"\",\n      status: false,\n      urlPath: \"\",\n      imagelists: \"\",\n      tokenize: \"\",\n      matchname: \"\",\n      matchcategory: \"\",\n      type: \"\",\n      matchnamesum: \"\",\n      statusname: 0,\n      statuscat: 0,\n      statusfda: 0,\n      colorname: \"background-color:#f9bdbb\",\n      colorfda: \"background-color:#f9bdbb\",\n      colorcat: \"background-color:#f9bdbb\",\n      id: \"\",\n      keyword: [],\n      colorkey: \"background-color:#f9bdbb\",\n      desc: \"\",\n      arrList: [],\n      alldata: 0,\n      back: 0,\n      next: 0,\n      data: {},\n      product_token: 0,\n      title: \" keyword\",\n      key: {},\n      fda: \"\",\n      product: [],\n      procheck: [],\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  methods: {\n    clear() {\n      this.data = {};\n      this.product = [];\n      this.procheck = {};\n      this.status = false;\n    },\n    cut(data) {\n      data = data.filter((letter) => letter !== \" \");\n      var mapname = data.toString();\n\n      mapname = mapname.replaceAll(\",\", \" | \");\n      return mapname;\n    },\n    save() {\n      //console.log(this.key);\n      if (this.key.name == null || this.key.name == \"\") {\n        alert(\"\");\n      } else {\n        var prodata = {\n          name: this.key.name,\n          status: 1,\n        };\n        //console.log(prodata);\n        KeywordService.createkeyword(prodata).then((res) => {\n          //console.log(res.data);\n          if (res.data.err == 1062) {\n            alert(\"\");\n          } else {\n            DictService.createdict(prodata).then(() => {\n              //console.log(res.data );\n              // RuleBasedService.createdcolumnrule_based(res.data.id).then(() => {\n\n              document.getElementById(\"closedcategory\").click();\n              alert(\"\");\n              // })\n            });\n          }\n        });\n      }\n    },\n    getpercentage(data) {\n      // var dict = JSON.parse(data.dict_id)\n      // var rule_based_id = JSON.parse(data.rule_based_id)\n      // var re = (100 * data.count_rulebased)/ (rule_based_id.length)\n      return data.count_rulebased;\n    },\n    savetorule(sen, answer) {\n      // console.log(answer);\n      var iddata = [];\n\n      for (let d = 0; d < sen.length; d++) {\n        // console.log(datasplit[d]);\n        DictService.getdicts(\"\", sen[d]).then(async (res) => {\n          if (res.data.length > 0) {\n            // console.log(res.data[0].id);\n            iddata.push(res.data[0].id);\n          }\n          // console.log(d+1 , sen.length);\n          // console.log(iddata);\n          if (d + 1 == sen.length) {\n            var sql = `SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[${iddata}]'`;\n            // console.log(sql);\n\n            await RuleBasedService.getbydict(sql).then((res) => {\n              if (res.data.length == 0) {\n                let text = \"\";\n                text += \"{\";\n                for (let i = 0; i < iddata.length; i++) {\n                  // console.log(iddata[i]);\n                  text += '\"dict' + iddata[i] + '\"' + \":\" + 1 + \",\";\n                }\n                text += '\"answer' + '\"' + \":\" + answer + \",\";\n                text = text.slice(0, -1);\n                text += \"}\";\n                // console.log(text);\n                let jsonData = JSON.parse(text);\n                // console.log(jsonData);\n                RuleBasedService.createrule_based(jsonData).then((res) => {\n                  var maprule = {\n                    rule_based_id: res.data.id,\n                    dict_id: iddata,\n                    status: 1,\n                  };\n                  MapRuleBasedService.createmap_rule_based(maprule).then(() => {\n                    // console.log(res.data);\n                    // var pro = {\n                    //   map_rule_based:res.data.id\n                    // }\n                    // ProductsService.map_rule_based(id,pro).then(() => {\n                    alert(\"\");\n\n                    this.getdata();\n                    //               setTimeout(function () {\n                    //   location.reload();\n                    // }, 500);\n                    // });\n                  });\n                });\n              } else {\n                // console.log(res.data);\n                var updatemaprule = {\n                  answer: answer,\n                };\n                RuleBasedService.updaterule_based(\n                  res.data[0].id,\n                  updatemaprule\n                ).then(() => {\n                  alert(\"\");\n\n                  this.getdata();\n                });\n              }\n            });\n          }\n        });\n      }\n    },\n    savetorule_based(data, answer) {\n      // console.log(sen.length);\n      // console.log('answer',answer);\n      console.log(data);\n\n      var maprule = {\n        keyword_id: 1,\n        advertise_id: this.product_token,\n        status: 1,\n        answer: answer,\n        user: this.currentUser.id,\n        map_dict: JSON.parse(data.dict_id),\n      };\n      if (!data.mapId) {\n        MapRuleBasedService.checkintb(data.dict_id).then((check) => {\n          if (check.count == 1) {\n            alert(\" rule based \");\n          } else {\n            MapRuleBasedService.createmap_rule_based(maprule).then(\n              async (res) => {\n                // console.log(res.data);\n                var map_id = res.data.id;\n                var sendata = JSON.parse(data.dict_id);\n                // console.log(sendata);\n                // console.log(dict_name);\n                for (let d = 0; d < sendata.length; d++) {\n                  // console.log(sendata[d]);\n                  await DictService.getdict(sendata[d]).then(async (sen) => {\n                    // console.log(sen.data);\n                    var rule = {\n                      map_rule_based_id: map_id,\n                      dict_id: sendata[d],\n                      dict_name: sen.data.name,\n                      no: d + 1,\n                    };\n                    // console.log(rule);\n                    await RuleBasedService.createrule_based(rule).then(() => {\n                      if (d + 1 == sendata.length) {\n                        this.getdetail();\n\n                        alert(\"\");\n                      }\n                    });\n                  });\n                }\n              }\n            );\n          }\n        });\n      } else {\n        MapRuleBasedService.deletemap_rule_based(data.mapId, maprule).then(\n          async () => {\n            // console.log(res.data);\n            this.getdetail();\n            alert(\"\");\n          }\n        );\n      }\n    },\n    checkkeyword(name) {\n      // console.log(name);\n      //   axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //     console.log(res.data);\n      // for (let r = 0; r < res.data.length; r++) {\n      // name = name.replaceAll(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g, '')\n      //       name = name.replaceAll(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, '');\n      //       name = name.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n      //       name = name.replaceAll(\"_\", \"\");\n      //       name = name.replaceAll(\"!\", \"\");\n      //       name = name.replaceAll(\"*\", \"\");\n      // name = name.replaceAll(`_/l\\_`, \"\");// eslint-disable-line\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + name);\n      var desc = this.finddescription(name);\n      // console.log('http://127.0.0.1:5000/worktokendesc?text='+desc);\n      axios\n        .get(LinkService.getpythonlink() + \"/worktokendesc?text=\" + desc)\n        .then((res) => {\n          // console.log(res.data);\n          this.desc = res.data;\n        });\n      // name = '  Shopee     Bluebird() Storage Condition Normal  ,     ,       12    /. 30-1-26764-5-0051  17901           1000  60    1  5   20   93   2  21   50   90   3  51   100   87   4  100  .....................  85  Vitamin C Plus Dietary Supplement Product Bluebird Brand      1   (Active Ingredient) VITAMIN C (100%) - 60  CITRUS BIOFLAVONOID POWDER - 630  BARBADOSCHERRY POWDER/ACEROLA CHERRY POWDER (/) (MALPIGHIA GLABRA L.)  - 60  ROSEHIP POWDER () (ROSA CANINA L.)  - 60  Rutin - 30  INDIAN GOOSEBERRY POWDER () (PHYLLANTHUS EMBLICA L. )  - 60   (Inactive Ingredient) EDIBLE GELATIN 428 - 98.5  TITANIUM DIOXIDE 171 -1.95    1-2    .. 30-1-26764-5-0051       5                    12.00         _/l\\_'\n      // console.log('http://127.0.0.1:5000/checkkeyword?text=' + desc);\n      var con = {\n        content: desc,\n      };\n      axios\n        .post(LinkService.getpythonlink() + \"/checkkeyword?text=\", con)\n        .then((res) => {\n          // console.log(res.data);\n          if (res.data.length > 0) {\n            // this.keyword.push(res.data)\n            this.keyword = res.data;\n          }\n        });\n      //     }\n\n      // });\n      //       var listkeywords = []\n      //       var namesplit = name.split(\" \")\n      //       // console.log(namesplit);\n      //       axios.get('http://localhost:8081/api/keyword_dicts?name=1').then((res) => {\n      //         console.log(res.data);\n      //         var keylist = []\n      //         for (let r = 0; r < res.data.length; r++) {\n      //           res.data[r].name = res.data[r].name.replaceAll(\".\",\"\")\n      //           var kk = res.data[r].name.split(\" \")\n      //           for (let k = 0; k < kk.length; k++) {\n      //             keylist.push(kk[k])\n      //           }\n      //         }\n      //         for (let key = 0; key < keylist.length; key++) {\n      //           for (let n = 0; n < namesplit.length; n++) {\n      //             if (namesplit[n] == keylist[key] && keylist[key] != '' && isNaN(keylist[key])) {\n      //               listkeywords.push(keylist[key])\n      //             }\n\n      //           }\n      //         }\n      //         // console.log(keylist);\n      //         // console.log(listkeywords);\n\n      //       console.log(listkeywords.length);\n      //         if (listkeywords.length == 0) {\n\n      //           this.colorkey = \"background-color:#a3e9a4\"\n      //         }\n      //         var result = [];\n      //         listkeywords.forEach(function(item) {\n      //      if(result.indexOf(item) < 0) {\n      //          result.push(item);\n      //      }\n      // });\n      // console.log(result);\n      // listkeywords = result\n      //         for (let l = 0; l < listkeywords.length; l++) {\n      //           // console.log('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=');\n      //           axios.get('http://127.0.0.1:5000/checkkeyword?name=' + name+'&&name_real=' + listkeywords[l]).then((res) => {\n      //             // console.log(res.data);\n      //         this.keyword.push(res.data)\n      //       });\n\n      //         }\n      //       });\n    },\n    finddescription(data) {\n      // console.log(data);\n      var text = [\"\"];\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        if (findfda.indexOf(text[t]) != -1) {\n          findfda = findfda.substring(findfda.indexOf(text[t]));\n        }\n      }\n      // if (findfda == '') {\n      //   findfda = findfda+ findfda+''\n      // }\n      // console.log(findfda);\n      return findfda;\n    },\n    loaddict() {\n      axios.get(LinkService.getpythonlink() + \"/loaddict\").then(async () => {});\n    },\n    getdetail() {\n      // var url = this.data.url.split(\"-i.\");\n      var url = this.data.url.split(\"-i.\");\n      this.data.url = url[0];\n      var selectpro = {\n        url: this.data.url,\n        id: this.currentUser.id,\n      };\n      MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n        console.log(res.data);\n        // var best = this.getMax(res.data.keyword,'count_rulebased')\n        //console.log(best);\n        this.list = res.data;\n        this.status = true;\n        this.loading = false\n        var data = {\n          advertise_id: res.data.keyword[0].product_token_id,\n        };\n        MapRuleBasedService.updateweight(\n          res.data.keyword[0].map_rule_based_id,\n          data\n        ).then(() => {});\n        // this.list.keyword = [best]\n        // this.status = true\n      });\n    },\n    async search() {\n      this.loading = true\n      var url = this.data.url.replaceAll(\".\",'');\n      url = url.split(\"-i\");\n      this.data.url = url[0];\n      console.log(this.data.url);\n      this.procheck = {};\n      this.product = [];\n      this.product_token = 0;\n      var con = {};\n      await this.loaddict();\n      this.status = false;\n      if (this.data.url == null || this.data.url == \"\") {\n        alert(\" URL\");\n      } else if (this.data.content == null || this.data.content == \"\") {\n        alert(\"\");\n      } else {\n        var content = \"\";\n        content = this.data.content.replaceAll(\n          /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n          \"\"\n        );\n        content = content.replaceAll(\n          /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n          \" \"\n        );\n\n        content = content.replaceAll(/\\ud83d[\\ude00-\\ude4f]/g, \" \");\n        content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \" \");\n        content = content.replaceAll(\"_\", \"\");\n        content = content.replaceAll(\"!\", \"\");\n        content = content.replaceAll(\"*\", \"\");\n        content = content.replaceAll(\"&\", \"\");\n        content = content.replaceAll(\"#\", \"\");\n        content = content.replaceAll(\"\", \"\");\n        content = content.replaceAll(\"+\", \"\");\n        content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n        content = content.replaceAll(\n          /([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g,\n          \" \"\n        );\n\n        this.fda = await this.findfda(content);\n        console.log(this.fda);\n        var selectpro = {\n          url: this.data.url,\n          id: this.currentUser.id,\n        };\n        await MapRuleBasedService.getproduct_token(selectpro).then(async (res) => {\n          // console.log(res.data);\n          // console.log(content);\n          if (res.data.id) {\n            this.product_token = res.data.id;\n          }\n          // console.log(this.product_token);\n          // console.log(LinkService.getpythonlink()+'/worktokendesc?text=' + content);\n          con = {\n            content: content,\n          };\n          await axios\n            .post(LinkService.getpythonlink() + \"/wordtokendesc\", con)\n            .then(async (res) => {\n              // var sentence = res.data.sentent.replaceAll(\"<spanstyle\", \"<span style\");\n              var des = {\n                url: this.data.url,\n                sentence: content,\n                sentence_keyword: res.data.sentent,\n                keyword_id: res.data.keywordId,\n                status: 1,\n              };\n              console.log(des);\n              if (this.product_token == 0) {\n                await MapRuleBasedService.createproduct_token(des).then(\n                  async (producttoken) => {\n                    console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    await this.checkfda(content, this.product_token);\n                    // console.log(producttoken);\n                    this.product_token = producttoken.data.id;\n                    con = {\n                      content: content,\n                    };\n                    //console.log(con);\n                    await axios\n                      .post(LinkService.getpythonlink() + \"/checkkeyword\", con)\n                      .then(async (res) => {\n                        //console.log(res.data);\n                        if (res.data.length > 0) {\n                          for (let r = 0; r < res.data.length; r++) {\n                            var sentencetoken = res.data[r].sentent.replaceAll(\n                              '\"',\n                              \"\"\n                            ); // eslint-disable-line\n                            sentencetoken = sentencetoken.replaceAll(\n                              \"<spanstyle\",\n                              \"<span style\"\n                            );\n\n                            // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                            var advertise = {\n                              product_token_id: this.product_token,\n                              keyword_dict_id: res.data[r].keyword_dict_id,\n                              dict_id: res.data[r].dict_id,\n                              dict_name: res.data[r].dict_name,\n                              sentent: sentencetoken,\n                              sen: res.data[r].sen,\n                            };\n                            // console.log(this.product_token);\n                            await AdvertiseService.createadvertise(advertise).then(\n                              async () => {\n                                if (r + 1 == res.data.length) {\n                                  var getprotoken = {\n                                    url: this.product_token,\n                                  };\n                                  await MapRuleBasedService.getproductkeyword(\n                                    getprotoken\n                                  ).then((pro) => {\n                                    // console.log(pro.data);\n                                    this.tokendata(pro.data);\n                                  });\n                                }\n                              }\n                            );\n                          }\n                        } else {\n                          this.getdetail();\n                        }\n                      });\n                  }\n                );\n              } else {\n                await AdvertiseService.deleteadvertise(this.product_token).then(\n                  async () => {\n                    await MapRuleBasedService.updatproduct_token(\n                      this.product_token,\n                      des\n                    ).then(async () => {\n                      // await AdvertiseService.deleteadvertise(this.product_token).then(async ()=>{\n                      // console.log(del);\n                      await this.checkfda(content, this.product_token);\n                      con = {\n                        content: content,\n                      };\n                      //console.log(con);\n                      axios\n                        .post(\n                          LinkService.getpythonlink() + \"/checkkeyword\",\n                          con\n                        )\n                        .then(async (res) => {\n                          //console.log(res.data);\n                          if (res.data.length > 0) {\n                            for (let r = 0; r < res.data.length; r++) {\n                              var sentencetoken = res.data[\n                                r\n                              ].sentent.replaceAll('\"', \"\"); // eslint-disable-line\n                              sentencetoken = sentencetoken.replaceAll(\n                                \"<spanstyle\",\n                                \"<span style\"\n                              );\n\n                              // sentencetoken = sentencetoken.replaceAll('\"color:red\\\"','\"color:red\"')\n                              var advertise = {\n                                product_token_id: this.product_token,\n                                keyword_dict_id: res.data[r].keyword_dict_id,\n                                dict_id: res.data[r].dict_id,\n                                dict_name: res.data[r].dict_name,\n                                sentent: sentencetoken,\n                                sen: res.data[r].sen,\n                                status: 1,\n                              };\n                              // console.log(this.product_token);\n                              AdvertiseService.createadvertise(advertise).then(\n                                () => {\n                                  if (r + 1 == res.data.length) {\n                                    var getprotoken = {\n                                      url: this.product_token,\n                                    };\n                                    MapRuleBasedService.getproductkeyword(\n                                      getprotoken\n                                    ).then((pro) => {\n                                      // console.log(pro.data);\n                                      this.tokendata(pro.data);\n                                    });\n                                  }\n                                }\n                              );\n                            }\n                          }\n                        });\n                    });\n                  }\n                );\n              }\n            });\n        });\n      }\n    },\n    getMax(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getMaxlength(arr, prop) {\n      var max;\n      for (var i = 0; i < arr.length; i++) {\n        if (max == null || parseInt(arr[i][prop]) > parseInt(max[prop]))\n          max = arr[i];\n      }\n      return max;\n    },\n    getAllMaxArray(arr, value) {\n      var array = [];\n      arr.map(function (num, idx) {\n        if (num.allcount == value) {\n          array.push(arr[idx]);\n        }\n      });\n      return array;\n    },\n    async tokendata(list) {\n      //console.log(list);\n      if (list.keyword.length > 0) {\n        for (let l = 0; l < list.keyword.length; l++) {\n          //console.log(list.keyword[l].keyword_dict_id);\n          if (list.keyword[l].keyword_dict_id) {\n            var map = {\n              id: list.keyword[l].id,\n              url: list.keyword[l].keyword_dict_id,\n              keyword_id: list.keyword[l].dict_id,\n            };\n            // console.log(map);\n            await MapRuleBasedService.getmapproduct(map).then(async (res) => {\n              // console.log(res.data);\n              var maxvalue = this.getMax(res.data, \"allcount\");\n              // console.log(maxvalue.allcount);\n              var i = this.getAllMaxArray(res.data, maxvalue.allcount);\n              // console.log(i);\n              var bestdata = this.getMax(i, \"length\");\n              // console.log(bestdata);\n              // getAllIndexes\n              // console.log(bestdata);\n              var best = {\n                id: list.keyword[l].id,\n                sentence: bestdata,\n              };\n              console.log(best);\n              var rule_based_name = bestdata.name.toString();\n              rule_based_name = rule_based_name.replaceAll(\",\", \"\");\n              console.log(rule_based_name);\n              await axios\n                .get(\n                  LinkService.getpythonlink() +\n                    \"/loaddict?word=\" +\n                    rule_based_name\n                )\n                .then(async () => {\n                  await MapRuleBasedService.getbestrulebased(best).then(\n                    async (res) => {\n                      console.log(res.data);\n\n                      var rulebased = {\n                        count_rulebased: res.data.count,\n                        sentence_rulebase: res.data.sentence,\n                        rule_based_id: res.data.rule_based_id,\n                        rule_based_name: res.data.rule_based_name,\n                        map_rule_based_id: res.data.map_id,\n                      };\n                      console.log(rulebased);\n                      // console.log(list.keyword[l].id);\n                      await MapRuleBasedService.updaterulebased(\n                        list.keyword[l].id,\n                        rulebased\n                      ).then(() => {\n                        if (l + 1 == list.keyword.length) {\n                          this.getdetail();\n                        }\n                      });\n                    }\n                  );\n                });\n              // list.keyword[l].rulebase = res.data;\n              // if (l + 1 == list.keyword.length) {\n              //   this.compare(list);\n              // }\n            });\n          }\n\n          // }\n        }\n      } else {\n        this.getdetail();\n      }\n    },\n    compare(list) {\n      for (let k = 0; k < list.keyword.length; k++) {\n        // console.log(list.keyword[k]);\n        var dict_id = JSON.parse(list.keyword[k].dict_id);\n        // var rulebased = JSON.parse(list.keyword[k].rulebase)\n        // console.log(list.keyword[k].rulebased);\n        if (list.keyword[k].rulebase) {\n          let uniqueCharsrule = list.keyword[k].rulebase.filter((c, index) => {\n            return list.keyword[k].rulebase.indexOf(c) === index;\n          });\n          var filteredArray = dict_id.filter(function (n) {\n            return uniqueCharsrule.indexOf(n) !== -1;\n          });\n          // console.log(filteredArray);\n          // console.log('filteredArray',filteredArray);\n          // console.log('dict_id',dict_id.length);\n          // console.log(sumdictId.length);\n          var percentage =\n            (100 * parseInt(filteredArray.length)) / parseInt(dict_id.length);\n          // console.log(percentage);\n          list.keyword[k].percentage = percentage;\n        } else {\n          list.keyword[k].percentage = 0;\n        }\n        if (k + 1 == list.keyword.length) {\n          this.list = list;\n          // this.status = true;\n        }\n      }\n    },\n    getAllIndexes(arr, val) {\n      var indexes = [],\n        i = -1;\n      while ((i = arr.indexOf(val, i + 1)) != -1) {\n        indexes.push(i);\n      }\n      return indexes;\n    },\n    findfda(data) {\n      var text = [\"/.\"];\n      // var end = ['']\n      var findfda = data;\n      for (let t = 0; t < text.length; t++) {\n        findfda = findfda.substring(findfda.indexOf(text[t]), data.length);\n        var endindex = this.getAllIndexes(findfda, \" \");\n        findfda = findfda.substring(findfda.indexOf(text[t]), endindex[1]);\n      }\n      // console.log(findfda);\n\n      findfda = findfda.replaceAll(\"/.\", \"\");\n      findfda = findfda.replaceAll(\"-\", \"\");\n      findfda = findfda.replaceAll(\"\", \"\");\n      findfda = findfda.replaceAll(\" \", \"\");\n      // console.log(findfda);\n      // var regex = /\\d+/g;\n      // var matches = findfda.match(regex);  // creates array from matches\n      // console.log(matches[0]);\n      return findfda;\n    },\n    checkfda(content, id) {\n      console.log(this.fda);\n      if (this.fda) {\n        var fda = this.fda;\n        var product_status = 0;\n        const url = \"https://tawaiforhealth.org/api/oryor/check-product\";\n        const data = { number_src: fda };\n        // console.log(data);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n          },\n          body: JSON.stringify(data),\n        };\n\n        fetch(url, options)\n          .then((response) => response.json())\n          .then((data) => {\n            if (data.message) {\n              this.product.push({\n                name: \"-\",\n                detail: content,\n                fda: this.fda,\n                cncnm: \"-\",\n                typepro: \"-\",\n                lcnno: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                licen: \"-\",\n                Addr: \"-\",\n                Newcode: \"-\",\n                status: \"-\",\n                token: \"\",\n              });\n              this.procheck = {\n                fda: this.fda,\n                mapfda: \"-\",\n                cncnm: \"-\",\n                productha: \"-\",\n                produceng: \"-\",\n                name: \"-\",\n                product_status: 0,\n                cat_status: 0,\n                fda_status: 0,\n                name_status: 0,\n                typepro: \"-\",\n                type: \"-\",\n              };\n\n              // this.status = true\n            } else {\n              // console.log(data);\n              // console.log(data.cncnm.includes(\"\"))\n              if (data.cncnm.includes(\"\")) {\n                product_status = 1;\n                this.colorfda = \"background-color:#a3e9a4\";\n              } else {\n                product_status = 3;\n              }\n              console.log(this.colorfda);\n              var con = {\n                fda: fda,\n                productha: data.productha,\n                produceng: data.produceng,\n                typepro: data.typepro,\n                content: content,\n              };\n              axios\n                .post(LinkService.getpythonlink() + \"/checkfda\", con)\n                .then(async (res) => {\n                  // console.log(res.data);\n                  var pro = {\n                    name: res.data.name,\n                    fda: fda,\n                    product_status: product_status,\n                    cat_status: res.data.mapcatstatus,\n                    fda_status: product_status,\n                    name_status: res.data.mapnamestatus,\n                  };\n                  // console.log(pro);\n                  MapRuleBasedService.updatemap(id, pro).then(() => {\n                    // console.log(res.data);\n                    this.product.push({\n                      name: data.productha + \" \" + data.produceng,\n                      detail: content,\n                      fda: fda,\n                      cncnm: data.cncnm,\n                      typepro: data.typepro,\n                      lcnno: data.lcnno,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      licen: data.licen,\n                      Addr: data.Addr,\n                      Newcode: data.Newcode,\n                      status: product_status,\n                      token: res.data.token,\n                    });\n                    this.procheck = {\n                      fda: fda,\n                      mapfda: data.lcnno,\n                      cncnm: data.cncnm,\n                      productha: data.productha,\n                      produceng: data.produceng,\n                      name: res.data.name,\n                      product_status: product_status,\n                      cat_status: res.data.mapcatstatus,\n                      fda_status: product_status,\n                      name_status: res.data.mapnamestatus,\n                      typepro: data.typepro,\n                      type: res.data.category,\n                    };\n                    this.colorcat = res.data.colorcat;\n                    this.colorname = res.data.colorname;\n                    // console.log(this.product);\n                    // console.log(this.procheck);\n                    // console.log(this.fda);\n                  });\n                });\n\n              // this.status = true\n            }\n          });\n      } else {\n        this.product.push({\n          name: \"-\",\n          detail: content,\n          fda: this.fda,\n          cncnm: \"-\",\n          typepro: \"-\",\n          lcnno: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          licen: \"-\",\n          Addr: \"-\",\n          Newcode: \"-\",\n          status: \"-\",\n          token: \"\",\n        });\n        this.procheck = {\n          fda: this.fda,\n          mapfda: \"-\",\n          cncnm: \"-\",\n          productha: \"-\",\n          produceng: \"-\",\n          name: \"-\",\n          product_status: 0,\n          cat_status: 0,\n          fda_status: 0,\n          name_status: 0,\n          typepro: \"-\",\n          type: \"-\",\n        };\n\n        // this.status = true\n      }\n    },\n  },\n  mounted() {\n//     var best = {\n//     \"id\": 67,\n//     \"sentence\": {\n//         \"length\": 2,\n//         \"allcount\": 100,\n//         \"rule\": [\n//             8899,\n//             57\n//         ],\n//         \"name\": [\n//             \"\",\n//             \"\"\n//         ],\n//         \"map_id\": 75\n//     }\n// }\n//                   MapRuleBasedService.getbestrulebased(best).then(\n//                      (res) => {\n//                       console.log(res.data);\n//                     });\n    // var text = '/. 13-1-13465-5-0052  415 '\n    // console.log(this.findfda(text));\n    // this.data.url =\n    //   \"https://shopee.co.th/%E2%99%A6%EF%B8%8F%E0%B9%82%E0%B8%89%E0%B8%A1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88-%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%81%E0%B8%97%E0%B9%89%E2%99%A6%EF%B8%8F-%E0%B8%82%E0%B8%B2%E0%B8%A2%E0%B8%94%E0%B8%B5%E0%B8%A1%E0%B8%B2%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F-%E0%B8%A5%E0%B8%B4%E0%B9%82%E0%B8%8B%E0%B9%88-%E0%B8%9E%E0%B8%A5%E0%B8%B1%E0%B8%AA-%E2%80%8B-coffee-lishou-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%A7%E0%B8%9A%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%84%E0%B8%B8%E0%B8%A1%E0%B8%AB%E0%B8%B4%E0%B8%A7-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%99%E0%B9%89%E0%B8%B3%E0%B8%AB%E0%B8%99%E0%B8%B1%E0%B8%81-%E0%B8%81%E0%B8%B2%E0%B9%81%E0%B8%9F%E0%B8%A5%E0%B8%94%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%AD%E0%B9%89%E0%B8%A7%E0%B8%99\";\n    // this.data.content =\n    //   \"   \";\n    // // var url = this.data.url.split('-i.')\n    // var content = this.data.content.replaceAll(\n    //   /([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(\n    //   /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g,\n    //   \"\"\n    // );\n    // content = content.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n    // content = content.replaceAll(\"_\", \"\");\n    // content = content.replaceAll(\"!\", \"\");\n    // content = content.replaceAll(\"*\", \"\");\n    // content = content.replaceAll(\"&\", \"\");\n    // content = content.replaceAll(\"#\", \"\");\n    // content = content.replaceAll(`_/l\\_`, \"\"); // eslint-disable-line\n    // // console.log(LinkService.getpythonlink()+'/wordtokendesc?text=' + content);\n    // // axios.get(LinkService.getpythonlink()+'/wordtokendesc?text='+content).then(async (res) => {\n    // //   console.log(res.data);\n    // // })\n    // console.log(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content);\n    // var con = {\n    //   content: content,\n    // };\n    // axios\n    //   .post(LinkService.getpythonlink() + \"/checkkeyword?text=\" + content, con)\n    //   .then(async (res) => {\n    //     console.log(res.data);\n    //     //       for (let r = 0; r < res.data.length; r++) {\n    //     //         var advertise = {\n    //     //           product_token_id:1,\n    //     //           keyword_dict_id:res.data[r].keyword_dict_id,\n    //     //           dict_id:res.data[r].dict_id,\n    //     //           dict_name:res.data[r].dict_name,\n    //     //           sen:res.data[r].sen,\n    //     //           sentent:res.data[r].sentent,\n    //     //         }\n    //     //         AdvertiseService.createadvertise(advertise).then((res)=>{\n    //     //           console.log(res.data);\n    //     //         })\n    //     //       }\n    //   });\n    // //  console.log(url);\n    // //     var selectpro = {\n    // //       url:url[0]\n    // //      }\n    // //      MapRuleBasedService.getproduct_token(selectpro).then((res)=>{\n    // //       console.log(res.data);\n    // // var list = res.data\n    // // this.tokendata(list)\n    // // for (let l = 0; l < list.keyword.length; l++) {\n    // //   // console.log(this.list.keyword[l].map);\n    // //   // for (let m = 0; m < this.list.keyword[l].length; m++) {\n    // //     if (list.keyword[l].map) {\n    // //       var map = {\n    // //     url:JSON.stringify(list.keyword[l].map)\n    // //      }\n    // //     //  console.log(map);\n    // //      MapRuleBasedService.getmapproduct(map).then((res)=>{\n    // //       list.keyword[l].rulebase = res.data\n    // //       if (l+1 == list.keyword.length) {\n    // //         this.compare(list)\n    // //       }\n    // //      });\n    // //     }\n    // //   }\n    // // }\n    // // console.log(this.list);\n    // this.status = true;\n    // //  })\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n}\n</style>\n"]}]}