(function(t){function e(e){for(var n,c,u=e[0],o=e[1],d=e[2],l=0,f=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&f.push(s[c][0]),s[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);i&&i(e);while(f.length)f.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,u=1;u<a.length;u++){var o=a[u];0!==s[o]&&(n=!1)}n&&(r.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},s={app:0},r=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var i=o;r.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"0050":function(t,e,a){},"034f":function(t,e,a){"use strict";a("85ec")},"060a":function(t,e,a){"use strict";a("229c")},"0cdd":function(t,e,a){},"0edc":function(t,e,a){},1:function(t,e,a){t.exports=a("56d7")},"13a1":function(t,e,a){"use strict";a("944c")},"1bad":function(t,e,a){"use strict";a("8062")},"1ed8":function(t,e,a){"use strict";a("8fa6")},2:function(t,e){},"229c":function(t,e,a){},"28ad":function(t,e,a){"use strict";a("0050")},"2c69":function(t,e,a){"use strict";a("3dc6")},3:function(t,e){},"3dc6":function(t,e,a){},"40fc":function(t,e,a){},4892:function(t,e,a){"use strict";a("0cdd")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"topnav"},t._l(t.menu,(function(e){return a("a",{key:e.id,class:e.class,attrs:{href:e.path}},[t._v(t._s(e.name))])})),0),a("router-view")],1)},r=[],c=(a("b0c0"),{name:"app",components:{},data:function(){return{show:!0,menu:[]}},computed:{},methods:{},mounted:function(){"map"!=this.$route.params.name&&"login"!=this.$route.name&&"register"!=this.$route.name||(this.show=!1),this.menu.push({name:"Corpus",path:"/",class:""},{name:"keywords",path:"/keywords",class:""},{name:"Advertise",path:"/Advertise",class:""},{name:"rule based",path:"/rulebased",class:""},{name:"keyword rulebased",path:"/keywordrulebased",class:""});for(var t=0;t<this.menu.length;t++)this.menu[t].path==this.$route.path&&(this.menu[t].class="active")}}),u=c,o=(a("034f"),a("2877")),d=Object(o["a"])(u,s,r,!1,null,null,null),i=d.exports,l=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"600px"}},[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"7"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")]),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",[a("tr",[a("td",{style:t.colorfda},[t._v("เลขที่อนุญาต")]),a("td",{style:t.colorfda},[t.list[0].status?a("span",[t._v(t._s(t.list[0].fda))]):t._e()]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].fda)+" ")]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].list.cncnm||""))]),t.statusfda&&t.statuscat&&t.statusname?a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#a3e9a4"},attrs:{rowspan:"3"}},[a("span",[t._v("ผ่าน")]),t._v(t._s(t.updatestatusfda()))]):a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#f9bdbb"},attrs:{rowspan:"3"}},[a("span",[t._v("ไม่ผ่าน")]),t._v(t._s(t.updatestatusfda()))])]),a("tr",[a("td",{style:t.colorcat},[t._v("ประเภทผลิตภัณฑ์")]),a("td",{style:t.colorcat},[t._v(t._s(t.type))]),a("td",{style:t.colorcat},[a("span",{domProps:{innerHTML:t._s(t.matchcategory)}})]),a("td",{style:t.colorcat},[t.statuscat?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorname},[t._v("ชื่อผลิตภัณฑ์")]),a("td",{style:t.colorname},[t._v(t._s(t.list[0].list.productha)),a("br"),t._v(t._s(t.list[0].list.produceng))]),a("td",{style:t.colorname},[a("span",{domProps:{innerHTML:t._s(t.matchname)}})]),a("td",{style:t.colorname},[t.statusname?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(1),a("tbody",[t._m(2),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(t.desc)}})]),t.keyword.length?a("td",{style:t.colorkey},t._l(t.keyword,(function(e,n){return a("tr",{key:n},[a("td",[a("span",{domProps:{innerHTML:t._s(e)}})]),a("td",[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.savetorulr_based()}}},[t._v(" บันทึก ")])])])})),0):a("td",{style:t.colorkey},[t._v("ไม่พบข้อความโฆษณา")])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table mt-3"},[t._m(3),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagelists}}),t._v(t._s(e.name))]),a("td",{style:e.bg},[t._v(t._s(e.detail))]),a("td",{staticStyle:{width:"300px"},style:e.bg},[a("div",[t._v("เลขที่อนุญาต : "+t._s(e.fda)),a("br"),t._v(" ชื่อผลิตภัณฑ์: "+t._s(e.list.productha)+" ")])]),a("td",{style:e.bg},[a("div",{domProps:{innerHTML:t._s(t.cut(t.tokenize))}})]),1==e.status?a("td",{staticStyle:{"background-color":"#BDEDFF"}},[a("p",{staticClass:"card-text"},[t._v("สถานะ : "+t._s(e.list.cncnm||""))]),a("p",{staticClass:"card-text"},[t._v("ประเภทผลิตภัณฑ์ :"),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.typepro))])]),a("p",{staticClass:"card-text"},[t._v("ใบสำคัญ/เลขที่อนุญาต : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.lcnno))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (TH) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.productha))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (EN) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.produceng))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผู้รับอนุญาต : "+t._s(e.list.licen))]),a("p",{staticClass:"card-text"},[t._v("สถานที่ผลิต : "+t._s(e.list.Addr))]),a("p",{staticClass:"card-text"},[t._v("Newcode : "+t._s(e.list.Newcode))])]):a("td",{style:e.bg},[t._v(" ไม่พบข้อมูล")])])})),0)]):t._e()])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 1")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากเว็บไซต์")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ผลการตรวจสอบ")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อสรุป")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 2")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("สินค้า")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูล")]),a("th",{attrs:{scope:"col"}},[t._v("FDA")]),a("th",{attrs:{scope:"col"}},[t._v("ตัดคำ")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")])])])}],h=a("1da1"),b=(a("96cf"),a("ac1f"),a("5319"),a("5b81"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("e9c4"),a("3ca3"),a("ddb0"),a("8134")),g=a("bc3a"),m=a.n(g),v=a("d4ec"),y=a("bee2"),_=m.a.create({baseURL:"https://api-fda.ponnipa.in.th//api",headers:{"Content-type":"application/json"}}),k=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getproducts",value:function(t,e,a){return _.get("/products?status="+t+"&&statusdelete="+e+"&&statusfda="+a)}},{key:"getproductkeyword",value:function(t,e){return _.get("/products/getproductkeyword?start="+t+"&&end="+e)}},{key:"getdecision",value:function(){return _.get("/products/getdecision")}},{key:"findGraphOne",value:function(t){return _.get("/products/findGraphOne?status="+t)}},{key:"findGraphTwo",value:function(t){return _.get("/products/findGraphTwo?status="+t)}},{key:"scraping",value:function(t){return _.post("/products/findscraping",t)}},{key:"scrapingheader",value:function(t){return _.post("/products/findscrapingheader",t)}},{key:"saveimageproduct",value:function(t){return _.post("/products/saveimageproduct",t)}},{key:"getproduct",value:function(t){return _.get("/products/"+t)}},{key:"createproduct",value:function(t){return _.post("/products",t)}},{key:"updateproduct",value:function(t,e){return _.put("/products/".concat(t),e)}},{key:"sentent_keyword",value:function(t,e){return _.put("/products/sentent_keyword/".concat(t),e)}},{key:"updatescraping",value:function(t,e){return _.put("/products/updatescraping/".concat(t),e)}},{key:"updatefdastatus",value:function(t,e){return _.put("/products/updatefdastatus/".concat(t),e)}},{key:"findproduct",value:function(t){return _.post("/products/findproduct",t)}},{key:"findproductfda",value:function(t){return _.post("/products/findproductfda",t)}},{key:"deleteproduct",value:function(t,e){return _.put("/products/updatedeletestatus/".concat(t),e)}}]),t}(),C=new k,w=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getfdatypes",value:function(t){return _.get("/fdatypes?name="+t)}},{key:"getfdatype",value:function(t){return _.get("/fdatypes/"+t)}},{key:"createfdatype",value:function(t){return _.post("/fdatypes",t)}},{key:"updatefdatype",value:function(t,e){return _.put("/fdatypes/".concat(t),e)}},{key:"deletefdatype",value:function(t){return _.delete("/fdatypes/".concat(t))}}]),t}(),x=new w,A=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getpythonlink",value:function(){return"http://127.0.0.1:5000/"}}]),t}(),F=new A,O={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:""}},methods:{checkkeyword:function(t){var e=this,a=this.finddescription(t);m.a.get(F.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),console.log(F.getpythonlink()+"/checkkeyword?name="+a),m.a.get(F.getpythonlink()+"/checkkeyword?name="+a).then((function(t){console.log(t.data),t.data.length>0&&(e.keyword=t.data)}))},updatestatusfda:function(){if(1==this.list[0].status){var t={};t=this.statusfda&&this.statuscat&&this.statusname?{statusfda:!0,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname}:{statusfda:!1,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname},C.updatefdastatus(this.list[0].id,t).then((function(){}))}return""},checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",m.a.get(F.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&m.a.get(F.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.matchcategory.includes("red")&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),m.a.get(F.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[];var e={url:this.url};C.findproduct(e).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data[0].content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.getimagefile(a.data[0].id),n=a.data[0].content,s="",r=[],s=a.data[0].fda?a.data[0].fda.replaceAll(" ",""):"",r.push({id:a.data[0].id,name:a.data[0].name,detail:n,fda:s,cat_name:a.data[0].cat_name}),c=function(e){if(!r[e].fda||isNaN(s)||0==s)r[e].status=0,r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",c={number_src:r[e].fda},u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};fetch(n,u).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var u=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),x.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};x.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(a.data[0].content,c),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,c+u+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},u=0;u<r.length;u++)c(u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],C.getproduct(this.id).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),c=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",c={number_src:r[e].fda},u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};fetch(n,u).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var c=t.findcategory(r[e].detail),u=t.fdatype(n.typepro);u=u.replaceAll(" ","");var o=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=u,""==t.type&&n.typepro&&(t.type=n.typepro,u=n.typepro),x.getfdatypes(u).then((function(){if(0==a.data.length){var t={name:u};x.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(c,u),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,u+o+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},u=0;u<r.length;u++)c(u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(b["a"])(t.target.files[0]).then(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n){var s,r,c,u,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],c=e.findfda(r),a.push({detail:r,fda:c}),s+1!=n.length){t.next=13;break}u=regeneratorRuntime.mark((function t(n){var s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,c).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),o=0;case 8:if(!(o<a.length)){t.next=13;break}return t.delegateYield(u(o),"t0",10);case 10:o++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.searchbyfda())}},D=O,S=(a("4892"),Object(o["a"])(D,f,p,!1,null,null,null)),j=S.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"}),a("div",{staticClass:"form-group"},[a("label",[t._v("ชื่อไฟล์")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"10",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})]),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")])])])]),t._v(" รายการสินค้าที่ตรวจสอบ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";width: 100px!important;"},[null==e.statusfda?a("span",[t._v("ไม่มีเลขอย.")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],$=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getcategorys",value:function(t){return _.get("/category?status="+t)}},{key:"getcategory",value:function(t){return _.get("/category/"+t)}},{key:"database_path",value:function(){return _.get("/database_path")}},{key:"createcategory",value:function(t){return _.post("/category",t)}},{key:"updatecategory",value:function(t,e){return _.put("/category/".concat(t),e)}},{key:"deletecategory",value:function(t){return _.delete("/category/".concat(t))}}]),t}(),T=new $,L={first:"<<",last:">>",previous:"<",next:">"},R={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:L,filepath:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};C.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},save:function(){var t=this;if(null==this.data.file||""==this.data.file)alert("กรุณากรอกชื่อไฟล์");else if(null==this.data.url||""==this.data.url)alert("กรุณากรอก url");else{var e={cat_id:this.data.cat_id,file:this.data.file,path:"uploads/"+this.data.file+".html",image_path:"uploads/"+this.data.file+"_files",status:0,url:this.data.url,statusdelete:1};0==this.pro_id?C.createproduct(e).then((function(e){document.getElementById("closedproduct").click(),t.getproduct();var a={id:e.data.id,path:"uploads/"+t.data.file+".html"};t.scrape(a)})):C.updateproduct(this.pro_id,e).then((function(){document.getElementById("closedproduct").click(),t.getproduct();var e={id:t.pro_id,path:"uploads/"+t.data.file+".html"};t.scrape(e),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;T.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",C.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;C.getproducts(this.status,"","").then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a.data),t.imagelists=[],t.list=a.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;m.a.get(F.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),m.a.get(F.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),m.a.get(F.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var c={name:r,content:n,status:1,fda:s};C.updatescraping(t.id,c).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){var t=this;this.getproduct(),this.getcategory(),T.database_path().then((function(e){t.filepath=e.data.backend_path}))}},I=R,N=(a("1bad"),Object(o["a"])(I,E,P,!1,null,null,null)),M=N.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("หมวด")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteCategory",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deletecategory()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closeddeletecategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteCategory"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],U={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[]}},methods:{deletecategory:function(){var t=this;T.deletecategory(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closeddeletecategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกชื่อหมวด");else{var e={name:this.data.name,status:1};console.log(e),0==this.pro_id?T.createcategory(e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")})):T.updatecategory(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;T.getcategorys(1).then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลหมวดสินค้า",T.getcategory(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลหมวดสินค้า",this.data=[])}},mounted:function(){this.getcategory()}},H=U,J=(a("13a1"),Object(o["a"])(H,z,B,!1,null,null,null)),q=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddScopus",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("คำศัพท์")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อความ")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddScopus"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteScopus"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],Y=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getdicts",value:function(t,e){return _.get("/dicts?status="+t+"&&name="+e)}},{key:"getdict",value:function(t){return _.get("/dicts/"+t)}},{key:"createdict",value:function(t){return _.post("/dicts",t)}},{key:"updatedict",value:function(t,e){return _.put("/dicts/".concat(t),e)}},{key:"deletedict",value:function(t){return _.delete("/dicts/".concat(t))}}]),t}(),K=new Y,Q=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getrule_baseds",value:function(t){return _.get("/rule_based?status="+t)}},{key:"createdcolumnrule_based",value:function(t){return _.get("/rule_based/createcolumn?name="+t)}},{key:"getrule_based",value:function(t){return _.get("/rule_based/"+t)}},{key:"getbydict",value:function(t){return _.get("/rule_based/getbydict?name="+t)}},{key:"createrule_based",value:function(t){return _.post("/rule_based",t)}},{key:"updaterule_based",value:function(t,e){return _.put("/rule_based/".concat(t),e)}},{key:"deleterule_based",value:function(t){return _.delete("/rule_based/".concat(t))}}]),t}(),V=new Q,X={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[]}},methods:{deleteScopus:function(){var t=this;console.log(this.pro_id),K.deletedict(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกคำศัพท์");else{var e={name:this.data.name,status:1};console.log(e),0==this.pro_id?K.createdict(e).then((function(e){V.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))})):K.updatedict(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;K.getdicts(1,"").then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลคำศัพท์",K.getdict(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลคำศัพท์",this.data=[])}},mounted:function(){this.getcategory()}},Z=X,tt=(a("ce38"),Object(o["a"])(Z,G,W,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่ยกเลิกการตรวจสอบ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน")]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน")]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[0==t.status?a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]):t._e(),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"password"}},[t._v("หมวด")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.cat_id,expression:"data.cat_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"cat_id",e.target.multiple?a:a[0])}}},t._l(t.category,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-repeat"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยัน")])])}],st={first:"<<",last:">>",previous:"<",next:">"},rt={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:st,filepath:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:1};C.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(null==this.data.file||""==this.data.file)alert("กรุณากรอกชื่อไฟล์");else if(null==this.data.url||""==this.data.url)alert("กรุณากรอก url");else{var e={cat_id:this.data.cat_id,file:this.data.file,path:"uploads/"+this.data.file+".html",image_path:"uploads/"+this.data.file+"_files",status:0,url:this.data.url,statusdelete:1};0==this.pro_id?C.createproduct(e).then((function(e){document.getElementById("closedproduct").click(),t.getproduct();var a={id:e.data.id,path:"uploads/"+t.data.file+".html"};t.scrape(a)})):C.updateproduct(this.pro_id,e).then((function(){document.getElementById("closedproduct").click(),t.getproduct(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;T.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",C.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;C.getproducts("",0,"").then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.imagelists=[],t.list=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;m.a.get(F.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),m.a.get(F.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),m.a.get(F.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var c={name:r,content:n,status:1,fda:s};C.updatescraping(t.id,c).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){var t=this;this.getproduct(),this.getcategory(),T.database_path().then((function(e){t.filepath=e.data.backend_path}))}},ct=rt,ut=(a("89f9"),Object(o["a"])(ct,at,nt,!1,null,null,null)),ot=ut.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"600px"}},[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",staticStyle:{width:"500px"},attrs:{id:"exampleFormControlTextarea1"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")]),t._l(t.list,(function(e,n){return a("div",{key:n},[a("h4",{staticClass:"mt-3"},[t._v("สินค้ารายการที่ "+t._s(n+1))]),a("fdacontent",{staticClass:"mb-5",attrs:{fdaid:e.id}})],1)}))],2)},it=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",[a("tr",[a("td",{style:t.colorfda},[t._v("เลขที่อนุญาต")]),a("td",{style:t.colorfda},[t.list[0].status?a("span",[t._v(t._s(t.list[0].fda))]):t._e()]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].fda)+" ")]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].list.cncnm||""))]),t.statusfda&&t.statuscat&&t.statusname?a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#a3e9a4"},attrs:{rowspan:"3"}},[a("span",[t._v("ผ่าน")])]):a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#f9bdbb"},attrs:{rowspan:"3"}},[a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorcat},[t._v("ประเภทผลิตภัณฑ์")]),a("td",{style:t.colorcat},[t._v(t._s(t.type))]),a("td",{style:t.colorcat},[a("span",{domProps:{innerHTML:t._s(t.matchcategory)}})]),a("td",{style:t.colorcat},[t.statuscat?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorname},[t._v("ชื่อผลิตภัณฑ์")]),a("td",{style:t.colorname},[t._v(t._s(t.list[0].list.productha)),a("br"),t._v(t._s(t.list[0].list.produceng))]),a("td",{style:t.colorname},[a("span",{domProps:{innerHTML:t._s(t.matchname)}})]),a("td",{style:t.colorname},[t.statusname?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(1),a("tbody",[t._m(2),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(t.desc)}})]),t.keyword.length?a("td",{style:t.colorkey},t._l(t.keyword,(function(e,n){return a("div",{key:n},[a("span",{domProps:{innerHTML:t._s(e)}}),a("br")])})),0):a("td",{style:t.colorkey},[t._v("ไม่พบข้อความโฆษณา")])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table mt-3"},[t._m(3),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagelists}}),t._v(t._s(e.name))]),a("td",{style:e.bg},[t._v(t._s(e.detail))]),a("td",{staticStyle:{width:"300px"},style:e.bg},[a("div",[t._v("เลขที่อนุญาต : "+t._s(e.fda)),a("br"),t._v(" ชื่อผลิตภัณฑ์: "+t._s(e.list.productha)+" ")])]),a("td",{style:e.bg},[a("div",{domProps:{innerHTML:t._s(t.cut(t.tokenize))}})]),1==e.status?a("td",{staticStyle:{"background-color":"#BDEDFF"}},[a("p",{staticClass:"card-text"},[t._v("สถานะ : "+t._s(e.list.cncnm||""))]),a("p",{staticClass:"card-text"},[t._v("ประเภทผลิตภัณฑ์ :"),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.typepro))])]),a("p",{staticClass:"card-text"},[t._v("ใบสำคัญ/เลขที่อนุญาต : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.lcnno))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (TH) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.productha))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (EN) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.produceng))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผู้รับอนุญาต : "+t._s(e.list.licen))]),a("p",{staticClass:"card-text"},[t._v("สถานที่ผลิต : "+t._s(e.list.Addr))]),a("p",{staticClass:"card-text"},[t._v("Newcode : "+t._s(e.list.Newcode))])]):a("td",{style:e.bg},[t._v(" ไม่พบข้อมูล")])])})),0)]):t._e()])},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 1")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากเว็บไซต์")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ผลการตรวจสอบ")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อสรุป")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 2")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("สินค้า")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูล")]),a("th",{attrs:{scope:"col"}},[t._v("FDA")]),a("th",{attrs:{scope:"col"}},[t._v("ตัดคำ")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")])])])}],pt={name:"App",components:{},props:{fdaid:String},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:""}},methods:{finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},checkkeyword:function(t){var e=this,a=this.finddescription(t);m.a.get(F.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),console.log(F.getpythonlink()+"/checkkeyword?name="+a),m.a.get(F.getpythonlink()+"/checkkeyword?name="+a).then((function(t){console.log(t.data),t.data.length>0&&(e.keyword=t.data)}))},updatestatusfda:function(){if(1==this.list[0].status){var t={};t=this.statusfda&&this.statuscat&&this.statusname?{statusfda:!0,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname}:{statusfda:!1,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname},C.updatefdastatus(this.list[0].id,t).then((function(){}))}return""},checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",m.a.get(F.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&m.a.get(F.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.matchcategory.includes("red")&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),m.a.get(F.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[];var e={url:this.url};C.findproduct(e).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data[0].content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.getimagefile(a.data[0].id),n=a.data[0].content,s="",r=[],s=a.data[0].fda?a.data[0].fda.replaceAll(" ",""):"",r.push({id:a.data[0].id,name:a.data[0].name,detail:n,fda:s,cat_name:a.data[0].cat_name}),c=function(e){if(!r[e].fda||isNaN(s)||0==s)r[e].status=0,r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",c={number_src:r[e].fda},u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};fetch(n,u).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+t.finddescription(r[e].detail);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var u=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),x.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};x.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(a.data[0].content,c),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,c+u+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},u=0;u<r.length;u++)c(u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],C.getproduct(this.id).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),c=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",c={number_src:r[e].fda},u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};fetch(n,u).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+t.finddescription(r[e].detail);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var c=t.findcategory(r[e].detail),u=t.fdatype(n.typepro);u=u.replaceAll(" ","");var o=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=u,""==t.type&&n.typepro&&(t.type=n.typepro,u=n.typepro),x.getfdatypes(u).then((function(){if(0==a.data.length){var t={name:u};x.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(c,u),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,u+o+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},u=0;u<r.length;u++)c(u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(b["a"])(t.target.files[0]).then(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n){var s,r,c,u,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],c=e.findfda(r),a.push({detail:r,fda:c}),s+1!=n.length){t.next=13;break}u=regeneratorRuntime.mark((function t(n){var s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,c).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),o=0;case 8:if(!(o<a.length)){t.next=13;break}return t.delegateYield(u(o),"t0",10);case 10:o++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){console.log(this.fdaid),this.id=this.fdaid,this.searchbyfda()}},ht=pt,bt=(a("b2b5"),Object(o["a"])(ht,lt,ft,!1,null,null,null)),gt=bt.exports,mt={name:"App",components:{fdacontent:gt},data:function(){return{fdaid:0,list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:""}},methods:{checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",m.a.get(F.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&m.a.get(F.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.matchcategory.includes("red")&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),m.a.get(F.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.list=[];var e={fda:this.url};C.findproductfda(e).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list=a.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],C.getproduct(this.id).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),c=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},t.gettokenize(r[e].detail,""),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",c={number_src:r[e].fda},u={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};fetch(n,u).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},t.gettokenize(r[e].detail,""),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+r[e].detail;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var c=t.findcategory(r[e].detail),u=t.fdatype(n.typepro);u=u.replaceAll(" ","");var o=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=u,""==t.type&&n.typepro&&(t.type=n.typepro,u=n.typepro),x.getfdatypes(u).then((function(){if(0==a.data.length){var t={name:u};x.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(c,u),t.gettokenize(a.data.content,u+o+n.produceng),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},u=0;u<r.length;u++)c(u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(b["a"])(t.target.files[0]).then(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n){var s,r,c,u,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],c=e.findfda(r),a.push({detail:r,fda:c}),s+1!=n.length){t.next=13;break}u=regeneratorRuntime.mark((function t(n){var s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,c).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),o=0;case 8:if(!(o<a.length)){t.next=13;break}return t.delegateYield(u(o),"t0",10);case 10:o++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.searchbyfda())}},vt=mt,yt=(a("81db"),Object(o["a"])(vt,dt,it,!1,null,null,null)),_t=yt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:" row mt-5"},[a("div",{staticClass:"card col-md-5"},[a("TypeOneGraph")],1),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"card col-md-5"},[a("TypeTwoGraph")],1)])])},Ct=[],wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid row",staticStyle:{padding:"30px"}},[a("apexchart",{attrs:{width:"500",type:"pie",options:t.options,series:t.series}})],1)},xt=[],At=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getAllLevelDashboards",value:function(){return _.get("/dashboard")}},{key:"getAllLevelDashboard",value:function(t){return _.get("/dashboard/"+t)}},{key:"getTypeOneDashboards",value:function(){return _.get("/dashboard/gettypeone")}},{key:"getTypeTwoDashboards",value:function(){return _.get("/dashboard/gettypetwo")}},{key:"getTypeThreeDashboards",value:function(){return _.get("/dashboard/gettypethree")}},{key:"getDetailTypeDashboard",value:function(t){return _.get("/dashboard/getdetailtype/"+t)}},{key:"getExcelDashboard",value:function(t){return _.get("/dashboard/getexcelbyid/"+t)}}]),t}(),Ft=new At,Ot={name:"Nav",props:{msg:String},data:function(){return{options:{},series:[],category:[],data:[],list:[],color:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Ft.getTypeOneDashboards().then((function(e){t.list=e.data;for(var a=0;a<e.data.length;a++)t.category.push(e.data[a].categories),t.data.push(e.data[a].data),t.color.push(e.data[a].color);t.loadOption()}))},loadOption:function(){var t=this;this.options={colors:this.color,series:this.data,labels:this.category,dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}},chart:{type:"pie",events:{dataPointSelection:function(e,a,n){console.log(n.dataPointIndex);var s="";console.log(t.list);for(var r=0;r<t.list.length;r++)console.log(r),n.dataPointIndex==r&&(s=t.list[r].id);console.log(s),window.open("detailtype/"+s,"_blank")}}},title:{text:"กราฟแสดงจำนวนผลิตภัณฑ์ที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"},style:{fontSize:"9px",fontWeight:"bold",fontFamily:"Niramit"}}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Dt=Ot,St=Object(o["a"])(Dt,wt,xt,!1,null,"252a7d51",null),jt=St.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid row",staticStyle:{padding:"30px"}},[a("apexchart",{attrs:{width:"500",type:"pie",options:t.options,series:t.series}})],1)},Pt=[],$t={name:"Nav",props:{msg:String},data:function(){return{options:{},series:[],category:[],data:[],list:[],color:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Ft.getTypeTwoDashboards().then((function(e){t.list=e.data;for(var a=0;a<e.data.length;a++)t.category.push(e.data[a].categories),t.data.push(e.data[a].data),t.color.push(e.data[a].color);t.loadOption()}))},loadOption:function(){var t=this;this.options={series:this.data,labels:this.category,dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}},chart:{type:"pie",events:{dataPointSelection:function(e,a,n){console.log(n.dataPointIndex);var s="";console.log(t.list);for(var r=0;r<t.list.length;r++)console.log(r),n.dataPointIndex==r&&(s=t.list[r].id);console.log(s),window.open("detailtypetwo/"+s,"_blank")}}},title:{text:"กราฟแสดงจำนวนผลิตภัณฑ์ที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"},style:{fontSize:"9px",fontWeight:"bold",fontFamily:"Niramit"}}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Tt=$t,Lt=Object(o["a"])(Tt,Et,Pt,!1,null,"1a731eb3",null),Rt=Lt.exports,It={name:"Nav",props:{msg:String},components:{TypeOneGraph:jt,TypeTwoGraph:Rt},data:function(){return{}},mounted:function(){},methods:{},computed:{currentUser:function(){return this.$store.state.auth.user}}},Nt=It,Mt=Object(o["a"])(Nt,kt,Ct,!1,null,"2459d665",null),zt=Mt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่"),1==t.id?a("span",[t._v("ผ่านการตรวจสอบ")]):t._e(),2==t.id?a("span",[t._v("ไม่ผ่านการตรวจสอบ")]):t._e(),3==t.id?a("span",[t._v("ไม่มีเลขอย.")]):t._e(),t._v(" จำนวน "+t._s(t.list.length)+" รายการ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;width: 100px!important;",on:{click:function(a){return t.gotosearch(e.id)}}},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],Ht={first:"<<",last:">>",previous:"<",next:">"},Jt={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:Ht,filepath:"",id:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};C.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},getcategory:function(){var t=this;T.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",C.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;C.findGraphOne(this.id).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a.data),t.imagelists=[],t.list=a.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;m.a.get(F.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),m.a.get(F.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),m.a.get(F.getpythonlink()+"scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var c={name:r,content:n,status:1,fda:s};C.updatescraping(t.id,c).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){this.id=this.$route.params.id,this.getproduct(),this.getcategory()}},qt=Jt,Gt=(a("a31d"),Object(o["a"])(qt,Bt,Ut,!1,null,null,null)),Wt=Gt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"),1==t.id?a("span",[t._v("เลขที่อนุญาต")]):t._e(),2==t.id?a("span",[t._v("ประเภทผลิตภัณฑ์")]):t._e(),3==t.id?a("span",[t._v("ชื่อผลิตภัณฑ์")]):t._e(),4==t.id?a("span",[t._v("เลขที่อนุญาตและประเภทผลิตภัณฑ์")]):t._e(),5==t.id?a("span",[t._v("เลขที่อนุญาตและชื่อผลิตภัณฑ์")]):t._e(),6==t.id?a("span",[t._v("ประเภทผลิตภัณฑ์และชื่อผลิตภัณฑ์")]):t._e(),t._v(" จำนวน "+t._s(t.list.length)+" รายการ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;width: 100px!important;",on:{click:function(a){return t.gotosearch(e.id)}}},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],Qt={first:"<<",last:">>",previous:"<",next:">"},Vt={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:Qt,filepath:"",id:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;m.a.get(F.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};C.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},getcategory:function(){var t=this;T.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",C.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;C.findGraphTwo(this.id).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a.data),t.imagelists=[],t.list=a.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;m.a.get(F.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),m.a.get(F.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),m.a.get(F.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var c={name:r,content:n,status:1,fda:s};C.updatescraping(t.id,c).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){this.id=this.$route.params.id,this.getproduct(),this.getcategory()}},Xt=Vt,Zt=(a("f4eb"),Object(o["a"])(Xt,Yt,Kt,!1,null,null,null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddScopus",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อความ")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddScopus"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteScopus"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],ne=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getkeywords",value:function(t){return _.get("/keyword_dicts?name="+t)}},{key:"getkeyword",value:function(t){return _.get("/keyword_dicts/"+t)}},{key:"getrulebasekeyword",value:function(){return _.get("/rule_based_keyword/")}},{key:"createkeyword",value:function(t){return _.post("/keyword_dicts",t)}},{key:"updatekeyword",value:function(t,e){return _.put("/keyword_dicts/".concat(t),e)}},{key:"deletekeyword",value:function(t){return _.delete("/keyword_dicts/".concat(t))}}]),t}(),se=new ne,re={first:"<<",last:">>",previous:"<",next:">"},ce={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:re}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id),se.deletekeyword(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?se.createkeyword(e).then((function(){K.createdict(e).then((function(e){V.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):se.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};se.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;se.getkeywords(1).then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลข้อความ",se.getkeyword(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลข้อความ",this.data=[])}},mounted:function(){this.getcategory()}},ue=ce,oe=(a("28ad"),Object(o["a"])(ue,ee,ae,!1,null,null,null)),de=oe.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._l(t.list,(function(e){return a("table",{key:e.id,staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v(t._s(e.file))])])]),a("tbody",[t._m(0,!0),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(e.desctext)}})]),0!=e.keyword?a("td",{style:t.colorkey},t._l(e.keyword,(function(e,n){return a("tr",{key:n},[a("td",[a("span",{domProps:{innerHTML:t._s(e.sentent)}})]),a("td",[1==e.status?a("span",[t._v("เกินจริง")]):t._e(),9==e.status?a("span",[t._v("ไม่เกินจริง")]):t._e(),0==e.status?a("span"):t._e()]),a("td",[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.id,e.sen,1)}}},[a("i",{staticClass:"fa fa-check"})]),t._v("  "),a("button",{staticClass:"mb-3 btn btn-danger",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.id,e.sen,9)}}},[a("i",{staticClass:"fa fa-times"})])])])})),0):a("td",{style:t.colorkey},[a("tr",[t._v(" ไม่พบข้อความโฆษณา ")])])])])])})),t.list.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a",{attrs:{href:"Advertising?id="+t.back}},[1!=t.$route.query.id?a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}})]):t._e()])]),t.$route.query.id<t.alldata?a("div",{staticClass:"col-md-6",staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:"Advertising?id="+t.next}},[t._m(1)])]):t._e()]):t._e()],2)},le=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])}],fe=(a("fb6a"),function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getmap_rule_baseds",value:function(){return _.get("/map_rule_based")}},{key:"getmap_rule_based",value:function(t){return _.get("/map_rule_based/"+t)}},{key:"createmap_rule_based",value:function(t){return _.post("/map_rule_based",t)}},{key:"updateadvertise",value:function(t,e){return _.put("/advertise/".concat(t),e)}},{key:"updatemap_rule_based",value:function(t,e){return _.put("/map_rule_based/".concat(t),e)}},{key:"deletemap_rule_based",value:function(t,e){return _.put("/map_rule_based/updatestatus/".concat(t),e)}}]),t}()),pe=new fe,he={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:"",arrList:[],alldata:0,back:0,next:0}},methods:{savetorule:function(t,e){for(var a=this,n=[],s=function(s){K.getdicts("",t[s]).then(function(){var r=Object(h["a"])(regeneratorRuntime.mark((function r(c){var u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(c.data.length>0&&n.push(c.data[0].id),s+1!=t.length){r.next=6;break}return u="SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[".concat(n,"]'"),console.log(u),r.next=6,V.getbydict(u).then((function(t){if(0==t.data.length){var s="";s+="{";for(var r=0;r<n.length;r++)s+='"dict'+n[r]+'":1,';s+='"answer":'+e+",",s=s.slice(0,-1),s+="}";var c=JSON.parse(s);V.createrule_based(c).then((function(t){var e={rule_based_id:t.data.id,dict_id:n,status:1};pe.createmap_rule_based(e).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}))}else{var u={answer:e};V.updaterule_based(t.data[0].id,u).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}}));case 6:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},r=0;r<t.length;r++)s(r)},savetorule_based:function(t,e,a){var n=this;if(t.length!=e.length)for(var s=function(t){K.getdicts("",e[t]).then((function(s){if(0==s.data.length){var r={name:e[t],status:1};K.createdict(r).then((function(){t+1==e.length&&n.savetorule(e,a)}))}}))},r=0;r<e.length;r++)s(r);else this.savetorule(e,a)},checkkeyword:function(t){var e=this,a=this.finddescription(t);m.a.get(F.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),m.a.get(F.getpythonlink()+"/checkkeyword?name="+a).then((function(t){t.data.length>0&&(e.keyword=t.data)}))},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},getdata:function(){var t=this,e=5*this.$route.query.id,a=this.$route.query.id;console.log(a),C.getproductkeyword(a,e).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=function(e){m.a.get(F.getpythonlink()+"/worktokendesc?text="+a.data[e].desc).then((function(n){a.data[e].desctext=n.data;var s={sentent_keyword:n.data};C.sentent_keyword(t.$route.query.id,s).then(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:m.a.get(F.getpythonlink()+"checkkeyword?name="+a.data[e].desc+"&&id="+t.$route.query.id).then((function(n){console.log(n.data),n.data.length>0?a.data[e].keyword=n.data:a.data[e].keyword=0,e+1==a.data.length&&(t.list=a.data)}));case 1:case"end":return n.stop()}}),n)}))))}))},s=0;s<a.data.length;s++)n(s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){this.back=parseInt(this.$route.query.id)-1,this.next=parseInt(this.$route.query.id)+1,this.alldata=75,this.getdata()}},be=he,ge=(a("b1a6"),Object(o["a"])(be,ie,le,!1,null,null,null)),me=ge.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n+1},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},t._l(e.sen,(function(e,n){return a("span",{key:n},[t._v(t._s(e.name)+" ")])})),0),a("td",{style:e.bg},[1==e.answer?a("span",[t._v("เกินจริง")]):t._e(),9==e.answer?a("span",[t._v("ไม่เกินจริง")]):t._e(),e.answer?t._e():a("span")]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)])])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ประโยค")]),a("th",{attrs:{scope:"col"}},[t._v("สถานะ")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteScopus"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],_e={first:"<<",last:">>",previous:"<",next:">"},ke={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:_e}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id);var e={status:0};pe.deletemap_rule_based(this.pro_id,e).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?se.createkeyword(e).then((function(){K.createdict(e).then((function(e){V.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):se.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};se.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;pe.getmap_rule_baseds().then((function(e){t.list=e.data,console.log(e.data)}))},getid:function(t){this.pro_id=t}},mounted:function(){this.getcategory()}},Ce=ke,we=(a("1ed8"),Object(o["a"])(Ce,ve,ye,!1,null,null,null)),xe=we.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._l(t.list,(function(e){return a("table",{key:e.id,staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v(t._s(e.file))])])]),a("tbody",[t._m(0,!0),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(e.sentent_keyword)}})]),0!=e.data?a("td",{style:t.colorkey},t._l(e.data,(function(e,n){return a("tr",{key:n},[a("td",[a("span",{domProps:{innerHTML:t._s(e.sentent)}})]),a("td",[1==e.answer?a("span",[t._v("เกินจริง")]):t._e(),9==e.answer?a("span",[t._v("ไม่เกินจริง")]):t._e(),0==e.answer?a("span"):t._e()]),a("td",[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.dict_id,e.sen,1,e.id)}}},[a("i",{staticClass:"fa fa-check"})]),t._v("  "),a("button",{staticClass:"mb-3 btn btn-danger",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.dict_id,e.sen,9,e.id)}}},[a("i",{staticClass:"fa fa-times"})])])])})),0):a("td",{style:t.colorkey},[a("tr",[t._v(" ไม่พบข้อความโฆษณา ")])])])])])})),t.list.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a",{attrs:{href:"Advertising?id="+t.back}},[1!=t.$route.query.id?a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}})]):t._e()])]),t.$route.query.id<t.alldata?a("div",{staticClass:"col-md-6",staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:"Advertising?id="+t.next}},[t._m(1)])]):t._e()]):t._e()],2)},Fe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])}],Oe={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:"",arrList:[],alldata:0,back:0,next:0}},methods:{savetorule:function(t,e,a){var n=this;console.log(t);for(var s=[],r=function(r){K.getdicts("",t[r].name).then(function(){var c=Object(h["a"])(regeneratorRuntime.mark((function c(u){var o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(u.data.length>0&&s.push(u.data[0].id),console.log(s),r+1!=t.length){c.next=7;break}return o="SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[".concat(s,"]'"),console.log(o),c.next=7,V.getbydict(o).then((function(t){if(0==t.data.length){var r="";r+="{";for(var c=0;c<s.length;c++)r+='"dict'+s[c]+'":1,';r+='"answer":'+e+",",r=r.slice(0,-1),r+="}";var u=JSON.parse(r);V.createrule_based(u).then((function(t){var e={rule_based_id:t.data.id,dict_id:s,status:1};pe.createmap_rule_based(e).then((function(){var t={dict_id:s};pe.updateadvertise(a,t).then((function(){alert("บันทึกสำเร็จ"),n.getdata()}))}))}))}else{var o={answer:e};V.updaterule_based(t.data[0].id,o).then((function(){alert("บันทึกสำเร็จ"),n.getdata()}))}}));case 7:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}())},c=0;c<t.length;c++)r(c)},savetorule_based:function(t,e,a,n){var s=this;if(e=JSON.parse(e),t=JSON.parse(t),console.log(t),console.log(t.length),console.log(e.length),console.log("answer",a),t.length!=e.length)for(var r=function(t){K.getdicts("",e[t].name).then((function(r){if(console.log(r.data),0==r.data.length){var c={name:e[t].name,status:1};console.log(c),K.createdict(c).then((function(){}))}console.log(t+1,e.length),t+1==e.length&&(console.log(1),s.savetorule(e,a,n))}))},c=0;c<e.length;c++)r(c);else this.savetorule(e,a,n)},checkkeyword:function(t){var e=this,a=this.finddescription(t);m.a.get(F.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),m.a.get(F.getpythonlink()+"/checkkeyword?name="+a).then((function(t){t.data.length>0&&(e.keyword=t.data)}))},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},getdata:function(){var t=this;C.getdecision().then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list=a.data,console.log(t.list);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){this.back=parseInt(this.$route.query.id)-1,this.next=parseInt(this.$route.query.id)+1,this.alldata=75,this.getdata()}},De=Oe,Se=(a("060a"),Object(o["a"])(De,Ae,Fe,!1,null,null,null)),je=Se.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n+1},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},t._l(e.data,(function(e,n){return a("span",{key:n},[t._v(t._s(e)+" ")])})),0)])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("keywords")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],$e={first:"<<",last:">>",previous:"<",next:">"},Te={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:$e}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id);var e={status:0};pe.deletemap_rule_based(this.pro_id,e).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?se.createkeyword(e).then((function(){K.createdict(e).then((function(e){V.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):se.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";m.a.get(F.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};se.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;se.getrulebasekeyword().then((function(e){t.list=e.data,console.log(e.data)}))},getid:function(t){this.pro_id=t}},mounted:function(){this.getcategory()}},Le=Te,Re=(a("2c69"),Object(o["a"])(Le,Ee,Pe,!1,null,null,null)),Ie=Re.exports;n["a"].use(l["a"]);var Ne=new l["a"]({mode:"history",routes:[{path:"/import",alias:"/import",name:"import",component:j},{path:"/scraping",alias:"/scraping",name:"scraping",component:M},{path:"/category",alias:"/category",name:"category",component:q},{path:"/",alias:"/Corpus",name:"Corpus",component:et},{path:"/scrapingdelete",alias:"/scrapingdelete",name:"scrapingdelete",component:ot},{path:"/searchbyfda",alias:"/searchbyfda",name:"searchbyfda",component:_t},{path:"/Dashboard",alias:"/Dashboard",name:"Dashboard",component:zt},{path:"/detailtype/:id",alias:"/detailtype",name:"detailtype",component:Wt},{path:"/detailtypetwo/:id",alias:"/detailtypetwo",name:"detailtypetwo",component:te},{path:"/keywords",alias:"/keywords",name:"keywords",component:de},{path:"/Advertising",alias:"/Advertising",name:"Advertising",component:me},{path:"/rulebased",alias:"/rulebased",name:"rulebased",component:xe},{path:"/Advertise",alias:"/Advertise",name:"Advertise",component:je},{path:"/keywordrulebased",alias:"/keywordrulebased",name:"keywordrulebased",component:Ie}]}),Me=Ne,ze=a("1321"),Be=a.n(ze),Ue=a("3dc63"),He=a("2f62"),Je=a("500b"),qe=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"getUUID",value:function(){var t=(new Je["DeviceUUID"]).get();return t}},{key:"login",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",_.post("user/signin",e).then((function(t){return console.log(t.data),t.data.accessToken&&localStorage.setItem("users",JSON.stringify(t.data)),t.data}),(function(t){console.log(t),a.$router.push("/login"),alert("ชื่อหรือรหัสผ่านไม่ถูกต้อง")})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"logout",value:function(){localStorage.removeItem("users")}},{key:"role",value:function(){return _.get("role")}},{key:"getpage",value:function(t){return _.get("menu/menubyuserid/"+t)}},{key:"getname",value:function(t){return _.get("user/"+t)}}]),t}(),Ge=new qe,We=JSON.parse(localStorage.getItem("users")),Ye=We?{status:{loggedIn:!0},user:We}:{status:{loggedIn:!1},user:null},Ke={namespaced:!0,state:Ye,actions:{login:function(t,e){var a=t.commit;return Ge.login(e).then((function(t){return console.log(t),a("loginSuccess",t),Promise.resolve(t)}),(function(t){return a("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;Ge.logout(),e("logout")}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null}}};n["a"].use(He["a"]);var Qe=new He["a"].Store({modules:{auth:Ke}}),Ve=a("eb2e"),Xe=a.n(Ve);n["a"].use(Be.a),n["a"].component("apexchart",Be.a),n["a"].config.productionTip=!1,n["a"].use(Ue["a"]),n["a"].component("jw-pagination",Xe.a),new n["a"]({router:Me,store:Qe,render:function(t){return t(i)}}).$mount("#app")},"6c1b":function(t,e,a){},"72dd":function(t,e,a){},8062:function(t,e,a){},8094:function(t,e,a){},"81db":function(t,e,a){"use strict";a("8094")},"85ec":function(t,e,a){},"89f9":function(t,e,a){"use strict";a("0edc")},"8fa6":function(t,e,a){},"944c":function(t,e,a){},a31d:function(t,e,a){"use strict";a("40fc")},b1a6:function(t,e,a){"use strict";a("72dd")},b2b5:function(t,e,a){"use strict";a("6c1b")},ce38:function(t,e,a){"use strict";a("f9f0")},f4eb:function(t,e,a){"use strict";a("fc97")},f9f0:function(t,e,a){},fc97:function(t,e,a){}});
//# sourceMappingURL=app.c8ed8444.js.map