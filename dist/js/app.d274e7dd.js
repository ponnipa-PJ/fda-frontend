(function(t){function e(e){for(var n,o,c=e[0],i=e[1],u=e[2],l=0,f=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=i;r.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"0050":function(t,e,a){},"034f":function(t,e,a){"use strict";a("85ec")},"060a":function(t,e,a){"use strict";a("229c")},"0639":function(t,e,a){"use strict";a("dbdc")},"0cdd":function(t,e,a){},"0edc":function(t,e,a){},1:function(t,e,a){t.exports=a("56d7")},"12c6":function(t,e,a){"use strict";a("7698")},"13a1":function(t,e,a){"use strict";a("944c")},"1bad":function(t,e,a){"use strict";a("8062")},"1ed8":function(t,e,a){"use strict";a("8fa6")},2:function(t,e){},"229c":function(t,e,a){},"28ad":function(t,e,a){"use strict";a("0050")},"2c69":function(t,e,a){"use strict";a("3dc6")},3:function(t,e){},"3ad5":function(t,e,a){"use strict";a("9d28")},"3dc6":function(t,e,a){},"40fc":function(t,e,a){},4892:function(t,e,a){"use strict";a("0cdd")},"51e9":function(t,e,a){},5585:function(t,e,a){"use strict";a("51e9")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"topnav"},[t._l(t.menu,(function(e){return a("a",{key:e.id,class:e.class,attrs:{href:e.url}},[t._v(t._s(e.name))])})),t.currentUser?a("a",{staticStyle:{color:"white",cursor:"pointer"},on:{click:function(e){return t.logOut()}}},[t._v("ออกจากระบบ")]):t._e()],2),a("router-view")],1)},r=[],o=(a("b0c0"),a("d4ec")),c=a("bee2"),i=a("bc3a"),u=a.n(i),d=u.a.create({baseURL:"https://api-fda.ponnipa.in.th/api",headers:{"Content-type":"application/json"}}),l=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getUsers",value:function(t){return d.get("/user?name="+t)}},{key:"getdatabyrole",value:function(t){return d.get("/user/getdatabyrole?role="+t)}},{key:"updateToken",value:function(t,e){return d.put("/user/token/".concat(t),e)}},{key:"getUserBytoken",value:function(t){return d.get("/user/getbytoken/"+t)}},{key:"getUser",value:function(t){return d.get("/user/"+t)}},{key:"createUser",value:function(t){return d.post("/user",t)}},{key:"updateUser",value:function(t,e){return d.put("/user/".concat(t),e)}},{key:"updatetokenline",value:function(t,e){return d.put("/user/updatetokenline/".concat(t),e)}},{key:"getRoles",value:function(){return d.get("/roles")}},{key:"getMenu",value:function(){return d.get("/user/getmenuall")}},{key:"getMenubyRoleID",value:function(t){return d.get("/user/getmenu/"+t)}},{key:"getMenubyRoleIDAll",value:function(t){return d.get("/user/getmenuarray/"+t)}},{key:"createRoleMenu",value:function(t){return d.post("/role_menu",t)}},{key:"deleteRoleMenu",value:function(t){return d.delete("/role_menu/"+t)}}]),t}(),f=new l,p={name:"app",components:{},data:function(){return{show:!0,menu:[]}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{logOut:function(){this.$store.dispatch("auth/logout"),setTimeout((function(){location.reload()}),500),this.$router.push("/")}},mounted:function(){var t=this;"map"!=this.$route.params.name&&"login"!=this.$route.name&&"register"!=this.$route.name||(this.show=!1),this.currentUser&&f.getMenubyRoleID(this.currentUser.role_id).then((function(e){t.menu=e.data;for(var a=0;a<t.menu.length;a++)t.menu[a].class="",t.menu[a].url==t.$route.path&&(t.menu[a].class="active")}))}},h=p,m=(a("034f"),a("2877")),g=Object(m["a"])(h,s,r,!1,null,null,null),b=g.exports,v=(a("caad"),a("8c4f")),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"600px"}},[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"7"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")]),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",[a("tr",[a("td",{style:t.colorfda},[t._v("เลขที่อนุญาต")]),a("td",{style:t.colorfda},[t.list[0].status?a("span",[t._v(t._s(t.list[0].fda))]):t._e()]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].fda)+" ")]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].list.cncnm||""))]),t.list[0].is_fda&&t.list[0].is_cat&&t.list[0].is_name?a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#a3e9a4"},attrs:{rowspan:"3"}},[a("span",[t._v("ผ่าน")])]):a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#f9bdbb"},attrs:{rowspan:"3"}},[a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorcat},[t._v("ประเภทผลิตภัณฑ์")]),a("td",{style:t.colorcat},[t._v(t._s(t.type))]),a("td",{style:t.colorcat},[a("span",{domProps:{innerHTML:t._s(t.type)}})]),a("td",{style:t.colorcat},[t.list[0].is_cat?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorname},[t._v("ชื่อผลิตภัณฑ์")]),a("td",{style:t.colorname},[t._v(t._s(t.list[0].list.productha)),a("br"),t._v(t._s(t.list[0].list.produceng))]),a("td",{style:t.colorname},[a("span",{domProps:{innerHTML:t._s(t.matchname)}})]),a("td",{style:t.colorname},[t.list[0].is_name?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table mt-3"},[t._m(1),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagelists}}),t._v(t._s(e.name))]),a("td",{style:e.bg},[t._v(t._s(e.detail))]),a("td",{staticStyle:{width:"300px"},style:e.bg},[a("div",[t._v("เลขที่อนุญาต : "+t._s(e.fda)),a("br"),t._v(" ชื่อผลิตภัณฑ์: "+t._s(e.list.productha)+" ")])]),a("td",{style:e.bg},[a("div",{domProps:{innerHTML:t._s(t.cut(t.tokenize))}})]),1==e.status?a("td",{staticStyle:{"background-color":"#BDEDFF"}},[a("p",{staticClass:"card-text"},[t._v("สถานะ : "+t._s(e.list.cncnm||""))]),a("p",{staticClass:"card-text"},[t._v("ประเภทผลิตภัณฑ์ :"),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.typepro))])]),a("p",{staticClass:"card-text"},[t._v("ใบสำคัญ/เลขที่อนุญาต : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.lcnno))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (TH) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.productha))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (EN) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.produceng))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผู้รับอนุญาต : "+t._s(e.list.licen))]),a("p",{staticClass:"card-text"},[t._v("สถานที่ผลิต : "+t._s(e.list.Addr))]),a("p",{staticClass:"card-text"},[t._v("Newcode : "+t._s(e.list.Newcode))])]):a("td",{style:e.bg},[t._v(" ไม่พบข้อมูล")])])})),0)]):t._e()])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 1")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากเว็บไซต์")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ผลการตรวจสอบ")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อสรุป")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("สินค้า")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูล")]),a("th",{attrs:{scope:"col"}},[t._v("FDA")]),a("th",{attrs:{scope:"col"}},[t._v("ตัดคำ")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")])])])}],k=a("1da1"),w=(a("96cf"),a("ac1f"),a("5319"),a("5b81"),a("2532"),a("d3b7"),a("25f0"),a("e9c4"),a("3ca3"),a("ddb0"),a("8134")),C=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getproducts",value:function(t,e,a){return d.get("/products?status="+t+"&&statusdelete="+e+"&&statusfda="+a)}},{key:"getproductkeyword",value:function(t,e){return d.get("/products/getproductkeyword?start="+t+"&&end="+e)}},{key:"getdecision",value:function(t){return d.get("/products/getdecision?user="+t)}},{key:"findGraphOne",value:function(t){return d.get("/products/findGraphOne?status="+t)}},{key:"findGraphTwo",value:function(t){return d.get("/products/findGraphTwo?status="+t)}},{key:"scraping",value:function(t){return d.post("/products/findscraping",t)}},{key:"scrapingheader",value:function(t){return d.post("/products/findscrapingheader",t)}},{key:"saveimageproduct",value:function(t){return d.post("/products/saveimageproduct",t)}},{key:"getproduct",value:function(t){return d.get("/products/"+t)}},{key:"createproduct",value:function(t){return d.post("/products",t)}},{key:"updateproduct",value:function(t,e){return d.put("/products/".concat(t),e)}},{key:"sentent_keyword",value:function(t,e){return d.put("/products/sentent_keyword/".concat(t),e)}},{key:"updatescraping",value:function(t,e){return d.put("/products/updatescraping/".concat(t),e)}},{key:"updatefdastatus",value:function(t,e){return d.put("/products/updatefdastatus/".concat(t),e)}},{key:"findproduct",value:function(t){return d.post("/products/findproduct",t)}},{key:"findproductfda",value:function(t){return d.post("/products/findproductfda",t)}},{key:"deleteproduct",value:function(t,e){return d.put("/products/updatedeletestatus/".concat(t),e)}}]),t}(),x=new C,A=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getfdatypes",value:function(t){return d.get("/fdatypes?name="+t)}},{key:"getfdatype",value:function(t){return d.get("/fdatypes/"+t)}},{key:"createfdatype",value:function(t){return d.post("/fdatypes",t)}},{key:"updatefdatype",value:function(t,e){return d.put("/fdatypes/".concat(t),e)}},{key:"deletefdatype",value:function(t){return d.delete("/fdatypes/".concat(t))}}]),t}(),O=new A,F=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getpythonlink",value:function(){return"https://api-fda.ponnipa.in.th"}}]),t}(),S=new F,D={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:""}},methods:{checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),console.log(S.getpythonlink()+"/checkkeyword?name="+a),u.a.get(S.getpythonlink()+"/checkkeyword?name="+a).then((function(t){console.log(t.data),t.data.length>0&&(e.keyword=t.data)}))},checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",u.a.get(S.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&u.a.get(S.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.list[0].is_cat&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4"),a.list[0].is_fda&&(a.colorfda="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),u.a.get(S.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[];var e={url:this.url};x.findproduct(e).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data[0].content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.getimagefile(a.data[0].id),n=a.data[0].content,s="",r=[],s=a.data[0].fda?a.data[0].fda.replaceAll(" ",""):"",r.push({id:a.data[0].id,name:a.data[0].name,detail:n,fda:s,cat_name:a.data[0].cat_name,is_name:a.data[0].is_name,is_cat:a.data[0].is_cat,is_fda:a.data[0].is_fda}),o=function(e){if(!r[e].fda||isNaN(s)||0==s)r[e].status=0,r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var o=t.fdatype(n.typepro);o=o.replaceAll(" ","");var c=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=o,""==t.type&&n.typepro&&(t.type=n.typepro,o=n.typepro),O.getfdatypes(o).then((function(){if(0==a.data.length){var t={name:o};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(a.data[0].content,o),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,o+c+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],x.getproduct(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name,is_name:a.data.is_name,is_cat:a.data.is_cat,is_fda:a.data.is_fda}),o=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var o=t.findcategory(r[e].detail),c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var i=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),O.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(o,c),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,c+i+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(w["a"])(t.target.files[0]).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){var s,r,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],o=e.findfda(r),a.push({detail:r,fda:o}),s+1!=n.length){t.next=13;break}c=regeneratorRuntime.mark((function t(n){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,o).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),i=0;case 8:if(!(i<a.length)){t.next=13;break}return t.delegateYield(c(i),"t0",10);case 10:i++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.searchbyfda())}},j=D,E=(a("4892"),Object(m["a"])(j,_,y,!1,null,null,null)),P=E.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("หมวด")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.cat_id,expression:"data.cat_id"}],staticClass:"form-control form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"cat_id",e.target.multiple?a:a[0])}}},t._l(t.category,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"form-group"},[a("label",[t._v("ชื่อไฟล์")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"10",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})]),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")])])])]),t._v(" รายการสินค้าที่ตรวจสอบ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";width: 100px!important;"},[null==e.statusfda?a("span",[t._v("ไม่มีเลขอย.")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"password"}},[t._v("หมวด")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.cat_id,expression:"data.cat_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"cat_id",e.target.multiple?a:a[0])}}},t._l(t.category,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},T=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],R=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getcategorys",value:function(t){return d.get("/category?status="+t)}},{key:"getcategory",value:function(t){return d.get("/category/"+t)}},{key:"database_path",value:function(){return d.get("/database_path")}},{key:"createcategory",value:function(t){return d.post("/category",t)}},{key:"updatecategory",value:function(t,e){return d.put("/category/".concat(t),e)}},{key:"deletecategory",value:function(t){return d.delete("/category/".concat(t))}}]),t}(),L=new R,I={first:"<<",last:">>",previous:"<",next:">"},N={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:0,imagelists:[],pageOfItems:[],customLabels:I,filepath:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};x.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},save:function(){var t=this;if(null==this.data.file||""==this.data.file)alert("กรุณากรอกชื่อไฟล์");else if(null==this.data.url||""==this.data.url)alert("กรุณากรอก url");else{var e={cat_id:this.data.cat_id,file:this.data.file,path:"uploads/"+this.data.file+".html",image_path:"uploads/"+this.data.file+"_files",status:0,url:this.data.url,statusdelete:1};0==this.pro_id?x.createproduct(e).then((function(e){document.getElementById("closedproduct").click(),t.getproduct();var a={id:e.data.id,path:"uploads/"+t.data.file+".html"};t.scrape(a)})):x.updateproduct(this.pro_id,e).then((function(){document.getElementById("closedproduct").click(),t.getproduct();var e={id:t.pro_id,path:"uploads/"+t.data.file+".html"};t.scrape(e),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;L.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",x.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;x.getproducts(this.status,"","").then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.imagelists=[],t.list=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;u.a.get(S.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),u.a.get(S.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),u.a.get(S.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var o={name:r,content:n,status:1,fda:s};x.updatescraping(t.id,o).then((function(){e.data={},e.gotocheckstatus(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotocheckstatus:function(t){window.open("/check?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){var t=this;this.getproduct(),this.getcategory(),L.database_path().then((function(e){t.filepath=e.data.backend_path}))}},M=N,U=(a("1bad"),Object(m["a"])(M,$,T,!1,null,null,null)),z=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("หมวด")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteCategory",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deletecategory()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closeddeletecategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteCategory"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],J={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[]}},methods:{deletecategory:function(){var t=this;L.deletecategory(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closeddeletecategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกชื่อหมวด");else{var e={name:this.data.name,status:1};console.log(e),0==this.pro_id?L.createcategory(e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")})):L.updatecategory(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;L.getcategorys(1).then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลหมวดสินค้า",L.getcategory(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลหมวดสินค้า",this.data=[])}},mounted:function(){this.getcategory()}},q=J,G=(a("13a1"),Object(m["a"])(q,B,H,!1,null,null,null)),W=G.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddScopus",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.id))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12 mb-5 mt-3"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels,pageSize:20},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("คำศัพท์")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อความ")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddScopus"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteScopus"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],Q=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getdicts",value:function(t,e){return d.get("/dicts?status="+t+"&&name="+e)}},{key:"getdict",value:function(t){return d.get("/dicts/"+t)}},{key:"createdict",value:function(t){return d.post("/dicts",t)}},{key:"updatedict",value:function(t,e){return d.put("/dicts/".concat(t),e)}},{key:"deletedict",value:function(t){return d.delete("/dicts/".concat(t))}}]),t}(),V=new Q,X={first:"<<",last:">>",previous:"<",next:">"},Z={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:X}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id),V.deletedict(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกคำศัพท์");else{var e={name:this.data.name,status:1};console.log(e),0==this.pro_id?V.createdict(e).then((function(e){console.log(e.data),1062==e.data.err?alert("มีคำนี้ในระบบแล้ว"):(document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ"))})):V.updatedict(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;V.getdicts(1,"").then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลคำศัพท์",V.getdict(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลคำศัพท์",this.data=[])}},mounted:function(){this.getcategory()}},tt=Z,et=(a("ce38"),Object(m["a"])(tt,Y,K,!1,null,null,null)),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่ยกเลิกการตรวจสอบ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน")]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน")]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[0==t.status?a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]):t._e(),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"password"}},[t._v("หมวด")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.cat_id,expression:"data.cat_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"cat_id",e.target.multiple?a:a[0])}}},t._l(t.category,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-repeat"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยัน")])])}],rt={first:"<<",last:">>",previous:"<",next:">"},ot={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:rt,filepath:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:1};x.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(null==this.data.file||""==this.data.file)alert("กรุณากรอกชื่อไฟล์");else if(null==this.data.url||""==this.data.url)alert("กรุณากรอก url");else{var e={cat_id:this.data.cat_id,file:this.data.file,path:"uploads/"+this.data.file+".html",image_path:"uploads/"+this.data.file+"_files",status:0,url:this.data.url,statusdelete:1};0==this.pro_id?x.createproduct(e).then((function(e){document.getElementById("closedproduct").click(),t.getproduct();var a={id:e.data.id,path:"uploads/"+t.data.file+".html"};t.scrape(a)})):x.updateproduct(this.pro_id,e).then((function(){document.getElementById("closedproduct").click(),t.getproduct(),alert("บันทึกสำเร็จ")}))}},getcategory:function(){var t=this;L.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",x.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;x.getproducts("",0,"").then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.imagelists=[],t.list=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;u.a.get(S.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),u.a.get(S.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),u.a.get(S.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var o={name:r,content:n,status:1,fda:s};x.updatescraping(t.id,o).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){var t=this;this.getproduct(),this.getcategory(),L.database_path().then((function(e){t.filepath=e.data.backend_path}))}},ct=ot,it=(a("89f9"),Object(m["a"])(ct,nt,st,!1,null,null,null)),ut=it.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"600px"}},[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",staticStyle:{width:"500px"},attrs:{id:"exampleFormControlTextarea1"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")]),t._l(t.list,(function(e,n){return a("div",{key:n},[a("h4",{staticClass:"mt-3"},[t._v("สินค้ารายการที่ "+t._s(n+1))]),a("fdacontent",{staticClass:"mb-5",attrs:{fdaid:e.id}})],1)}))],2)},lt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",[a("tr",[a("td",{style:t.colorfda},[t._v("เลขที่อนุญาต")]),a("td",{style:t.colorfda},[t.list[0].status?a("span",[t._v(t._s(t.list[0].fda))]):t._e()]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].fda)+" ")]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].list.cncnm||""))]),t.statusfda&&t.statuscat&&t.statusname?a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#a3e9a4"},attrs:{rowspan:"3"}},[a("span",[t._v("ผ่าน")])]):a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#f9bdbb"},attrs:{rowspan:"3"}},[a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorcat},[t._v("ประเภทผลิตภัณฑ์")]),a("td",{style:t.colorcat},[t._v(t._s(t.type))]),a("td",{style:t.colorcat},[a("span",{domProps:{innerHTML:t._s(t.matchcategory)}})]),a("td",{style:t.colorcat},[t.statuscat?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorname},[t._v("ชื่อผลิตภัณฑ์")]),a("td",{style:t.colorname},[t._v(t._s(t.list[0].list.productha)),a("br"),t._v(t._s(t.list[0].list.produceng))]),a("td",{style:t.colorname},[a("span",{domProps:{innerHTML:t._s(t.matchname)}})]),a("td",{style:t.colorname},[t.statusname?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(1),a("tbody",[t._m(2),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(t.desc)}})]),t.keyword.length?a("td",{style:t.colorkey},t._l(t.keyword,(function(e,n){return a("div",{key:n},[a("span",{domProps:{innerHTML:t._s(e)}}),a("br")])})),0):a("td",{style:t.colorkey},[t._v("ไม่พบข้อความโฆษณา")])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table mt-3"},[t._m(3),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagelists}}),t._v(t._s(e.name))]),a("td",{style:e.bg},[t._v(t._s(e.detail))]),a("td",{staticStyle:{width:"300px"},style:e.bg},[a("div",[t._v("เลขที่อนุญาต : "+t._s(e.fda)),a("br"),t._v(" ชื่อผลิตภัณฑ์: "+t._s(e.list.productha)+" ")])]),a("td",{style:e.bg},[a("div",{domProps:{innerHTML:t._s(t.cut(t.tokenize))}})]),1==e.status?a("td",{staticStyle:{"background-color":"#BDEDFF"}},[a("p",{staticClass:"card-text"},[t._v("สถานะ : "+t._s(e.list.cncnm||""))]),a("p",{staticClass:"card-text"},[t._v("ประเภทผลิตภัณฑ์ :"),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.typepro))])]),a("p",{staticClass:"card-text"},[t._v("ใบสำคัญ/เลขที่อนุญาต : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.lcnno))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (TH) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.productha))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (EN) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.produceng))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผู้รับอนุญาต : "+t._s(e.list.licen))]),a("p",{staticClass:"card-text"},[t._v("สถานที่ผลิต : "+t._s(e.list.Addr))]),a("p",{staticClass:"card-text"},[t._v("Newcode : "+t._s(e.list.Newcode))])]):a("td",{style:e.bg},[t._v(" ไม่พบข้อมูล")])])})),0)]):t._e()])},pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 1")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากเว็บไซต์")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ผลการตรวจสอบ")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อสรุป")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 2")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("สินค้า")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูล")]),a("th",{attrs:{scope:"col"}},[t._v("FDA")]),a("th",{attrs:{scope:"col"}},[t._v("ตัดคำ")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")])])])}],ht={name:"App",components:{},props:{fdaid:String},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:""}},methods:{finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),console.log(S.getpythonlink()+"/checkkeyword?name="+a),u.a.get(S.getpythonlink()+"/checkkeyword?name="+a).then((function(t){console.log(t.data),t.data.length>0&&(e.keyword=t.data)}))},updatestatusfda:function(){if(1==this.list[0].status){var t={};t=this.statusfda&&this.statuscat&&this.statusname?{statusfda:!0,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname}:{statusfda:!1,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname},x.updatefdastatus(this.list[0].id,t).then((function(){}))}return""},checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",u.a.get(S.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&u.a.get(S.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.matchcategory.includes("red")&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),u.a.get(S.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[];var e={url:this.url};x.findproduct(e).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data[0].content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.getimagefile(a.data[0].id),n=a.data[0].content,s="",r=[],s=a.data[0].fda?a.data[0].fda.replaceAll(" ",""):"",r.push({id:a.data[0].id,name:a.data[0].name,detail:n,fda:s,cat_name:a.data[0].cat_name}),o=function(e){if(!r[e].fda||isNaN(s)||0==s)r[e].status=0,r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+t.finddescription(r[e].detail);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var o=t.fdatype(n.typepro);o=o.replaceAll(" ","");var c=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=o,""==t.type&&n.typepro&&(t.type=n.typepro,o=n.typepro),O.getfdatypes(o).then((function(){if(0==a.data.length){var t={name:o};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(a.data[0].content,o),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,o+c+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],x.getproduct(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),o=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+t.finddescription(r[e].detail);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var o=t.findcategory(r[e].detail),c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var i=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),O.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(o,c),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,c+i+n.produceng),t.checkkeyword(r[e].detail),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(w["a"])(t.target.files[0]).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){var s,r,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],o=e.findfda(r),a.push({detail:r,fda:o}),s+1!=n.length){t.next=13;break}c=regeneratorRuntime.mark((function t(n){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,o).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),i=0;case 8:if(!(i<a.length)){t.next=13;break}return t.delegateYield(c(i),"t0",10);case 10:i++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){console.log(this.fdaid),this.id=this.fdaid,this.searchbyfda()}},mt=ht,gt=(a("b2b5"),Object(m["a"])(mt,ft,pt,!1,null,null,null)),bt=gt.exports,vt={name:"App",components:{fdacontent:bt},data:function(){return{fdaid:0,list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:""}},methods:{checkfdamatch:function(t,e){var a=this;this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",u.a.get(S.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){var a=this;this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&u.a.get(S.getpythonlink()+"/matchcategory?category="+t+"&&category_real="+e).then((function(t){a.matchcategory=t.data,a.matchcategory.includes("red")&&(a.statuscat=1,a.colorcat="background-color:#a3e9a4")}))},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),u.a.get(S.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.list=[];var e={fda:this.url};x.findproductfda(e).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list=a.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],x.getproduct(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),o=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},t.gettokenize(r[e].detail,""),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},t.gettokenize(r[e].detail,""),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+r[e].detail;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),t.checkfdamatch(s,n.productha+n.produceng);var o=t.findcategory(r[e].detail),c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var i=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),O.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(o,c),t.gettokenize(a.data.content,c+i+n.produceng),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(w["a"])(t.target.files[0]).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){var s,r,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],o=e.findfda(r),a.push({detail:r,fda:o}),s+1!=n.length){t.next=13;break}c=regeneratorRuntime.mark((function t(n){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,o).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),i=0;case 8:if(!(i<a.length)){t.next=13;break}return t.delegateYield(c(i),"t0",10);case 10:i++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.searchbyfda())}},_t=vt,yt=(a("81db"),Object(m["a"])(_t,dt,lt,!1,null,null,null)),kt=yt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:" row mt-5"},[a("div",{staticClass:"card col-md-5"},[a("TypeOneGraph")],1),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"card col-md-5"},[a("TypeTwoGraph")],1)])])},Ct=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid row",staticStyle:{padding:"30px"}},[a("apexchart",{attrs:{width:"500",type:"pie",options:t.options,series:t.series}})],1)},At=[],Ot=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getAllLevelDashboards",value:function(){return d.get("/dashboard")}},{key:"getAllLevelDashboard",value:function(t){return d.get("/dashboard/"+t)}},{key:"getTypeOneDashboards",value:function(){return d.get("/dashboard/gettypeone")}},{key:"getTypeTwoDashboards",value:function(){return d.get("/dashboard/gettypetwo")}},{key:"getTypeThreeDashboards",value:function(){return d.get("/dashboard/gettypethree")}},{key:"getDetailTypeDashboard",value:function(t){return d.get("/dashboard/getdetailtype/"+t)}},{key:"getExcelDashboard",value:function(t){return d.get("/dashboard/getexcelbyid/"+t)}}]),t}(),Ft=new Ot,St={name:"Nav",props:{msg:String},data:function(){return{options:{},series:[],category:[],data:[],list:[],color:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Ft.getTypeOneDashboards().then((function(e){t.list=e.data;for(var a=0;a<e.data.length;a++)t.category.push(e.data[a].categories),t.data.push(e.data[a].data),t.color.push(e.data[a].color);t.loadOption()}))},loadOption:function(){var t=this;this.options={colors:this.color,series:this.data,labels:this.category,dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}},chart:{type:"pie",events:{dataPointSelection:function(e,a,n){console.log(n.dataPointIndex);var s="";console.log(t.list);for(var r=0;r<t.list.length;r++)console.log(r),n.dataPointIndex==r&&(s=t.list[r].id);console.log(s),window.open("detailtype/"+s,"_blank")}}},title:{text:"กราฟแสดงจำนวนผลิตภัณฑ์ที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"},style:{fontSize:"9px",fontWeight:"bold",fontFamily:"Niramit"}}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Dt=St,jt=Object(m["a"])(Dt,xt,At,!1,null,"252a7d51",null),Et=jt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid row",staticStyle:{padding:"30px"}},[a("apexchart",{attrs:{width:"500",type:"pie",options:t.options,series:t.series}})],1)},$t=[],Tt={name:"Nav",props:{msg:String},data:function(){return{options:{},series:[],category:[],data:[],list:[],color:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Ft.getTypeTwoDashboards().then((function(e){t.list=e.data;for(var a=0;a<e.data.length;a++)t.category.push(e.data[a].categories),t.data.push(e.data[a].data),t.color.push(e.data[a].color);t.loadOption()}))},loadOption:function(){var t=this;this.options={series:this.data,labels:this.category,dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}},chart:{type:"pie",events:{dataPointSelection:function(e,a,n){console.log(n.dataPointIndex);var s="";console.log(t.list);for(var r=0;r<t.list.length;r++)console.log(r),n.dataPointIndex==r&&(s=t.list[r].id);console.log(s),window.open("detailtypetwo/"+s,"_blank")}}},title:{text:"กราฟแสดงจำนวนผลิตภัณฑ์ที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"},style:{fontSize:"9px",fontWeight:"bold",fontFamily:"Niramit"}}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Rt=Tt,Lt=Object(m["a"])(Rt,Pt,$t,!1,null,"1a731eb3",null),It=Lt.exports,Nt={name:"Nav",props:{msg:String},components:{TypeOneGraph:Et,TypeTwoGraph:It},data:function(){return{}},mounted:function(){},methods:{},computed:{currentUser:function(){return this.$store.state.auth.user}}},Mt=Nt,Ut=Object(m["a"])(Mt,wt,Ct,!1,null,"2459d665",null),zt=Ut.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่"),1==t.id?a("span",[t._v("ผ่านการตรวจสอบ")]):t._e(),2==t.id?a("span",[t._v("ไม่ผ่านการตรวจสอบ")]):t._e(),3==t.id?a("span",[t._v("ไม่มีเลขอย.")]):t._e(),t._v(" จำนวน "+t._s(t.list.length)+" รายการ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;width: 100px!important;",on:{click:function(a){return t.gotosearch(e.id)}}},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],Jt={first:"<<",last:">>",previous:"<",next:">"},qt={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:Jt,filepath:"",id:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};x.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},getcategory:function(){var t=this;L.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",x.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;x.findGraphOne(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a.data),t.imagelists=[],t.list=a.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;u.a.get(S.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),u.a.get(S.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),u.a.get(S.getpythonlink()+"scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var o={name:r,content:n,status:1,fda:s};x.updatescraping(t.id,o).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){this.id=this.$route.params.id,this.getproduct(),this.getcategory()}},Gt=qt,Wt=(a("a31d"),Object(m["a"])(Gt,Bt,Ht,!1,null,null,null)),Yt=Wt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t._v(" รายการสินค้าที่ไม่ผ่านการตรวจสอบตามเงื่อนไข"),1==t.id?a("span",[t._v("เลขที่อนุญาต")]):t._e(),2==t.id?a("span",[t._v("ประเภทผลิตภัณฑ์")]):t._e(),3==t.id?a("span",[t._v("ชื่อผลิตภัณฑ์")]):t._e(),4==t.id?a("span",[t._v("เลขที่อนุญาตและประเภทผลิตภัณฑ์")]):t._e(),5==t.id?a("span",[t._v("เลขที่อนุญาตและชื่อผลิตภัณฑ์")]):t._e(),6==t.id?a("span",[t._v("ประเภทผลิตภัณฑ์และชื่อผลิตภัณฑ์")]):t._e(),t._v(" จำนวน "+t._s(t.list.length)+" รายการ "),0==t.status?a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddProduct",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]):t._e(),t.list.length>0?a("table",{staticClass:"table mt-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("เลขที่อนุญาต")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("หมวด")]),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ชื่อสินค้า")]):t._e(),1==t.status?a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลสินค้า")]):t._e(),1==t.status?a("th",{staticStyle:{width:"100px!important"},attrs:{scope:"col"}},[t._v("สถานะการตรวจสอบ")]):t._e(),a("th",{attrs:{scope:"col"}},[t._v("url")]),a("th",{attrs:{scope:"col"}}),0==t.status?a("th",{attrs:{scope:"col"}}):t._e()])]),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(e.file))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.fda))]):t._e(),a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.cat_fda))]),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.src}}),t._v(t._s(e.name))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;",on:{click:function(a){return t.gotosearch(e.id)}}},[t._v(t._s(e.content))]):t._e(),1==t.status?a("td",{style:e.bg+";cursor: pointer;width: 100px!important;",on:{click:function(a){return t.gotosearch(e.id)}}},[null==e.statusfda?a("span",[t._v("ยังไม่ได้ตรวจสอบ")]):t._e(),t._v(" "),0==e.statusfda?a("span",[t._v("ไม่ผ่าน "),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e(),1==e.statusfda?a("span",[t._v("ผ่าน"),a("br"),t._v("วันที่ตรวจสอบ : "+t._s(t.changdata(e.created_date)))]):t._e()]):t._e(),0==t.status?a("td",{staticStyle:{width:"500px","word-break":"break-word"},style:e.bg},[t._v(t._s(e.url))]):t._e(),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(0,!0)]),a("br"),a("br"),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),a("br"),a("br"),a("a",{attrs:{href:e.url,target:"_blank"}},[a("i",{staticClass:"fa fa-globe fa-2x",attrs:{"aria-hidden":"true"}})])]),0==t.status?a("td",{style:e.bg},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.scrape(e)}}},[t._v(" ดึงข้อมูล ")])]):t._e()])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("Name File")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.file,expression:"data.file"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.file},on:{input:function(e){e.target.composing||t.$set(t.data,"file",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control form-control-sm",attrs:{rows:"15",type:"text"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedproduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteProduct",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteproduct()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteProduct",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddProduct"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteProduct"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบสินค้า")])])}],Vt={first:"<<",last:">>",previous:"<",next:">"},Xt={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",urlPath:"",title:"",data:{},pro_id:0,category:[],status:1,imagelists:[],pageOfItems:[],customLabels:Vt,filepath:"",id:""}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},getimagefile:function(t){var e=this;u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(a){return e.imagelists.push({id:t,path:"data:image/jpeg;base64,"+a.data}),"data:image/jpeg;base64,"+a.data}))},deleteproduct:function(){var t=this,e={statusdelete:0};x.deleteproduct(this.pro_id,e).then((function(){document.getElementById("closedDeleteProduct").click(),t.getproduct(),setTimeout((function(){location.reload()}),500)}))},getcategory:function(){var t=this;L.getcategorys(1).then((function(e){t.category=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลสินค้า",x.getproduct(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลสินค้า",this.data=[])},getproduct:function(){var t=this;x.findGraphTwo(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a.data),t.imagelists=[],t.list=a.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changdata:function(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวนสินค้า","ส่วนประกอบ","น้ำหนัก"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},scrape:function(t){var e=this;u.a.get(S.getpythonlink()+"/scraping?id="+t.id+"&&path="+t.path).then((function(){})),u.a.get(S.getpythonlink()+"/scrapingcontent?path="+t.path).then((function(a){var n=a.data,s=e.findfda(n);s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n=n.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),n=n.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),u.a.get(S.getpythonlink()+"/scrapingheader?path="+t.path).then((function(a){var r=a.data;if(r=r.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),n){var o={name:r,content:n,status:1,fda:s};x.updatescraping(t.id,o).then((function(){alert("บันทึกเรียบร้อย"),e.data={},e.gotosearch(t.id),e.getproduct()}))}}))}))},gotosearch:function(t){window.open("/import?id="+t,"_blank")},gotofile:function(t){window.open(this.filepath+t,"_blank")}},mounted:function(){this.id=this.$route.params.id,this.getproduct(),this.getcategory()}},Zt=Xt,te=(a("f4eb"),Object(m["a"])(Zt,Kt,Qt,!1,null,null,null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddScopus",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.pageOfItems,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[t._v(t._s(n+1))]),a("td",{style:e.bg},[t._v(t._s(e.name))]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)]),t._v("  "),a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(2,!0)])])])})),0)]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12 mb-5 mt-3"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels,pageSize:20},on:{changePage:t.onChangePage}})],1)]),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อความ")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddScopus"}},[a("i",{staticClass:"fa fa-edit"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#DeleteScopus"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],se=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getkeywordsall",value:function(t){return d.get("/keywords?name="+t)}},{key:"updatekeywordall",value:function(t,e){return d.put("/keywords/".concat(t),e)}},{key:"updatedictid",value:function(t,e){return d.put("/keywords/updatedictid/".concat(t),e)}},{key:"getkeywords",value:function(t){return d.get("/keyword_dicts?name="+t)}},{key:"getkeyword",value:function(t){return d.get("/keyword_dicts/"+t)}},{key:"getrulebasekeyword",value:function(){return d.get("/rule_based_keyword/")}},{key:"createkeyword",value:function(t){return d.post("/keyword_dicts",t)}},{key:"updatekeyword",value:function(t,e){return d.put("/keyword_dicts/".concat(t),e)}},{key:"deletekeyword",value:function(t){return d.delete("/keyword_dicts/".concat(t))}}]),t}(),re=new se,oe=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getrule_baseds",value:function(){return d.get("/rule_based")}},{key:"createdcolumnrule_based",value:function(t){return d.get("/rule_based/createcolumn?name="+t)}},{key:"getrule_based",value:function(t){return d.get("/rule_based/"+t)}},{key:"getbydict",value:function(t){return d.get("/rule_based/getbydict?name="+t)}},{key:"createrule_based",value:function(t){return d.post("/rule_based",t)}},{key:"updaterule_based",value:function(t,e){return d.put("/rule_based/".concat(t),e)}},{key:"deleterule_based",value:function(t){return d.delete("/rule_based/".concat(t))}}]),t}(),ce=new oe,ie={first:"<<",last:">>",previous:"<",next:">"},ue={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:ie}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id),re.deletekeyword(this.pro_id).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?re.createkeyword(e).then((function(a){console.log(a.data),1062==a.data.err?alert("มีคำนี้ในระบบแล้ว"):V.createdict(e).then((function(e){console.log(e.data),ce.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):re.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};re.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;re.getkeywords(1).then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลข้อความ",re.getkeyword(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลข้อความ",this.data=[])}},mounted:function(){this.getcategory()}},de=ue,le=(a("28ad"),Object(m["a"])(de,ae,ne,!1,null,null,null)),fe=le.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._l(t.list,(function(e){return a("table",{key:e.id,staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v(t._s(e.file))])])]),a("tbody",[t._m(0,!0),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(e.desctext)}})]),0!=e.keyword?a("td",{style:t.colorkey},t._l(e.keyword,(function(e,n){return a("tr",{key:n},[a("td",[a("span",{domProps:{innerHTML:t._s(e.sentent)}})]),a("td",[1==e.status?a("span",[t._v("เกินจริง")]):t._e(),9==e.status?a("span",[t._v("ไม่เกินจริง")]):t._e(),0==e.status?a("span"):t._e()]),a("td",[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.id,e.sen,1)}}},[a("i",{staticClass:"fa fa-check"})]),t._v("  "),a("button",{staticClass:"mb-3 btn btn-danger",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.id,e.sen,9)}}},[a("i",{staticClass:"fa fa-times"})])])])})),0):a("td",{style:t.colorkey},[a("tr",[t._v(" ไม่พบข้อความโฆษณา ")])])])])])})),t.list.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a",{attrs:{href:"Advertising?id="+t.back}},[1!=t.$route.query.id?a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}})]):t._e()])]),t.$route.query.id<t.alldata?a("div",{staticClass:"col-md-6",staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:"Advertising?id="+t.next}},[t._m(1)])]):t._e()]):t._e()],2)},he=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])}],me=(a("fb6a"),function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getmap_rule_baseds",value:function(){return d.get("/map_rule_based")}},{key:"getmap_rule_based",value:function(t){return d.get("/map_rule_based/"+t)}},{key:"getallrulebased",value:function(){return d.get("/map_rule_based/getallrulebased")}},{key:"findadanduser",value:function(t,e){return d.get("/map_rule_based/findadanduser?ad_id="+t+"&&user="+e)}},{key:"createmap_rule_based",value:function(t){return d.post("/map_rule_based",t)}},{key:"createproduct_token",value:function(t){return d.post("/product_token",t)}},{key:"getproduct_token",value:function(t){return d.post("/product_token/getproduct",t)}},{key:"getmapproduct",value:function(t){return d.post("/product_token/getmapproduct",t)}},{key:"updateadvertise",value:function(t,e){return d.put("/advertise/".concat(t),e)}},{key:"updateanswer",value:function(t,e){return d.put("/map_rule_based/updateanswer/".concat(t),e)}},{key:"updatemap_rule_based",value:function(t,e){return d.put("/map_rule_based/".concat(t),e)}},{key:"deletemap_rule_based",value:function(t,e){return d.put("/map_rule_based/updatestatus/".concat(t),e)}}]),t}()),ge=new me,be={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:"",arrList:[],alldata:0,back:0,next:0}},methods:{savetorule:function(t,e){for(var a=this,n=[],s=function(s){V.getdicts("",t[s]).then(function(){var r=Object(k["a"])(regeneratorRuntime.mark((function r(o){var c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o.data.length>0&&n.push(o.data[0].id),s+1!=t.length){r.next=6;break}return c="SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[".concat(n,"]'"),console.log(c),r.next=6,ce.getbydict(c).then((function(t){if(0==t.data.length){var s="";s+="{";for(var r=0;r<n.length;r++)s+='"dict'+n[r]+'":1,';s+='"answer":'+e+",",s=s.slice(0,-1),s+="}";var o=JSON.parse(s);ce.createrule_based(o).then((function(t){var e={rule_based_id:t.data.id,dict_id:n,status:1};ge.createmap_rule_based(e).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}))}else{var c={answer:e};ce.updaterule_based(t.data[0].id,c).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}}));case 6:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},r=0;r<t.length;r++)s(r)},savetorule_based:function(t,e,a){var n=this;if(t.length!=e.length)for(var s=function(t){V.getdicts("",e[t]).then((function(s){if(0==s.data.length){var r={name:e[t],status:1};V.createdict(r).then((function(){t+1==e.length&&n.savetorule(e,a)}))}}))},r=0;r<e.length;r++)s(r);else this.savetorule(e,a)},checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),u.a.get(S.getpythonlink()+"/checkkeyword?name="+a).then((function(t){t.data.length>0&&(e.keyword=t.data)}))},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},getdata:function(){var t=this,e=5*this.$route.query.id,a=this.$route.query.id;console.log(a),x.getproductkeyword(a,e).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=function(e){u.a.get(S.getpythonlink()+"/worktokendesc?text="+a.data[e].desc).then((function(n){a.data[e].desctext=n.data;var s={sentent_keyword:n.data};x.sentent_keyword(t.$route.query.id,s).then(Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:u.a.get(S.getpythonlink()+"checkkeyword?name="+a.data[e].desc+"&&id="+t.$route.query.id).then((function(n){console.log(n.data),n.data.length>0?a.data[e].keyword=n.data:a.data[e].keyword=0,e+1==a.data.length&&(t.list=a.data)}));case 1:case"end":return n.stop()}}),n)}))))}))},s=0;s<a.data.length;s++)n(s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){console.log(this.$route.query.id),this.back=parseInt(this.$route.query.id)-1,this.next=parseInt(this.$route.query.id)+1,this.alldata=75,this.getdata()}},ve=be,_e=(a("b1a6"),Object(m["a"])(ve,pe,he,!1,null,null,null)),ye=_e.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"mb-5"},[t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n+1},[a("td",{staticStyle:{width:"5%"}},[t._v(t._s(n+1))]),a("td",[a("tr",{staticStyle:{border:"none"}},t._l(e.dict,(function(e,n){return a("td",{key:n,staticStyle:{border:"none",padding:"0px"}},[t._v(t._s(e.dict_name)+"     ")])})),0),a("tr",{staticStyle:{border:"none"}},[t._l(e.dict,(function(e,n){return a("td",{key:n,staticStyle:{border:"none",padding:"0px",color:"blue"}},[t._v(t._s(e.dict_id)+"   ")])})),t._v("  ")],2)]),a("td",{style:e.bg+";width:10%"},[1==e.answer?a("span",[t._v("เกินจริง")]):t._e(),9==e.answer?a("span",[t._v("ไม่เกินจริง")]):t._e(),e.answer?t._e():a("span")])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e()]),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},we=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("ประโยค")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],Ce={first:"<<",last:">>",previous:"<",next:">"},xe={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:Ce}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id);var e={status:0};ge.deletemap_rule_based(this.pro_id,e).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?re.createkeyword(e).then((function(){V.createdict(e).then((function(e){ce.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):re.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};re.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;ge.getallrulebased().then((function(e){t.list=e.data,console.log(e.data)}))},getid:function(t){this.pro_id=t}},mounted:function(){this.getcategory()}},Ae=xe,Oe=(a("1ed8"),Object(m["a"])(Ae,ke,we,!1,null,null,null)),Fe=Oe.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._l(t.list,(function(e){return a("table",{key:e.id,staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col",colspan:"2"}},[t._v(t._s(e.file))])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[t._v(" ข้อความโฆษณา ")]),a("div",{staticClass:"col-md-6"},[a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"mb-3 btn btn-success",staticStyle:{"text-align":"right"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#AddScopus",type:"submit"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" เพิ่ม keyword")])])])])])]),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(e.sentent_keyword)}})]),0!=e.data?a("td",{style:t.colorkey},t._l(e.data,(function(e,n){return a("tr",{key:n},[a("td",{staticStyle:{width:"70%"}},[a("span",{domProps:{innerHTML:t._s(e.sentent)}})]),a("td",{staticStyle:{width:"20%"}},[1==e.answer?a("span",[t._v("เกินจริง")]):t._e(),9==e.answer?a("span",[t._v("ไม่เกินจริง")]):t._e(),0==e.answer?a("span"):t._e()]),e.answer?t._e():a("td",{staticStyle:{width:"10%"}},[a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.dict_id,e.dict_name,1,e.id)}}},[a("i",{staticClass:"fa fa-check"}),t._v(" เกินจริง ")]),t._v("  "),a("button",{staticClass:"mb-3 btn btn-danger",attrs:{type:"submit"},on:{click:function(a){return t.savetorule_based(e.dict_id,e.dict_name,9,e.id)}}},[a("i",{staticClass:"fa fa-times"}),t._v(" ไม่เกินจริง")])])])})),0):a("td",{style:t.colorkey},[a("tr",[t._v(" ไม่พบข้อความโฆษณา ")])])])])])})),t.list.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a",{attrs:{href:"Advertising?id="+t.back}},[1!=t.$route.query.id?a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}})]):t._e()])]),t.$route.query.id<t.alldata?a("div",{staticClass:"col-md-6",staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:"Advertising?id="+t.next}},[t._m(0)])]):t._e()]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความโฆษณา")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])])],2)},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"mb-3 btn btn-info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])}],je={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:"",arrList:[],alldata:0,back:0,next:0,title:"",data:{},pro_id:0}},methods:{getid:function(t){var e=this;this.pro_id=t,0!=this.pro_id?(this.title="แก้ไขข้อมูลข้อความ",re.getkeyword(this.pro_id).then((function(t){e.data=t.data}))):(this.title="เพิ่มข้อมูลข้อความ",this.data=[])},save:function(){if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var t={id:this.data.id,name:this.data.name,status:1};console.log(t),0==this.pro_id?re.createkeyword(t).then((function(){V.createdict(t).then((function(){document.getElementById("closedcategory").click(),alert("บันทึกสำเร็จ")}))})):re.updatekeyword(this.pro_id,t).then((function(){document.getElementById("closedcategory").click(),alert("บันทึกสำเร็จ")}))}},savetorule:function(t,e,a){var n=this;console.log(t);for(var s=[],r=[],o=function(o){V.getdicts("",t[o].name).then(function(){var c=Object(k["a"])(regeneratorRuntime.mark((function c(i){var u;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:i.data.length>0&&(s.push(i.data[0].id),r.push({id:i.data[0].id,name:t[o].name})),console.log(s),o+1==t.length&&(u="SELECT m.* FROM map_rule_based m WHERE m.status = 1 and m.dict_id = '[".concat(s,"]'"),console.log(u),ce.getbydict(u).then((function(t){if(console.log(t.data),0==t.data.length){var o={rule_based_id:t.data.id,advertise_id:a,status:1,answer:e};ge.createmap_rule_based(o).then((function(t){console.log(t.data);var e=t.data.id,o={dict_id:s};ge.updateadvertise(a,o).then((function(){for(var t=function(t){o={map_rule_based_id:e,dict_id:r[t].id,dict_name:r[t].name,no:t+1},ce.createrule_based(o).then((function(){t+1==s.length&&(alert("บันทึกสำเร็จ"),n.getdata())}))},a=0;a<r.length;a++){var o;t(a)}}))}))}else{var c={answer:e};ge.updateanswer(t.data[0].id,c).then((function(){alert("บันทึกสำเร็จ"),n.getdata()}))}})));case 3:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}())},c=0;c<t.length;c++)o(c)},savetorule_based:function(t,e,a,n){var s=this,r=JSON.parse(t),o=JSON.parse(e);ge.findadanduser(n,this.currentUser.id).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.data),0==e.data.length&&(c={advertise_id:n,answer:a,user:s.currentUser.id,status:1},ge.createmap_rule_based(c).then((function(t){for(var e=t.data.id,a=function(t){c={map_rule_based_id:e,dict_id:r[t],dict_name:o[t],no:t+1},ce.createrule_based(c).then((function(){t+1==r.length&&(alert("บันทึกสำเร็จ"),s.getdata())}))},n=0;n<r.length;n++){var c;a(n)}})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),u.a.get(S.getpythonlink()+"/checkkeyword?name="+a).then((function(t){t.data.length>0&&(e.keyword=t.data)}))},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},getdata:function(){var t=this;x.getdecision(this.currentUser.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list=a.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){this.back=parseInt(this.$route.query.id)-1,this.next=parseInt(this.$route.query.id)+1,this.alldata=75,this.getdata()},computed:{currentUser:function(){return this.$store.state.auth.user}}},Ee=je,Pe=(a("060a"),Object(m["a"])(Ee,Se,De,!1,null,null,null)),$e=Pe.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[t.list.length>0?a("table",{staticClass:"table",attrs:{width:"100%"}},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n+1},[a("td",[t._v(t._s(n+1))]),a("td",{staticStyle:{width:"70%"}},[a("tr",{staticStyle:{border:"none"}},t._l(e.data,(function(e,n){return a("td",{key:n,staticStyle:{border:"none",padding:"0px"}},[t._v(t._s(e)+"  ")])})),0),a("tr",{staticStyle:{border:"none"}},t._l(e.keyword_id,(function(e){return a("td",{key:e,staticStyle:{border:"none",padding:"0px",color:"blue"}},[t._v(t._s(e)+" ")])})),0)]),a("td",{staticStyle:{width:"20%"}},[t._v(t._s(e.category))])])})),0)]):t._e(),0==t.list.length?a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"AddScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",[t._v("ข้อความ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedcategory",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"DeleteScopus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.deleteScopus()}}},[t._v(" ยืนยัน ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closedDeleteScopus",type:"button","data-bs-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("keywords")]),a("th",{attrs:{scope:"col"}},[t._v("หมวดหมู่")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("ยืนยันการลบหมวด")])])}],Le={first:"<<",last:">>",previous:"<",next:">"},Ie={name:"App",components:{},data:function(){return{type:0,list:[],url:"",file:"",status:!1,urlPath:"",title:"",data:{},pro_id:0,category:[],pageOfItems:[],customLabels:Le}},methods:{onChangePage:function(t){this.pageOfItems=t,window.scrollTo(0,0)},deleteScopus:function(){var t=this;console.log(this.pro_id);var e={status:0};ge.deletemap_rule_based(this.pro_id,e).then((function(e){console.log(e.data),document.getElementById("closedDeleteScopus").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))},save:function(){var t=this;if(console.log(this.data),null==this.data.name||""==this.data.cat_id)alert("กรุณากรอกข้อความ");else{var e={id:this.data.id,name:this.data.name,status:1};console.log(e),0==this.pro_id?re.createkeyword(e).then((function(){V.createdict(e).then((function(e){ce.createdcolumnrule_based(e.data.id).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}))})):re.updatekeyword(this.pro_id,e).then((function(){document.getElementById("closedcategory").click(),t.getcategory(),alert("บันทึกสำเร็จ")}))}},token:function(t){var e="";return u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t).then((function(t){e=t.data})),e},updatetoken:function(t,e){var a=this,n="";u.a.get(S.getpythonlink()+"/tokenkeyword?text="+t.name).then((function(s){a.tokenize=s.data,n=s.data.replaceAll(" ",""),n=n.replaceAll(".",""),n=n.replaceAll("''",""),n=n.replaceAll(",,",","),n=n.replaceAll("[",""),n=n.replaceAll("]",""),n=n.replaceAll("'",""),n=n.replaceAll(","," | ");var r={name:t.name,token:n};re.updatekeyword(t.id,r).then((function(){"update"==e&&(document.getElementById("closedcategory").click(),a.getcategory(),alert("บันทึกสำเร็จ"))}))}))},getcategory:function(){var t=this;re.getrulebasekeyword().then((function(e){t.list=e.data}))},getid:function(t){this.pro_id=t}},mounted:function(){this.getcategory()}},Ne=Ie,Me=(a("2c69"),Object(m["a"])(Ne,Te,Re,!1,null,null,null)),Ue=Me.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card mt-5",staticStyle:{width:"80%"}},[a("div",{staticClass:"card-body login-card-body mt-3"},[a("h3",{staticClass:"login-box-msg",staticStyle:{"text-align":"center"}},[t._v("เข้าสู่ระบบ")]),a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1",id:"email",placeholder:"กรุณากรอกชื่อผู้ใช้งาน"},domProps:{value:t.user.email},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signIn()},input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._m(1),t.eye?a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control form-control-sm",attrs:{type:"password",id:"password",placeholder:"กรุณากรอกรหัสผ่าน"},domProps:{value:t.user.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signIn()},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]):t._e(),a("div",{staticClass:"social-auth-links text-center mb-3 mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.signIn()}}},[t._v("เข้าสู่ระบบ")])])])])])])])},Be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"email"}},[t._v("ชื่อผู้ใช้งาน"),a("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group mt-3",staticStyle:{"margin-bottom":"0px"}},[a("label",{attrs:{for:"password"}},[t._v("รหัสผ่าน"),a("span",{staticStyle:{color:"red"}},[t._v("*")])])])}],He={name:"Nav",props:{msg:String},data:function(){return{concert_id:0,menu:[],user:{},eye:!0}},mounted:function(){var t=this;console.log(this.currentUser),this.currentUser&&(this.$router.push("/Corpus"),f.getMenubyRoleID(this.currentUser.role_id).then((function(e){t.menu=e.data})))},methods:{showPassword:function(t){this.eye=1!=t},signIn:function(){var t=this;if(""==this.user.email||null==this.user.email)alert("กรุณากรอกอีเมล");else if(""==this.user.password||null==this.user.password)alert("กรุณากรอกรหัสผ่าน");else{var e={email:this.user.email,password:this.user.password};this.$store.dispatch("auth/login",e).then((function(){f.getMenubyRoleID(t.currentUser.role_id).then((function(e){var a=e.data[0].url;t.$router.push(a),location.reload()}))}),(function(t){alert("ชื่อหรือรหัสผ่านไม่ถูกต้อง"),console.log(t)}))}}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},currentUser:function(){return this.$store.state.auth.user}}},Je=He,qe=(a("de09"),Object(m["a"])(Je,ze,Be,!1,null,"44d24780",null)),Ge=qe.exports,We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"col mb-3 mt-3",staticStyle:{"text-align":"right"}},[a("a",[a("button",{staticClass:"btn btn-success",attrs:{type:"button",id:"get_file","data-bs-toggle":"modal","data-bs-target":"#AddUser"},on:{click:function(e){return t.getid(0)}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" เพิ่มผู้ใช้งาน ")])])]),a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",[t._v(" "+t._s(n+1)+" ")]),a("td",[t._v(" "+t._s(e.email)+" ")]),a("td",[t._v(" "+t._s(e.role_name)+" ")]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)])])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"AddUser",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"username"}},[t._v("ชื่อผู้ใช้งาน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1",id:"username",placeholder:"กรุณากรอกอีเมล"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"password"}},[t._v("สิทธิ์การใช้งาน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role_id,expression:"user.role_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role_id",e.target.multiple?a:a[0])}}},t._l(t.roles,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"form-group mt-3"},[a("label",{attrs:{for:"password"}},[t._v("รหัสผ่าน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control form-control-sm",attrs:{type:"password",id:"password",placeholder:"กรุณากรอกรหัสผ่าน"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-secondary",attrs:{id:"closeduser",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])])])},Ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"table-active"},[a("th",{attrs:{scope:"col"}},[t._v("ลำดับที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อผู้ใช้งาน")]),a("th",{attrs:{scope:"col"}},[t._v("สิทธิ์การใช้งาน")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddUser"}},[a("i",{staticClass:"fa fa-edit"})])}],Ke={name:"Nav",props:{msg:String},data:function(){return{concert_id:0,list:[],user:{},user_id:0,hash:0,title:"",roles:[]}},mounted:function(){this.getUsers(),this.getroles()},methods:{getroles:function(){var t=this;f.getRoles().then((function(e){t.roles=e.data}))},getid:function(t){var e=this;this.user_id=t,0!=this.user_id?(this.title="แก้ไขข้อมูลผู้ใช้งาน",f.getUser(this.user_id).then((function(t){e.user=t.data,e.hash=e.user.password}))):(this.title="เพิ่มข้อมูลผู้ใช้งาน",this.user=[])},save:function(){var t=this;if(""==this.user.email)alert("กรุณากรอกชื่อผู้ใช้งาน");else if(""==this.user.password)alert("กรุณากรอกรหัสผ่าน");else{var e={firstname:this.user.firstname,lastname:this.user.lastname,email:this.user.email,role_id:this.user.role_id,password:this.user.password,line_token:this.user.line_token,hash:this.hash,active:1};0==this.user_id?f.createUser(e).then((function(){document.getElementById("closeduser").click(),t.getUsers()})):f.updateUser(this.user_id,e).then((function(){document.getElementById("closeduser").click(),t.getUsers()}))}},getUsers:function(){var t=this;f.getUsers("").then((function(e){t.list=e.data}))}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},currentUser:function(){return this.$store.state.auth.user}}},Qe=Ke,Ve=(a("65a7"),Object(m["a"])(Qe,We,Ye,!1,null,"518dd294",null)),Xe=Ve.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container mt-3 mb-3"},[a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[t._v("สิทธิ์การใช้งาน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.role_type,expression:"role_type"}],staticClass:"form-control form-control-sm",attrs:{id:"exampleFormControlSelect1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.role_type=e.target.multiple?a:a[0]},function(e){return t.getarray()}]}},t._l(t.roles,(function(e,n){return a("option",{key:n+1,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"row mt-3"},t._l(t.menus,(function(e){return a("div",{key:e.menu_id,staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.menu_id,expression:"menu_id"}],attrs:{type:"checkbox",id:e.page},domProps:{value:e.id,checked:Array.isArray(t.menu_id)?t._i(t.menu_id,e.id)>-1:t.menu_id},on:{change:function(a){var n=t.menu_id,s=a.target,r=!!s.checked;if(Array.isArray(n)){var o=e.id,c=t._i(n,o);s.checked?c<0&&(t.menu_id=n.concat([o])):c>-1&&(t.menu_id=n.slice(0,c).concat(n.slice(c+1)))}else t.menu_id=r}}}),a("span",[t._v(" "+t._s(e.name))])])])])})),0),a("div",{staticClass:"row mt-3 mb-3"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])])},ta=[],ea=(a("4de4"),{first:"<<",last:">>",previous:"<",next:">"}),aa={name:"Carlist",components:{},props:{msg:String},data:function(){return{list:[],roles:[],license:"",role_type:"",licenses:[],customLabels:ea,pageOfItems:[],car_id:"",menu_id:[],menus:[]}},methods:{save:function(){var t=this;f.deleteRoleMenu(this.role_type).then((function(){for(var e=0;e<t.menu_id.length;e++){var a={menu_id:t.menu_id[e],role_id:t.role_type};f.createRoleMenu(a).then((function(){})).catch((function(t){console.log(t)}))}alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),500),window.scrollTo(0,0)}))},onChangePage:function(t){this.pageOfItems=t},getMenu:function(){var t=this;f.getMenu().then((function(e){t.menus=e.data}))},getarray:function(){var t=this;this.menu_id=[],f.getMenubyRoleIDAll(this.role_type).then((function(e){null==e.data.menu?t.menu_id=[]:t.menu_id=JSON.parse(e.data.menu)}))},getroles:function(){var t=this;f.getRoles().then((function(e){t.roles=e.data,t.role_type=t.roles[0].id,t.getarray()}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"}},mounted:function(){this.getMenu(),this.getroles()},computed:{filteredList:function(){var t=this;return this.licenses.filter((function(e){return e.license.toLowerCase().includes(t.license.toLowerCase())}))}}},na=aa,sa=(a("a3f0"),Object(m["a"])(na,Ze,ta,!1,null,"18fe60e3",null)),ra=sa.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("div",{staticClass:"container"},[a("table",{staticClass:"table table-bordered"},[t._m(0),a("draggable",{tag:"tbody",attrs:{list:t.list,tag:"tbody"}},t._l(t.list,(function(e,n){return a("tr",{key:n,staticStyle:{cursor:"move"}},[a("td",[t._v(" "+t._s(n+1)+" ")]),a("td",[t._v(" "+t._s(e.name)+" ")]),a("td",[a("a",{on:{click:function(a){return t.getid(e.id)}}},[t._m(1,!0)])])])})),0)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"center"}},[a("button",{staticClass:"btn btn btn-success btn-sm",staticStyle:{color:"white","text-align":"center"},on:{click:function(e){return t.saveorderlist()}}},[t._v(" บันทึก ")])]),a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-4"})]),a("div",{staticClass:"modal fade",attrs:{id:"AddUser",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.title))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"card-body mt-3"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("ชื่อเมนู")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",min:"1",id:"username"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer mt-3"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn btn-secondary btn-sm",attrs:{id:"closedmenu",type:"button","data-bs-dismiss":"modal"}},[t._v(" ปิด ")])])])])])])},ca=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"table-active"},[a("th",{attrs:{scope:"col"}},[t._v("ลำดับที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อเมนู")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-warning btn-sm",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#AddUser"}},[a("i",{staticClass:"fa fa-edit"})])}],ia=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getmenus",value:function(){return d.get("/menus")}},{key:"getmenu",value:function(t){return d.get("/menus/"+t)}},{key:"updatemenu",value:function(t,e){return d.put("/menus/".concat(t),e)}},{key:"updateorder",value:function(t,e){return d.put("/menus/updateorder/".concat(t),e)}}]),t}(),ua=new ia,da=a("b76a"),la=a.n(da),fa={name:"Nav",components:{draggable:la.a},props:{msg:String},data:function(){return{concert_id:0,list:[],user:{},user_id:0,hash:0,title:"",roles:[]}},mounted:function(){this.getMenus()},methods:{saveorderlist:function(){for(var t=this,e=function(e){console.log(e+1),n={no:e+1},ua.updateorder(t.list[e].id,n).then((function(){e+1==t.list.length&&(alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),500))}))},a=0;a<this.list.length;a++){var n;e(a)}},getRoles:function(){var t=this;f.getRolesAll().then((function(e){t.roles=e.data}))},getid:function(t){var e=this;this.user_id=t,0!=this.user_id&&(this.title="แก้ไขชื่อเมนู",ua.getmenu(this.user_id).then((function(t){e.user=t.data,console.log(t.data)})))},save:function(){var t=this;if(null==this.user.name)alert("กรุณากรอกชื่อ");else{var e={name:this.user.name};console.log(e),0==this.user_id?f.getUsers(this.user.email).then((function(a){console.log(a.data),0==a.data.length?f.createUser(e).then((function(){document.getElementById("closedmenu").click(),t.getMenus()})):alert("อีเมลล์นี้มีในระบบแล้ว")})):ua.updatemenu(this.user_id,e).then((function(e){console.log(e.data),e.data&&(document.getElementById("closedmenu").click(),t.getMenus(),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0))}))}},getMenus:function(){var t=this;ua.getmenus().then((function(e){t.list=e.data,console.log(e.data)}))}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},currentUser:function(){return this.$store.state.auth.user}}},pa=fa,ha=(a("3ad5"),Object(m["a"])(pa,oa,ca,!1,null,"eec708fc",null)),ma=ha.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"600px"}},[a("div",{staticClass:"form-group mt-5 mb-3"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"7"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")]),t.list.length>0&&t.url?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",[a("tr",[a("td",{style:t.colorfda},[t._v("เลขที่อนุญาต")]),a("td",{style:t.colorfda},[t.list[0].status?a("span",[t._v(t._s(t.list[0].fda))]):t._e()]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].fda)+" ")]),a("td",{style:t.colorfda},[t._v(t._s(t.list[0].list.cncnm||""))]),t.statusfda&&t.statuscat&&t.statusname?a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#a3e9a4"},attrs:{rowspan:"3"}},[a("span",[t._v("ผ่าน")]),t._v(t._s(t.updatestatusfda()))]):a("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"#f9bdbb"},attrs:{rowspan:"3"}},[a("span",[t._v("ไม่ผ่าน")]),t._v(t._s(t.updatestatusfda()))])]),a("tr",[a("td",{style:t.colorcat},[t._v("ประเภทผลิตภัณฑ์")]),a("td",{style:t.colorcat},[t._v(t._s(t.type))]),a("td",{style:t.colorcat},[a("span",{domProps:{innerHTML:t._s(t.matchcategory)}})]),a("td",{style:t.colorcat},[t.statuscat?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])]),a("tr",[a("td",{style:t.colorname},[t._v("ชื่อผลิตภัณฑ์")]),a("td",{style:t.colorname},[t._v(t._s(t.list[0].list.productha)),a("br"),t._v(t._s(t.list[0].list.produceng))]),a("td",{style:t.colorname},[a("span",{domProps:{innerHTML:t._s(t.matchname)}})]),a("td",{style:t.colorname},[t.statusname?a("span",[t._v("ผ่าน")]):a("span",[t._v("ไม่ผ่าน")])])])])]):t._e(),t.list.length>0&&t.url?a("table",{staticClass:"table mt-3 mb-3"},[t._m(1),a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{style:e.bg},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagelists}}),t._v(t._s(e.name))]),a("td",{style:e.bg},[t._v(t._s(e.detail))]),a("td",{staticStyle:{width:"300px"},style:e.bg},[a("div",[t._v("เลขที่อนุญาต : "+t._s(e.fda)),a("br"),t._v(" ชื่อผลิตภัณฑ์: "+t._s(e.list.productha)+" ")])]),a("td",{style:e.bg},[a("div",{domProps:{innerHTML:t._s(t.cut(t.tokenize))}})]),1==e.status?a("td",{staticStyle:{"background-color":"#BDEDFF"}},[a("p",{staticClass:"card-text"},[t._v("สถานะ : "+t._s(e.list.cncnm||""))]),a("p",{staticClass:"card-text"},[t._v("ประเภทผลิตภัณฑ์ :"),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.typepro))])]),a("p",{staticClass:"card-text"},[t._v("ใบสำคัญ/เลขที่อนุญาต : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.lcnno))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (TH) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.productha))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผลิตภัณฑ์ (EN) : "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(e.list.produceng))])]),a("p",{staticClass:"card-text"},[t._v("ชื่อผู้รับอนุญาต : "+t._s(e.list.licen))]),a("p",{staticClass:"card-text"},[t._v("สถานที่ผลิต : "+t._s(e.list.Addr))]),a("p",{staticClass:"card-text"},[t._v("Newcode : "+t._s(e.list.Newcode))])]):a("td",{style:e.bg},[t._v(" ไม่พบข้อมูล")])])})),0)]):t._e()])},ba=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("เงื่อนไขการตรวจสอบข้อที่ 1")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อมูลจากเว็บไซต์")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ผลการตรวจสอบ")]),a("th",{staticStyle:{"text-align":"center","background-color":"#ffb454"},attrs:{scope:"col"}},[t._v("ข้อสรุป")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("สินค้า")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูล")]),a("th",{attrs:{scope:"col"}},[t._v("FDA")]),a("th",{attrs:{scope:"col"}},[t._v("ตัดคำ")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลจากฐานข้อมูลอย.")])])])}],va={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:""}},methods:{checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data})),console.log(S.getpythonlink()+"/checkkeyword?name="+a),u.a.get(S.getpythonlink()+"/checkkeyword?name="+a).then((function(t){console.log(t.data),t.data.length>0&&(e.keyword=t.data)}))},updatestatusfda:function(){if(1==this.list[0].status){var t={};t=this.statusfda&&this.statuscat&&this.statusname?{statusfda:!0,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname}:{statusfda:!1,cat_fda:this.type,is_fda:this.statusfda,is_cat:this.statuscat,is_name:this.statusname},x.updatefdastatus(this.list[0].id,t).then((function(){}))}return""},checkfdamatch:function(t,e){var a=this;console.log(t),console.log(e),this.matchname="",this.statusname=0,this.colorname="background-color:#f9bdbb",console.log("http://127.0.0.1:5000/matchname?name="+t+"&&name_real="+e),u.a.get(S.getpythonlink()+"/matchname?name="+t+"&&name_real="+e).then((function(t){a.matchname=t.data,a.matchnamesum=a.matchname.replaceAll("red","black"),a.matchname.includes("red")&&(a.statusname=1,a.colorname="background-color:#a3e9a4")}))},checkcategorymatch:function(t,e){this.matchcategory="",this.statuscat=0,this.colorcat="background-color:#f9bdbb",e&&t.includes(e)&&(this.statuscat=1,this.colorcat="background-color:#a3e9a4",this.matchcategory=e)},cut:function(t){var e=t.toString();return e},gettokenize:function(t,e){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e||(e="xxx"),u.a.get(S.getpythonlink()+"/worktoken?namereal_result="+e+"&&text="+t).then((function(t){a.tokenize=t.data}));case 2:case"end":return n.stop()}}),n)})))()},getimagefile:function(t){var e=this;return this.imagelists="",u.a.get(S.getpythonlink()+"/base64?id="+t).then((function(t){e.imagelists="data:image/jpeg;base64,"+t.data})),this.imagelists},downloadHtml:function(){var t=this,e=this.urlInput;fetch(e).then((function(t){return t.text()})).then((function(e){return t.downloadAsFile("report.html",e)}))},downloadAsFile:function(t,e){var a=this.createDownloadableLink(t,e),n=new MouseEvent("click");a.dispatchEvent(n)},createDownloadableLink:function(t,e){var a=document.createElement("a");return a.download=t,a.href="data:application/octet-stream,".concat(e),a},search:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[];var e={url:this.url};x.findproduct(e).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data[0].content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.getimagefile(a.data[0].id),n=a.data[0].content,s="",r=[],s=a.data[0].fda?a.data[0].fda.replaceAll(" ",""):"",r.push({id:a.data[0].id,name:a.data[0].name,detail:n,fda:s,cat_name:a.data[0].cat_name}),o=function(e){if(!r[e].fda||isNaN(s)||0==s)r[e].status=0,r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.checkkeyword(r[e].detail),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(console.log(n.cncnm),r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+" "+r[e].detail;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),s=s.replaceAll("&"," "),console.log(s),t.checkfdamatch(s,n.productha+" "+n.produceng);var o=t.fdatype(n.typepro);o=o.replaceAll(" ","");var c=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=o,""==t.type&&n.typepro&&(t.type=n.typepro,o=n.typepro),O.getfdatypes(o).then((function(){if(0==a.data.length){var t={name:o};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(a.data[0].content,o),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,o+c+n.produceng),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4","คงอยู่"==n.cncnm?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchbyfda:function(){var t=this;this.statusname=0,this.statuscat=0,this.statusfda=0,this.colorname="background-color:#f9bdbb",this.colorfda="background-color:#f9bdbb",this.colorcat="background-color:#f9bdbb",this.list=[],x.getproduct(this.id).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==a.data.content||0==a.data.length)alert("ไม่พบข้อมูลในระบบ");else for(t.url=a.data.url,t.getimagefile(a.data.id),n=a.data.content,s="",r=[],a.data.fda?(s=a.data.fda.replaceAll(" ",""),s=a.data.fda.replaceAll("\n\n","")):s="",r.push({id:a.data.id,name:a.data.name,detail:n,fda:s,cat_name:a.data.cat_name}),o=function(e){if(!s||isNaN(s)||0==s)r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),console.log(r[e].detail),t.gettokenize(r[e].detail,""),t.list=r,alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง");else{var n="https://tawaiforhealth.org/api/oryor/check-product",o={number_src:r[e].fda},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(o)};fetch(n,c).then((function(t){return t.json()})).then((function(n){n.message&&(n.produceng="",n.productha="",n.typepro=""),n.length>1&&(r[e].status=0,r[e].list={},r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,""),t.list=r,alert("ไม่พบเลขอย.ในเว็บไซต์ของผลิตภัณฑ์นี้"));var s=r[e].name+" "+r[e].detail;s=s.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),s=s.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),s=s.replaceAll(/(\r\n|\n|\r)/gm,""),s=s.replaceAll("_",""),s=s.replaceAll("!",""),s=s.replaceAll("*",""),s=s.replaceAll("#",""),s=s.replaceAll("&"," "),console.log(s),t.checkfdamatch(s,n.productha+" "+n.produceng);var o=r[e].name+r[e].detail,c=t.fdatype(n.typepro);c=c.replaceAll(" ","");var i=n.productha.replaceAll("ผลิตภัณฑ์","");t.type=c,""==t.type&&n.typepro&&(t.type=n.typepro,c=n.typepro),O.getfdatypes(c).then((function(){if(0==a.data.length){var t={name:c};O.createfdatype(t).then((function(){}))}})),t.checkcategorymatch(o,c),r[e].detail=r[e].detail.replaceAll("&",""),r[e].detail=r[e].detail.replaceAll("#",""),t.gettokenize(r[e].detail,c+i+n.produceng),n.lcnno?(r[e].list=n,r[e].status=1,r[e].bg="background-color:#a3e9a4",n.cncnm.includes("คงอยู่")?(t.statusfda=1,t.colorfda="background-color:#a3e9a4",r[e].icon="color: green"):(r[e].icon="color: red",r[e].bg="background-color:#f9bdbb")):(r[e].status=0,r[e].list=[],r[e].bg="background-color:#f9bdbb"),e+1==r.length&&(t.list=r)}))}},c=0;c<r.length;c++)o(c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onChangeA1:function(t){var e=this;this.list=[],this.file=t.target.files?t.target.files[0]:null;var a=[];this.file&&(this.status=!0,Object(w["a"])(t.target.files[0]).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){var s,r,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=1;case 1:if(!(s<n.length)){t.next=16;break}if(r=n[s][0],o=e.findfda(r),a.push({detail:r,fda:o}),s+1!=n.length){t.next=13;break}c=regeneratorRuntime.mark((function t(n){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a[n].fda){t.next=4;break}alert("เลขอย.ของผลิตภัณฑ์นี้ไม่ถูกต้อง"),t.next=9;break;case 4:return s="https://tawaiforhealth.org/api/oryor/check-product",r={number_src:a[n].fda},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)},t.next=9,fetch(s,o).then((function(t){return t.json()})).then((function(t){t.message?(a[n].status=0,a[n].list=[],a[n].bg="background-color:#f9bdbb"):(a[n].list=t,a[n].status=1,a[n].bg="background-color:#a3e9a4","คงอยู่"==t.cncnm?a[n].icon="color: green":(a[n].icon="color: red",a[n].bg="background-color:#f9bdbb")),n+1==a.length&&(e.list=a,e.status=!1)}));case 9:case"end":return t.stop()}}),t)})),i=0;case 8:if(!(i<a.length)){t.next=13;break}return t.delegateYield(c(i),"t0",10);case 10:i++,t.next=8;break;case 13:s++,t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),this.file=""},findcategory:function(t){for(var e=["หมวดหมู่"],a=["ยี่ห้อ","ประเทศ"],n=t,s=0;s<a.length;s++)-1!=n.indexOf(a[s])&&(n=n.substring(n.indexOf(e[0]),n.indexOf(a[s])));return n},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},fdatype:function(t){if(t)for(var e=["("],a=t,n=0;n<e.length;n++)a=a.substring(a.indexOf(0),a.indexOf(e[0]));else a="";return a},findfda:function(t){for(var e=["หมายเลขใบอนุญาต/อย."],a=["จำนวน"],n=t,s=0;s<e.length;s++)n=n.substring(n.indexOf(e[s]),n.indexOf(a[0]));return n=n.replaceAll("หมายเลขใบอนุญาต/อย.",""),n=n.replaceAll("-",""),n=n.replaceAll("–",""),n},loaddata:function(t){var e="https://tawaiforhealth.org/api/oryor/check-product",a={number_src:t},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json()})).then((function(t){return t}))},checkfda:function(t){return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("/detail/"+t,"_blank");case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.searchbyfda())}},_a=va,ya=(a("12c6"),Object(m["a"])(_a,ga,ba,!1,null,null,null)),ka=ya.exports,wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("ข้อความ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.text,expression:"data.text"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.data.text},on:{input:function(e){e.target.composing||t.$set(t.data,"text",e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ตัดคำ ")])]),a("div",[t.token.length>0?a("div",{staticClass:"card"},[a("div",{staticClass:"card-boby mt-3 mb-3"},[t._v(t._s(t.token))])]):t._e()])])},Ca=[],xa={name:"App",components:{},data:function(){return{data:{},token:[]}},methods:{search:function(){var t=this;u.a.get(S.getpythonlink()+"/token?text="+this.data.text).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.token=a.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){}},Aa=xa,Oa=(a("5585"),Object(m["a"])(Aa,wa,Ca,!1,null,null,null)),Fa=Oa.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("URL")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.url,expression:"data.url"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.data.url},on:{input:function(e){e.target.composing||t.$set(t.data,"url",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Content")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.content,expression:"data.content"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"7"},domProps:{value:t.data.content},on:{input:function(e){e.target.composing||t.$set(t.data,"content",e.target.value)}}})]),a("button",{staticClass:"mb-3 btn btn-success",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v(" ค้นหา ")])]),t.status?a("table",{staticClass:"table table-bordered mt-3 mb-5"},[a("tbody",[t._m(0),a("tr",[a("td",{staticStyle:{width:"40%"},style:t.colorkey},[a("span",{domProps:{innerHTML:t._s(t.list.sentence_keyword)}})]),0!=t.list.keyword?a("td",{style:t.colorkey},t._l(t.list.keyword,(function(e,n){return a("tr",{key:n},[a("td",[a("span",{domProps:{innerHTML:t._s(e.sentent)}}),a("br"),t._v(" "+t._s(e.percentage.toFixed(2))+"% ")])])})),0):a("td",{style:t.colorkey},[a("tr",[t._v(" ไม่พบข้อความโฆษณา ")])])])])]):t._e()])])},Da=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("รายละเอียดสินค้า")]),a("th",{staticStyle:{"background-color":"#ffb454"}},[t._v("ข้อความโฆษณา")])])}],ja=(a("1276"),a("d81d"),function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getadvertises",value:function(t){return d.get("/advertise?status="+t)}},{key:"getkeyword",value:function(){return d.get("/advertise/getkeyword")}},{key:"getadvertise",value:function(t){return d.get("/advertise/"+t)}},{key:"createadvertise",value:function(t){return d.post("/advertise",t)}},{key:"updateadvertise",value:function(t,e){return d.put("/advertise/".concat(t),e)}},{key:"deleteadvertise",value:function(t){return d.delete("/advertise/".concat(t))}}]),t}()),Ea=new ja,Pa={name:"App",components:{},data:function(){return{list:[],url:"",file:"",status:!1,urlPath:"",imagelists:"",tokenize:"",matchname:"",matchcategory:"",type:"",matchnamesum:"",statusname:0,statuscat:0,statusfda:0,colorname:"background-color:#f9bdbb",colorfda:"background-color:#f9bdbb",colorcat:"background-color:#f9bdbb",id:"",keyword:[],colorkey:"background-color:#f9bdbb",desc:"",arrList:[],alldata:0,back:0,next:0,data:{},product_token:0}},methods:{savetorule:function(t,e){for(var a=this,n=[],s=function(s){V.getdicts("",t[s]).then(function(){var r=Object(k["a"])(regeneratorRuntime.mark((function r(o){var c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o.data.length>0&&n.push(o.data[0].id),s+1!=t.length){r.next=5;break}return c="SELECT r.* FROM map_rule_based m join rule_based r on m.rule_based_id = r.id WHERE m.status = 1 and dict_id = '[".concat(n,"]'"),r.next=5,ce.getbydict(c).then((function(t){if(0==t.data.length){var s="";s+="{";for(var r=0;r<n.length;r++)s+='"dict'+n[r]+'":1,';s+='"answer":'+e+",",s=s.slice(0,-1),s+="}";var o=JSON.parse(s);ce.createrule_based(o).then((function(t){var e={rule_based_id:t.data.id,dict_id:n,status:1};ge.createmap_rule_based(e).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}))}else{var c={answer:e};ce.updaterule_based(t.data[0].id,c).then((function(){alert("บันทึกสำเร็จ"),a.getdata()}))}}));case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},r=0;r<t.length;r++)s(r)},savetorule_based:function(t,e){var a={keyword_id:1,advertise_id:null,status:1,answer:e,user:1};ge.createmap_rule_based(a).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,s,r,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=a.data.id,s=JSON.parse(t.dict_id),r=JSON.parse(t.dict_name),o=function(t){i={map_rule_based_id:n,dict_id:s[t],dict_name:r[t],no:t+1},ce.createrule_based(i).then((function(){t+1==s.length&&alert("บันทึกสำเร็จ")}))},c=0;c<s.length;c++)o(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},checkkeyword:function(t){var e=this,a=this.finddescription(t);u.a.get(S.getpythonlink()+"/worktokendesc?text="+a).then((function(t){e.desc=t.data}));var n={content:a};u.a.post(S.getpythonlink()+"/checkkeyword?text=",n).then((function(t){t.data.length>0&&(e.keyword=t.data)}))},finddescription:function(t){for(var e=["รายละเอียด"],a=t,n=0;n<e.length;n++)-1!=a.indexOf(e[n])&&(a=a.substring(a.indexOf(e[n])));return a},loaddict:function(){u.a.get(S.getpythonlink()+"/loaddict").then(Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))},search:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loaddict();case 2:t.status=!1,null==t.data.url||""==t.data.url?alert("กรุณากรอก URL"):null==t.data.content||""==t.data.content?alert("กรุณากรอกข้อความโฆษณา"):(a="",a=t.data.content.replaceAll(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),a=a.replaceAll(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,""),a=a.replaceAll(/(\r\n|\n|\r)/gm,""),a=a.replaceAll("_",""),a=a.replaceAll("!",""),a=a.replaceAll("*",""),a=a.replaceAll("&",""),a=a.replaceAll("#",""),a=a.replaceAll("•",""),a=a.replaceAll("+",""),a=a.replaceAll("_/l_",""),n=t.data.url.split("-i."),s={url:n[0]},ge.getproduct_token(s).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=r.data.length){e.next=6;break}return o={content:a},e.next=4,u.a.post(S.getpythonlink()+"/wordtokendesc",o).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(a.data),r={url:n[0],sentence:t.data.content,sentence_keyword:a.data.sentent,keyword_id:a.data.keywordId,status:1},console.log(r),e.next=5,ge.createproduct_token(r).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.data.id,e.next=3,u.a.post(S.getpythonlink()+"/checkkeyword",o).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a){var r,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(console.log(a.data),r=function(e){c=a.data[e].sentent.replaceAll('"',""),c=c.replaceAll("<spanstyle","<span style"),i={product_token_id:n,keyword_dict_id:a.data[e].keyword_dict_id,dict_id:a.data[e].dict_id,dict_name:a.data[e].dict_name,sentent:c,sen:a.data[e].sen},Ea.createadvertise(i).then((function(){e+1==a.data.length&&ge.getproduct_token(s).then((function(e){t.product_token=e.data.id,t.tokendata(e.data)}))}))},o=0;o<a.data.length;o++)r(o);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=9;break;case 6:t.tokendata(r.data),t.product_token=r.data.id,t.status=!0;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))()},tokendata:function(t){var e=this;console.log(t);for(var a=function(a){console.log(t.keyword[a].map),t.keyword[a].map&&(s={url:JSON.stringify(t.keyword[a].map)},console.log(s),ge.getmapproduct(s).then((function(n){t.keyword[a].rulebase=n.data,a+1==t.keyword.length&&e.compare(t)})))},n=0;n<t.keyword.length;n++){var s;a(n)}},compare:function(t){for(var e=this,a=function(a){if(s=JSON.parse(t.keyword[a].dict_id),t.keyword[a].rulebase){var n=t.keyword[a].rulebase.filter((function(e,n){return t.keyword[a].rulebase.indexOf(e)===n}));r=s.filter((function(t){return-1!==n.indexOf(t)})),o=100*parseInt(r.length)/parseInt(s.length),t.keyword[a].percentage=o}else t.keyword[a].percentage=0;a+1==t.keyword.length&&(e.list=t,e.status=!0)},n=0;n<t.keyword.length;n++){var s,r,o;a(n)}}},mounted:function(){}},$a=Pa,Ta=(a("0639"),Object(m["a"])($a,Sa,Da,!1,null,null,null)),Ra=Ta.exports;n["a"].use(v["a"]);var La=new v["a"]({mode:"history",routes:[{path:"/import",alias:"/import",name:"import",component:P},{path:"/check",alias:"/check",name:"check",component:ka},{path:"/scraping",alias:"/scraping",name:"scraping",component:z},{path:"/category",alias:"/category",name:"category",component:W},{path:"/Corpus",alias:"/Corpus",name:"Corpus",component:at},{path:"/scrapingdelete",alias:"/scrapingdelete",name:"scrapingdelete",component:ut},{path:"/searchbyfda",alias:"/searchbyfda",name:"searchbyfda",component:kt},{path:"/Dashboard",alias:"/Dashboard",name:"Dashboard",component:zt},{path:"/detailtype/:id",alias:"/detailtype",name:"detailtype",component:Yt},{path:"/detailtypetwo/:id",alias:"/detailtypetwo",name:"detailtypetwo",component:ee},{path:"/keywords",alias:"/keywords",name:"keywords",component:fe},{path:"/Advertising",alias:"/Advertising",name:"Advertising",component:ye},{path:"/rulebased",alias:"/rulebased",name:"rulebased",component:Fe},{path:"/Advertise",alias:"/Advertise",name:"Advertise",component:$e},{path:"/keywordrulebased",alias:"/keywordrulebased",name:"keywordrulebased",component:Ue},{path:"/",alias:"/Login",name:"Login",component:Ge},{path:"/Users",alias:"/Users",name:"Users",component:Xe},{path:"/menu",alias:"/menu",name:"menu",component:ra},{path:"/menumanage",alias:"/menumanage",name:"menumanage",component:ma},{path:"/token",alias:"/token",name:"token",component:Fa},{path:"/producttoken",alias:"/producttoken",name:"producttoken",component:Ra}]});La.beforeEach((function(t,e,a){var n=["/login","/register","/keywords"],s=!n.includes(t.path),r=localStorage.getItem("fda");s&&!r?a("/login"):a()}));var Ia=La,Na=a("1321"),Ma=a.n(Na),Ua=a("3dc63"),za=a("2f62"),Ba=a("500b"),Ha=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getUUID",value:function(){var t=(new Ba["DeviceUUID"]).get();return t}},{key:"login",value:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d.post("user/signin",e).then((function(t){return console.log(t.data),t.data.accessToken&&localStorage.setItem("fda",JSON.stringify(t.data)),t.data}),(function(t){console.log(t),a.$router.push("/login"),alert("ชื่อหรือรหัสผ่านไม่ถูกต้อง")})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"logout",value:function(){localStorage.removeItem("fda")}},{key:"role",value:function(){return d.get("role")}},{key:"getpage",value:function(t){return d.get("menu/menubyuserid/"+t)}},{key:"getname",value:function(t){return d.get("user/"+t)}}]),t}(),Ja=new Ha,qa=JSON.parse(localStorage.getItem("fda")),Ga=qa?{status:{loggedIn:!0},user:qa}:{status:{loggedIn:!1},user:null},Wa={namespaced:!0,state:Ga,actions:{login:function(t,e){var a=t.commit;return Ja.login(e).then((function(t){return console.log(t),a("loginSuccess",t),Promise.resolve(t)}),(function(t){return a("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;Ja.logout(),e("logout")}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null}}};n["a"].use(za["a"]);var Ya=new za["a"].Store({modules:{auth:Wa}}),Ka=a("eb2e"),Qa=a.n(Ka);n["a"].use(Ma.a),n["a"].component("apexchart",Ma.a),n["a"].config.productionTip=!1,n["a"].use(Ua["a"]),n["a"].component("jw-pagination",Qa.a),new n["a"]({router:Ia,store:Ya,render:function(t){return t(b)}}).$mount("#app")},"65a7":function(t,e,a){"use strict";a("7ee3")},"6c1b":function(t,e,a){},"72dd":function(t,e,a){},7698:function(t,e,a){},"7ee3":function(t,e,a){},8062:function(t,e,a){},8094:function(t,e,a){},"81db":function(t,e,a){"use strict";a("8094")},"85ec":function(t,e,a){},"89f9":function(t,e,a){"use strict";a("0edc")},"8fa6":function(t,e,a){},9259:function(t,e,a){},"944c":function(t,e,a){},"9d28":function(t,e,a){},a31d:function(t,e,a){"use strict";a("40fc")},a3f0:function(t,e,a){"use strict";a("d349")},b1a6:function(t,e,a){"use strict";a("72dd")},b2b5:function(t,e,a){"use strict";a("6c1b")},ce38:function(t,e,a){"use strict";a("f9f0")},d349:function(t,e,a){},dbdc:function(t,e,a){},de09:function(t,e,a){"use strict";a("9259")},f4eb:function(t,e,a){"use strict";a("fc97")},f9f0:function(t,e,a){},fc97:function(t,e,a){}});
//# sourceMappingURL=app.d274e7dd.js.map